function Tn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function $o(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),t}var gi={},Kr={},Ks;function cc(){if(Ks)return Kr;Ks=1,Kr.byteLength=c,Kr.toByteArray=_,Kr.fromByteArray=D;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(M){var F=M.length;if(F%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=M.indexOf("=");U===-1&&(U=F);var C=U===F?0:4-U%4;return[U,C]}function c(M){var F=o(M),U=F[0],C=F[1];return(U+C)*3/4-C}function g(M,F,U){return(F+U)*3/4-U}function _(M){var F,U=o(M),C=U[0],H=U[1],z=new t(g(M,C,H)),j=0,te=H>0?C-4:C,V;for(V=0;V<te;V+=4)F=e[M.charCodeAt(V)]<<18|e[M.charCodeAt(V+1)]<<12|e[M.charCodeAt(V+2)]<<6|e[M.charCodeAt(V+3)],z[j++]=F>>16&255,z[j++]=F>>8&255,z[j++]=F&255;return H===2&&(F=e[M.charCodeAt(V)]<<2|e[M.charCodeAt(V+1)]>>4,z[j++]=F&255),H===1&&(F=e[M.charCodeAt(V)]<<10|e[M.charCodeAt(V+1)]<<4|e[M.charCodeAt(V+2)]>>2,z[j++]=F>>8&255,z[j++]=F&255),z}function I(M){return r[M>>18&63]+r[M>>12&63]+r[M>>6&63]+r[M&63]}function T(M,F,U){for(var C,H=[],z=F;z<U;z+=3)C=(M[z]<<16&16711680)+(M[z+1]<<8&65280)+(M[z+2]&255),H.push(I(C));return H.join("")}function D(M){for(var F,U=M.length,C=U%3,H=[],z=16383,j=0,te=U-C;j<te;j+=z)H.push(T(M,j,j+z>te?te:j+z));return C===1?(F=M[U-1],H.push(r[F>>2]+r[F<<4&63]+"==")):C===2&&(F=(M[U-2]<<8)+M[U-1],H.push(r[F>>10]+r[F>>4&63]+r[F<<2&63]+"=")),H.join("")}return Kr}var un={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ws;function uc(){return Ws||(Ws=1,un.read=function(r,e,t,n,s){var i,o,c=s*8-n-1,g=(1<<c)-1,_=g>>1,I=-7,T=t?s-1:0,D=t?-1:1,M=r[e+T];for(T+=D,i=M&(1<<-I)-1,M>>=-I,I+=c;I>0;i=i*256+r[e+T],T+=D,I-=8);for(o=i&(1<<-I)-1,i>>=-I,I+=n;I>0;o=o*256+r[e+T],T+=D,I-=8);if(i===0)i=1-_;else{if(i===g)return o?NaN:(M?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-_}return(M?-1:1)*o*Math.pow(2,i-n)},un.write=function(r,e,t,n,s,i){var o,c,g,_=i*8-s-1,I=(1<<_)-1,T=I>>1,D=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=n?0:i-1,F=n?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=I):(o=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-o))<1&&(o--,g*=2),o+T>=1?e+=D/g:e+=D*Math.pow(2,1-T),e*g>=2&&(o++,g/=2),o+T>=I?(c=0,o=I):o+T>=1?(c=(e*g-1)*Math.pow(2,s),o=o+T):(c=e*Math.pow(2,T-1)*Math.pow(2,s),o=0));s>=8;r[t+M]=c&255,M+=F,c/=256,s-=8);for(o=o<<s|c,_+=s;_>0;r[t+M]=o&255,M+=F,o/=256,_-=8);r[t+M-F]|=U*128}),un}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Hs;function Ln(){return Hs||(Hs=1,(function(r){var e=cc(),t=uc(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=z,r.INSPECT_MAX_BYTES=50;var s=2147483647;r.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var P=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(P,p),P.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(P){if(P>s)throw new RangeError('The value "'+P+'" is invalid for option "size"');var p=new Uint8Array(P);return Object.setPrototypeOf(p,c.prototype),p}function c(P,p,y){if(typeof P=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(P)}return g(P,p,y)}c.poolSize=8192;function g(P,p,y){if(typeof P=="string")return D(P,p);if(ArrayBuffer.isView(P))return F(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(Me(P,ArrayBuffer)||P&&Me(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Me(P,SharedArrayBuffer)||P&&Me(P.buffer,SharedArrayBuffer)))return U(P,p,y);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var O=P.valueOf&&P.valueOf();if(O!=null&&O!==P)return c.from(O,p,y);var K=C(P);if(K)return K;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return c.from(P[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}c.from=function(P,p,y){return g(P,p,y)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function _(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function I(P,p,y){return _(P),P<=0?o(P):p!==void 0?typeof y=="string"?o(P).fill(p,y):o(P).fill(p):o(P)}c.alloc=function(P,p,y){return I(P,p,y)};function T(P){return _(P),o(P<0?0:H(P)|0)}c.allocUnsafe=function(P){return T(P)},c.allocUnsafeSlow=function(P){return T(P)};function D(P,p){if((typeof p!="string"||p==="")&&(p="utf8"),!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var y=j(P,p)|0,O=o(y),K=O.write(P,p);return K!==y&&(O=O.slice(0,K)),O}function M(P){for(var p=P.length<0?0:H(P.length)|0,y=o(p),O=0;O<p;O+=1)y[O]=P[O]&255;return y}function F(P){if(Me(P,Uint8Array)){var p=new Uint8Array(P);return U(p.buffer,p.byteOffset,p.byteLength)}return M(P)}function U(P,p,y){if(p<0||P.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');var O;return p===void 0&&y===void 0?O=new Uint8Array(P):y===void 0?O=new Uint8Array(P,p):O=new Uint8Array(P,p,y),Object.setPrototypeOf(O,c.prototype),O}function C(P){if(c.isBuffer(P)){var p=H(P.length)|0,y=o(p);return y.length===0||P.copy(y,0,0,p),y}if(P.length!==void 0)return typeof P.length!="number"||me(P.length)?o(0):M(P);if(P.type==="Buffer"&&Array.isArray(P.data))return M(P.data)}function H(P){if(P>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return P|0}function z(P){return+P!=P&&(P=0),c.alloc(+P)}c.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==c.prototype},c.compare=function(p,y){if(Me(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),Me(y,Uint8Array)&&(y=c.from(y,y.offset,y.byteLength)),!c.isBuffer(p)||!c.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===y)return 0;for(var O=p.length,K=y.length,Z=0,X=Math.min(O,K);Z<X;++Z)if(p[Z]!==y[Z]){O=p[Z],K=y[Z];break}return O<K?-1:K<O?1:0},c.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(p,y){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return c.alloc(0);var O;if(y===void 0)for(y=0,O=0;O<p.length;++O)y+=p[O].length;var K=c.allocUnsafe(y),Z=0;for(O=0;O<p.length;++O){var X=p[O];if(Me(X,Uint8Array))Z+X.length>K.length?c.from(X).copy(K,Z):Uint8Array.prototype.set.call(K,X,Z);else if(c.isBuffer(X))X.copy(K,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=X.length}return K};function j(P,p){if(c.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||Me(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);var y=P.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&y===0)return 0;for(var K=!1;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return oe(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return pe(P).length;default:if(K)return O?-1:oe(P).length;p=(""+p).toLowerCase(),K=!0}}c.byteLength=j;function te(P,p,y){var O=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(P||(P="utf8");;)switch(P){case"hex":return B(this,p,y);case"utf8":case"utf-8":return a(this,p,y);case"ascii":return w(this,p,y);case"latin1":case"binary":return b(this,p,y);case"base64":return d(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,p,y);default:if(O)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),O=!0}}c.prototype._isBuffer=!0;function V(P,p,y){var O=P[p];P[p]=P[y],P[y]=O}c.prototype.swap16=function(){var p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<p;y+=2)V(this,y,y+1);return this},c.prototype.swap32=function(){var p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<p;y+=4)V(this,y,y+3),V(this,y+1,y+2);return this},c.prototype.swap64=function(){var p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<p;y+=8)V(this,y,y+7),V(this,y+1,y+6),V(this,y+2,y+5),V(this,y+3,y+4);return this},c.prototype.toString=function(){var p=this.length;return p===0?"":arguments.length===0?a(this,0,p):te.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(p){if(!c.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:c.compare(this,p)===0},c.prototype.inspect=function(){var p="",y=r.INSPECT_MAX_BYTES;return p=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(p+=" ... "),"<Buffer "+p+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(p,y,O,K,Z){if(Me(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(y===void 0&&(y=0),O===void 0&&(O=p?p.length:0),K===void 0&&(K=0),Z===void 0&&(Z=this.length),y<0||O>p.length||K<0||Z>this.length)throw new RangeError("out of range index");if(K>=Z&&y>=O)return 0;if(K>=Z)return-1;if(y>=O)return 1;if(y>>>=0,O>>>=0,K>>>=0,Z>>>=0,this===p)return 0;for(var X=Z-K,fe=O-y,he=Math.min(X,fe),Re=this.slice(K,Z),ve=p.slice(y,O),ge=0;ge<he;++ge)if(Re[ge]!==ve[ge]){X=Re[ge],fe=ve[ge];break}return X<fe?-1:fe<X?1:0};function Y(P,p,y,O,K){if(P.length===0)return-1;if(typeof y=="string"?(O=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,me(y)&&(y=K?0:P.length-1),y<0&&(y=P.length+y),y>=P.length){if(K)return-1;y=P.length-1}else if(y<0)if(K)y=0;else return-1;if(typeof p=="string"&&(p=c.from(p,O)),c.isBuffer(p))return p.length===0?-1:ne(P,p,y,O,K);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?K?Uint8Array.prototype.indexOf.call(P,p,y):Uint8Array.prototype.lastIndexOf.call(P,p,y):ne(P,[p],y,O,K);throw new TypeError("val must be string, number or Buffer")}function ne(P,p,y,O,K){var Z=1,X=P.length,fe=p.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(P.length<2||p.length<2)return-1;Z=2,X/=2,fe/=2,y/=2}function he(Le,Ce){return Z===1?Le[Ce]:Le.readUInt16BE(Ce*Z)}var Re;if(K){var ve=-1;for(Re=y;Re<X;Re++)if(he(P,Re)===he(p,ve===-1?0:Re-ve)){if(ve===-1&&(ve=Re),Re-ve+1===fe)return ve*Z}else ve!==-1&&(Re-=Re-ve),ve=-1}else for(y+fe>X&&(y=X-fe),Re=y;Re>=0;Re--){for(var ge=!0,cr=0;cr<fe;cr++)if(he(P,Re+cr)!==he(p,cr)){ge=!1;break}if(ge)return Re}return-1}c.prototype.includes=function(p,y,O){return this.indexOf(p,y,O)!==-1},c.prototype.indexOf=function(p,y,O){return Y(this,p,y,O,!0)},c.prototype.lastIndexOf=function(p,y,O){return Y(this,p,y,O,!1)};function x(P,p,y,O){y=Number(y)||0;var K=P.length-y;O?(O=Number(O),O>K&&(O=K)):O=K;var Z=p.length;O>Z/2&&(O=Z/2);for(var X=0;X<O;++X){var fe=parseInt(p.substr(X*2,2),16);if(me(fe))return X;P[y+X]=fe}return X}function m(P,p,y,O){return Ee(oe(p,P.length-y),P,y,O)}function v(P,p,y,O){return Ee(ue(p),P,y,O)}function S(P,p,y,O){return Ee(pe(p),P,y,O)}function E(P,p,y,O){return Ee(Fe(p,P.length-y),P,y,O)}c.prototype.write=function(p,y,O,K){if(y===void 0)K="utf8",O=this.length,y=0;else if(O===void 0&&typeof y=="string")K=y,O=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(O)?(O=O>>>0,K===void 0&&(K="utf8")):(K=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Z=this.length-y;if((O===void 0||O>Z)&&(O=Z),p.length>0&&(O<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");K||(K="utf8");for(var X=!1;;)switch(K){case"hex":return x(this,p,y,O);case"utf8":case"utf-8":return m(this,p,y,O);case"ascii":case"latin1":case"binary":return v(this,p,y,O);case"base64":return S(this,p,y,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,p,y,O);default:if(X)throw new TypeError("Unknown encoding: "+K);K=(""+K).toLowerCase(),X=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(P,p,y){return p===0&&y===P.length?e.fromByteArray(P):e.fromByteArray(P.slice(p,y))}function a(P,p,y){y=Math.min(P.length,y);for(var O=[],K=p;K<y;){var Z=P[K],X=null,fe=Z>239?4:Z>223?3:Z>191?2:1;if(K+fe<=y){var he,Re,ve,ge;switch(fe){case 1:Z<128&&(X=Z);break;case 2:he=P[K+1],(he&192)===128&&(ge=(Z&31)<<6|he&63,ge>127&&(X=ge));break;case 3:he=P[K+1],Re=P[K+2],(he&192)===128&&(Re&192)===128&&(ge=(Z&15)<<12|(he&63)<<6|Re&63,ge>2047&&(ge<55296||ge>57343)&&(X=ge));break;case 4:he=P[K+1],Re=P[K+2],ve=P[K+3],(he&192)===128&&(Re&192)===128&&(ve&192)===128&&(ge=(Z&15)<<18|(he&63)<<12|(Re&63)<<6|ve&63,ge>65535&&ge<1114112&&(X=ge))}}X===null?(X=65533,fe=1):X>65535&&(X-=65536,O.push(X>>>10&1023|55296),X=56320|X&1023),O.push(X),K+=fe}return h(O)}var f=4096;function h(P){var p=P.length;if(p<=f)return String.fromCharCode.apply(String,P);for(var y="",O=0;O<p;)y+=String.fromCharCode.apply(String,P.slice(O,O+=f));return y}function w(P,p,y){var O="";y=Math.min(P.length,y);for(var K=p;K<y;++K)O+=String.fromCharCode(P[K]&127);return O}function b(P,p,y){var O="";y=Math.min(P.length,y);for(var K=p;K<y;++K)O+=String.fromCharCode(P[K]);return O}function B(P,p,y){var O=P.length;(!p||p<0)&&(p=0),(!y||y<0||y>O)&&(y=O);for(var K="",Z=p;Z<y;++Z)K+=de[P[Z]];return K}function N(P,p,y){for(var O=P.slice(p,y),K="",Z=0;Z<O.length-1;Z+=2)K+=String.fromCharCode(O[Z]+O[Z+1]*256);return K}c.prototype.slice=function(p,y){var O=this.length;p=~~p,y=y===void 0?O:~~y,p<0?(p+=O,p<0&&(p=0)):p>O&&(p=O),y<0?(y+=O,y<0&&(y=0)):y>O&&(y=O),y<p&&(y=p);var K=this.subarray(p,y);return Object.setPrototypeOf(K,c.prototype),K};function k(P,p,y){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+p>y)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(p,y,O){p=p>>>0,y=y>>>0,O||k(p,y,this.length);for(var K=this[p],Z=1,X=0;++X<y&&(Z*=256);)K+=this[p+X]*Z;return K},c.prototype.readUintBE=c.prototype.readUIntBE=function(p,y,O){p=p>>>0,y=y>>>0,O||k(p,y,this.length);for(var K=this[p+--y],Z=1;y>0&&(Z*=256);)K+=this[p+--y]*Z;return K},c.prototype.readUint8=c.prototype.readUInt8=function(p,y){return p=p>>>0,y||k(p,1,this.length),this[p]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(p,y){return p=p>>>0,y||k(p,2,this.length),this[p]|this[p+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(p,y){return p=p>>>0,y||k(p,2,this.length),this[p]<<8|this[p+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(p,y){return p=p>>>0,y||k(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(p,y){return p=p>>>0,y||k(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},c.prototype.readIntLE=function(p,y,O){p=p>>>0,y=y>>>0,O||k(p,y,this.length);for(var K=this[p],Z=1,X=0;++X<y&&(Z*=256);)K+=this[p+X]*Z;return Z*=128,K>=Z&&(K-=Math.pow(2,8*y)),K},c.prototype.readIntBE=function(p,y,O){p=p>>>0,y=y>>>0,O||k(p,y,this.length);for(var K=y,Z=1,X=this[p+--K];K>0&&(Z*=256);)X+=this[p+--K]*Z;return Z*=128,X>=Z&&(X-=Math.pow(2,8*y)),X},c.prototype.readInt8=function(p,y){return p=p>>>0,y||k(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},c.prototype.readInt16LE=function(p,y){p=p>>>0,y||k(p,2,this.length);var O=this[p]|this[p+1]<<8;return O&32768?O|4294901760:O},c.prototype.readInt16BE=function(p,y){p=p>>>0,y||k(p,2,this.length);var O=this[p+1]|this[p]<<8;return O&32768?O|4294901760:O},c.prototype.readInt32LE=function(p,y){return p=p>>>0,y||k(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},c.prototype.readInt32BE=function(p,y){return p=p>>>0,y||k(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},c.prototype.readFloatLE=function(p,y){return p=p>>>0,y||k(p,4,this.length),t.read(this,p,!0,23,4)},c.prototype.readFloatBE=function(p,y){return p=p>>>0,y||k(p,4,this.length),t.read(this,p,!1,23,4)},c.prototype.readDoubleLE=function(p,y){return p=p>>>0,y||k(p,8,this.length),t.read(this,p,!0,52,8)},c.prototype.readDoubleBE=function(p,y){return p=p>>>0,y||k(p,8,this.length),t.read(this,p,!1,52,8)};function u(P,p,y,O,K,Z){if(!c.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>K||p<Z)throw new RangeError('"value" argument is out of bounds');if(y+O>P.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(p,y,O,K){if(p=+p,y=y>>>0,O=O>>>0,!K){var Z=Math.pow(2,8*O)-1;u(this,p,y,O,Z,0)}var X=1,fe=0;for(this[y]=p&255;++fe<O&&(X*=256);)this[y+fe]=p/X&255;return y+O},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(p,y,O,K){if(p=+p,y=y>>>0,O=O>>>0,!K){var Z=Math.pow(2,8*O)-1;u(this,p,y,O,Z,0)}var X=O-1,fe=1;for(this[y+X]=p&255;--X>=0&&(fe*=256);)this[y+X]=p/fe&255;return y+O},c.prototype.writeUint8=c.prototype.writeUInt8=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,1,255,0),this[y]=p&255,y+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,2,65535,0),this[y]=p&255,this[y+1]=p>>>8,y+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,2,65535,0),this[y]=p>>>8,this[y+1]=p&255,y+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,4,4294967295,0),this[y+3]=p>>>24,this[y+2]=p>>>16,this[y+1]=p>>>8,this[y]=p&255,y+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,4,4294967295,0),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4},c.prototype.writeIntLE=function(p,y,O,K){if(p=+p,y=y>>>0,!K){var Z=Math.pow(2,8*O-1);u(this,p,y,O,Z-1,-Z)}var X=0,fe=1,he=0;for(this[y]=p&255;++X<O&&(fe*=256);)p<0&&he===0&&this[y+X-1]!==0&&(he=1),this[y+X]=(p/fe>>0)-he&255;return y+O},c.prototype.writeIntBE=function(p,y,O,K){if(p=+p,y=y>>>0,!K){var Z=Math.pow(2,8*O-1);u(this,p,y,O,Z-1,-Z)}var X=O-1,fe=1,he=0;for(this[y+X]=p&255;--X>=0&&(fe*=256);)p<0&&he===0&&this[y+X+1]!==0&&(he=1),this[y+X]=(p/fe>>0)-he&255;return y+O},c.prototype.writeInt8=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,1,127,-128),p<0&&(p=255+p+1),this[y]=p&255,y+1},c.prototype.writeInt16LE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,2,32767,-32768),this[y]=p&255,this[y+1]=p>>>8,y+2},c.prototype.writeInt16BE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,2,32767,-32768),this[y]=p>>>8,this[y+1]=p&255,y+2},c.prototype.writeInt32LE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,4,2147483647,-2147483648),this[y]=p&255,this[y+1]=p>>>8,this[y+2]=p>>>16,this[y+3]=p>>>24,y+4},c.prototype.writeInt32BE=function(p,y,O){return p=+p,y=y>>>0,O||u(this,p,y,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4};function l(P,p,y,O,K,Z){if(y+O>P.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function A(P,p,y,O,K){return p=+p,y=y>>>0,K||l(P,p,y,4),t.write(P,p,y,O,23,4),y+4}c.prototype.writeFloatLE=function(p,y,O){return A(this,p,y,!0,O)},c.prototype.writeFloatBE=function(p,y,O){return A(this,p,y,!1,O)};function R(P,p,y,O,K){return p=+p,y=y>>>0,K||l(P,p,y,8),t.write(P,p,y,O,52,8),y+8}c.prototype.writeDoubleLE=function(p,y,O){return R(this,p,y,!0,O)},c.prototype.writeDoubleBE=function(p,y,O){return R(this,p,y,!1,O)},c.prototype.copy=function(p,y,O,K){if(!c.isBuffer(p))throw new TypeError("argument should be a Buffer");if(O||(O=0),!K&&K!==0&&(K=this.length),y>=p.length&&(y=p.length),y||(y=0),K>0&&K<O&&(K=O),K===O||p.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("sourceEnd out of bounds");K>this.length&&(K=this.length),p.length-y<K-O&&(K=p.length-y+O);var Z=K-O;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,O,K):Uint8Array.prototype.set.call(p,this.subarray(O,K),y),Z},c.prototype.fill=function(p,y,O,K){if(typeof p=="string"){if(typeof y=="string"?(K=y,y=0,O=this.length):typeof O=="string"&&(K=O,O=this.length),K!==void 0&&typeof K!="string")throw new TypeError("encoding must be a string");if(typeof K=="string"&&!c.isEncoding(K))throw new TypeError("Unknown encoding: "+K);if(p.length===1){var Z=p.charCodeAt(0);(K==="utf8"&&Z<128||K==="latin1")&&(p=Z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(y<0||this.length<y||this.length<O)throw new RangeError("Out of range index");if(O<=y)return this;y=y>>>0,O=O===void 0?this.length:O>>>0,p||(p=0);var X;if(typeof p=="number")for(X=y;X<O;++X)this[X]=p;else{var fe=c.isBuffer(p)?p:c.from(p,K),he=fe.length;if(he===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(X=0;X<O-y;++X)this[X+y]=fe[X%he]}return this};var q=/[^+/0-9A-Za-z-_]/g;function G(P){if(P=P.split("=")[0],P=P.trim().replace(q,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function oe(P,p){p=p||1/0;for(var y,O=P.length,K=null,Z=[],X=0;X<O;++X){if(y=P.charCodeAt(X),y>55295&&y<57344){if(!K){if(y>56319){(p-=3)>-1&&Z.push(239,191,189);continue}else if(X+1===O){(p-=3)>-1&&Z.push(239,191,189);continue}K=y;continue}if(y<56320){(p-=3)>-1&&Z.push(239,191,189),K=y;continue}y=(K-55296<<10|y-56320)+65536}else K&&(p-=3)>-1&&Z.push(239,191,189);if(K=null,y<128){if((p-=1)<0)break;Z.push(y)}else if(y<2048){if((p-=2)<0)break;Z.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;Z.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;Z.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return Z}function ue(P){for(var p=[],y=0;y<P.length;++y)p.push(P.charCodeAt(y)&255);return p}function Fe(P,p){for(var y,O,K,Z=[],X=0;X<P.length&&!((p-=2)<0);++X)y=P.charCodeAt(X),O=y>>8,K=y%256,Z.push(K),Z.push(O);return Z}function pe(P){return e.toByteArray(G(P))}function Ee(P,p,y,O){for(var K=0;K<O&&!(K+y>=p.length||K>=P.length);++K)p[K+y]=P[K];return K}function Me(P,p){return P instanceof p||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===p.name}function me(P){return P!==P}var de=(function(){for(var P="0123456789abcdef",p=new Array(256),y=0;y<16;++y)for(var O=y*16,K=0;K<16;++K)p[O+K]=P[y]+P[K];return p})()})(gi)),gi}var ae=Ln();const kr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ns(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Yr(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Lt(r,...e){if(!ns(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function fc(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yr(r.outputLen),Yr(r.blockLen)}function Mr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Vo(r,e){Lt(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function lc(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function ar(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function yi(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ut(r,e){return r<<32-e|r>>>e}const hc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function dc(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function pc(r){for(let e=0;e<r.length;e++)r[e]=dc(r[e]);return r}const $s=hc?r=>r:pc,Go=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",gc=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Pr(r){if(Lt(r),Go)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=gc[r[t]];return e}const Vt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Vs(r){if(r>=Vt._0&&r<=Vt._9)return r-Vt._0;if(r>=Vt.A&&r<=Vt.F)return r-(Vt.A-10);if(r>=Vt.a&&r<=Vt.f)return r-(Vt.a-10)}function is(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Go)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=Vs(r.charCodeAt(i)),c=Vs(r.charCodeAt(i+1));if(o===void 0||c===void 0){const g=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+i)}n[s]=o*16+c}return n}function yc(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Cn(r){return typeof r=="string"&&(r=yc(r)),Lt(r),r}function Qt(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Lt(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class ss{}function os(r){const e=n=>r().update(Cn(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function jo(r=32){if(kr&&typeof kr.getRandomValues=="function")return kr.getRandomValues(new Uint8Array(r));if(kr&&typeof kr.randomBytes=="function")return Uint8Array.from(kr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function mc(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),c=Number(t&i),g=n?4:0,_=n?0:4;r.setUint32(e+g,o,n),r.setUint32(e+_,c,n)}function wc(r,e,t){return r&e^~r&t}function bc(r,e,t){return r&e^r&t^e&t}class Zo extends ss{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=yi(this.buffer)}update(e){Mr(this),e=Cn(e),Lt(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const g=yi(e);for(;s<=i-o;o+=s)this.process(g,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Mr(this),Vo(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,ar(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let T=o;T<s;T++)t[T]=0;mc(n,s-8,BigInt(this.length*8),i),this.process(n,0);const c=yi(e),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=g/4,I=this.get();if(_>I.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<_;T++)c.setUint32(4*T,I[T],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=c,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const er=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),fn=BigInt(2**32-1),Gs=BigInt(32);function vc(r,e=!1){return e?{h:Number(r&fn),l:Number(r>>Gs&fn)}:{h:Number(r>>Gs&fn)|0,l:Number(r&fn)|0}}function Yo(r,e=!1){const t=r.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:c}=vc(r[i],e);[n[i],s[i]]=[o,c]}return[n,s]}const js=(r,e,t)=>r>>>t,Zs=(r,e,t)=>r<<32-t|e>>>t,xr=(r,e,t)=>r>>>t|e<<32-t,Sr=(r,e,t)=>r<<32-t|e>>>t,ln=(r,e,t)=>r<<64-t|e>>>t-32,hn=(r,e,t)=>r>>>t-32|e<<64-t,kc=(r,e,t)=>r<<t|e>>>32-t,xc=(r,e,t)=>e<<t|r>>>32-t,Sc=(r,e,t)=>e<<t-32|r>>>64-t,Ec=(r,e,t)=>r<<t-32|e>>>64-t;function Gt(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const Ac=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),_c=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,Ic=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Bc=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,Rc=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Mc=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,Pc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tr=new Uint32Array(64);class Tc extends Zo{constructor(e=32){super(64,e,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:c,H:g}=this;return[e,t,n,s,i,o,c,g]}set(e,t,n,s,i,o,c,g){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=g|0}process(e,t){for(let T=0;T<16;T++,t+=4)tr[T]=e.getUint32(t,!1);for(let T=16;T<64;T++){const D=tr[T-15],M=tr[T-2],F=Ut(D,7)^Ut(D,18)^D>>>3,U=Ut(M,17)^Ut(M,19)^M>>>10;tr[T]=U+tr[T-7]+F+tr[T-16]|0}let{A:n,B:s,C:i,D:o,E:c,F:g,G:_,H:I}=this;for(let T=0;T<64;T++){const D=Ut(c,6)^Ut(c,11)^Ut(c,25),M=I+D+wc(c,g,_)+Pc[T]+tr[T]|0,U=(Ut(n,2)^Ut(n,13)^Ut(n,22))+bc(n,s,i)|0;I=_,_=g,g=c,c=o+M|0,o=i,i=s,s=n,n=M+U|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,g=g+this.F|0,_=_+this.G|0,I=I+this.H|0,this.set(n,s,i,o,c,g,_,I)}roundClean(){ar(tr)}destroy(){this.set(0,0,0,0,0,0,0,0),ar(this.buffer)}}const Jo=Yo(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Lc=Jo[0],Cc=Jo[1],rr=new Uint32Array(80),nr=new Uint32Array(80);class Oc extends Zo{constructor(e=64){super(128,e,16,!1),this.Ah=wt[0]|0,this.Al=wt[1]|0,this.Bh=wt[2]|0,this.Bl=wt[3]|0,this.Ch=wt[4]|0,this.Cl=wt[5]|0,this.Dh=wt[6]|0,this.Dl=wt[7]|0,this.Eh=wt[8]|0,this.El=wt[9]|0,this.Fh=wt[10]|0,this.Fl=wt[11]|0,this.Gh=wt[12]|0,this.Gl=wt[13]|0,this.Hh=wt[14]|0,this.Hl=wt[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:c,Dl:g,Eh:_,El:I,Fh:T,Fl:D,Gh:M,Gl:F,Hh:U,Hl:C}=this;return[e,t,n,s,i,o,c,g,_,I,T,D,M,F,U,C]}set(e,t,n,s,i,o,c,g,_,I,T,D,M,F,U,C){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=g|0,this.Eh=_|0,this.El=I|0,this.Fh=T|0,this.Fl=D|0,this.Gh=M|0,this.Gl=F|0,this.Hh=U|0,this.Hl=C|0}process(e,t){for(let j=0;j<16;j++,t+=4)rr[j]=e.getUint32(t),nr[j]=e.getUint32(t+=4);for(let j=16;j<80;j++){const te=rr[j-15]|0,V=nr[j-15]|0,Y=xr(te,V,1)^xr(te,V,8)^js(te,V,7),ne=Sr(te,V,1)^Sr(te,V,8)^Zs(te,V,7),x=rr[j-2]|0,m=nr[j-2]|0,v=xr(x,m,19)^ln(x,m,61)^js(x,m,6),S=Sr(x,m,19)^hn(x,m,61)^Zs(x,m,6),E=Ic(ne,S,nr[j-7],nr[j-16]),d=Bc(E,Y,v,rr[j-7],rr[j-16]);rr[j]=d|0,nr[j]=E|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:c,Cl:g,Dh:_,Dl:I,Eh:T,El:D,Fh:M,Fl:F,Gh:U,Gl:C,Hh:H,Hl:z}=this;for(let j=0;j<80;j++){const te=xr(T,D,14)^xr(T,D,18)^ln(T,D,41),V=Sr(T,D,14)^Sr(T,D,18)^hn(T,D,41),Y=T&M^~T&U,ne=D&F^~D&C,x=Rc(z,V,ne,Cc[j],nr[j]),m=Mc(x,H,te,Y,Lc[j],rr[j]),v=x|0,S=xr(n,s,28)^ln(n,s,34)^ln(n,s,39),E=Sr(n,s,28)^hn(n,s,34)^hn(n,s,39),d=n&i^n&c^i&c,a=s&o^s&g^o&g;H=U|0,z=C|0,U=M|0,C=F|0,M=T|0,F=D|0,{h:T,l:D}=Gt(_|0,I|0,m|0,v|0),_=c|0,I=g|0,c=i|0,g=o|0,i=n|0,o=s|0;const f=Ac(v,E,a);n=_c(f,m,S,d),s=f|0}({h:n,l:s}=Gt(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Gt(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:g}=Gt(this.Ch|0,this.Cl|0,c|0,g|0),{h:_,l:I}=Gt(this.Dh|0,this.Dl|0,_|0,I|0),{h:T,l:D}=Gt(this.Eh|0,this.El|0,T|0,D|0),{h:M,l:F}=Gt(this.Fh|0,this.Fl|0,M|0,F|0),{h:U,l:C}=Gt(this.Gh|0,this.Gl|0,U|0,C|0),{h:H,l:z}=Gt(this.Hh|0,this.Hl|0,H|0,z|0),this.set(n,s,i,o,c,g,_,I,T,D,M,F,U,C,H,z)}roundClean(){ar(rr,nr)}destroy(){ar(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Xo=os(()=>new Tc),Nc=os(()=>new Oc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const as=BigInt(0),Vi=BigInt(1);function gr(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function dn(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Qo(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?as:BigInt("0x"+r)}function On(r){return Qo(Pr(r))}function Jr(r){return Lt(r),Qo(Pr(Uint8Array.from(r).reverse()))}function cs(r,e){return is(r.toString(16).padStart(e*2,"0"))}function Nn(r,e){return cs(r,e).reverse()}function qe(r,e,t){let n;if(typeof e=="string")try{n=is(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(ns(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}const mi=r=>typeof r=="bigint"&&as<=r;function Uc(r,e,t){return mi(r)&&mi(e)&&mi(t)&&e<=r&&r<t}function Ar(r,e,t,n){if(!Uc(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function zc(r){let e;for(e=0;r>as;r>>=Vi,e+=1);return e}const Un=r=>(Vi<<BigInt(r))-Vi;function Fc(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=M=>new Uint8Array(M),s=M=>Uint8Array.of(M);let i=n(r),o=n(r),c=0;const g=()=>{i.fill(1),o.fill(0),c=0},_=(...M)=>t(o,i,...M),I=(M=n(0))=>{o=_(s(0),M),i=_(),M.length!==0&&(o=_(s(1),M),i=_())},T=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let M=0;const F=[];for(;M<e;){i=_();const U=i.slice();F.push(U),M+=i.length}return Qt(...F)};return(M,F)=>{g(),I(M);let U;for(;!(U=F(T()));)I();return g(),U}}function rn(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const c=r[s];if(o&&c===void 0)return;const g=typeof c;if(g!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${g}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(t).forEach(([s,i])=>n(s,i,!0))}function Sn(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bt=BigInt(0),mt=BigInt(1),hr=BigInt(2),Dc=BigInt(3),ea=BigInt(4),ta=BigInt(5),ra=BigInt(8);function Ke(r,e){const t=r%e;return t>=Bt?t:e+t}function ze(r,e,t){let n=r;for(;e-- >Bt;)n*=n,n%=t;return n}function Ys(r,e){if(r===Bt)throw new Error("invert: expected non-zero number");if(e<=Bt)throw new Error("invert: expected positive modulus, got "+e);let t=Ke(r,e),n=e,s=Bt,i=mt;for(;t!==Bt;){const c=n/t,g=n%t,_=s-i*c;n=t,t=g,s=i,i=_}if(n!==mt)throw new Error("invert: does not exist");return Ke(s,e)}function na(r,e){const t=(r.ORDER+mt)/ea,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function qc(r,e){const t=(r.ORDER-ta)/ra,n=r.mul(e,hr),s=r.pow(n,t),i=r.mul(e,s),o=r.mul(r.mul(i,hr),s),c=r.mul(i,r.sub(o,r.ONE));if(!r.eql(r.sqr(c),e))throw new Error("Cannot find square root");return c}function Kc(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-mt,t=0;for(;e%hr===Bt;)e/=hr,t++;let n=hr;const s=Nr(r);for(;Js(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return na;let i=s.pow(n,e);const o=(e+mt)/hr;return function(g,_){if(g.is0(_))return _;if(Js(g,_)!==1)throw new Error("Cannot find square root");let I=t,T=g.mul(g.ONE,i),D=g.pow(_,e),M=g.pow(_,o);for(;!g.eql(D,g.ONE);){if(g.is0(D))return g.ZERO;let F=1,U=g.sqr(D);for(;!g.eql(U,g.ONE);)if(F++,U=g.sqr(U),F===I)throw new Error("Cannot find square root");const C=mt<<BigInt(I-F-1),H=g.pow(T,C);I=F,T=g.sqr(H),D=g.mul(D,T),M=g.mul(M,H)}return M}}function Wc(r){return r%ea===Dc?na:r%ra===ta?qc:Kc(r)}const Hc=(r,e)=>(Ke(r,e)&mt)===mt,$c=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vc(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=$c.reduce((n,s)=>(n[s]="function",n),e);return rn(r,t),r}function Gc(r,e,t){if(t<Bt)throw new Error("invalid exponent, negatives unsupported");if(t===Bt)return r.ONE;if(t===mt)return e;let n=r.ONE,s=e;for(;t>Bt;)t&mt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=mt;return n}function ia(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),s=e.reduce((o,c,g)=>r.is0(c)?o:(n[g]=o,r.mul(o,c)),r.ONE),i=r.inv(s);return e.reduceRight((o,c,g)=>r.is0(c)?o:(n[g]=r.mul(o,n[g]),r.mul(o,c)),i),n}function Js(r,e){const t=(r.ORDER-mt)/hr,n=r.pow(e,t),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function jc(r,e){e!==void 0&&Yr(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Nr(r,e,t=!1,n={}){if(r<=Bt)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const I=e;I.BITS&&(s=I.BITS),I.sqrt&&(i=I.sqrt),typeof I.isLE=="boolean"&&(t=I.isLE)}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:o,nByteLength:c}=jc(r,s);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let g;const _=Object.freeze({ORDER:r,isLE:t,BITS:o,BYTES:c,MASK:Un(o),ZERO:Bt,ONE:mt,create:I=>Ke(I,r),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return Bt<=I&&I<r},is0:I=>I===Bt,isValidNot0:I=>!_.is0(I)&&_.isValid(I),isOdd:I=>(I&mt)===mt,neg:I=>Ke(-I,r),eql:(I,T)=>I===T,sqr:I=>Ke(I*I,r),add:(I,T)=>Ke(I+T,r),sub:(I,T)=>Ke(I-T,r),mul:(I,T)=>Ke(I*T,r),pow:(I,T)=>Gc(_,I,T),div:(I,T)=>Ke(I*Ys(T,r),r),sqrN:I=>I*I,addN:(I,T)=>I+T,subN:(I,T)=>I-T,mulN:(I,T)=>I*T,inv:I=>Ys(I,r),sqrt:i||(I=>(g||(g=Wc(r)),g(_,I))),toBytes:I=>t?Nn(I,c):cs(I,c),fromBytes:I=>{if(I.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+I.length);return t?Jr(I):On(I)},invertBatch:I=>ia(_,I),cmov:(I,T,D)=>D?T:I});return Object.freeze(_)}function sa(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function oa(r){const e=sa(r);return e+Math.ceil(e/2)}function Zc(r,e,t=!1){const n=r.length,s=sa(e),i=oa(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?Jr(r):On(r),c=Ke(o,e-mt)+mt;return t?Nn(c,s):cs(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tr=BigInt(0),dr=BigInt(1);function $r(r,e){const t=e.negate();return r?t:e}function aa(r,e,t){const n=e==="pz"?o=>o.pz:o=>o.ez,s=ia(r.Fp,t.map(n));return t.map((o,c)=>o.toAffine(s[c])).map(r.fromAffine)}function ca(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function wi(r,e){ca(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),s=2**r,i=Un(r),o=BigInt(r);return{windows:t,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Xs(r,e,t){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=t;let c=Number(r&s),g=r>>o;c>n&&(c-=i,g+=dr);const _=e*n,I=_+Math.abs(c)-1,T=c===0,D=c<0,M=e%2!==0;return{nextN:g,offset:I,isZero:T,isNeg:D,isNegF:M,offsetF:_}}function Yc(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Jc(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const bi=new WeakMap,ua=new WeakMap;function vi(r){return ua.get(r)||1}function Qs(r){if(r!==Tr)throw new Error("invalid wNAF")}function fa(r,e){return{constTimeNegate:$r,hasPrecomputes(t){return vi(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>Tr;)n&dr&&(s=s.add(i)),i=i.double(),n>>=dr;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=wi(n,e),o=[];let c=t,g=c;for(let _=0;_<s;_++){g=c,o.push(g);for(let I=1;I<i;I++)g=g.add(c),o.push(g);c=g.double()}return o},wNAF(t,n,s){let i=r.ZERO,o=r.BASE;const c=wi(t,e);for(let g=0;g<c.windows;g++){const{nextN:_,offset:I,isZero:T,isNeg:D,isNegF:M,offsetF:F}=Xs(s,g,c);s=_,T?o=o.add($r(M,n[F])):i=i.add($r(D,n[I]))}return Qs(s),{p:i,f:o}},wNAFUnsafe(t,n,s,i=r.ZERO){const o=wi(t,e);for(let c=0;c<o.windows&&s!==Tr;c++){const{nextN:g,offset:_,isZero:I,isNeg:T}=Xs(s,c,o);if(s=g,!I){const D=n[_];i=i.add(T?D.negate():D)}}return Qs(s),i},getPrecomputes(t,n,s){let i=bi.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof s=="function"&&(i=s(i)),bi.set(n,i))),i},wNAFCached(t,n,s){const i=vi(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=vi(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){ca(n,e),ua.set(t,n),bi.delete(t)}}}function Xc(r,e,t,n){let s=e,i=r.ZERO,o=r.ZERO;for(;t>Tr||n>Tr;)t&dr&&(i=i.add(s)),n&dr&&(o=o.add(s)),s=s.double(),t>>=dr,n>>=dr;return{p1:i,p2:o}}function la(r,e,t,n){Yc(t,r),Jc(n,e);const s=t.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,c=zc(BigInt(s));let g=1;c>12?g=c-3:c>4?g=c-2:c>0&&(g=2);const _=Un(g),I=new Array(Number(_)+1).fill(o),T=Math.floor((e.BITS-1)/g)*g;let D=o;for(let M=T;M>=0;M-=g){I.fill(o);for(let U=0;U<i;U++){const C=n[U],H=Number(C>>BigInt(M)&_);I[H]=I[H].add(t[U])}let F=o;for(let U=I.length-1,C=o;U>0;U--)C=C.add(I[U]),F=F.add(C);if(D=D.add(F),M!==0)for(let U=0;U<g;U++)D=D.double()}return D}function eo(r,e){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Vc(e),e}else return Nr(r)}function ha(r,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const g=e[c];if(!(typeof g=="bigint"&&g>Tr))throw new Error(`CURVE.${c} must be positive bigint`)}const n=eo(e.p,t.Fp),s=eo(e.n,t.Fn),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const c of o)if(!n.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zt=BigInt(0),St=BigInt(1),ki=BigInt(2),Qc=BigInt(8),eu={zip215:!0};function tu(r,e,t,n){const s=r.sqr(t),i=r.sqr(n),o=r.add(r.mul(e.a,s),i),c=r.add(r.ONE,r.mul(e.d,r.mul(s,i)));return r.eql(o,c)}function ru(r,e={}){const{Fp:t,Fn:n}=ha("edwards",r,e),{h:s,n:i}=r;rn(e,{},{uvRatio:"function"});const o=ki<<BigInt(n.BYTES*8)-St,c=U=>t.create(U),g=e.uvRatio||((U,C)=>{try{return{isValid:!0,value:t.sqrt(t.div(U,C))}}catch{return{isValid:!1,value:zt}}});if(!tu(t,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function _(U,C,H=!1){const z=H?St:zt;return Ar("coordinate "+U,C,z,o),C}function I(U){if(!(U instanceof M))throw new Error("ExtendedPoint expected")}const T=Sn((U,C)=>{const{ex:H,ey:z,ez:j}=U,te=U.is0();C==null&&(C=te?Qc:t.inv(j));const V=c(H*C),Y=c(z*C),ne=c(j*C);if(te)return{x:zt,y:St};if(ne!==St)throw new Error("invZ was invalid");return{x:V,y:Y}}),D=Sn(U=>{const{a:C,d:H}=r;if(U.is0())throw new Error("bad point: ZERO");const{ex:z,ey:j,ez:te,et:V}=U,Y=c(z*z),ne=c(j*j),x=c(te*te),m=c(x*x),v=c(Y*C),S=c(x*c(v+ne)),E=c(m+c(H*c(Y*ne)));if(S!==E)throw new Error("bad point: equation left != right (1)");const d=c(z*j),a=c(te*V);if(d!==a)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(C,H,z,j){this.ex=_("x",C),this.ey=_("y",H),this.ez=_("z",z,!0),this.et=_("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof M)throw new Error("extended point not allowed");const{x:H,y:z}=C||{};return _("x",H),_("y",z),new M(H,z,St,c(H*z))}static normalizeZ(C){return aa(M,"ez",C)}static msm(C,H){return la(M,n,C,H)}_setWindowSize(C){this.precompute(C)}precompute(C=8,H=!0){return F.setWindowSize(this,C),H||this.multiply(ki),this}assertValidity(){D(this)}equals(C){I(C);const{ex:H,ey:z,ez:j}=this,{ex:te,ey:V,ez:Y}=C,ne=c(H*Y),x=c(te*j),m=c(z*Y),v=c(V*j);return ne===x&&m===v}is0(){return this.equals(M.ZERO)}negate(){return new M(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:C}=r,{ex:H,ey:z,ez:j}=this,te=c(H*H),V=c(z*z),Y=c(ki*c(j*j)),ne=c(C*te),x=H+z,m=c(c(x*x)-te-V),v=ne+V,S=v-Y,E=ne-V,d=c(m*S),a=c(v*E),f=c(m*E),h=c(S*v);return new M(d,a,h,f)}add(C){I(C);const{a:H,d:z}=r,{ex:j,ey:te,ez:V,et:Y}=this,{ex:ne,ey:x,ez:m,et:v}=C,S=c(j*ne),E=c(te*x),d=c(Y*z*v),a=c(V*m),f=c((j+te)*(ne+x)-S-E),h=a-d,w=a+d,b=c(E-H*S),B=c(f*h),N=c(w*b),k=c(f*b),u=c(h*w);return new M(B,N,u,k)}subtract(C){return this.add(C.negate())}multiply(C){const H=C;Ar("scalar",H,St,i);const{p:z,f:j}=F.wNAFCached(this,H,M.normalizeZ);return M.normalizeZ([z,j])[0]}multiplyUnsafe(C,H=M.ZERO){const z=C;return Ar("scalar",z,zt,i),z===zt?M.ZERO:this.is0()||z===St?this:F.wNAFCachedUnsafe(this,z,M.normalizeZ,H)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return F.wNAFCachedUnsafe(this,i).is0()}toAffine(C){return T(this,C)}clearCofactor(){return s===St?this:this.multiplyUnsafe(s)}static fromBytes(C,H=!1){return Lt(C),this.fromHex(C,H)}static fromHex(C,H=!1){const{d:z,a:j}=r,te=t.BYTES;C=qe("pointHex",C,te),gr("zip215",H);const V=C.slice(),Y=C[te-1];V[te-1]=Y&-129;const ne=Jr(V),x=H?o:t.ORDER;Ar("pointHex.y",ne,zt,x);const m=c(ne*ne),v=c(m-St),S=c(z*m-j);let{isValid:E,value:d}=g(v,S);if(!E)throw new Error("Point.fromHex: invalid y coordinate");const a=(d&St)===St,f=(Y&128)!==0;if(!H&&d===zt&&f)throw new Error("Point.fromHex: x=0 and x_0=1");return f!==a&&(d=c(-d)),M.fromAffine({x:d,y:ne})}static fromPrivateScalar(C){return M.BASE.multiply(C)}toBytes(){const{x:C,y:H}=this.toAffine(),z=Nn(H,t.BYTES);return z[z.length-1]|=C&St?128:0,z}toRawBytes(){return this.toBytes()}toHex(){return Pr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}M.BASE=new M(r.Gx,r.Gy,St,c(r.Gx*r.Gy)),M.ZERO=new M(zt,St,St,zt),M.Fp=t,M.Fn=n;const F=fa(M,n.BYTES*8);return M}function nu(r,e){rn(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=e,{BASE:s,Fp:i,Fn:o}=r,c=o.ORDER,g=e.randomBytes||jo,_=e.adjustScalarBytes||(V=>V),I=e.domain||((V,Y,ne)=>{if(gr("phflag",ne),Y.length||ne)throw new Error("Contexts/pre-hash are not supported");return V});function T(V){return o.create(V)}function D(V){return T(Jr(V))}function M(V){const Y=i.BYTES;V=qe("private key",V,Y);const ne=qe("hashed private key",n(V),2*Y),x=_(ne.slice(0,Y)),m=ne.slice(Y,2*Y),v=D(x);return{head:x,prefix:m,scalar:v}}function F(V){const{head:Y,prefix:ne,scalar:x}=M(V),m=s.multiply(x),v=m.toBytes();return{head:Y,prefix:ne,scalar:x,point:m,pointBytes:v}}function U(V){return F(V).pointBytes}function C(V=Uint8Array.of(),...Y){const ne=Qt(...Y);return D(n(I(ne,qe("context",V),!!t)))}function H(V,Y,ne={}){V=qe("message",V),t&&(V=t(V));const{prefix:x,scalar:m,pointBytes:v}=F(Y),S=C(ne.context,x,V),E=s.multiply(S).toBytes(),d=C(ne.context,E,v,V),a=T(S+d*m);Ar("signature.s",a,zt,c);const f=i.BYTES,h=Qt(E,Nn(a,f));return qe("result",h,f*2)}const z=eu;function j(V,Y,ne,x=z){const{context:m,zip215:v}=x,S=i.BYTES;V=qe("signature",V,2*S),Y=qe("message",Y),ne=qe("publicKey",ne,S),v!==void 0&&gr("zip215",v),t&&(Y=t(Y));const E=Jr(V.slice(S,2*S));let d,a,f;try{d=r.fromHex(ne,v),a=r.fromHex(V.slice(0,S),v),f=s.multiplyUnsafe(E)}catch{return!1}if(!v&&d.isSmallOrder())return!1;const h=C(m,a.toBytes(),d.toBytes(),Y);return a.add(d.multiplyUnsafe(h)).subtract(f).clearCofactor().is0()}return s.precompute(8),{getPublicKey:U,sign:H,verify:j,utils:{getExtendedPublicKey:F,randomPrivateKey:()=>g(i.BYTES),precompute(V=8,Y=r.BASE){return Y.precompute(V,!1)}},Point:r}}function iu(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Nr(e.n,r.nBitLength,!0),s={Fp:t,Fn:n,uvRatio:r.uvRatio},i={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:s,eddsaOpts:i}}function su(r,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:r})}function ou(r){const{CURVE:e,curveOpts:t,eddsaOpts:n}=iu(r),s=ru(e,t),i=nu(s,n);return su(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const au=BigInt(1),to=BigInt(2);BigInt(3);const cu=BigInt(5),uu=BigInt(8),zn={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:uu,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function fu(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=zn.p,c=r*r%i*r%i,g=ze(c,to,i)*c%i,_=ze(g,au,i)*r%i,I=ze(_,cu,i)*_%i,T=ze(I,e,i)*I%i,D=ze(T,t,i)*T%i,M=ze(D,n,i)*D%i,F=ze(M,s,i)*M%i,U=ze(F,s,i)*M%i,C=ze(U,e,i)*I%i;return{pow_p_5_8:ze(C,to,i)*r%i,b2:c}}function lu(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const ro=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function hu(r,e){const t=zn.p,n=Ke(e*e*e,t),s=Ke(n*n*e,t),i=fu(r*s).pow_p_5_8;let o=Ke(r*n*i,t);const c=Ke(e*o*o,t),g=o,_=Ke(o*ro,t),I=c===r,T=c===Ke(-r,t),D=c===Ke(-r*ro,t);return I&&(o=g),(T||D)&&(o=_),Hc(o,t)&&(o=Ke(-o,t)),{isValid:I||T,value:o}}const du=Nr(zn.p,void 0,!0),pu={...zn,Fp:du,hash:Nc,adjustScalarBytes:lu,uvRatio:hu},Ur=ou(pu);var vn={exports:{}},gu=vn.exports,no;function da(){return no||(no=1,(function(r){(function(e,t){function n(d,a){if(!d)throw new Error(a||"Assertion failed")}function s(d,a){d.super_=a;var f=function(){};f.prototype=a.prototype,d.prototype=new f,d.prototype.constructor=d}function i(d,a,f){if(i.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(d||0,a||10,f||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ln().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,f){return a.cmp(f)>0?a:f},i.min=function(a,f){return a.cmp(f)<0?a:f},i.prototype._init=function(a,f,h){if(typeof a=="number")return this._initNumber(a,f,h);if(typeof a=="object")return this._initArray(a,f,h);f==="hex"&&(f=16),n(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var w=0;a[0]==="-"&&(w++,this.negative=1),w<a.length&&(f===16?this._parseHex(a,w,h):(this._parseBase(a,f,w),h==="le"&&this._initArray(this.toArray(),f,h)))},i.prototype._initNumber=function(a,f,h){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),f,h)},i.prototype._initArray=function(a,f,h){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b,B,N=0;if(h==="be")for(w=a.length-1,b=0;w>=0;w-=3)B=a[w]|a[w-1]<<8|a[w-2]<<16,this.words[b]|=B<<N&67108863,this.words[b+1]=B>>>26-N&67108863,N+=24,N>=26&&(N-=26,b++);else if(h==="le")for(w=0,b=0;w<a.length;w+=3)B=a[w]|a[w+1]<<8|a[w+2]<<16,this.words[b]|=B<<N&67108863,this.words[b+1]=B>>>26-N&67108863,N+=24,N>=26&&(N-=26,b++);return this._strip()};function c(d,a){var f=d.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;n(!1,"Invalid character in "+d)}function g(d,a,f){var h=c(d,f);return f-1>=a&&(h|=c(d,f-1)<<4),h}i.prototype._parseHex=function(a,f,h){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b=0,B=0,N;if(h==="be")for(w=a.length-1;w>=f;w-=2)N=g(a,f,w)<<b,this.words[B]|=N&67108863,b>=18?(b-=18,B+=1,this.words[B]|=N>>>26):b+=8;else{var k=a.length-f;for(w=k%2===0?f+1:f;w<a.length;w+=2)N=g(a,f,w)<<b,this.words[B]|=N&67108863,b>=18?(b-=18,B+=1,this.words[B]|=N>>>26):b+=8}this._strip()};function _(d,a,f,h){for(var w=0,b=0,B=Math.min(d.length,f),N=a;N<B;N++){var k=d.charCodeAt(N)-48;w*=h,k>=49?b=k-49+10:k>=17?b=k-17+10:b=k,n(k>=0&&b<h,"Invalid character"),w+=b}return w}i.prototype._parseBase=function(a,f,h){this.words=[0],this.length=1;for(var w=0,b=1;b<=67108863;b*=f)w++;w--,b=b/f|0;for(var B=a.length-h,N=B%w,k=Math.min(B,B-N)+h,u=0,l=h;l<k;l+=w)u=_(a,l,l+w,f),this.imuln(b),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(N!==0){var A=1;for(u=_(a,l,a.length,f),l=0;l<N;l++)A*=f;this.imuln(A),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function I(d,a){d.words=a.words,d.length=a.length,d.negative=a.negative,d.red=a.red}if(i.prototype._move=function(a){I(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=T}catch{i.prototype.inspect=T}else i.prototype.inspect=T;function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,f){a=a||10,f=f|0||1;var h;if(a===16||a==="hex"){h="";for(var w=0,b=0,B=0;B<this.length;B++){var N=this.words[B],k=((N<<w|b)&16777215).toString(16);b=N>>>24-w&16777215,w+=2,w>=26&&(w-=26,B--),b!==0||B!==this.length-1?h=D[6-k.length]+k+h:h=k+h}for(b!==0&&(h=b.toString(16)+h);h.length%f!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(a===(a|0)&&a>=2&&a<=36){var u=M[a],l=F[a];h="";var A=this.clone();for(A.negative=0;!A.isZero();){var R=A.modrn(l).toString(a);A=A.idivn(l),A.isZero()?h=R+h:h=D[u-R.length]+R+h}for(this.isZero()&&(h="0"+h);h.length%f!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),i.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var U=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};i.prototype.toArrayLike=function(a,f,h){this._strip();var w=this.byteLength(),b=h||Math.max(1,w);n(w<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0");var B=U(a,b),N=f==="le"?"LE":"BE";return this["_toArrayLike"+N](B,w),B},i.prototype._toArrayLikeLE=function(a,f){for(var h=0,w=0,b=0,B=0;b<this.length;b++){var N=this.words[b]<<B|w;a[h++]=N&255,h<a.length&&(a[h++]=N>>8&255),h<a.length&&(a[h++]=N>>16&255),B===6?(h<a.length&&(a[h++]=N>>24&255),w=0,B=0):(w=N>>>24,B+=2)}if(h<a.length)for(a[h++]=w;h<a.length;)a[h++]=0},i.prototype._toArrayLikeBE=function(a,f){for(var h=a.length-1,w=0,b=0,B=0;b<this.length;b++){var N=this.words[b]<<B|w;a[h--]=N&255,h>=0&&(a[h--]=N>>8&255),h>=0&&(a[h--]=N>>16&255),B===6?(h>=0&&(a[h--]=N>>24&255),w=0,B=0):(w=N>>>24,B+=2)}if(h>=0)for(a[h--]=w;h>=0;)a[h--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var f=a,h=0;return f>=4096&&(h+=13,f>>>=13),f>=64&&(h+=7,f>>>=7),f>=8&&(h+=4,f>>>=4),f>=2&&(h+=2,f>>>=2),h+f},i.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,h=0;return(f&8191)===0&&(h+=13,f>>>=13),(f&127)===0&&(h+=7,f>>>=7),(f&15)===0&&(h+=4,f>>>=4),(f&3)===0&&(h+=2,f>>>=2),(f&1)===0&&h++,h},i.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function C(d){for(var a=new Array(d.bitLength()),f=0;f<a.length;f++){var h=f/26|0,w=f%26;a[f]=d.words[h]>>>w&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var h=this._zeroBits(this.words[f]);if(a+=h,h!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var h=0;h<f.length;h++)this.words[h]=this.words[h]&a.words[h];return this.length=f.length,this._strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var f,h;this.length>a.length?(f=this,h=a):(f=a,h=this);for(var w=0;w<h.length;w++)this.words[w]=f.words[w]^h.words[w];if(this!==f)for(;w<f.length;w++)this.words[w]=f.words[w];return this.length=f.length,this._strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,h=a%26;this._expand(f),h>0&&f--;for(var w=0;w<f;w++)this.words[w]=~this.words[w]&67108863;return h>0&&(this.words[w]=~this.words[w]&67108863>>26-h),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,f){n(typeof a=="number"&&a>=0);var h=a/26|0,w=a%26;return this._expand(h+1),f?this.words[h]=this.words[h]|1<<w:this.words[h]=this.words[h]&~(1<<w),this._strip()},i.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var h,w;this.length>a.length?(h=this,w=a):(h=a,w=this);for(var b=0,B=0;B<w.length;B++)f=(h.words[B]|0)+(w.words[B]|0)+b,this.words[B]=f&67108863,b=f>>>26;for(;b!==0&&B<h.length;B++)f=(h.words[B]|0)+b,this.words[B]=f&67108863,b=f>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;B<h.length;B++)this.words[B]=h.words[B];return this},i.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h=this.cmp(a);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,b;h>0?(w=this,b=a):(w=a,b=this);for(var B=0,N=0;N<b.length;N++)f=(w.words[N]|0)-(b.words[N]|0)+B,B=f>>26,this.words[N]=f&67108863;for(;B!==0&&N<w.length;N++)f=(w.words[N]|0)+B,B=f>>26,this.words[N]=f&67108863;if(B===0&&N<w.length&&w!==this)for(;N<w.length;N++)this.words[N]=w.words[N];return this.length=Math.max(this.length,N),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function H(d,a,f){f.negative=a.negative^d.negative;var h=d.length+a.length|0;f.length=h,h=h-1|0;var w=d.words[0]|0,b=a.words[0]|0,B=w*b,N=B&67108863,k=B/67108864|0;f.words[0]=N;for(var u=1;u<h;u++){for(var l=k>>>26,A=k&67108863,R=Math.min(u,a.length-1),q=Math.max(0,u-d.length+1);q<=R;q++){var G=u-q|0;w=d.words[G]|0,b=a.words[q]|0,B=w*b+A,l+=B/67108864|0,A=B&67108863}f.words[u]=A|0,k=l|0}return k!==0?f.words[u]=k|0:f.length--,f._strip()}var z=function(a,f,h){var w=a.words,b=f.words,B=h.words,N=0,k,u,l,A=w[0]|0,R=A&8191,q=A>>>13,G=w[1]|0,oe=G&8191,ue=G>>>13,Fe=w[2]|0,pe=Fe&8191,Ee=Fe>>>13,Me=w[3]|0,me=Me&8191,de=Me>>>13,P=w[4]|0,p=P&8191,y=P>>>13,O=w[5]|0,K=O&8191,Z=O>>>13,X=w[6]|0,fe=X&8191,he=X>>>13,Re=w[7]|0,ve=Re&8191,ge=Re>>>13,cr=w[8]|0,Le=cr&8191,Ce=cr>>>13,Ps=w[9]|0,We=Ps&8191,He=Ps>>>13,Ts=b[0]|0,$e=Ts&8191,Ve=Ts>>>13,Ls=b[1]|0,Ge=Ls&8191,je=Ls>>>13,Cs=b[2]|0,Ze=Cs&8191,Ye=Cs>>>13,Os=b[3]|0,Je=Os&8191,Xe=Os>>>13,Ns=b[4]|0,Qe=Ns&8191,et=Ns>>>13,Us=b[5]|0,tt=Us&8191,rt=Us>>>13,zs=b[6]|0,nt=zs&8191,it=zs>>>13,Fs=b[7]|0,st=Fs&8191,ot=Fs>>>13,Ds=b[8]|0,at=Ds&8191,ct=Ds>>>13,qs=b[9]|0,ut=qs&8191,ft=qs>>>13;h.negative=a.negative^f.negative,h.length=19,k=Math.imul(R,$e),u=Math.imul(R,Ve),u=u+Math.imul(q,$e)|0,l=Math.imul(q,Ve);var Yn=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,k=Math.imul(oe,$e),u=Math.imul(oe,Ve),u=u+Math.imul(ue,$e)|0,l=Math.imul(ue,Ve),k=k+Math.imul(R,Ge)|0,u=u+Math.imul(R,je)|0,u=u+Math.imul(q,Ge)|0,l=l+Math.imul(q,je)|0;var Jn=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,k=Math.imul(pe,$e),u=Math.imul(pe,Ve),u=u+Math.imul(Ee,$e)|0,l=Math.imul(Ee,Ve),k=k+Math.imul(oe,Ge)|0,u=u+Math.imul(oe,je)|0,u=u+Math.imul(ue,Ge)|0,l=l+Math.imul(ue,je)|0,k=k+Math.imul(R,Ze)|0,u=u+Math.imul(R,Ye)|0,u=u+Math.imul(q,Ze)|0,l=l+Math.imul(q,Ye)|0;var Xn=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,k=Math.imul(me,$e),u=Math.imul(me,Ve),u=u+Math.imul(de,$e)|0,l=Math.imul(de,Ve),k=k+Math.imul(pe,Ge)|0,u=u+Math.imul(pe,je)|0,u=u+Math.imul(Ee,Ge)|0,l=l+Math.imul(Ee,je)|0,k=k+Math.imul(oe,Ze)|0,u=u+Math.imul(oe,Ye)|0,u=u+Math.imul(ue,Ze)|0,l=l+Math.imul(ue,Ye)|0,k=k+Math.imul(R,Je)|0,u=u+Math.imul(R,Xe)|0,u=u+Math.imul(q,Je)|0,l=l+Math.imul(q,Xe)|0;var Qn=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,k=Math.imul(p,$e),u=Math.imul(p,Ve),u=u+Math.imul(y,$e)|0,l=Math.imul(y,Ve),k=k+Math.imul(me,Ge)|0,u=u+Math.imul(me,je)|0,u=u+Math.imul(de,Ge)|0,l=l+Math.imul(de,je)|0,k=k+Math.imul(pe,Ze)|0,u=u+Math.imul(pe,Ye)|0,u=u+Math.imul(Ee,Ze)|0,l=l+Math.imul(Ee,Ye)|0,k=k+Math.imul(oe,Je)|0,u=u+Math.imul(oe,Xe)|0,u=u+Math.imul(ue,Je)|0,l=l+Math.imul(ue,Xe)|0,k=k+Math.imul(R,Qe)|0,u=u+Math.imul(R,et)|0,u=u+Math.imul(q,Qe)|0,l=l+Math.imul(q,et)|0;var ei=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ei>>>26)|0,ei&=67108863,k=Math.imul(K,$e),u=Math.imul(K,Ve),u=u+Math.imul(Z,$e)|0,l=Math.imul(Z,Ve),k=k+Math.imul(p,Ge)|0,u=u+Math.imul(p,je)|0,u=u+Math.imul(y,Ge)|0,l=l+Math.imul(y,je)|0,k=k+Math.imul(me,Ze)|0,u=u+Math.imul(me,Ye)|0,u=u+Math.imul(de,Ze)|0,l=l+Math.imul(de,Ye)|0,k=k+Math.imul(pe,Je)|0,u=u+Math.imul(pe,Xe)|0,u=u+Math.imul(Ee,Je)|0,l=l+Math.imul(Ee,Xe)|0,k=k+Math.imul(oe,Qe)|0,u=u+Math.imul(oe,et)|0,u=u+Math.imul(ue,Qe)|0,l=l+Math.imul(ue,et)|0,k=k+Math.imul(R,tt)|0,u=u+Math.imul(R,rt)|0,u=u+Math.imul(q,tt)|0,l=l+Math.imul(q,rt)|0;var ti=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ti>>>26)|0,ti&=67108863,k=Math.imul(fe,$e),u=Math.imul(fe,Ve),u=u+Math.imul(he,$e)|0,l=Math.imul(he,Ve),k=k+Math.imul(K,Ge)|0,u=u+Math.imul(K,je)|0,u=u+Math.imul(Z,Ge)|0,l=l+Math.imul(Z,je)|0,k=k+Math.imul(p,Ze)|0,u=u+Math.imul(p,Ye)|0,u=u+Math.imul(y,Ze)|0,l=l+Math.imul(y,Ye)|0,k=k+Math.imul(me,Je)|0,u=u+Math.imul(me,Xe)|0,u=u+Math.imul(de,Je)|0,l=l+Math.imul(de,Xe)|0,k=k+Math.imul(pe,Qe)|0,u=u+Math.imul(pe,et)|0,u=u+Math.imul(Ee,Qe)|0,l=l+Math.imul(Ee,et)|0,k=k+Math.imul(oe,tt)|0,u=u+Math.imul(oe,rt)|0,u=u+Math.imul(ue,tt)|0,l=l+Math.imul(ue,rt)|0,k=k+Math.imul(R,nt)|0,u=u+Math.imul(R,it)|0,u=u+Math.imul(q,nt)|0,l=l+Math.imul(q,it)|0;var ri=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ri>>>26)|0,ri&=67108863,k=Math.imul(ve,$e),u=Math.imul(ve,Ve),u=u+Math.imul(ge,$e)|0,l=Math.imul(ge,Ve),k=k+Math.imul(fe,Ge)|0,u=u+Math.imul(fe,je)|0,u=u+Math.imul(he,Ge)|0,l=l+Math.imul(he,je)|0,k=k+Math.imul(K,Ze)|0,u=u+Math.imul(K,Ye)|0,u=u+Math.imul(Z,Ze)|0,l=l+Math.imul(Z,Ye)|0,k=k+Math.imul(p,Je)|0,u=u+Math.imul(p,Xe)|0,u=u+Math.imul(y,Je)|0,l=l+Math.imul(y,Xe)|0,k=k+Math.imul(me,Qe)|0,u=u+Math.imul(me,et)|0,u=u+Math.imul(de,Qe)|0,l=l+Math.imul(de,et)|0,k=k+Math.imul(pe,tt)|0,u=u+Math.imul(pe,rt)|0,u=u+Math.imul(Ee,tt)|0,l=l+Math.imul(Ee,rt)|0,k=k+Math.imul(oe,nt)|0,u=u+Math.imul(oe,it)|0,u=u+Math.imul(ue,nt)|0,l=l+Math.imul(ue,it)|0,k=k+Math.imul(R,st)|0,u=u+Math.imul(R,ot)|0,u=u+Math.imul(q,st)|0,l=l+Math.imul(q,ot)|0;var ni=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ni>>>26)|0,ni&=67108863,k=Math.imul(Le,$e),u=Math.imul(Le,Ve),u=u+Math.imul(Ce,$e)|0,l=Math.imul(Ce,Ve),k=k+Math.imul(ve,Ge)|0,u=u+Math.imul(ve,je)|0,u=u+Math.imul(ge,Ge)|0,l=l+Math.imul(ge,je)|0,k=k+Math.imul(fe,Ze)|0,u=u+Math.imul(fe,Ye)|0,u=u+Math.imul(he,Ze)|0,l=l+Math.imul(he,Ye)|0,k=k+Math.imul(K,Je)|0,u=u+Math.imul(K,Xe)|0,u=u+Math.imul(Z,Je)|0,l=l+Math.imul(Z,Xe)|0,k=k+Math.imul(p,Qe)|0,u=u+Math.imul(p,et)|0,u=u+Math.imul(y,Qe)|0,l=l+Math.imul(y,et)|0,k=k+Math.imul(me,tt)|0,u=u+Math.imul(me,rt)|0,u=u+Math.imul(de,tt)|0,l=l+Math.imul(de,rt)|0,k=k+Math.imul(pe,nt)|0,u=u+Math.imul(pe,it)|0,u=u+Math.imul(Ee,nt)|0,l=l+Math.imul(Ee,it)|0,k=k+Math.imul(oe,st)|0,u=u+Math.imul(oe,ot)|0,u=u+Math.imul(ue,st)|0,l=l+Math.imul(ue,ot)|0,k=k+Math.imul(R,at)|0,u=u+Math.imul(R,ct)|0,u=u+Math.imul(q,at)|0,l=l+Math.imul(q,ct)|0;var ii=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ii>>>26)|0,ii&=67108863,k=Math.imul(We,$e),u=Math.imul(We,Ve),u=u+Math.imul(He,$e)|0,l=Math.imul(He,Ve),k=k+Math.imul(Le,Ge)|0,u=u+Math.imul(Le,je)|0,u=u+Math.imul(Ce,Ge)|0,l=l+Math.imul(Ce,je)|0,k=k+Math.imul(ve,Ze)|0,u=u+Math.imul(ve,Ye)|0,u=u+Math.imul(ge,Ze)|0,l=l+Math.imul(ge,Ye)|0,k=k+Math.imul(fe,Je)|0,u=u+Math.imul(fe,Xe)|0,u=u+Math.imul(he,Je)|0,l=l+Math.imul(he,Xe)|0,k=k+Math.imul(K,Qe)|0,u=u+Math.imul(K,et)|0,u=u+Math.imul(Z,Qe)|0,l=l+Math.imul(Z,et)|0,k=k+Math.imul(p,tt)|0,u=u+Math.imul(p,rt)|0,u=u+Math.imul(y,tt)|0,l=l+Math.imul(y,rt)|0,k=k+Math.imul(me,nt)|0,u=u+Math.imul(me,it)|0,u=u+Math.imul(de,nt)|0,l=l+Math.imul(de,it)|0,k=k+Math.imul(pe,st)|0,u=u+Math.imul(pe,ot)|0,u=u+Math.imul(Ee,st)|0,l=l+Math.imul(Ee,ot)|0,k=k+Math.imul(oe,at)|0,u=u+Math.imul(oe,ct)|0,u=u+Math.imul(ue,at)|0,l=l+Math.imul(ue,ct)|0,k=k+Math.imul(R,ut)|0,u=u+Math.imul(R,ft)|0,u=u+Math.imul(q,ut)|0,l=l+Math.imul(q,ft)|0;var si=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(si>>>26)|0,si&=67108863,k=Math.imul(We,Ge),u=Math.imul(We,je),u=u+Math.imul(He,Ge)|0,l=Math.imul(He,je),k=k+Math.imul(Le,Ze)|0,u=u+Math.imul(Le,Ye)|0,u=u+Math.imul(Ce,Ze)|0,l=l+Math.imul(Ce,Ye)|0,k=k+Math.imul(ve,Je)|0,u=u+Math.imul(ve,Xe)|0,u=u+Math.imul(ge,Je)|0,l=l+Math.imul(ge,Xe)|0,k=k+Math.imul(fe,Qe)|0,u=u+Math.imul(fe,et)|0,u=u+Math.imul(he,Qe)|0,l=l+Math.imul(he,et)|0,k=k+Math.imul(K,tt)|0,u=u+Math.imul(K,rt)|0,u=u+Math.imul(Z,tt)|0,l=l+Math.imul(Z,rt)|0,k=k+Math.imul(p,nt)|0,u=u+Math.imul(p,it)|0,u=u+Math.imul(y,nt)|0,l=l+Math.imul(y,it)|0,k=k+Math.imul(me,st)|0,u=u+Math.imul(me,ot)|0,u=u+Math.imul(de,st)|0,l=l+Math.imul(de,ot)|0,k=k+Math.imul(pe,at)|0,u=u+Math.imul(pe,ct)|0,u=u+Math.imul(Ee,at)|0,l=l+Math.imul(Ee,ct)|0,k=k+Math.imul(oe,ut)|0,u=u+Math.imul(oe,ft)|0,u=u+Math.imul(ue,ut)|0,l=l+Math.imul(ue,ft)|0;var oi=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(oi>>>26)|0,oi&=67108863,k=Math.imul(We,Ze),u=Math.imul(We,Ye),u=u+Math.imul(He,Ze)|0,l=Math.imul(He,Ye),k=k+Math.imul(Le,Je)|0,u=u+Math.imul(Le,Xe)|0,u=u+Math.imul(Ce,Je)|0,l=l+Math.imul(Ce,Xe)|0,k=k+Math.imul(ve,Qe)|0,u=u+Math.imul(ve,et)|0,u=u+Math.imul(ge,Qe)|0,l=l+Math.imul(ge,et)|0,k=k+Math.imul(fe,tt)|0,u=u+Math.imul(fe,rt)|0,u=u+Math.imul(he,tt)|0,l=l+Math.imul(he,rt)|0,k=k+Math.imul(K,nt)|0,u=u+Math.imul(K,it)|0,u=u+Math.imul(Z,nt)|0,l=l+Math.imul(Z,it)|0,k=k+Math.imul(p,st)|0,u=u+Math.imul(p,ot)|0,u=u+Math.imul(y,st)|0,l=l+Math.imul(y,ot)|0,k=k+Math.imul(me,at)|0,u=u+Math.imul(me,ct)|0,u=u+Math.imul(de,at)|0,l=l+Math.imul(de,ct)|0,k=k+Math.imul(pe,ut)|0,u=u+Math.imul(pe,ft)|0,u=u+Math.imul(Ee,ut)|0,l=l+Math.imul(Ee,ft)|0;var ai=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ai>>>26)|0,ai&=67108863,k=Math.imul(We,Je),u=Math.imul(We,Xe),u=u+Math.imul(He,Je)|0,l=Math.imul(He,Xe),k=k+Math.imul(Le,Qe)|0,u=u+Math.imul(Le,et)|0,u=u+Math.imul(Ce,Qe)|0,l=l+Math.imul(Ce,et)|0,k=k+Math.imul(ve,tt)|0,u=u+Math.imul(ve,rt)|0,u=u+Math.imul(ge,tt)|0,l=l+Math.imul(ge,rt)|0,k=k+Math.imul(fe,nt)|0,u=u+Math.imul(fe,it)|0,u=u+Math.imul(he,nt)|0,l=l+Math.imul(he,it)|0,k=k+Math.imul(K,st)|0,u=u+Math.imul(K,ot)|0,u=u+Math.imul(Z,st)|0,l=l+Math.imul(Z,ot)|0,k=k+Math.imul(p,at)|0,u=u+Math.imul(p,ct)|0,u=u+Math.imul(y,at)|0,l=l+Math.imul(y,ct)|0,k=k+Math.imul(me,ut)|0,u=u+Math.imul(me,ft)|0,u=u+Math.imul(de,ut)|0,l=l+Math.imul(de,ft)|0;var ci=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ci>>>26)|0,ci&=67108863,k=Math.imul(We,Qe),u=Math.imul(We,et),u=u+Math.imul(He,Qe)|0,l=Math.imul(He,et),k=k+Math.imul(Le,tt)|0,u=u+Math.imul(Le,rt)|0,u=u+Math.imul(Ce,tt)|0,l=l+Math.imul(Ce,rt)|0,k=k+Math.imul(ve,nt)|0,u=u+Math.imul(ve,it)|0,u=u+Math.imul(ge,nt)|0,l=l+Math.imul(ge,it)|0,k=k+Math.imul(fe,st)|0,u=u+Math.imul(fe,ot)|0,u=u+Math.imul(he,st)|0,l=l+Math.imul(he,ot)|0,k=k+Math.imul(K,at)|0,u=u+Math.imul(K,ct)|0,u=u+Math.imul(Z,at)|0,l=l+Math.imul(Z,ct)|0,k=k+Math.imul(p,ut)|0,u=u+Math.imul(p,ft)|0,u=u+Math.imul(y,ut)|0,l=l+Math.imul(y,ft)|0;var ui=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(ui>>>26)|0,ui&=67108863,k=Math.imul(We,tt),u=Math.imul(We,rt),u=u+Math.imul(He,tt)|0,l=Math.imul(He,rt),k=k+Math.imul(Le,nt)|0,u=u+Math.imul(Le,it)|0,u=u+Math.imul(Ce,nt)|0,l=l+Math.imul(Ce,it)|0,k=k+Math.imul(ve,st)|0,u=u+Math.imul(ve,ot)|0,u=u+Math.imul(ge,st)|0,l=l+Math.imul(ge,ot)|0,k=k+Math.imul(fe,at)|0,u=u+Math.imul(fe,ct)|0,u=u+Math.imul(he,at)|0,l=l+Math.imul(he,ct)|0,k=k+Math.imul(K,ut)|0,u=u+Math.imul(K,ft)|0,u=u+Math.imul(Z,ut)|0,l=l+Math.imul(Z,ft)|0;var fi=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(fi>>>26)|0,fi&=67108863,k=Math.imul(We,nt),u=Math.imul(We,it),u=u+Math.imul(He,nt)|0,l=Math.imul(He,it),k=k+Math.imul(Le,st)|0,u=u+Math.imul(Le,ot)|0,u=u+Math.imul(Ce,st)|0,l=l+Math.imul(Ce,ot)|0,k=k+Math.imul(ve,at)|0,u=u+Math.imul(ve,ct)|0,u=u+Math.imul(ge,at)|0,l=l+Math.imul(ge,ct)|0,k=k+Math.imul(fe,ut)|0,u=u+Math.imul(fe,ft)|0,u=u+Math.imul(he,ut)|0,l=l+Math.imul(he,ft)|0;var li=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(li>>>26)|0,li&=67108863,k=Math.imul(We,st),u=Math.imul(We,ot),u=u+Math.imul(He,st)|0,l=Math.imul(He,ot),k=k+Math.imul(Le,at)|0,u=u+Math.imul(Le,ct)|0,u=u+Math.imul(Ce,at)|0,l=l+Math.imul(Ce,ct)|0,k=k+Math.imul(ve,ut)|0,u=u+Math.imul(ve,ft)|0,u=u+Math.imul(ge,ut)|0,l=l+Math.imul(ge,ft)|0;var hi=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(hi>>>26)|0,hi&=67108863,k=Math.imul(We,at),u=Math.imul(We,ct),u=u+Math.imul(He,at)|0,l=Math.imul(He,ct),k=k+Math.imul(Le,ut)|0,u=u+Math.imul(Le,ft)|0,u=u+Math.imul(Ce,ut)|0,l=l+Math.imul(Ce,ft)|0;var di=(N+k|0)+((u&8191)<<13)|0;N=(l+(u>>>13)|0)+(di>>>26)|0,di&=67108863,k=Math.imul(We,ut),u=Math.imul(We,ft),u=u+Math.imul(He,ut)|0,l=Math.imul(He,ft);var pi=(N+k|0)+((u&8191)<<13)|0;return N=(l+(u>>>13)|0)+(pi>>>26)|0,pi&=67108863,B[0]=Yn,B[1]=Jn,B[2]=Xn,B[3]=Qn,B[4]=ei,B[5]=ti,B[6]=ri,B[7]=ni,B[8]=ii,B[9]=si,B[10]=oi,B[11]=ai,B[12]=ci,B[13]=ui,B[14]=fi,B[15]=li,B[16]=hi,B[17]=di,B[18]=pi,N!==0&&(B[19]=N,h.length++),h};Math.imul||(z=H);function j(d,a,f){f.negative=a.negative^d.negative,f.length=d.length+a.length;for(var h=0,w=0,b=0;b<f.length-1;b++){var B=w;w=0;for(var N=h&67108863,k=Math.min(b,a.length-1),u=Math.max(0,b-d.length+1);u<=k;u++){var l=b-u,A=d.words[l]|0,R=a.words[u]|0,q=A*R,G=q&67108863;B=B+(q/67108864|0)|0,G=G+N|0,N=G&67108863,B=B+(G>>>26)|0,w+=B>>>26,B&=67108863}f.words[b]=N,h=B,B=w}return h!==0?f.words[b]=h:f.length--,f._strip()}function te(d,a,f){return j(d,a,f)}i.prototype.mulTo=function(a,f){var h,w=this.length+a.length;return this.length===10&&a.length===10?h=z(this,a,f):w<63?h=H(this,a,f):w<1024?h=j(this,a,f):h=te(this,a,f),h},i.prototype.mul=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},i.prototype.mulf=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),te(this,a,f)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var f=a<0;f&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var h=0,w=0;w<this.length;w++){var b=(this.words[w]|0)*a,B=(b&67108863)+(h&67108863);h>>=26,h+=b/67108864|0,h+=B>>>26,this.words[w]=B&67108863}return h!==0&&(this.words[w]=h,this.length++),this.length=a===0?1:this.length,f?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var f=C(a);if(f.length===0)return new i(1);for(var h=this,w=0;w<f.length&&f[w]===0;w++,h=h.sqr());if(++w<f.length)for(var b=h.sqr();w<f.length;w++,b=b.sqr())f[w]!==0&&(h=h.mul(b));return h},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var f=a%26,h=(a-f)/26,w=67108863>>>26-f<<26-f,b;if(f!==0){var B=0;for(b=0;b<this.length;b++){var N=this.words[b]&w,k=(this.words[b]|0)-N<<f;this.words[b]=k|B,B=N>>>26-f}B&&(this.words[b]=B,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,f,h){n(typeof a=="number"&&a>=0);var w;f?w=(f-f%26)/26:w=0;var b=a%26,B=Math.min((a-b)/26,this.length),N=67108863^67108863>>>b<<b,k=h;if(w-=B,w=Math.max(0,w),k){for(var u=0;u<B;u++)k.words[u]=this.words[u];k.length=B}if(B!==0)if(this.length>B)for(this.length-=B,u=0;u<this.length;u++)this.words[u]=this.words[u+B];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=w);u--){var A=this.words[u]|0;this.words[u]=l<<26-b|A>>>b,l=A&N}return k&&l!==0&&(k.words[k.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,f,h){return n(this.negative===0),this.iushrn(a,f,h)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,h=(a-f)/26,w=1<<f;if(this.length<=h)return!1;var b=this.words[h];return!!(b&w)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var f=a%26,h=(a-f)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(f!==0&&h++,this.length=Math.min(h,this.length),f!==0){var w=67108863^67108863>>>f<<f;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,f,h){var w=a.length+h,b;this._expand(w);var B,N=0;for(b=0;b<a.length;b++){B=(this.words[b+h]|0)+N;var k=(a.words[b]|0)*f;B-=k&67108863,N=(B>>26)-(k/67108864|0),this.words[b+h]=B&67108863}for(;b<this.length-h;b++)B=(this.words[b+h]|0)+N,N=B>>26,this.words[b+h]=B&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,b=0;b<this.length;b++)B=-(this.words[b]|0)+N,N=B>>26,this.words[b]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,f){var h=this.length-a.length,w=this.clone(),b=a,B=b.words[b.length-1]|0,N=this._countBits(B);h=26-N,h!==0&&(b=b.ushln(h),w.iushln(h),B=b.words[b.length-1]|0);var k=w.length-b.length,u;if(f!=="mod"){u=new i(null),u.length=k+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var A=w.clone()._ishlnsubmul(b,1,k);A.negative===0&&(w=A,u&&(u.words[k]=1));for(var R=k-1;R>=0;R--){var q=(w.words[b.length+R]|0)*67108864+(w.words[b.length+R-1]|0);for(q=Math.min(q/B|0,67108863),w._ishlnsubmul(b,q,R);w.negative!==0;)q--,w.negative=0,w._ishlnsubmul(b,1,R),w.isZero()||(w.negative^=1);u&&(u.words[R]=q)}return u&&u._strip(),w._strip(),f!=="div"&&h!==0&&w.iushrn(h),{div:u||null,mod:w}},i.prototype.divmod=function(a,f,h){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,b,B;return this.negative!==0&&a.negative===0?(B=this.neg().divmod(a,f),f!=="mod"&&(w=B.div.neg()),f!=="div"&&(b=B.mod.neg(),h&&b.negative!==0&&b.iadd(a)),{div:w,mod:b}):this.negative===0&&a.negative!==0?(B=this.divmod(a.neg(),f),f!=="mod"&&(w=B.div.neg()),{div:w,mod:B.mod}):(this.negative&a.negative)!==0?(B=this.neg().divmod(a.neg(),f),f!=="div"&&(b=B.mod.neg(),h&&b.negative!==0&&b.isub(a)),{div:B.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,f)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var h=f.div.negative!==0?f.mod.isub(a):f.mod,w=a.ushrn(1),b=a.andln(1),B=h.cmp(w);return B<0||b===1&&B===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var h=(1<<26)%a,w=0,b=this.length-1;b>=0;b--)w=(h*w+(this.words[b]|0))%a;return f?-w:w},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var f=a<0;f&&(a=-a),n(a<=67108863);for(var h=0,w=this.length-1;w>=0;w--){var b=(this.words[w]|0)+h*67108864;this.words[w]=b/a|0,h=b%a}return this._strip(),f?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var f=this,h=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var w=new i(1),b=new i(0),B=new i(0),N=new i(1),k=0;f.isEven()&&h.isEven();)f.iushrn(1),h.iushrn(1),++k;for(var u=h.clone(),l=f.clone();!f.isZero();){for(var A=0,R=1;(f.words[0]&R)===0&&A<26;++A,R<<=1);if(A>0)for(f.iushrn(A);A-- >0;)(w.isOdd()||b.isOdd())&&(w.iadd(u),b.isub(l)),w.iushrn(1),b.iushrn(1);for(var q=0,G=1;(h.words[0]&G)===0&&q<26;++q,G<<=1);if(q>0)for(h.iushrn(q);q-- >0;)(B.isOdd()||N.isOdd())&&(B.iadd(u),N.isub(l)),B.iushrn(1),N.iushrn(1);f.cmp(h)>=0?(f.isub(h),w.isub(B),b.isub(N)):(h.isub(f),B.isub(w),N.isub(b))}return{a:B,b:N,gcd:h.iushln(k)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var f=this,h=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var w=new i(1),b=new i(0),B=h.clone();f.cmpn(1)>0&&h.cmpn(1)>0;){for(var N=0,k=1;(f.words[0]&k)===0&&N<26;++N,k<<=1);if(N>0)for(f.iushrn(N);N-- >0;)w.isOdd()&&w.iadd(B),w.iushrn(1);for(var u=0,l=1;(h.words[0]&l)===0&&u<26;++u,l<<=1);if(u>0)for(h.iushrn(u);u-- >0;)b.isOdd()&&b.iadd(B),b.iushrn(1);f.cmp(h)>=0?(f.isub(h),w.isub(b)):(h.isub(f),b.isub(w))}var A;return f.cmpn(1)===0?A=w:A=b,A.cmpn(0)<0&&A.iadd(a),A},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),h=a.clone();f.negative=0,h.negative=0;for(var w=0;f.isEven()&&h.isEven();w++)f.iushrn(1),h.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=f.cmp(h);if(b<0){var B=f;f=h,h=B}else if(b===0||h.cmpn(1)===0)break;f.isub(h)}while(!0);return h.iushln(w)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var f=a%26,h=(a-f)/26,w=1<<f;if(this.length<=h)return this._expand(h+1),this.words[h]|=w,this;for(var b=w,B=h;b!==0&&B<this.length;B++){var N=this.words[B]|0;N+=b,b=N>>>26,N&=67108863,this.words[B]=N}return b!==0&&(this.words[B]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var h;if(this.length>1)h=1;else{f&&(a=-a),n(a<=67108863,"Number is too big");var w=this.words[0]|0;h=w===a?0:w<a?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,h=this.length-1;h>=0;h--){var w=this.words[h]|0,b=a.words[h]|0;if(w!==b){w<b?f=-1:w>b&&(f=1);break}}return f},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new S(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function Y(d,a){this.name=d,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},Y.prototype.ireduce=function(a){var f=a,h;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),h=f.bitLength();while(h>this.n);var w=h<this.n?-1:f.ucmp(this.p);return w===0?(f.words[0]=0,f.length=1):w>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},Y.prototype.split=function(a,f){a.iushrn(this.n,0,f)},Y.prototype.imulK=function(a){return a.imul(this.k)};function ne(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ne,Y),ne.prototype.split=function(a,f){for(var h=4194303,w=Math.min(a.length,9),b=0;b<w;b++)f.words[b]=a.words[b];if(f.length=w,a.length<=9){a.words[0]=0,a.length=1;return}var B=a.words[9];for(f.words[f.length++]=B&h,b=10;b<a.length;b++){var N=a.words[b]|0;a.words[b-10]=(N&h)<<4|B>>>22,B=N}B>>>=22,a.words[b-10]=B,B===0&&a.length>10?a.length-=10:a.length-=9},ne.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,h=0;h<a.length;h++){var w=a.words[h]|0;f+=w*977,a.words[h]=f&67108863,f=w*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function x(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(x,Y);function m(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(m,Y);function v(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(v,Y),v.prototype.imulK=function(a){for(var f=0,h=0;h<a.length;h++){var w=(a.words[h]|0)*19+f,b=w&67108863;w>>>=26,a.words[h]=b,f=w}return f!==0&&(a.words[a.length++]=f),a},i._prime=function(a){if(V[a])return V[a];var f;if(a==="k256")f=new ne;else if(a==="p224")f=new x;else if(a==="p192")f=new m;else if(a==="p25519")f=new v;else throw new Error("Unknown prime "+a);return V[a]=f,f};function S(d){if(typeof d=="string"){var a=i._prime(d);this.m=a.p,this.prime=a}else n(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}S.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},S.prototype._verify2=function(a,f){n((a.negative|f.negative)===0,"red works only with positives"),n(a.red&&a.red===f.red,"red works only with red numbers")},S.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(I(a,a.umod(this.m)._forceRed(this)),a)},S.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},S.prototype.add=function(a,f){this._verify2(a,f);var h=a.add(f);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},S.prototype.iadd=function(a,f){this._verify2(a,f);var h=a.iadd(f);return h.cmp(this.m)>=0&&h.isub(this.m),h},S.prototype.sub=function(a,f){this._verify2(a,f);var h=a.sub(f);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},S.prototype.isub=function(a,f){this._verify2(a,f);var h=a.isub(f);return h.cmpn(0)<0&&h.iadd(this.m),h},S.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},S.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},S.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},S.prototype.isqr=function(a){return this.imul(a,a.clone())},S.prototype.sqr=function(a){return this.mul(a,a)},S.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(n(f%2===1),f===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(a,h)}for(var w=this.m.subn(1),b=0;!w.isZero()&&w.andln(1)===0;)b++,w.iushrn(1);n(!w.isZero());var B=new i(1).toRed(this),N=B.redNeg(),k=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,k).cmp(N)!==0;)u.redIAdd(N);for(var l=this.pow(u,w),A=this.pow(a,w.addn(1).iushrn(1)),R=this.pow(a,w),q=b;R.cmp(B)!==0;){for(var G=R,oe=0;G.cmp(B)!==0;oe++)G=G.redSqr();n(oe<q);var ue=this.pow(l,new i(1).iushln(q-oe-1));A=A.redMul(ue),l=ue.redSqr(),R=R.redMul(l),q=oe}return A},S.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},S.prototype.pow=function(a,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var h=4,w=new Array(1<<h);w[0]=new i(1).toRed(this),w[1]=a;for(var b=2;b<w.length;b++)w[b]=this.mul(w[b-1],a);var B=w[0],N=0,k=0,u=f.bitLength()%26;for(u===0&&(u=26),b=f.length-1;b>=0;b--){for(var l=f.words[b],A=u-1;A>=0;A--){var R=l>>A&1;if(B!==w[0]&&(B=this.sqr(B)),R===0&&N===0){k=0;continue}N<<=1,N|=R,k++,!(k!==h&&(b!==0||A!==0))&&(B=this.mul(B,w[N]),k=0,N=0)}u=26}return B},S.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},S.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},i.mont=function(a){return new E(a)};function E(d){S.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(E,S),E.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},E.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},E.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var h=a.imul(f),w=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(w).iushrn(this.shift),B=b;return b.cmp(this.m)>=0?B=b.isub(this.m):b.cmpn(0)<0&&(B=b.iadd(this.m)),B._forceRed(this)},E.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new i(0)._forceRed(this);var h=a.mul(f),w=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(w).iushrn(this.shift),B=b;return b.cmp(this.m)>=0?B=b.isub(this.m):b.cmpn(0)<0&&(B=b.iadd(this.m)),B._forceRed(this)},E.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,gu)})(vn)),vn.exports}var yu=da();const io=Tn(yu);var pn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var so;function mu(){return so||(so=1,(function(r,e){var t=Ln(),n=t.Buffer;function s(o,c){for(var g in o)c[g]=o[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,c,g){return n(o,c,g)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,c,g){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,g)},i.alloc=function(o,c,g){if(typeof o!="number")throw new TypeError("Argument must be a number");var _=n(o);return c!==void 0?typeof g=="string"?_.fill(c,g):_.fill(c):_.fill(0),_},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(pn,pn.exports)),pn.exports}var xi,oo;function wu(){if(oo)return xi;oo=1;var r=mu().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=i}var g=t.length,_=t.charAt(0),I=Math.log(g)/Math.log(256),T=Math.log(256)/Math.log(g);function D(U){if((Array.isArray(U)||U instanceof Uint8Array)&&(U=r.from(U)),!r.isBuffer(U))throw new TypeError("Expected Buffer");if(U.length===0)return"";for(var C=0,H=0,z=0,j=U.length;z!==j&&U[z]===0;)z++,C++;for(var te=(j-z)*T+1>>>0,V=new Uint8Array(te);z!==j;){for(var Y=U[z],ne=0,x=te-1;(Y!==0||ne<H)&&x!==-1;x--,ne++)Y+=256*V[x]>>>0,V[x]=Y%g>>>0,Y=Y/g>>>0;if(Y!==0)throw new Error("Non-zero carry");H=ne,z++}for(var m=te-H;m!==te&&V[m]===0;)m++;for(var v=_.repeat(C);m<te;++m)v+=t.charAt(V[m]);return v}function M(U){if(typeof U!="string")throw new TypeError("Expected String");if(U.length===0)return r.alloc(0);for(var C=0,H=0,z=0;U[C]===_;)H++,C++;for(var j=(U.length-C)*I+1>>>0,te=new Uint8Array(j);C<U.length;){var V=U.charCodeAt(C);if(V>255)return;var Y=n[V];if(Y===255)return;for(var ne=0,x=j-1;(Y!==0||ne<z)&&x!==-1;x--,ne++)Y+=g*te[x]>>>0,te[x]=Y%256>>>0,Y=Y/256>>>0;if(Y!==0)throw new Error("Non-zero carry");z=ne,C++}for(var m=j-z;m!==j&&te[m]===0;)m++;var v=r.allocUnsafe(H+(j-m));v.fill(0,0,H);for(var S=H;m!==j;)v[S++]=te[m++];return v}function F(U){var C=M(U);if(C)return C;throw new Error("Non-base"+g+" character")}return{encode:D,decodeUnsafe:M,decode:F}}return xi=e,xi}var Si,ao;function pa(){if(ao)return Si;ao=1;var r=wu(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Si=r(e),Si}var bu=pa();const yt=Tn(bu),co=Xo;var Ie={};function Jt(r,e,t){return e<=r&&r<=t}function Fn(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function vu(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=i&1023,g=o&1023;s.push(65536+(c<<10)+g),n+=1}else s.push(65533)}n+=1}return s}function ku(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var En=-1;function us(r){this.tokens=[].slice.call(r)}us.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():En},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Lr=-1;function Ei(r,e){if(r)throw TypeError("Decoder error");return e||65533}var An="utf-8";function _n(r,e){if(!(this instanceof _n))return new _n(r,e);if(r=r!==void 0?String(r).toLowerCase():An,r!==An)throw new Error("Encoding not supported. Only utf-8 is supported");e=Fn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}_n.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Fn(t),this._streaming||(this._decoder=new xu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new us(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Lr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Lr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ku(i)}};function In(r,e){if(!(this instanceof In))return new In(r,e);if(r=r!==void 0?String(r).toLowerCase():An,r!==An)throw new Error("Encoding not supported. Only utf-8 is supported");e=Fn(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}In.prototype={encode:function(e,t){e=e?String(e):"",t=Fn(t),this._streaming||(this._encoder=new Su(this._options)),this._streaming=!!t.stream;for(var n=[],s=new us(vu(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Lr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Lr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function xu(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(c,g){if(g===En&&s!==0)return s=0,Ei(e);if(g===En)return Lr;if(s===0){if(Jt(g,0,127))return g;if(Jt(g,194,223))s=1,t=g-192;else if(Jt(g,224,239))g===224&&(i=160),g===237&&(o=159),s=2,t=g-224;else if(Jt(g,240,244))g===240&&(i=144),g===244&&(o=143),s=3,t=g-240;else return Ei(e);return t=t<<6*s,null}if(!Jt(g,i,o))return t=s=n=0,i=128,o=191,c.prepend(g),Ei(e);if(i=128,o=191,n+=1,t+=g-128<<6*(s-n),n!==s)return null;var _=t;return t=s=n=0,_}}function Su(r){r.fatal,this.handler=function(e,t){if(t===En)return Lr;if(Jt(t,0,127))return t;var n,s;Jt(t,128,2047)?(n=1,s=192):Jt(t,2048,65535)?(n=2,s=224):Jt(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Eu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:_n,TextEncoder:In},Symbol.toStringTag,{value:"Module"})),Au=$o(Eu);var uo;function _u(){if(uo)return Ie;uo=1;var r=Ie&&Ie.__createBinding||(Object.create?(function(m,v,S,E){E===void 0&&(E=S),Object.defineProperty(m,E,{enumerable:!0,get:function(){return v[S]}})}):(function(m,v,S,E){E===void 0&&(E=S),m[E]=v[S]})),e=Ie&&Ie.__setModuleDefault||(Object.create?(function(m,v){Object.defineProperty(m,"default",{enumerable:!0,value:v})}):function(m,v){m.default=v}),t=Ie&&Ie.__decorate||function(m,v,S,E){var d=arguments.length,a=d<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,S):E,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(m,v,S,E);else for(var h=m.length-1;h>=0;h--)(f=m[h])&&(a=(d<3?f(a):d>3?f(v,S,a):f(v,S))||a);return d>3&&a&&Object.defineProperty(v,S,a),a},n=Ie&&Ie.__importStar||function(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var S in m)S!=="default"&&Object.hasOwnProperty.call(m,S)&&r(v,m,S);return e(v,m),v},s=Ie&&Ie.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.deserializeUnchecked=Ie.deserialize=Ie.serialize=Ie.BinaryReader=Ie.BinaryWriter=Ie.BorshError=Ie.baseDecode=Ie.baseEncode=void 0;const i=s(da()),o=s(pa()),c=n(Au),g=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,_=new g("utf-8",{fatal:!0});function I(m){return typeof m=="string"&&(m=ae.Buffer.from(m,"utf8")),o.default.encode(ae.Buffer.from(m))}Ie.baseEncode=I;function T(m){return ae.Buffer.from(o.default.decode(m))}Ie.baseDecode=T;const D=1024;class M extends Error{constructor(v){super(v),this.fieldPath=[],this.originalMessage=v}addToFieldPath(v){this.fieldPath.splice(0,0,v),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Ie.BorshError=M;class F{constructor(){this.buf=ae.Buffer.alloc(D),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ae.Buffer.concat([this.buf,ae.Buffer.alloc(D)]))}writeU8(v){this.maybeResize(),this.buf.writeUInt8(v,this.length),this.length+=1}writeU16(v){this.maybeResize(),this.buf.writeUInt16LE(v,this.length),this.length+=2}writeU32(v){this.maybeResize(),this.buf.writeUInt32LE(v,this.length),this.length+=4}writeU64(v){this.maybeResize(),this.writeBuffer(ae.Buffer.from(new i.default(v).toArray("le",8)))}writeU128(v){this.maybeResize(),this.writeBuffer(ae.Buffer.from(new i.default(v).toArray("le",16)))}writeU256(v){this.maybeResize(),this.writeBuffer(ae.Buffer.from(new i.default(v).toArray("le",32)))}writeU512(v){this.maybeResize(),this.writeBuffer(ae.Buffer.from(new i.default(v).toArray("le",64)))}writeBuffer(v){this.buf=ae.Buffer.concat([ae.Buffer.from(this.buf.subarray(0,this.length)),v,ae.Buffer.alloc(D)]),this.length+=v.length}writeString(v){this.maybeResize();const S=ae.Buffer.from(v,"utf8");this.writeU32(S.length),this.writeBuffer(S)}writeFixedArray(v){this.writeBuffer(ae.Buffer.from(v))}writeArray(v,S){this.maybeResize(),this.writeU32(v.length);for(const E of v)this.maybeResize(),S(E)}toArray(){return this.buf.subarray(0,this.length)}}Ie.BinaryWriter=F;function U(m,v,S){const E=S.value;S.value=function(...d){try{return E.apply(this,d)}catch(a){if(a instanceof RangeError){const f=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new M("Reached the end of buffer when deserializing")}throw a}}}class C{constructor(v){this.buf=v,this.offset=0}readU8(){const v=this.buf.readUInt8(this.offset);return this.offset+=1,v}readU16(){const v=this.buf.readUInt16LE(this.offset);return this.offset+=2,v}readU32(){const v=this.buf.readUInt32LE(this.offset);return this.offset+=4,v}readU64(){const v=this.readBuffer(8);return new i.default(v,"le")}readU128(){const v=this.readBuffer(16);return new i.default(v,"le")}readU256(){const v=this.readBuffer(32);return new i.default(v,"le")}readU512(){const v=this.readBuffer(64);return new i.default(v,"le")}readBuffer(v){if(this.offset+v>this.buf.length)throw new M(`Expected buffer length ${v} isn't within bounds`);const S=this.buf.slice(this.offset,this.offset+v);return this.offset+=v,S}readString(){const v=this.readU32(),S=this.readBuffer(v);try{return _.decode(S)}catch(E){throw new M(`Error decoding UTF-8 string: ${E}`)}}readFixedArray(v){return new Uint8Array(this.readBuffer(v))}readArray(v){const S=this.readU32(),E=Array();for(let d=0;d<S;++d)E.push(v());return E}}t([U],C.prototype,"readU8",null),t([U],C.prototype,"readU16",null),t([U],C.prototype,"readU32",null),t([U],C.prototype,"readU64",null),t([U],C.prototype,"readU128",null),t([U],C.prototype,"readU256",null),t([U],C.prototype,"readU512",null),t([U],C.prototype,"readString",null),t([U],C.prototype,"readFixedArray",null),t([U],C.prototype,"readArray",null),Ie.BinaryReader=C;function H(m){return m.charAt(0).toUpperCase()+m.slice(1)}function z(m,v,S,E,d){try{if(typeof E=="string")d[`write${H(E)}`](S);else if(E instanceof Array)if(typeof E[0]=="number"){if(S.length!==E[0])throw new M(`Expecting byte array of length ${E[0]}, but got ${S.length} bytes`);d.writeFixedArray(S)}else if(E.length===2&&typeof E[1]=="number"){if(S.length!==E[1])throw new M(`Expecting byte array of length ${E[1]}, but got ${S.length} bytes`);for(let a=0;a<E[1];a++)z(m,null,S[a],E[0],d)}else d.writeArray(S,a=>{z(m,v,a,E[0],d)});else if(E.kind!==void 0)switch(E.kind){case"option":{S==null?d.writeU8(0):(d.writeU8(1),z(m,v,S,E.type,d));break}case"map":{d.writeU32(S.size),S.forEach((a,f)=>{z(m,v,f,E.key,d),z(m,v,a,E.value,d)});break}default:throw new M(`FieldType ${E} unrecognized`)}else j(m,S,d)}catch(a){throw a instanceof M&&a.addToFieldPath(v),a}}function j(m,v,S){if(typeof v.borshSerialize=="function"){v.borshSerialize(S);return}const E=m.get(v.constructor);if(!E)throw new M(`Class ${v.constructor.name} is missing in schema`);if(E.kind==="struct")E.fields.map(([d,a])=>{z(m,d,v[d],a,S)});else if(E.kind==="enum"){const d=v[E.field];for(let a=0;a<E.values.length;++a){const[f,h]=E.values[a];if(f===d){S.writeU8(a),z(m,f,v[f],h,S);break}}}else throw new M(`Unexpected schema kind: ${E.kind} for ${v.constructor.name}`)}function te(m,v,S=F){const E=new S;return j(m,v,E),E.toArray()}Ie.serialize=te;function V(m,v,S,E){try{if(typeof S=="string")return E[`read${H(S)}`]();if(S instanceof Array){if(typeof S[0]=="number")return E.readFixedArray(S[0]);if(typeof S[1]=="number"){const d=[];for(let a=0;a<S[1];a++)d.push(V(m,null,S[0],E));return d}else return E.readArray(()=>V(m,v,S[0],E))}if(S.kind==="option")return E.readU8()?V(m,v,S.type,E):void 0;if(S.kind==="map"){let d=new Map;const a=E.readU32();for(let f=0;f<a;f++){const h=V(m,v,S.key,E),w=V(m,v,S.value,E);d.set(h,w)}return d}return Y(m,S,E)}catch(d){throw d instanceof M&&d.addToFieldPath(v),d}}function Y(m,v,S){if(typeof v.borshDeserialize=="function")return v.borshDeserialize(S);const E=m.get(v);if(!E)throw new M(`Class ${v.name} is missing in schema`);if(E.kind==="struct"){const d={};for(const[a,f]of m.get(v).fields)d[a]=V(m,a,f,S);return new v(d)}if(E.kind==="enum"){const d=S.readU8();if(d>=E.values.length)throw new M(`Enum index: ${d} is out of range`);const[a,f]=E.values[d],h=V(m,a,f,S);return new v({[a]:h})}throw new M(`Unexpected schema kind: ${E.kind} for ${v.constructor.name}`)}function ne(m,v,S,E=C){const d=new E(S),a=Y(m,v,d);if(d.offset<S.length)throw new M(`Unexpected ${S.length-d.offset} bytes after deserialized data`);return a}Ie.deserialize=ne;function x(m,v,S,E=C){const d=new E(S);return Y(m,v,d)}return Ie.deserializeUnchecked=x,Ie}var Ai=_u(),$={},fo;function Iu(){if(fo)return $;fo=1,Object.defineProperty($,"__esModule",{value:!0}),$.s16=$.s8=$.nu64be=$.u48be=$.u40be=$.u32be=$.u24be=$.u16be=$.nu64=$.u48=$.u40=$.u32=$.u24=$.u16=$.u8=$.offset=$.greedy=$.Constant=$.UTF8=$.CString=$.Blob=$.Boolean=$.BitField=$.BitStructure=$.VariantLayout=$.Union=$.UnionLayoutDiscriminator=$.UnionDiscriminator=$.Structure=$.Sequence=$.DoubleBE=$.Double=$.FloatBE=$.Float=$.NearInt64BE=$.NearInt64=$.NearUInt64BE=$.NearUInt64=$.IntBE=$.Int=$.UIntBE=$.UInt=$.OffsetLayout=$.GreedyCount=$.ExternalLayout=$.bindConstructorLayout=$.nameWithProperty=$.Layout=$.uint8ArrayToBuffer=$.checkUint8Array=void 0,$.constant=$.utf8=$.cstr=$.blob=$.unionLayoutDiscriminator=$.union=$.seq=$.bits=$.struct=$.f64be=$.f64=$.f32be=$.f32=$.ns64be=$.s48be=$.s40be=$.s32be=$.s24be=$.s16be=$.ns64=$.s48=$.s40=$.s32=$.s24=void 0;const r=Ln();function e(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$.checkUint8Array=e;function t(u){return e(u),r.Buffer.from(u.buffer,u.byteOffset,u.length)}$.uint8ArrayToBuffer=t;let n=class{constructor(l,A){if(!Number.isInteger(l))throw new TypeError("span must be an integer");this.span=l,this.property=A}makeDestinationObject(){return{}}getSpan(l,A){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(l){const A=Object.create(this.constructor.prototype);return Object.assign(A,this),A.property=l,A}fromArray(l){}};$.Layout=n;function s(u,l){return l.property?u+"["+l.property+"]":u}$.nameWithProperty=s;function i(u,l){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(l&&l instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(l,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=l,l.boundConstructor_=u,l.makeDestinationObject=(()=>new u),Object.defineProperty(u.prototype,"encode",{value(A,R){return l.encode(this,A,R)},writable:!0}),Object.defineProperty(u,"decode",{value(A,R){return l.decode(A,R)},writable:!0})}$.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}$.ExternalLayout=o;class c extends o{constructor(l=1,A){if(!Number.isInteger(l)||0>=l)throw new TypeError("elementSpan must be a (positive) integer");super(-1,A),this.elementSpan=l}isCount(){return!0}decode(l,A=0){e(l);const R=l.length-A;return Math.floor(R/this.elementSpan)}encode(l,A,R){return 0}}$.GreedyCount=c;class g extends o{constructor(l,A=0,R){if(!(l instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(A))throw new TypeError("offset must be integer or undefined");super(l.span,R||l.property),this.layout=l,this.offset=A}isCount(){return this.layout instanceof _||this.layout instanceof I}decode(l,A=0){return this.layout.decode(l,A+this.offset)}encode(l,A,R=0){return this.layout.encode(l,A,R+this.offset)}}$.OffsetLayout=g;class _ extends n{constructor(l,A){if(super(l,A),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,A=0){return t(l).readUIntLE(A,this.span)}encode(l,A,R=0){return t(A).writeUIntLE(l,R,this.span),this.span}}$.UInt=_;class I extends n{constructor(l,A){if(super(l,A),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,A=0){return t(l).readUIntBE(A,this.span)}encode(l,A,R=0){return t(A).writeUIntBE(l,R,this.span),this.span}}$.UIntBE=I;class T extends n{constructor(l,A){if(super(l,A),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,A=0){return t(l).readIntLE(A,this.span)}encode(l,A,R=0){return t(A).writeIntLE(l,R,this.span),this.span}}$.Int=T;class D extends n{constructor(l,A){if(super(l,A),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,A=0){return t(l).readIntBE(A,this.span)}encode(l,A,R=0){return t(A).writeIntBE(l,R,this.span),this.span}}$.IntBE=D;const M=Math.pow(2,32);function F(u){const l=Math.floor(u/M),A=u-l*M;return{hi32:l,lo32:A}}function U(u,l){return u*M+l}class C extends n{constructor(l){super(8,l)}decode(l,A=0){const R=t(l),q=R.readUInt32LE(A),G=R.readUInt32LE(A+4);return U(G,q)}encode(l,A,R=0){const q=F(l),G=t(A);return G.writeUInt32LE(q.lo32,R),G.writeUInt32LE(q.hi32,R+4),8}}$.NearUInt64=C;class H extends n{constructor(l){super(8,l)}decode(l,A=0){const R=t(l),q=R.readUInt32BE(A),G=R.readUInt32BE(A+4);return U(q,G)}encode(l,A,R=0){const q=F(l),G=t(A);return G.writeUInt32BE(q.hi32,R),G.writeUInt32BE(q.lo32,R+4),8}}$.NearUInt64BE=H;class z extends n{constructor(l){super(8,l)}decode(l,A=0){const R=t(l),q=R.readUInt32LE(A),G=R.readInt32LE(A+4);return U(G,q)}encode(l,A,R=0){const q=F(l),G=t(A);return G.writeUInt32LE(q.lo32,R),G.writeInt32LE(q.hi32,R+4),8}}$.NearInt64=z;class j extends n{constructor(l){super(8,l)}decode(l,A=0){const R=t(l),q=R.readInt32BE(A),G=R.readUInt32BE(A+4);return U(q,G)}encode(l,A,R=0){const q=F(l),G=t(A);return G.writeInt32BE(q.hi32,R),G.writeUInt32BE(q.lo32,R+4),8}}$.NearInt64BE=j;class te extends n{constructor(l){super(4,l)}decode(l,A=0){return t(l).readFloatLE(A)}encode(l,A,R=0){return t(A).writeFloatLE(l,R),4}}$.Float=te;class V extends n{constructor(l){super(4,l)}decode(l,A=0){return t(l).readFloatBE(A)}encode(l,A,R=0){return t(A).writeFloatBE(l,R),4}}$.FloatBE=V;class Y extends n{constructor(l){super(8,l)}decode(l,A=0){return t(l).readDoubleLE(A)}encode(l,A,R=0){return t(A).writeDoubleLE(l,R),8}}$.Double=Y;class ne extends n{constructor(l){super(8,l)}decode(l,A=0){return t(l).readDoubleBE(A)}encode(l,A,R=0){return t(A).writeDoubleBE(l,R),8}}$.DoubleBE=ne;class x extends n{constructor(l,A,R){if(!(l instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(A instanceof o&&A.isCount()||Number.isInteger(A)&&0<=A))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let q=-1;!(A instanceof o)&&0<l.span&&(q=A*l.span),super(q,R),this.elementLayout=l,this.count=A}getSpan(l,A=0){if(0<=this.span)return this.span;let R=0,q=this.count;if(q instanceof o&&(q=q.decode(l,A)),0<this.elementLayout.span)R=q*this.elementLayout.span;else{let G=0;for(;G<q;)R+=this.elementLayout.getSpan(l,A+R),++G}return R}decode(l,A=0){const R=[];let q=0,G=this.count;for(G instanceof o&&(G=G.decode(l,A));q<G;)R.push(this.elementLayout.decode(l,A)),A+=this.elementLayout.getSpan(l,A),q+=1;return R}encode(l,A,R=0){const q=this.elementLayout,G=l.reduce((oe,ue)=>oe+q.encode(ue,A,R+oe),0);return this.count instanceof o&&this.count.encode(l.length,A,R),G}}$.Sequence=x;class m extends n{constructor(l,A,R){if(!(Array.isArray(l)&&l.reduce((G,oe)=>G&&oe instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof A=="boolean"&&R===void 0&&(R=A,A=void 0);for(const G of l)if(0>G.span&&G.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let q=-1;try{q=l.reduce((G,oe)=>G+oe.getSpan(),0)}catch{}super(q,A),this.fields=l,this.decodePrefixes=!!R}getSpan(l,A=0){if(0<=this.span)return this.span;let R=0;try{R=this.fields.reduce((q,G)=>{const oe=G.getSpan(l,A);return A+=oe,q+oe},0)}catch{throw new RangeError("indeterminate span")}return R}decode(l,A=0){e(l);const R=this.makeDestinationObject();for(const q of this.fields)if(q.property!==void 0&&(R[q.property]=q.decode(l,A)),A+=q.getSpan(l,A),this.decodePrefixes&&l.length===A)break;return R}encode(l,A,R=0){const q=R;let G=0,oe=0;for(const ue of this.fields){let Fe=ue.span;if(oe=0<Fe?Fe:0,ue.property!==void 0){const pe=l[ue.property];pe!==void 0&&(oe=ue.encode(pe,A,R),0>Fe&&(Fe=ue.getSpan(A,R)))}G=R,R+=Fe}return G+oe-q}fromArray(l){const A=this.makeDestinationObject();for(const R of this.fields)R.property!==void 0&&0<l.length&&(A[R.property]=l.shift());return A}layoutFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const A of this.fields)if(A.property===l)return A}offsetOf(l){if(typeof l!="string")throw new TypeError("property must be string");let A=0;for(const R of this.fields){if(R.property===l)return A;0>R.span?A=-1:0<=A&&(A+=R.span)}}}$.Structure=m;class v{constructor(l){this.property=l}decode(l,A){throw new Error("UnionDiscriminator is abstract")}encode(l,A,R){throw new Error("UnionDiscriminator is abstract")}}$.UnionDiscriminator=v;class S extends v{constructor(l,A){if(!(l instanceof o&&l.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(A||l.property||"variant"),this.layout=l}decode(l,A){return this.layout.decode(l,A)}encode(l,A,R){return this.layout.encode(l,A,R)}}$.UnionLayoutDiscriminator=S;class E extends n{constructor(l,A,R){let q;if(l instanceof _||l instanceof I)q=new S(new g(l));else if(l instanceof o&&l.isCount())q=new S(l);else if(l instanceof v)q=l;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(A===void 0&&(A=null),!(A===null||A instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(A!==null){if(0>A.span)throw new Error("defaultLayout must have constant span");A.property===void 0&&(A=A.replicate("content"))}let G=-1;A&&(G=A.span,0<=G&&(l instanceof _||l instanceof I)&&(G+=q.layout.span)),super(G,R),this.discriminator=q,this.usesPrefixDiscriminator=l instanceof _||l instanceof I,this.defaultLayout=A,this.registry={};let oe=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ue){return oe(ue)},this.configGetSourceVariant=function(ue){oe=ue.bind(this)}}getSpan(l,A=0){if(0<=this.span)return this.span;const R=this.getVariant(l,A);if(!R)throw new Error("unable to determine span for unrecognized variant");return R.getSpan(l,A)}defaultGetSourceVariant(l){if(Object.prototype.hasOwnProperty.call(l,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(l,this.defaultLayout.property))return;const A=this.registry[l[this.discriminator.property]];if(A&&(!A.layout||A.property&&Object.prototype.hasOwnProperty.call(l,A.property)))return A}else for(const A in this.registry){const R=this.registry[A];if(R.property&&Object.prototype.hasOwnProperty.call(l,R.property))return R}throw new Error("unable to infer src variant")}decode(l,A=0){let R;const q=this.discriminator,G=q.decode(l,A),oe=this.registry[G];if(oe===void 0){const ue=this.defaultLayout;let Fe=0;this.usesPrefixDiscriminator&&(Fe=q.layout.span),R=this.makeDestinationObject(),R[q.property]=G,R[ue.property]=ue.decode(l,A+Fe)}else R=oe.decode(l,A);return R}encode(l,A,R=0){const q=this.getSourceVariant(l);if(q===void 0){const G=this.discriminator,oe=this.defaultLayout;let ue=0;return this.usesPrefixDiscriminator&&(ue=G.layout.span),G.encode(l[G.property],A,R),ue+oe.encode(l[oe.property],A,R+ue)}return q.encode(l,A,R)}addVariant(l,A,R){const q=new d(this,l,A,R);return this.registry[l]=q,q}getVariant(l,A=0){let R;return l instanceof Uint8Array?R=this.discriminator.decode(l,A):R=l,this.registry[R]}}$.Union=E;class d extends n{constructor(l,A,R,q){if(!(l instanceof E))throw new TypeError("union must be a Union");if(!Number.isInteger(A)||0>A)throw new TypeError("variant must be a (non-negative) integer");if(typeof R=="string"&&q===void 0&&(q=R,R=null),R){if(!(R instanceof n))throw new TypeError("layout must be a Layout");if(l.defaultLayout!==null&&0<=R.span&&R.span>l.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof q!="string")throw new TypeError("variant must have a String property")}let G=l.span;0>l.span&&(G=R?R.span:0,0<=G&&l.usesPrefixDiscriminator&&(G+=l.discriminator.layout.span)),super(G,q),this.union=l,this.variant=A,this.layout=R||null}getSpan(l,A=0){if(0<=this.span)return this.span;let R=0;this.union.usesPrefixDiscriminator&&(R=this.union.discriminator.layout.span);let q=0;return this.layout&&(q=this.layout.getSpan(l,A+R)),R+q}decode(l,A=0){const R=this.makeDestinationObject();if(this!==this.union.getVariant(l,A))throw new Error("variant mismatch");let q=0;return this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout?R[this.property]=this.layout.decode(l,A+q):this.property?R[this.property]=!0:this.union.usesPrefixDiscriminator&&(R[this.union.discriminator.property]=this.variant),R}encode(l,A,R=0){let q=0;if(this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(l,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,A,R);let G=q;if(this.layout&&(this.layout.encode(l[this.property],A,R+q),G+=this.layout.getSpan(A,R+q),0<=this.union.span&&G>this.union.span))throw new Error("encoded variant overruns containing union");return G}fromArray(l){if(this.layout)return this.layout.fromArray(l)}}$.VariantLayout=d;function a(u){return 0>u&&(u+=4294967296),u}class f extends n{constructor(l,A,R){if(!(l instanceof _||l instanceof I))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof A=="string"&&R===void 0&&(R=A,A=!1),4<l.span)throw new RangeError("word cannot exceed 32 bits");super(l.span,R),this.word=l,this.msb=!!A,this.fields=[];let q=0;this._packedSetValue=function(G){return q=a(G),this},this._packedGetValue=function(){return q}}decode(l,A=0){const R=this.makeDestinationObject(),q=this.word.decode(l,A);this._packedSetValue(q);for(const G of this.fields)G.property!==void 0&&(R[G.property]=G.decode(l));return R}encode(l,A,R=0){const q=this.word.decode(A,R);this._packedSetValue(q);for(const G of this.fields)if(G.property!==void 0){const oe=l[G.property];oe!==void 0&&G.encode(oe)}return this.word.encode(this._packedGetValue(),A,R)}addField(l,A){const R=new h(this,l,A);return this.fields.push(R),R}addBoolean(l){const A=new w(this,l);return this.fields.push(A),A}fieldFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const A of this.fields)if(A.property===l)return A}}$.BitStructure=f;class h{constructor(l,A,R){if(!(l instanceof f))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(A)||0>=A)throw new TypeError("bits must be positive integer");const q=8*l.span,G=l.fields.reduce((oe,ue)=>oe+ue.bits,0);if(A+G>q)throw new Error("bits too long for span remainder ("+(q-G)+" of "+q+" remain)");this.container=l,this.bits=A,this.valueMask=(1<<A)-1,A===32&&(this.valueMask=4294967295),this.start=G,this.container.msb&&(this.start=q-G-A),this.wordMask=a(this.valueMask<<this.start),this.property=R}decode(l,A){const R=this.container._packedGetValue();return a(R&this.wordMask)>>>this.start}encode(l){if(typeof l!="number"||!Number.isInteger(l)||l!==a(l&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const A=this.container._packedGetValue(),R=a(l<<this.start);this.container._packedSetValue(a(A&~this.wordMask)|R)}}$.BitField=h;class w extends h{constructor(l,A){super(l,1,A)}decode(l,A){return!!super.decode(l,A)}encode(l){typeof l=="boolean"&&(l=+l),super.encode(l)}}$.Boolean=w;class b extends n{constructor(l,A){if(!(l instanceof o&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let R=-1;l instanceof o||(R=l),super(R,A),this.length=l}getSpan(l,A){let R=this.span;return 0>R&&(R=this.length.decode(l,A)),R}decode(l,A=0){let R=this.span;return 0>R&&(R=this.length.decode(l,A)),t(l).slice(A,A+R)}encode(l,A,R){let q=this.length;if(this.length instanceof o&&(q=l.length),!(l instanceof Uint8Array&&q===l.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+q+") Uint8Array as src");if(R+q>A.length)throw new RangeError("encoding overruns Uint8Array");const G=t(l);return t(A).write(G.toString("hex"),R,q,"hex"),this.length instanceof o&&this.length.encode(q,A,R),q}}$.Blob=b;class B extends n{constructor(l){super(-1,l)}getSpan(l,A=0){e(l);let R=A;for(;R<l.length&&l[R]!==0;)R+=1;return 1+R-A}decode(l,A=0){const R=this.getSpan(l,A);return t(l).slice(A,A+R-1).toString("utf-8")}encode(l,A,R=0){typeof l!="string"&&(l=String(l));const q=r.Buffer.from(l,"utf8"),G=q.length;if(R+G>A.length)throw new RangeError("encoding overruns Buffer");const oe=t(A);return q.copy(oe,R),oe[R+G]=0,G+1}}$.CString=B;class N extends n{constructor(l,A){if(typeof l=="string"&&A===void 0&&(A=l,l=void 0),l===void 0)l=-1;else if(!Number.isInteger(l))throw new TypeError("maxSpan must be an integer");super(-1,A),this.maxSpan=l}getSpan(l,A=0){return e(l),l.length-A}decode(l,A=0){const R=this.getSpan(l,A);if(0<=this.maxSpan&&this.maxSpan<R)throw new RangeError("text length exceeds maxSpan");return t(l).slice(A,A+R).toString("utf-8")}encode(l,A,R=0){typeof l!="string"&&(l=String(l));const q=r.Buffer.from(l,"utf8"),G=q.length;if(0<=this.maxSpan&&this.maxSpan<G)throw new RangeError("text length exceeds maxSpan");if(R+G>A.length)throw new RangeError("encoding overruns Buffer");return q.copy(t(A),R),G}}$.UTF8=N;class k extends n{constructor(l,A){super(0,A),this.value=l}decode(l,A){return this.value}encode(l,A,R){return 0}}return $.Constant=k,$.greedy=((u,l)=>new c(u,l)),$.offset=((u,l,A)=>new g(u,l,A)),$.u8=(u=>new _(1,u)),$.u16=(u=>new _(2,u)),$.u24=(u=>new _(3,u)),$.u32=(u=>new _(4,u)),$.u40=(u=>new _(5,u)),$.u48=(u=>new _(6,u)),$.nu64=(u=>new C(u)),$.u16be=(u=>new I(2,u)),$.u24be=(u=>new I(3,u)),$.u32be=(u=>new I(4,u)),$.u40be=(u=>new I(5,u)),$.u48be=(u=>new I(6,u)),$.nu64be=(u=>new H(u)),$.s8=(u=>new T(1,u)),$.s16=(u=>new T(2,u)),$.s24=(u=>new T(3,u)),$.s32=(u=>new T(4,u)),$.s40=(u=>new T(5,u)),$.s48=(u=>new T(6,u)),$.ns64=(u=>new z(u)),$.s16be=(u=>new D(2,u)),$.s24be=(u=>new D(3,u)),$.s32be=(u=>new D(4,u)),$.s40be=(u=>new D(5,u)),$.s48be=(u=>new D(6,u)),$.ns64be=(u=>new j(u)),$.f32=(u=>new te(u)),$.f32be=(u=>new V(u)),$.f64=(u=>new Y(u)),$.f64be=(u=>new ne(u)),$.struct=((u,l,A)=>new m(u,l,A)),$.bits=((u,l,A)=>new f(u,l,A)),$.seq=((u,l,A)=>new x(u,l,A)),$.union=((u,l,A)=>new E(u,l,A)),$.unionLayoutDiscriminator=((u,l)=>new S(u,l)),$.blob=((u,l)=>new b(u,l)),$.cstr=(u=>new B(u)),$.utf8=((u,l)=>new N(u,l)),$.constant=((u,l)=>new k(u,l)),$}var L=Iu(),Bu=8078e3,Ru=8078001,Mu=8078004,Pu=8078005,Tu=8078006,Lu=8078011;function ga(r){return Array.isArray(r)?"%5B"+r.map(ga).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function Cu([r,e]){return`${r}=${ga(e)}`}function Ou(r){const e=Object.entries(r).map(Cu).join("&");return btoa(e)}function Nu(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${Ou(e)}'`),`${t}\``}}var Ir=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){const{cause:i,...o}=e;i&&(n={cause:i}),Object.keys(o).length>0&&(t=o)}const s=Nu(r,t);super(s,n),this.context={__code:r,...t},this.name="SolanaError"}};function Uu(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function zu(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(Uu(e,r));return r.write(e,t,0),t}})}function Fu(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function Er(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Du(r,e){if(Er(r)!==Er(e))throw new Ir(Mu);if(Er(r)&&Er(e)&&r.fixedSize!==e.fixedSize)throw new Ir(Pu,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!Er(r)&&!Er(e)&&r.maxSize!==e.maxSize)throw new Ir(Tu,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function qu(r,e,t=0){if(e.length-t<=0)throw new Ir(Bu,{codecDescription:r})}function Ku(r,e,t,n=0){const s=t.length-n;if(s<e)throw new Ir(Ru,{bytesLength:s,codecDescription:r,expected:e})}function Wu(r,e,t,n){if(n<e||n>t)throw new Ir(Lu,{codecDescription:r,max:t,min:e,value:n})}function ya(r){return r?.endian!==1}function Hu(r){return zu({fixedSize:r.size,write(e,t,n){r.range&&Wu(r.name,r.range[0],r.range[1],e);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),e,ya(r.config)),t.set(new Uint8Array(s),n),n+r.size}})}function $u(r){return Fu({fixedSize:r.size,read(e,t=0){qu(r.name,e,t),Ku(r.name,r.size,e,t);const n=new DataView(Vu(e,t,r.size));return[r.get(n,ya(r.config)),t+r.size]}})}function Vu(r,e,t){const n=r.byteOffset+(e??0),s=t??r.byteLength;return r.buffer.slice(n,n+s)}var ma=(r={})=>Hu({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Gu=(r={})=>$u({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),ju=(r={})=>Du(ma(r),Gu(r));class Zu extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:c}=e,g=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??g),i!=null&&(this.cause=g),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function Yu(r){return nn(r)&&typeof r[Symbol.iterator]=="function"}function nn(r){return typeof r=="object"&&r!=null}function Bn(r){return nn(r)&&!Array.isArray(r)}function Ot(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function Ju(r){const{done:e,value:t}=r.next();return e?void 0:t}function Xu(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:c,message:g=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${Ot(n)}\``}=r;return{value:n,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...r,message:g}}function*lo(r,e,t,n){Yu(r)||(r=[r]);for(const s of r){const i=Xu(s,e,t,n);i&&(yield i)}}function*fs(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,c={path:n,branch:s,mask:o};i&&(r=e.coercer(r,c));let g="valid";for(const _ of e.validator(r,c))_.explanation=t.message,g="not_valid",yield[_,void 0];for(let[_,I,T]of e.entries(r,c)){const D=fs(I,T,{path:_===void 0?n:[...n,_],branch:_===void 0?s:[...s,I],coerce:i,mask:o,message:t.message});for(const M of D)M[0]?(g=M[0].refinement!=null?"not_refined":"not_valid",yield[M[0],void 0]):i&&(I=M[1],_===void 0?r=I:r instanceof Map?r.set(_,I):r instanceof Set?r.add(I):nn(r)&&(I!==void 0||_ in r)&&(r[_]=I))}if(g!=="not_valid")for(const _ of e.refiner(r,c))_.explanation=t.message,g="not_refined",yield[_,void 0];g==="valid"&&(yield[void 0,r])}let $t=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=g=>g,entries:c=function*(){}}=e;this.type=t,this.schema=n,this.entries=c,this.coercer=o,s?this.validator=(g,_)=>{const I=s(g,_);return lo(I,_,this,g)}:this.validator=()=>[],i?this.refiner=(g,_)=>{const I=i(g,_);return lo(I,_,this,g)}:this.refiner=()=>[]}assert(e,t){return wa(e,this,t)}create(e,t){return re(e,this,t)}is(e){return ba(e,this)}mask(e,t){return Qu(e,this,t)}validate(e,t={}){return sn(e,this,t)}};function wa(r,e,t){const n=sn(r,e,{message:t});if(n[0])throw n[0]}function re(r,e,t){const n=sn(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Qu(r,e,t){const n=sn(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function ba(r,e){return!sn(r,e)[0]}function sn(r,e,t={}){const n=fs(r,e,t),s=Ju(n);return s[0]?[new Zu(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function wr(r,e){return new $t({type:r,schema:null,validator:e})}function ef(){return wr("any",()=>!0)}function ie(r){return new $t({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ot(e)}`}})}function Ht(){return wr("boolean",r=>typeof r=="boolean")}function ls(r){return wr("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ot(e)}`)}function Ne(r){const e=Ot(r),t=typeof r;return new $t({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Ot(n)}`}})}function tf(){return wr("never",()=>!1)}function se(r){return new $t({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function W(){return wr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ot(r)}`)}function le(r){return new $t({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function va(r,e){return new $t({type:"record",schema:null,*entries(t){if(nn(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return Bn(t)||`Expected an object, but received: ${Ot(t)}`},coercer(t){return Bn(t)?{...t}:t}})}function ee(){return wr("string",r=>typeof r=="string"||`Expected a string, but received: ${Ot(r)}`)}function hs(r){const e=tf();return new $t({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Ot(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function J(r){const e=Object.keys(r);return new $t({type:"type",schema:r,*entries(t){if(nn(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return Bn(t)||`Expected an object, but received: ${Ot(t)}`},coercer(t){return Bn(t)?{...t}:t}})}function Et(r){const e=r.map(t=>t.type).join(" | ");return new $t({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=fs(t,i,n),[c]=o;if(c[0])for(const[g]of o)g&&s.push(g);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ot(t)}`,...s]}})}function zr(){return wr("unknown",()=>!0)}function on(r,e,t){return new $t({...r,coercer:(n,s)=>ba(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var gn,rf=new Uint8Array(16);function ka(){if(!gn&&(gn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!gn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gn(rf)}const nf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dn(r){return typeof r=="string"&&nf.test(r)}var pt=[];for(var _i=0;_i<256;++_i)pt.push((_i+256).toString(16).substr(1));function qn(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(pt[r[e+0]]+pt[r[e+1]]+pt[r[e+2]]+pt[r[e+3]]+"-"+pt[r[e+4]]+pt[r[e+5]]+"-"+pt[r[e+6]]+pt[r[e+7]]+"-"+pt[r[e+8]]+pt[r[e+9]]+"-"+pt[r[e+10]]+pt[r[e+11]]+pt[r[e+12]]+pt[r[e+13]]+pt[r[e+14]]+pt[r[e+15]]).toLowerCase();if(!Dn(t))throw TypeError("Stringified UUID is invalid");return t}var ho,Ii,Bi=0,Ri=0;function sf(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||ho,o=r.clockseq!==void 0?r.clockseq:Ii;if(i==null||o==null){var c=r.random||(r.rng||ka)();i==null&&(i=ho=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Ii=(c[6]<<8|c[7])&16383)}var g=r.msecs!==void 0?r.msecs:Date.now(),_=r.nsecs!==void 0?r.nsecs:Ri+1,I=g-Bi+(_-Ri)/1e4;if(I<0&&r.clockseq===void 0&&(o=o+1&16383),(I<0||g>Bi)&&r.nsecs===void 0&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Bi=g,Ri=_,Ii=o,g+=122192928e5;var T=((g&268435455)*1e4+_)%4294967296;s[n++]=T>>>24&255,s[n++]=T>>>16&255,s[n++]=T>>>8&255,s[n++]=T&255;var D=g/4294967296*1e4&268435455;s[n++]=D>>>8&255,s[n++]=D&255,s[n++]=D>>>24&15|16,s[n++]=D>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var M=0;M<6;++M)s[n+M]=i[M];return e||qn(s)}function xa(r){if(!Dn(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function of(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var af="6ba7b810-9dad-11d1-80b4-00c04fd430c8",cf="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Sa(r,e,t){function n(s,i,o,c){if(typeof s=="string"&&(s=of(s)),typeof i=="string"&&(i=xa(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+s.length);if(g.set(i),g.set(s,i.length),g=t(g),g[6]=g[6]&15|e,g[8]=g[8]&63|128,o){c=c||0;for(var _=0;_<16;++_)o[c+_]=g[_];return o}return qn(g)}try{n.name=r}catch{}return n.DNS=af,n.URL=cf,n}function uf(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return ff(lf(hf(r),r.length*8))}function ff(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function Ea(r){return(r+64>>>9<<4)+14+1}function lf(r,e){r[e>>5]|=128<<e%32,r[Ea(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var c=t,g=n,_=s,I=i;t=bt(t,n,s,i,r[o],7,-680876936),i=bt(i,t,n,s,r[o+1],12,-389564586),s=bt(s,i,t,n,r[o+2],17,606105819),n=bt(n,s,i,t,r[o+3],22,-1044525330),t=bt(t,n,s,i,r[o+4],7,-176418897),i=bt(i,t,n,s,r[o+5],12,1200080426),s=bt(s,i,t,n,r[o+6],17,-1473231341),n=bt(n,s,i,t,r[o+7],22,-45705983),t=bt(t,n,s,i,r[o+8],7,1770035416),i=bt(i,t,n,s,r[o+9],12,-1958414417),s=bt(s,i,t,n,r[o+10],17,-42063),n=bt(n,s,i,t,r[o+11],22,-1990404162),t=bt(t,n,s,i,r[o+12],7,1804603682),i=bt(i,t,n,s,r[o+13],12,-40341101),s=bt(s,i,t,n,r[o+14],17,-1502002290),n=bt(n,s,i,t,r[o+15],22,1236535329),t=vt(t,n,s,i,r[o+1],5,-165796510),i=vt(i,t,n,s,r[o+6],9,-1069501632),s=vt(s,i,t,n,r[o+11],14,643717713),n=vt(n,s,i,t,r[o],20,-373897302),t=vt(t,n,s,i,r[o+5],5,-701558691),i=vt(i,t,n,s,r[o+10],9,38016083),s=vt(s,i,t,n,r[o+15],14,-660478335),n=vt(n,s,i,t,r[o+4],20,-405537848),t=vt(t,n,s,i,r[o+9],5,568446438),i=vt(i,t,n,s,r[o+14],9,-1019803690),s=vt(s,i,t,n,r[o+3],14,-187363961),n=vt(n,s,i,t,r[o+8],20,1163531501),t=vt(t,n,s,i,r[o+13],5,-1444681467),i=vt(i,t,n,s,r[o+2],9,-51403784),s=vt(s,i,t,n,r[o+7],14,1735328473),n=vt(n,s,i,t,r[o+12],20,-1926607734),t=kt(t,n,s,i,r[o+5],4,-378558),i=kt(i,t,n,s,r[o+8],11,-2022574463),s=kt(s,i,t,n,r[o+11],16,1839030562),n=kt(n,s,i,t,r[o+14],23,-35309556),t=kt(t,n,s,i,r[o+1],4,-1530992060),i=kt(i,t,n,s,r[o+4],11,1272893353),s=kt(s,i,t,n,r[o+7],16,-155497632),n=kt(n,s,i,t,r[o+10],23,-1094730640),t=kt(t,n,s,i,r[o+13],4,681279174),i=kt(i,t,n,s,r[o],11,-358537222),s=kt(s,i,t,n,r[o+3],16,-722521979),n=kt(n,s,i,t,r[o+6],23,76029189),t=kt(t,n,s,i,r[o+9],4,-640364487),i=kt(i,t,n,s,r[o+12],11,-421815835),s=kt(s,i,t,n,r[o+15],16,530742520),n=kt(n,s,i,t,r[o+2],23,-995338651),t=xt(t,n,s,i,r[o],6,-198630844),i=xt(i,t,n,s,r[o+7],10,1126891415),s=xt(s,i,t,n,r[o+14],15,-1416354905),n=xt(n,s,i,t,r[o+5],21,-57434055),t=xt(t,n,s,i,r[o+12],6,1700485571),i=xt(i,t,n,s,r[o+3],10,-1894986606),s=xt(s,i,t,n,r[o+10],15,-1051523),n=xt(n,s,i,t,r[o+1],21,-2054922799),t=xt(t,n,s,i,r[o+8],6,1873313359),i=xt(i,t,n,s,r[o+15],10,-30611744),s=xt(s,i,t,n,r[o+6],15,-1560198380),n=xt(n,s,i,t,r[o+13],21,1309151649),t=xt(t,n,s,i,r[o+4],6,-145523070),i=xt(i,t,n,s,r[o+11],10,-1120210379),s=xt(s,i,t,n,r[o+2],15,718787259),n=xt(n,s,i,t,r[o+9],21,-343485551),t=sr(t,c),n=sr(n,g),s=sr(s,_),i=sr(i,I)}return[t,n,s,i]}function hf(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Ea(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function sr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function df(r,e){return r<<e|r>>>32-e}function Kn(r,e,t,n,s,i){return sr(df(sr(sr(e,r),sr(n,i)),s),t)}function bt(r,e,t,n,s,i,o){return Kn(e&t|~e&n,r,e,s,i,o)}function vt(r,e,t,n,s,i,o){return Kn(e&n|t&~n,r,e,s,i,o)}function kt(r,e,t,n,s,i,o){return Kn(e^t^n,r,e,s,i,o)}function xt(r,e,t,n,s,i,o){return Kn(t^(e|~n),r,e,s,i,o)}var pf=Sa("v3",48,uf);function gf(r,e,t){r=r||{};var n=r.random||(r.rng||ka)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return qn(n)}function yf(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Mi(r,e){return r<<e|r>>>32-e}function mf(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),c=new Array(o),g=0;g<o;++g){for(var _=new Uint32Array(16),I=0;I<16;++I)_[I]=r[g*64+I*4]<<24|r[g*64+I*4+1]<<16|r[g*64+I*4+2]<<8|r[g*64+I*4+3];c[g]=_}c[o-1][14]=(r.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(r.length-1)*8&4294967295;for(var T=0;T<o;++T){for(var D=new Uint32Array(80),M=0;M<16;++M)D[M]=c[T][M];for(var F=16;F<80;++F)D[F]=Mi(D[F-3]^D[F-8]^D[F-14]^D[F-16],1);for(var U=t[0],C=t[1],H=t[2],z=t[3],j=t[4],te=0;te<80;++te){var V=Math.floor(te/20),Y=Mi(U,5)+yf(V,C,H,z)+j+e[V]+D[te]>>>0;j=z,z=H,H=Mi(C,30)>>>0,C=U,U=Y}t[0]=t[0]+U>>>0,t[1]=t[1]+C>>>0,t[2]=t[2]+H>>>0,t[3]=t[3]+z>>>0,t[4]=t[4]+j>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var wf=Sa("v5",80,mf);const bf="00000000-0000-0000-0000-000000000000";function vf(r){if(!Dn(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const kf=Object.freeze(Object.defineProperty({__proto__:null,NIL:bf,parse:xa,stringify:qn,v1:sf,v3:pf,v4:gf,v5:wf,validate:Dn,version:vf},Symbol.toStringTag,{value:"Module"})),Aa=$o(kf);var Pi,po;function xf(){if(po)return Pi;po=1;const r=Aa.v4;return Pi=function(t,n,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:t};if(o===2&&(c.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");c.params=n}if(typeof s>"u"){const g=typeof i.generator=="function"?i.generator:function(){return r()};c.id=g(c,i)}else o===2&&s===null?i.notificationIdNull&&(c.id=null):c.id=s;return c},Pi}var Ti,go;function Sf(){if(go)return Ti;go=1;const r=Aa.v4,e=xf(),t=function(n,s){if(!(this instanceof t))return new t(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return Ti=t,t.prototype.request=function(n,s,i,o){const c=this;let g=null;const _=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&_)throw new TypeError("JSON-RPC 1.0 does not support batching");if(_||!_&&n&&typeof n=="object"&&typeof s=="function")o=s,g=n;else{typeof i=="function"&&(o=i,i=void 0);const D=typeof o=="function";try{g=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(M){if(D)return o(M);throw M}if(!D)return g}let T;try{T=JSON.stringify(g,this.options.replacer)}catch(D){return o(D)}return this.callServer(T,function(D,M){c._parseResponse(D,M,o)}),g},t.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(c){return i(c)}if(i.length===3)if(Array.isArray(o)){const c=function(_){return typeof _.error<"u"},g=function(_){return!c(_)};return i(null,o.filter(c),o.filter(g))}else return i(null,o.error,o.result);i(null,o)},Ti}var Ef=Sf();const Af=Tn(Ef);var Li={exports:{}},yo;function _f(){return yo||(yo=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(g,_,I){this.fn=g,this.context=_,this.once=I||!1}function i(g,_,I,T,D){if(typeof I!="function")throw new TypeError("The listener must be a function");var M=new s(I,T||g,D),F=t?t+_:_;return g._events[F]?g._events[F].fn?g._events[F]=[g._events[F],M]:g._events[F].push(M):(g._events[F]=M,g._eventsCount++),g}function o(g,_){--g._eventsCount===0?g._events=new n:delete g._events[_]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var _=[],I,T;if(this._eventsCount===0)return _;for(T in I=this._events)e.call(I,T)&&_.push(t?T.slice(1):T);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(I)):_},c.prototype.listeners=function(_){var I=t?t+_:_,T=this._events[I];if(!T)return[];if(T.fn)return[T.fn];for(var D=0,M=T.length,F=new Array(M);D<M;D++)F[D]=T[D].fn;return F},c.prototype.listenerCount=function(_){var I=t?t+_:_,T=this._events[I];return T?T.fn?1:T.length:0},c.prototype.emit=function(_,I,T,D,M,F){var U=t?t+_:_;if(!this._events[U])return!1;var C=this._events[U],H=arguments.length,z,j;if(C.fn){switch(C.once&&this.removeListener(_,C.fn,void 0,!0),H){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,I),!0;case 3:return C.fn.call(C.context,I,T),!0;case 4:return C.fn.call(C.context,I,T,D),!0;case 5:return C.fn.call(C.context,I,T,D,M),!0;case 6:return C.fn.call(C.context,I,T,D,M,F),!0}for(j=1,z=new Array(H-1);j<H;j++)z[j-1]=arguments[j];C.fn.apply(C.context,z)}else{var te=C.length,V;for(j=0;j<te;j++)switch(C[j].once&&this.removeListener(_,C[j].fn,void 0,!0),H){case 1:C[j].fn.call(C[j].context);break;case 2:C[j].fn.call(C[j].context,I);break;case 3:C[j].fn.call(C[j].context,I,T);break;case 4:C[j].fn.call(C[j].context,I,T,D);break;default:if(!z)for(V=1,z=new Array(H-1);V<H;V++)z[V-1]=arguments[V];C[j].fn.apply(C[j].context,z)}}return!0},c.prototype.on=function(_,I,T){return i(this,_,I,T,!1)},c.prototype.once=function(_,I,T){return i(this,_,I,T,!0)},c.prototype.removeListener=function(_,I,T,D){var M=t?t+_:_;if(!this._events[M])return this;if(!I)return o(this,M),this;var F=this._events[M];if(F.fn)F.fn===I&&(!D||F.once)&&(!T||F.context===T)&&o(this,M);else{for(var U=0,C=[],H=F.length;U<H;U++)(F[U].fn!==I||D&&!F[U].once||T&&F[U].context!==T)&&C.push(F[U]);C.length?this._events[M]=C.length===1?C[0]:C:o(this,M)}return this},c.prototype.removeAllListeners=function(_){var I;return _?(I=t?t+_:_,this._events[I]&&o(this,I)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(Li)),Li.exports}var If=_f();const _a=Tn(If);var Bf=class extends _a{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(s){n(s)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function Rf(r,e){return new Bf(r,e)}var Mf=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Pf=class extends _a{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,g){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),g?this.dataPack=g:this.dataPack=new Mf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(r,e),c={jsonrpc:"2.0",method:r,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(c),n,g=>{if(g)return i(g);this.queue[o]={promise:[s,i]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=ae.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let s=0;s<t.params.length;s++)n.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval)))})}};const Tf=BigInt(0),Wr=BigInt(1),Lf=BigInt(2),Cf=BigInt(7),Of=BigInt(256),Nf=BigInt(113),Ia=[],Ba=[],Ra=[];for(let r=0,e=Wr,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Ia.push(2*(5*n+t)),Ba.push((r+1)*(r+2)/2%64);let s=Tf;for(let i=0;i<7;i++)e=(e<<Wr^(e>>Cf)*Nf)%Of,e&Lf&&(s^=Wr<<(Wr<<BigInt(i))-Wr);Ra.push(s)}const Ma=Yo(Ra,!0),Uf=Ma[0],zf=Ma[1],mo=(r,e,t)=>t>32?Sc(r,e,t):kc(r,e,t),wo=(r,e,t)=>t>32?Ec(r,e,t):xc(r,e,t);function Ff(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,g=(o+2)%10,_=t[g],I=t[g+1],T=mo(_,I,1)^t[c],D=wo(_,I,1)^t[c+1];for(let M=0;M<50;M+=10)r[o+M]^=T,r[o+M+1]^=D}let s=r[2],i=r[3];for(let o=0;o<24;o++){const c=Ba[o],g=mo(s,i,c),_=wo(s,i,c),I=Ia[o];s=r[I],i=r[I+1],r[I]=g,r[I+1]=_}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=r[o+c];for(let c=0;c<10;c++)r[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}r[0]^=Uf[n],r[1]^=zf[n]}ar(t)}class ds extends ss{constructor(e,t,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,Yr(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=lc(this.state)}clone(){return this._cloneInto()}keccak(){$s(this.state32),Ff(this.state32,this.rounds),$s(this.state32),this.posOut=0,this.pos=0}update(e){Mr(this),e=Cn(e),Lt(e);const{blockLen:t,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let c=0;c<o;c++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Mr(this,!1),Lt(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Vo(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ar(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new ds(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Df=(r,e,t)=>os(()=>new ds(e,r,t)),bo=Df(1,136,256/8);class Pa extends ss{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,fc(e);const n=Cn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ar(i)}update(e){return Mr(this),this.iHash.update(e),this}digestInto(e){Mr(this),Lt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ta=(r,e,t)=>new Pa(r,e).update(t).digest();Ta.create=(r,e)=>new Pa(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vo(r){r.lowS!==void 0&&gr("lowS",r.lowS),r.prehash!==void 0&&gr("prehash",r.prehash)}class qf extends Error{constructor(e=""){super(e)}}const Yt={Err:qf,_tlv:{encode:(r,e)=>{const{Err:t}=Yt;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=dn(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?dn(s.length/2|128):"";return dn(r)+i+s+e},decode(r,e){const{Err:t}=Yt;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const g=s&127;if(!g)throw new t("tlv.decode(long): indefinite length not supported");if(g>4)throw new t("tlv.decode(long): byte length is too big");const _=e.subarray(n,n+g);if(_.length!==g)throw new t("tlv.decode: length bytes not complete");if(_[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const I of _)o=o<<8|I;if(n+=g,o<128)throw new t("tlv.decode(long): not minimal encoding")}const c=e.subarray(n,n+o);if(c.length!==o)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Yt;if(r<Vr)throw new e("integer: negative integers are not allowed");let t=dn(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Yt;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return On(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Yt,s=qe("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:g}=n.decode(2,i),{v:_,l:I}=n.decode(2,g);if(I.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(_)}},hexFromSig(r){const{_tlv:e,_int:t}=Yt,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},Vr=BigInt(0),Gr=BigInt(1),Kf=BigInt(2),yn=BigInt(3),Wf=BigInt(4);function Hf(r,e,t){function n(s){const i=r.sqr(s),o=r.mul(i,s);return r.add(r.add(o,r.mul(s,e)),t)}return n}function La(r,e,t){const{BYTES:n}=r;function s(i){let o;if(typeof i=="bigint")o=i;else{let c=qe("private key",i);if(e){if(!e.includes(c.length*2))throw new Error("invalid private key");const g=new Uint8Array(n);g.set(c,g.length-c.length),c=g}try{o=r.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(t&&(o=r.create(o)),!r.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function $f(r,e={}){const{Fp:t,Fn:n}=ha("weierstrass",r,e),{h:s,n:i}=r;rn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!t.is0(r.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function c(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function g(x,m,v){const{x:S,y:E}=m.toAffine(),d=t.toBytes(S);if(gr("isCompressed",v),v){c();const a=!t.isOdd(E);return Qt(Ca(a),d)}else return Qt(Uint8Array.of(4),d,t.toBytes(E))}function _(x){Lt(x);const m=t.BYTES,v=m+1,S=2*m+1,E=x.length,d=x[0],a=x.subarray(1);if(E===v&&(d===2||d===3)){const f=t.fromBytes(a);if(!t.isValid(f))throw new Error("bad point: is not on curve, wrong x");const h=D(f);let w;try{w=t.sqrt(h)}catch(N){const k=N instanceof Error?": "+N.message:"";throw new Error("bad point: is not on curve, sqrt error"+k)}c();const b=t.isOdd(w);return(d&1)===1!==b&&(w=t.neg(w)),{x:f,y:w}}else if(E===S&&d===4){const f=t.fromBytes(a.subarray(m*0,m*1)),h=t.fromBytes(a.subarray(m*1,m*2));if(!M(f,h))throw new Error("bad point: is not on curve");return{x:f,y:h}}else throw new Error(`bad point: got length ${E}, expected compressed=${v} or uncompressed=${S}`)}const I=e.toBytes||g,T=e.fromBytes||_,D=Hf(t,r.a,r.b);function M(x,m){const v=t.sqr(m),S=D(x);return t.eql(v,S)}if(!M(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const F=t.mul(t.pow(r.a,yn),Wf),U=t.mul(t.sqr(r.b),BigInt(27));if(t.is0(t.add(F,U)))throw new Error("bad curve params: a or b");function C(x,m,v=!1){if(!t.isValid(m)||v&&t.is0(m))throw new Error(`bad point coordinate ${x}`);return m}function H(x){if(!(x instanceof V))throw new Error("ProjectivePoint expected")}const z=Sn((x,m)=>{const{px:v,py:S,pz:E}=x;if(t.eql(E,t.ONE))return{x:v,y:S};const d=x.is0();m==null&&(m=d?t.ONE:t.inv(E));const a=t.mul(v,m),f=t.mul(S,m),h=t.mul(E,m);if(d)return{x:t.ZERO,y:t.ZERO};if(!t.eql(h,t.ONE))throw new Error("invZ was invalid");return{x:a,y:f}}),j=Sn(x=>{if(x.is0()){if(e.allowInfinityPoint&&!t.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:m,y:v}=x.toAffine();if(!t.isValid(m)||!t.isValid(v))throw new Error("bad point: x or y not field elements");if(!M(m,v))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function te(x,m,v,S,E){return v=new V(t.mul(v.px,x),v.py,v.pz),m=$r(S,m),v=$r(E,v),m.add(v)}class V{constructor(m,v,S){this.px=C("x",m),this.py=C("y",v,!0),this.pz=C("z",S),Object.freeze(this)}static fromAffine(m){const{x:v,y:S}=m||{};if(!m||!t.isValid(v)||!t.isValid(S))throw new Error("invalid affine point");if(m instanceof V)throw new Error("projective point not allowed");return t.is0(v)&&t.is0(S)?V.ZERO:new V(v,S,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){return aa(V,"pz",m)}static fromBytes(m){return Lt(m),V.fromHex(m)}static fromHex(m){const v=V.fromAffine(T(qe("pointHex",m)));return v.assertValidity(),v}static fromPrivateKey(m){const v=La(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return V.BASE.multiply(v(m))}static msm(m,v){return la(V,n,m,v)}precompute(m=8,v=!0){return ne.setWindowSize(this,m),v||this.multiply(yn),this}_setWindowSize(m){this.precompute(m)}assertValidity(){j(this)}hasEvenY(){const{y:m}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(m)}equals(m){H(m);const{px:v,py:S,pz:E}=this,{px:d,py:a,pz:f}=m,h=t.eql(t.mul(v,f),t.mul(d,E)),w=t.eql(t.mul(S,f),t.mul(a,E));return h&&w}negate(){return new V(this.px,t.neg(this.py),this.pz)}double(){const{a:m,b:v}=r,S=t.mul(v,yn),{px:E,py:d,pz:a}=this;let f=t.ZERO,h=t.ZERO,w=t.ZERO,b=t.mul(E,E),B=t.mul(d,d),N=t.mul(a,a),k=t.mul(E,d);return k=t.add(k,k),w=t.mul(E,a),w=t.add(w,w),f=t.mul(m,w),h=t.mul(S,N),h=t.add(f,h),f=t.sub(B,h),h=t.add(B,h),h=t.mul(f,h),f=t.mul(k,f),w=t.mul(S,w),N=t.mul(m,N),k=t.sub(b,N),k=t.mul(m,k),k=t.add(k,w),w=t.add(b,b),b=t.add(w,b),b=t.add(b,N),b=t.mul(b,k),h=t.add(h,b),N=t.mul(d,a),N=t.add(N,N),b=t.mul(N,k),f=t.sub(f,b),w=t.mul(N,B),w=t.add(w,w),w=t.add(w,w),new V(f,h,w)}add(m){H(m);const{px:v,py:S,pz:E}=this,{px:d,py:a,pz:f}=m;let h=t.ZERO,w=t.ZERO,b=t.ZERO;const B=r.a,N=t.mul(r.b,yn);let k=t.mul(v,d),u=t.mul(S,a),l=t.mul(E,f),A=t.add(v,S),R=t.add(d,a);A=t.mul(A,R),R=t.add(k,u),A=t.sub(A,R),R=t.add(v,E);let q=t.add(d,f);return R=t.mul(R,q),q=t.add(k,l),R=t.sub(R,q),q=t.add(S,E),h=t.add(a,f),q=t.mul(q,h),h=t.add(u,l),q=t.sub(q,h),b=t.mul(B,R),h=t.mul(N,l),b=t.add(h,b),h=t.sub(u,b),b=t.add(u,b),w=t.mul(h,b),u=t.add(k,k),u=t.add(u,k),l=t.mul(B,l),R=t.mul(N,R),u=t.add(u,l),l=t.sub(k,l),l=t.mul(B,l),R=t.add(R,l),k=t.mul(u,R),w=t.add(w,k),k=t.mul(q,R),h=t.mul(A,h),h=t.sub(h,k),k=t.mul(A,u),b=t.mul(q,b),b=t.add(b,k),new V(h,w,b)}subtract(m){return this.add(m.negate())}is0(){return this.equals(V.ZERO)}multiply(m){const{endo:v}=e;if(!n.isValidNot0(m))throw new Error("invalid scalar: out of range");let S,E;const d=a=>ne.wNAFCached(this,a,V.normalizeZ);if(v){const{k1neg:a,k1:f,k2neg:h,k2:w}=v.splitScalar(m),{p:b,f:B}=d(f),{p:N,f:k}=d(w);E=B.add(k),S=te(v.beta,b,N,a,h)}else{const{p:a,f}=d(m);S=a,E=f}return V.normalizeZ([S,E])[0]}multiplyUnsafe(m){const{endo:v}=e,S=this;if(!n.isValid(m))throw new Error("invalid scalar: out of range");if(m===Vr||S.is0())return V.ZERO;if(m===Gr)return S;if(ne.hasPrecomputes(this))return this.multiply(m);if(v){const{k1neg:E,k1:d,k2neg:a,k2:f}=v.splitScalar(m),{p1:h,p2:w}=Xc(V,S,d,f);return te(v.beta,h,w,E,a)}else return ne.wNAFCachedUnsafe(S,m)}multiplyAndAddUnsafe(m,v,S){const E=this.multiplyUnsafe(v).add(m.multiplyUnsafe(S));return E.is0()?void 0:E}toAffine(m){return z(this,m)}isTorsionFree(){const{isTorsionFree:m}=e;return s===Gr?!0:m?m(V,this):ne.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:m}=e;return s===Gr?this:m?m(V,this):this.multiplyUnsafe(s)}toBytes(m=!0){return gr("isCompressed",m),this.assertValidity(),I(V,this,m)}toRawBytes(m=!0){return this.toBytes(m)}toHex(m=!0){return Pr(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}V.BASE=new V(r.Gx,r.Gy,t.ONE),V.ZERO=new V(t.ZERO,t.ONE,t.ZERO),V.Fp=t,V.Fn=n;const Y=n.BITS,ne=fa(V,e.endo?Math.ceil(Y/2):Y);return V}function Ca(r){return Uint8Array.of(r?2:3)}function Vf(r,e,t={}){rn(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||jo,s=e.hmac||((S,...E)=>Ta(e.hash,S,Qt(...E))),{Fp:i,Fn:o}=r,{ORDER:c,BITS:g}=o;function _(S){const E=c>>Gr;return S>E}function I(S){return _(S)?o.neg(S):S}function T(S,E){if(!o.isValidNot0(E))throw new Error(`invalid signature ${S}: out of range 1..CURVE.n`)}class D{constructor(E,d,a){T("r",E),T("s",d),this.r=E,this.s=d,a!=null&&(this.recovery=a),Object.freeze(this)}static fromCompact(E){const d=o.BYTES,a=qe("compactSignature",E,d*2);return new D(o.fromBytes(a.subarray(0,d)),o.fromBytes(a.subarray(d,d*2)))}static fromDER(E){const{r:d,s:a}=Yt.toSig(qe("DER",E));return new D(d,a)}assertValidity(){}addRecoveryBit(E){return new D(this.r,this.s,E)}recoverPublicKey(E){const d=i.ORDER,{r:a,s:f,recovery:h}=this;if(h==null||![0,1,2,3].includes(h))throw new Error("recovery id invalid");if(c*Kf<d&&h>1)throw new Error("recovery id is ambiguous for h>1 curve");const b=h===2||h===3?a+c:a;if(!i.isValid(b))throw new Error("recovery id 2 or 3 invalid");const B=i.toBytes(b),N=r.fromHex(Qt(Ca((h&1)===0),B)),k=o.inv(b),u=j(qe("msgHash",E)),l=o.create(-u*k),A=o.create(f*k),R=r.BASE.multiplyUnsafe(l).add(N.multiplyUnsafe(A));if(R.is0())throw new Error("point at infinify");return R.assertValidity(),R}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new D(this.r,o.neg(this.s),this.recovery):this}toBytes(E){if(E==="compact")return Qt(o.toBytes(this.r),o.toBytes(this.s));if(E==="der")return is(Yt.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Pr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Pr(this.toBytes("compact"))}}const M=La(o,t.allowedPrivateKeyLengths,t.wrapPrivateKey),F={isValidPrivateKey(S){try{return M(S),!0}catch{return!1}},normPrivateKeyToScalar:M,randomPrivateKey:()=>{const S=c;return Zc(n(oa(S)),S)},precompute(S=8,E=r.BASE){return E.precompute(S,!1)}};function U(S,E=!0){return r.fromPrivateKey(S).toBytes(E)}function C(S){if(typeof S=="bigint")return!1;if(S instanceof r)return!0;const d=qe("key",S).length,a=i.BYTES,f=a+1,h=2*a+1;if(!(t.allowedPrivateKeyLengths||o.BYTES===f))return d===f||d===h}function H(S,E,d=!0){if(C(S)===!0)throw new Error("first arg must be private key");if(C(E)===!1)throw new Error("second arg must be public key");return r.fromHex(E).multiply(M(S)).toBytes(d)}const z=e.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");const E=On(S),d=S.length*8-g;return d>0?E>>BigInt(d):E},j=e.bits2int_modN||function(S){return o.create(z(S))},te=Un(g);function V(S){return Ar("num < 2^"+g,S,Vr,te),o.toBytes(S)}function Y(S,E,d=ne){if(["recovered","canonical"].some(A=>A in d))throw new Error("sign() legacy options not supported");const{hash:a}=e;let{lowS:f,prehash:h,extraEntropy:w}=d;f==null&&(f=!0),S=qe("msgHash",S),vo(d),h&&(S=qe("prehashed msgHash",a(S)));const b=j(S),B=M(E),N=[V(B),V(b)];if(w!=null&&w!==!1){const A=w===!0?n(i.BYTES):w;N.push(qe("extraEntropy",A))}const k=Qt(...N),u=b;function l(A){const R=z(A);if(!o.isValidNot0(R))return;const q=o.inv(R),G=r.BASE.multiply(R).toAffine(),oe=o.create(G.x);if(oe===Vr)return;const ue=o.create(q*o.create(u+oe*B));if(ue===Vr)return;let Fe=(G.x===oe?0:2)|Number(G.y&Gr),pe=ue;return f&&_(ue)&&(pe=I(ue),Fe^=1),new D(oe,pe,Fe)}return{seed:k,k2sig:l}}const ne={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};function m(S,E,d=ne){const{seed:a,k2sig:f}=Y(S,E,d);return Fc(e.hash.outputLen,o.BYTES,s)(a,f)}r.BASE.precompute(8);function v(S,E,d,a=x){const f=S;E=qe("msgHash",E),d=qe("publicKey",d),vo(a);const{lowS:h,prehash:w,format:b}=a;if("strict"in a)throw new Error("options.strict was renamed to lowS");if(b!==void 0&&!["compact","der","js"].includes(b))throw new Error('format must be "compact", "der" or "js"');const B=typeof f=="string"||ns(f),N=!B&&!b&&typeof f=="object"&&f!==null&&typeof f.r=="bigint"&&typeof f.s=="bigint";if(!B&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let k,u;try{if(N)if(b===void 0||b==="js")k=new D(f.r,f.s);else throw new Error("invalid format");if(B){try{b!=="compact"&&(k=D.fromDER(f))}catch(pe){if(!(pe instanceof Yt.Err))throw pe}!k&&b!=="der"&&(k=D.fromCompact(f))}u=r.fromHex(d)}catch{return!1}if(!k||h&&k.hasHighS())return!1;w&&(E=e.hash(E));const{r:l,s:A}=k,R=j(E),q=o.inv(A),G=o.create(R*q),oe=o.create(l*q),ue=r.BASE.multiplyUnsafe(G).add(u.multiplyUnsafe(oe));return ue.is0()?!1:o.create(ue.x)===l}return Object.freeze({getPublicKey:U,getSharedSecret:H,sign:m,verify:v,utils:F,Point:r,Signature:D})}function Gf(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Nr(e.n,r.nBitLength),s={Fp:t,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:s}}function jf(r){const{CURVE:e,curveOpts:t}=Gf(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:n}}function Zf(r,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:r})}function Yf(r){const{CURVE:e,curveOpts:t,ecdsaOpts:n}=jf(r),s=$f(e,t),i=Vf(s,n,t);return Zf(r,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jf(r,e){const t=n=>Yf({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Xf=BigInt(1),Gi=BigInt(2),ko=(r,e)=>(r+e/Gi)/e;function Qf(r){const e=Rn.p,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),g=BigInt(88),_=r*r*r%e,I=_*_*r%e,T=ze(I,t,e)*I%e,D=ze(T,t,e)*I%e,M=ze(D,Gi,e)*_%e,F=ze(M,s,e)*M%e,U=ze(F,i,e)*F%e,C=ze(U,c,e)*U%e,H=ze(C,g,e)*C%e,z=ze(H,c,e)*U%e,j=ze(z,t,e)*I%e,te=ze(j,o,e)*F%e,V=ze(te,n,e)*_%e,Y=ze(V,Gi,e);if(!ji.eql(ji.sqr(Y),r))throw new Error("Cannot find square root");return Y}const ji=Nr(Rn.p,void 0,void 0,{sqrt:Qf}),ps=Jf({...Rn,Fp:ji,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Rn.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Xf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),c=ko(i*r,e),g=ko(-n*r,e);let _=Ke(r-c*t-g*s,e),I=Ke(-c*n-g*i,e);const T=_>o,D=I>o;if(T&&(_=e-_),D&&(I=e-I),_>o||I>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:T,k1:_,k2neg:D,k2:I}}}},Xo),el=Ur.utils.randomPrivateKey,xo=()=>{const r=Ur.utils.randomPrivateKey(),e=Mn(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Mn=Ur.getPublicKey;function So(r){try{return Ur.ExtendedPoint.fromHex(r),!0}catch{return!1}}const gs=(r,e)=>Ur.sign(r,e.slice(0,32)),tl=Ur.verify,be=r=>ae.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ae.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ae.Buffer.from(r);class ys{constructor(e){Object.assign(this,e)}encode(){return ae.Buffer.from(Ai.serialize(jr,this))}static decode(e){return Ai.deserialize(jr,this,e)}static decodeUnchecked(e){return Ai.deserializeUnchecked(jr,this,e)}}class rl extends ys{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const jr=new Map;var Oa;const Na=32,Wt=32;function nl(r){return r._bn!==void 0}let Eo=1;class Q extends ys{constructor(e){if(super({}),this._bn=void 0,nl(e))this._bn=e._bn;else{if(typeof e=="string"){const t=yt.decode(e);if(t.length!=Wt)throw new Error("Invalid public key input");this._bn=new io(t)}else this._bn=new io(e);if(this._bn.byteLength()>Wt)throw new Error("Invalid public key input")}}static unique(){const e=new Q(Eo);return Eo+=1,new Q(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return yt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ae.Buffer);if(e.length===Wt)return e;const t=ae.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=ae.Buffer.concat([e.toBuffer(),ae.Buffer.from(t),n.toBuffer()]),i=co(s);return new Q(i)}static createProgramAddressSync(e,t){let n=ae.Buffer.alloc(0);e.forEach(function(i){if(i.length>Na)throw new TypeError("Max seed length exceeded");n=ae.Buffer.concat([n,be(i)])}),n=ae.Buffer.concat([n,t.toBuffer(),ae.Buffer.from("ProgramDerivedAddress")]);const s=co(n);if(So(s))throw new Error("Invalid seeds, address must fall off the curve");return new Q(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(ae.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Q(e);return So(t.toBytes())}}Oa=Q;Q.default=new Oa("11111111111111111111111111111111");jr.set(Q,{kind:"struct",fields:[["_bn","u256"]]});class il{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=be(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=be(el()),this._publicKey=be(Mn(this._secretKey))}get publicKey(){return new Q(this._publicKey)}get secretKey(){return ae.Buffer.concat([this._secretKey,this._publicKey],64)}}const sl=new Q("BPFLoader1111111111111111111111111111111111"),or=1232,Wn=127,Xr=64;class ms extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ms.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ws extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ws.prototype,"name",{value:"TransactionExpiredTimeoutError"});class _r extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(_r.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Qr{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const ke=(r="publicKey")=>L.blob(32,r),ol=(r="signature")=>L.blob(64,r),pr=(r="string")=>{const e=L.struct([L.u32("length"),L.u32("lengthPadding"),L.blob(L.offset(L.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,c)=>{const g={chars:ae.Buffer.from(i,"utf8")};return n(g,o,c)},s.alloc=i=>L.u32().span+L.u32().span+ae.Buffer.from(i,"utf8").length,s},al=(r="authorized")=>L.struct([ke("staker"),ke("withdrawer")],r),cl=(r="lockup")=>L.struct([L.ns64("unixTimestamp"),L.ns64("epoch"),ke("custodian")],r),ul=(r="voteInit")=>L.struct([ke("nodePubkey"),ke("authorizedVoter"),ke("authorizedWithdrawer"),L.u8("commission")],r),fl=(r="voteAuthorizeWithSeedArgs")=>L.struct([L.u32("voteAuthorizationType"),ke("currentAuthorityDerivedKeyOwnerPubkey"),pr("currentAuthorityDerivedKeySeed"),ke("newAuthorized")],r);function Ua(r,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return Ua({layout:s},e[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=t(s)}),n}function _t(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Rt(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Se(r,e){if(!r)throw new Error(e||"Assertion failed")}class Hn{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const c=o.toBase58();let g=n.get(c);return g===void 0&&(g={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,g)),g},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const c of o.keys){const g=s(c.pubkey);g.isSigner||=c.isSigner,g.isWritable||=c.isWritable}}return new Hn(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Se(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,g])=>g.isSigner&&g.isWritable),n=e.filter(([,g])=>g.isSigner&&!g.isWritable),s=e.filter(([,g])=>!g.isSigner&&g.isWritable),i=e.filter(([,g])=>!g.isSigner&&!g.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Se(t.length>0,"Expected at least one writable signer key");const[g]=t[0];Se(g===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...t.map(([g])=>new Q(g)),...n.map(([g])=>new Q(g)),...s.map(([g])=>new Q(g)),...i.map(([g])=>new Q(g))];return[o,c]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const c=new Q(i),g=e.findIndex(_=>_.equals(c));g>=0&&(Se(g<256,"Max lookup table index exceeded"),n.push(g),s.push(c),this.keyMetaMap.delete(i))}return[n,s]}}const za="Reached end of buffer unexpectedly";function Dt(r){if(r.length===0)throw new Error(za);return r.shift()}function It(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(za);return r.splice(...e)}class Nt{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Q(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:yt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Qr(this.staticAccountKeys)}static compile(e){const t=Hn.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new Qr(s).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:yt.encode(c.data)}));return new Nt({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Rt(t,e);const n=this.instructions.map(T=>{const{accounts:D,programIdIndex:M}=T,F=Array.from(yt.decode(T.data));let U=[];Rt(U,D.length);let C=[];return Rt(C,F.length),{programIdIndex:M,keyIndicesCount:ae.Buffer.from(U),keyIndices:D,dataLength:ae.Buffer.from(C),data:F}});let s=[];Rt(s,n.length);let i=ae.Buffer.alloc(or);ae.Buffer.from(s).copy(i);let o=s.length;n.forEach(T=>{const M=L.struct([L.u8("programIdIndex"),L.blob(T.keyIndicesCount.length,"keyIndicesCount"),L.seq(L.u8("keyIndex"),T.keyIndices.length,"keyIndices"),L.blob(T.dataLength.length,"dataLength"),L.seq(L.u8("userdatum"),T.data.length,"data")]).encode(T,i,o);o+=M}),i=i.slice(0,o);const c=L.struct([L.blob(1,"numRequiredSignatures"),L.blob(1,"numReadonlySignedAccounts"),L.blob(1,"numReadonlyUnsignedAccounts"),L.blob(t.length,"keyCount"),L.seq(ke("key"),e,"keys"),ke("recentBlockhash")]),g={numRequiredSignatures:ae.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ae.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ae.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ae.Buffer.from(t),keys:this.accountKeys.map(T=>be(T.toBytes())),recentBlockhash:yt.decode(this.recentBlockhash)};let _=ae.Buffer.alloc(2048);const I=c.encode(g,_);return i.copy(_,I),_.slice(0,I+i.length)}static from(e){let t=[...e];const n=Dt(t);if(n!==(n&Wn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Dt(t),i=Dt(t),o=_t(t);let c=[];for(let D=0;D<o;D++){const M=It(t,0,Wt);c.push(new Q(ae.Buffer.from(M)))}const g=It(t,0,Wt),_=_t(t);let I=[];for(let D=0;D<_;D++){const M=Dt(t),F=_t(t),U=It(t,0,F),C=_t(t),H=It(t,0,C),z=yt.encode(ae.Buffer.from(H));I.push({programIdIndex:M,accounts:U,data:z})}const T={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:yt.encode(ae.Buffer.from(g)),accountKeys:c,instructions:I};return new Nt(T)}}class yr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Qr(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=Hn.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const I of i){const T=t.extractTableLookup(I);if(T!==void 0){const[D,{writable:M,readonly:F}]=T;n.push(D),s.writable.push(...M),s.readonly.push(...F)}}const[o,c]=t.getMessageComponents(),_=new Qr(c,s).compileInstructions(e.instructions);return new yr({header:o,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:_,addressTableLookups:n})}serialize(){const e=Array();Rt(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Rt(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Rt(i,this.addressTableLookups.length);const o=L.struct([L.u8("prefix"),L.struct([L.u8("numRequiredSignatures"),L.u8("numReadonlySignedAccounts"),L.u8("numReadonlyUnsignedAccounts")],"header"),L.blob(e.length,"staticAccountKeysLength"),L.seq(ke(),this.staticAccountKeys.length,"staticAccountKeys"),ke("recentBlockhash"),L.blob(n.length,"instructionsLength"),L.blob(t.length,"serializedInstructions"),L.blob(i.length,"addressTableLookupsLength"),L.blob(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(or),_=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(I=>I.toBytes()),recentBlockhash:yt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,_)}serializeInstructions(){let e=0;const t=new Uint8Array(or);for(const n of this.compiledInstructions){const s=Array();Rt(s,n.accountKeyIndexes.length);const i=Array();Rt(i,n.data.length);const o=L.struct([L.u8("programIdIndex"),L.blob(s.length,"encodedAccountKeyIndexesLength"),L.seq(L.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),L.blob(i.length,"encodedDataLength"),L.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(or);for(const n of this.addressTableLookups){const s=Array();Rt(s,n.writableIndexes.length);const i=Array();Rt(i,n.readonlyIndexes.length);const o=L.struct([ke("accountKey"),L.blob(s.length,"encodedWritableIndexesLength"),L.seq(L.u8(),n.writableIndexes.length,"writableIndexes"),L.blob(i.length,"encodedReadonlyIndexesLength"),L.seq(L.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Dt(t),s=n&Wn;Se(n!==s,"Expected versioned message but received legacy message");const i=s;Se(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Dt(t),numReadonlySignedAccounts:Dt(t),numReadonlyUnsignedAccounts:Dt(t)},c=[],g=_t(t);for(let F=0;F<g;F++)c.push(new Q(It(t,0,Wt)));const _=yt.encode(It(t,0,Wt)),I=_t(t),T=[];for(let F=0;F<I;F++){const U=Dt(t),C=_t(t),H=It(t,0,C),z=_t(t),j=new Uint8Array(It(t,0,z));T.push({programIdIndex:U,accountKeyIndexes:H,data:j})}const D=_t(t),M=[];for(let F=0;F<D;F++){const U=new Q(It(t,0,Wt)),C=_t(t),H=It(t,0,C),z=_t(t),j=It(t,0,z);M.push({accountKey:U,writableIndexes:H,readonlyIndexes:j})}return new yr({header:o,staticAccountKeys:c,recentBlockhash:_,compiledInstructions:T,addressTableLookups:M})}}const bs={deserializeMessageVersion(r){const e=r[0],t=e&Wn;return t===e?"legacy":t},deserialize:r=>{const e=bs.deserializeMessageVersion(r);if(e==="legacy")return Nt.from(r);if(e===0)return yr.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Zt=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const ll=ae.Buffer.alloc(Xr).fill(0);class Be{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ae.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ae{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Be(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let U=0;U<t.length;U++)if(t[U].programId===void 0)throw new Error(`Transaction instruction index ${U} has undefined program id`);const s=[],i=[];t.forEach(U=>{U.keys.forEach(H=>{i.push({...H})});const C=U.programId.toString();s.includes(C)||s.push(C)}),s.forEach(U=>{i.push({pubkey:new Q(U),isSigner:!1,isWritable:!1})});const o=[];i.forEach(U=>{const C=U.pubkey.toString(),H=o.findIndex(z=>z.pubkey.toString()===C);H>-1?(o[H].isWritable=o[H].isWritable||U.isWritable,o[H].isSigner=o[H].isSigner||U.isSigner):o.push(U)}),o.sort(function(U,C){if(U.isSigner!==C.isSigner)return U.isSigner?-1:1;if(U.isWritable!==C.isWritable)return U.isWritable?-1:1;const H={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return U.pubkey.toBase58().localeCompare(C.pubkey.toBase58(),"en",H)});const c=o.findIndex(U=>U.pubkey.equals(n));if(c>-1){const[U]=o.splice(c,1);U.isSigner=!0,U.isWritable=!0,o.unshift(U)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const U of this.signatures){const C=o.findIndex(H=>H.pubkey.equals(U.publicKey));if(C>-1)o[C].isSigner||(o[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${U.publicKey.toString()}`)}let g=0,_=0,I=0;const T=[],D=[];o.forEach(({pubkey:U,isSigner:C,isWritable:H})=>{C?(T.push(U.toString()),g+=1,H||(_+=1)):(D.push(U.toString()),H||(I+=1))});const M=T.concat(D),F=t.map(U=>{const{data:C,programId:H}=U;return{programIdIndex:M.indexOf(H.toString()),accounts:U.keys.map(z=>M.indexOf(z.pubkey.toString())),data:yt.encode(C)}});return F.forEach(U=>{Se(U.programIdIndex>=0),U.accounts.forEach(C=>Se(C>=0))}),new Nt({header:{numRequiredSignatures:g,numReadonlySignedAccounts:_,numReadonlyUnsignedAccounts:I},accountKeys:M,recentBlockhash:e,instructions:F})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=gs(n,s.secretKey);this._addSignature(s.publicKey,be(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Se(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ae.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||=[]).push(i):tl(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];Rt(n,t.length);const s=n.length+t.length*64+e.length,i=ae.Buffer.alloc(s);return Se(t.length<256),ae.Buffer.from(n).copy(i,0),t.forEach(({signature:o},c)=>{o!==null&&(Se(o.length===64,"signature has invalid length"),ae.Buffer.from(o).copy(i,n.length+c*64))}),e.copy(i,n.length+t.length*64),Se(i.length<=or,`Transaction too large: ${i.length} > ${or}`),i}get keys(){return Se(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Se(this.instructions.length===1),this.instructions[0].programId}get data(){return Se(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=_t(t);let s=[];for(let i=0;i<n;i++){const o=It(t,0,Xr);s.push(yt.encode(ae.Buffer.from(o)))}return Ae.populate(Nt.from(t),s)}static populate(e,t=[]){const n=new Ae;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==yt.encode(ll)?null:yt.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=e.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(g=>g.publicKey.toString()===c.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Be({keys:i,programId:e.accountKeys[s.programIdIndex],data:yt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class vs{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:s,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:g}=n,_=o-c;Se(_>0,"Message header is invalid");const I=e.staticAccountKeys.length-o-g;Se(I>=0,"Message header is invalid");const T=e.getAccountKeys(t),D=T.get(0);if(D===void 0)throw new Error("Failed to decompile message because no account keys were found");const M=[];for(const F of s){const U=[];for(const H of F.accountKeyIndexes){const z=T.get(H);if(z===void 0)throw new Error(`Failed to find key for account key index ${H}`);const j=H<o;let te;j?te=H<_:H<T.staticAccountKeys.length?te=H-o<I:te=H-T.staticAccountKeys.length<T.accountKeysFromLookups.writable.length,U.push({pubkey:z,isSigner:H<n.numRequiredSignatures,isWritable:te})}const C=T.get(F.programIdIndex);if(C===void 0)throw new Error(`Failed to find program id for program id index ${F.programIdIndex}`);M.push(new Be({programId:C,data:be(F.data),keys:U}))}return new vs({payerKey:D,instructions:M,recentBlockhash:i})}compileToLegacyMessage(){return Nt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return yr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class ks{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Se(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(Xr));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Rt(t,this.signatures.length);const n=L.struct([L.blob(t.length,"encodedSignaturesLength"),L.seq(ol(),this.signatures.length,"signatures"),L.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=_t(t);for(let o=0;o<s;o++)n.push(new Uint8Array(It(t,0,Xr)));const i=bs.deserialize(new Uint8Array(t));return new ks(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Se(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=gs(t,s.secretKey)}}addSignature(e,t){Se(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Se(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const hl=160,dl=64,pl=hl/dl,Fa=1e3/pl,Ft=new Q("SysvarC1ock11111111111111111111111111111111"),gl=new Q("SysvarEpochSchedu1e111111111111111111111111"),yl=new Q("Sysvar1nstructions1111111111111111111111111"),kn=new Q("SysvarRecentB1ockHashes11111111111111111111"),Cr=new Q("SysvarRent111111111111111111111111111111111"),ml=new Q("SysvarRewards111111111111111111111111111111"),wl=new Q("SysvarS1otHashes111111111111111111111111111"),bl=new Q("SysvarS1otHistory11111111111111111111111111"),xn=new Q("SysvarStakeHistory1111111111111111111111111");class en extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(e){case"send":c=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:c=`Unknown action '${(g=>g)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const vl={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ce extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function Zi(r,e,t,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:i,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:c}=e.nonceInfo,g=c.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:g,nonceValue:e.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new en({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function lr(r){return new Promise(e=>setTimeout(e,r))}function xe(r,e){const t=r.layout.span>=0?r.layout.span:Ua(r,e),n=ae.Buffer.alloc(t),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,n),n}function _e(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const Da=L.nu64("lamportsPerSignature"),qa=L.struct([L.u32("version"),L.u32("state"),ke("authorizedPubkey"),ke("nonce"),L.struct([Da],"feeCalculator")]),Yi=qa.span;class $n{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=qa.decode(be(e),0);return new $n({authorizedPubkey:new Q(t.authorizedPubkey),nonce:new Q(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Or(r){const e=L.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),s=e,i=ju();return s.decode=(o,c)=>{const g=t(o,c);return i.decode(g)},s.encode=(o,c,g)=>{const _=i.encode(o);return n(_,c,g)},s}class kl{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Te))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:s}=_e(Te.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new Q(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=_e(Te.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:s}=_e(Te.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new Q(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=_e(Te.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:s,programId:i}=_e(Te.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Q(t),seed:n,space:s,programId:new Q(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=_e(Te.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Q(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:s}=_e(Te.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Q(t),seed:n,programId:new Q(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:s,space:i,programId:o}=_e(Te.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Q(t),seed:n,lamports:s,space:i,programId:new Q(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=_e(Te.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Q(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),_e(Te.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=_e(Te.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=_e(Te.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Q(t)}}static checkProgramId(e){if(!e.equals(lt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Te=Object.freeze({Create:{index:0,layout:L.struct([L.u32("instruction"),L.ns64("lamports"),L.ns64("space"),ke("programId")])},Assign:{index:1,layout:L.struct([L.u32("instruction"),ke("programId")])},Transfer:{index:2,layout:L.struct([L.u32("instruction"),Or("lamports")])},CreateWithSeed:{index:3,layout:L.struct([L.u32("instruction"),ke("base"),pr("seed"),L.ns64("lamports"),L.ns64("space"),ke("programId")])},AdvanceNonceAccount:{index:4,layout:L.struct([L.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:L.struct([L.u32("instruction"),ke("authorized")])},AuthorizeNonceAccount:{index:7,layout:L.struct([L.u32("instruction"),ke("authorized")])},Allocate:{index:8,layout:L.struct([L.u32("instruction"),L.ns64("space")])},AllocateWithSeed:{index:9,layout:L.struct([L.u32("instruction"),ke("base"),pr("seed"),L.ns64("space"),ke("programId")])},AssignWithSeed:{index:10,layout:L.struct([L.u32("instruction"),ke("base"),pr("seed"),ke("programId")])},TransferWithSeed:{index:11,layout:L.struct([L.u32("instruction"),Or("lamports"),pr("seed"),ke("programId")])},UpgradeNonceAccount:{index:12,layout:L.struct([L.u32("instruction")])}});class lt{constructor(){}static createAccount(e){const t=Te.Create,n=xe(t,{lamports:e.lamports,space:e.space,programId:be(e.programId.toBuffer())});return new Be({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=Te.TransferWithSeed;t=xe(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:be(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Te.Transfer;t=xe(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Be({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=Te.AssignWithSeed;t=xe(s,{base:be(e.basePubkey.toBuffer()),seed:e.seed,programId:be(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Te.Assign;t=xe(s,{programId:be(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Be({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Te.CreateWithSeed,n=xe(t,{base:be(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:be(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Be({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Ae;"basePubkey"in e&&"seed"in e?t.add(lt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Yi,programId:this.programId})):t.add(lt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Yi,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Te.InitializeNonceAccount,n=xe(t,{authorized:be(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:kn,isSigner:!1,isWritable:!1},{pubkey:Cr,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Be(s)}static nonceAdvance(e){const t=Te.AdvanceNonceAccount,n=xe(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:kn,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Be(s)}static nonceWithdraw(e){const t=Te.WithdrawNonceAccount,n=xe(t,{lamports:e.lamports});return new Be({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:kn,isSigner:!1,isWritable:!1},{pubkey:Cr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Te.AuthorizeNonceAccount,n=xe(t,{authorized:be(e.newAuthorizedPubkey.toBuffer())});return new Be({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=Te.AllocateWithSeed;t=xe(s,{base:be(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:be(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Te.Allocate;t=xe(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Be({keys:n,programId:this.programId,data:t})}}lt.programId=new Q("11111111111111111111111111111111");const xl=or-300;class mr{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/mr.chunkSize)+1+1)}static async load(e,t,n,s,i){{const T=await e.getMinimumBalanceForRentExemption(i.length),D=await e.getAccountInfo(n.publicKey,"confirmed");let M=null;if(D!==null){if(D.executable)return console.error("Program load failed, account is already executable"),!1;D.data.length!==i.length&&(M=M||new Ae,M.add(lt.allocate({accountPubkey:n.publicKey,space:i.length}))),D.owner.equals(s)||(M=M||new Ae,M.add(lt.assign({accountPubkey:n.publicKey,programId:s}))),D.lamports<T&&(M=M||new Ae,M.add(lt.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:T-D.lamports})))}else M=new Ae().add(lt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:T>0?T:1,space:i.length,programId:s}));M!==null&&await Zi(e,M,[t,n],{commitment:"confirmed"})}const o=L.struct([L.u32("instruction"),L.u32("offset"),L.u32("bytesLength"),L.u32("bytesLengthPadding"),L.seq(L.u8("byte"),L.offset(L.u32(),-8),"bytes")]),c=mr.chunkSize;let g=0,_=i,I=[];for(;_.length>0;){const T=_.slice(0,c),D=ae.Buffer.alloc(c+16);o.encode({instruction:0,offset:g,bytes:T,bytesLength:0,bytesLengthPadding:0},D);const M=new Ae().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:D});I.push(Zi(e,M,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await lr(1e3/4),g+=c,_=_.slice(c)}await Promise.all(I);{const T=L.struct([L.u32("instruction")]),D=ae.Buffer.alloc(T.span);T.encode({instruction:1},D);const M=new Ae().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Cr,isSigner:!1,isWritable:!1}],programId:s,data:D}),F="processed",U=await e.sendTransaction(M,[t,n],{preflightCommitment:F}),{context:C,value:H}=await e.confirmTransaction({signature:U,lastValidBlockHeight:M.lastValidBlockHeight,blockhash:M.recentBlockhash},F);if(H.err)throw new Error(`Transaction ${U} failed (${JSON.stringify(H)})`);for(;;){try{if(await e.getSlot({commitment:F})>C.slot)break}catch{}await new Promise(z=>setTimeout(z,Math.round(Fa/2)))}}return!0}}mr.chunkSize=xl;const Sl=new Q("BPFLoader2111111111111111111111111111111111");class El{static getMinNumSignatures(e){return mr.getMinNumSignatures(e)}static load(e,t,n,s,i){return mr.load(e,t,n,i,s)}}function Al(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ci,Ao;function _l(){if(Ao)return Ci;Ao=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,c,g,_,I,T;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(T=r.call(n),T==="[object Array]"){for(c="[",o=n.length-1,i=0;i<o;i++)c+=t(n[i],!0)+",";return o>-1&&(c+=t(n[i],!0)),c+"]"}else if(T==="[object Object]"){for(g=e(n).sort(),o=g.length,c="",i=0;i<o;)_=g[i],I=t(n[_],!1),I!==void 0&&(c&&(c+=","),c+=JSON.stringify(_)+":"+I),i++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Ci=function(n){var s=t(n,!1);if(s!==void 0)return""+s},Ci}var Il=_l(),_o=Al(Il);const Hr=32;function Oi(r){let e=0;for(;r>1;)r/=2,e++;return e}function Bl(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Ka{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Oi(Bl(e+Hr+1))-Oi(Hr)-1,n=this.getSlotsInEpoch(t),s=e-(n-Hr);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Hr:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Oi(Hr)):this.slotsPerEpoch}}var Rl=globalThis.fetch;class Ml extends Pf{constructor(e,t,n){const s=i=>{const o=Rf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Pl(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const Io=56;class Ji{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Pl(Tl,e),n=e.length-Io;Se(n>=0,"lookup table is invalid"),Se(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=L.struct([L.seq(ke(),s,"addresses")]).decode(e.slice(Io));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Q(t.authority[0]):void 0,addresses:i.map(o=>new Q(o))}}}const Tl={index:1,layout:L.struct([L.u32("typeIndex"),Or("deactivationSlot"),L.nu64("lastExtendedSlot"),L.u8("lastExtendedStartIndex"),L.u8(),L.seq(ke(),L.offset(L.u8(),-1),"authority")])},Ll=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Cl(r){const e=r.match(Ll);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),g=c==null?"":`:${c+1}`;return`${o}//${n}${g}${i}`}const Ue=on(ls(Q),ee(),r=>new Q(r)),Wa=hs([ee(),Ne("base64")]),xs=on(ls(ae.Buffer),Wa,r=>ae.Buffer.from(r[0],"base64")),Ha=30*1e3;function Ol(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Pe(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function Bo(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function $a(r){return Et([J({jsonrpc:Ne("2.0"),id:ee(),result:r}),J({jsonrpc:Ne("2.0"),id:ee(),error:J({code:zr(),message:ee(),data:le(ef())})})])}const Nl=$a(zr());function we(r){return on($a(r),Nl,e=>"error"in e?e:{...e,result:re(e.result,r)})}function De(r){return we(J({context:J({slot:W()}),value:r}))}function Vn(r){return J({context:J({slot:W()}),value:r})}function Ni(r,e){return r===0?new yr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Q(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:yt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Nt(e)}const Ul=J({foundation:W(),foundationTerm:W(),initial:W(),taper:W(),terminal:W()}),zl=we(ie(se(J({epoch:W(),effectiveSlot:W(),amount:W(),postBalance:W(),commission:le(se(W()))})))),Fl=ie(J({slot:W(),prioritizationFee:W()})),Dl=J({total:W(),validator:W(),foundation:W(),epoch:W()}),ql=J({epoch:W(),slotIndex:W(),slotsInEpoch:W(),absoluteSlot:W(),blockHeight:le(W()),transactionCount:le(W())}),Kl=J({slotsPerEpoch:W(),leaderScheduleSlotOffset:W(),warmup:Ht(),firstNormalEpoch:W(),firstNormalSlot:W()}),Wl=va(ee(),ie(W())),br=se(Et([J({}),ee()])),Hl=J({err:br}),$l=Ne("receivedSignature"),Vl=J({"solana-core":ee(),"feature-set":le(W())}),Gl=J({program:ee(),programId:Ue,parsed:zr()}),jl=J({programId:Ue,accounts:ie(Ue),data:ee()}),Ro=De(J({err:se(Et([J({}),ee()])),logs:se(ie(ee())),accounts:le(se(ie(se(J({executable:Ht(),owner:ee(),lamports:W(),data:ie(ee()),rentEpoch:le(W())}))))),unitsConsumed:le(W()),returnData:le(se(J({programId:ee(),data:hs([ee(),Ne("base64")])}))),innerInstructions:le(se(ie(J({index:W(),instructions:ie(Et([Gl,jl]))}))))})),Zl=De(J({byIdentity:va(ee(),ie(W())),range:J({firstSlot:W(),lastSlot:W()})}));function Yl(r,e,t,n,s,i){const o=t||Rl;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let g;return n&&(g=async(I,T)=>{const D=await new Promise((M,F)=>{try{n(I,T,(U,C)=>M([U,C]))}catch(U){F(U)}});return await o(...D)}),new Af(async(I,T)=>{const D={method:"POST",body:I,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},Yh)};try{let M=5,F,U=500;for(;g?F=await g(r,D):F=await o(r,D),!(F.status!==429||s===!0||(M-=1,M===0));)console.error(`Server responded with ${F.status} ${F.statusText}.  Retrying after ${U}ms delay...`),await lr(U),U*=2;const C=await F.text();F.ok?T(null,C):T(new Error(`${F.status} ${F.statusText}: ${C}`))}catch(M){M instanceof Error&&T(M)}},{})}function Jl(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function Xl(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const Ql=we(Ul),eh=we(Dl),th=we(Fl),rh=we(ql),nh=we(Kl),ih=we(Wl),sh=we(W()),oh=De(J({total:W(),circulating:W(),nonCirculating:W(),nonCirculatingAccounts:ie(Ue)})),Xi=J({amount:ee(),uiAmount:se(W()),decimals:W(),uiAmountString:le(ee())}),ah=De(ie(J({address:Ue,amount:ee(),uiAmount:se(W()),decimals:W(),uiAmountString:le(ee())}))),ch=De(ie(J({pubkey:Ue,account:J({executable:Ht(),owner:Ue,lamports:W(),data:xs,rentEpoch:W()})}))),Qi=J({program:ee(),parsed:zr(),space:W()}),uh=De(ie(J({pubkey:Ue,account:J({executable:Ht(),owner:Ue,lamports:W(),data:Qi,rentEpoch:W()})}))),fh=De(ie(J({lamports:W(),address:Ue}))),tn=J({executable:Ht(),owner:Ue,lamports:W(),data:xs,rentEpoch:W()}),lh=J({pubkey:Ue,account:tn}),hh=on(Et([ls(ae.Buffer),Qi]),Et([Wa,Qi]),r=>Array.isArray(r)?re(r,xs):r),es=J({executable:Ht(),owner:Ue,lamports:W(),data:hh,rentEpoch:W()}),dh=J({pubkey:Ue,account:es}),ph=J({state:Et([Ne("active"),Ne("inactive"),Ne("activating"),Ne("deactivating")]),active:W(),inactive:W()}),gh=we(ie(J({signature:ee(),slot:W(),err:br,memo:se(ee()),blockTime:le(se(W()))}))),yh=we(ie(J({signature:ee(),slot:W(),err:br,memo:se(ee()),blockTime:le(se(W()))}))),mh=J({subscription:W(),result:Vn(tn)}),wh=J({pubkey:Ue,account:tn}),bh=J({subscription:W(),result:Vn(wh)}),vh=J({parent:W(),slot:W(),root:W()}),kh=J({subscription:W(),result:vh}),xh=Et([J({type:Et([Ne("firstShredReceived"),Ne("completed"),Ne("optimisticConfirmation"),Ne("root")]),slot:W(),timestamp:W()}),J({type:Ne("createdBank"),parent:W(),slot:W(),timestamp:W()}),J({type:Ne("frozen"),slot:W(),timestamp:W(),stats:J({numTransactionEntries:W(),numSuccessfulTransactions:W(),numFailedTransactions:W(),maxTransactionsPerEntry:W()})}),J({type:Ne("dead"),slot:W(),timestamp:W(),err:ee()})]),Sh=J({subscription:W(),result:xh}),Eh=J({subscription:W(),result:Vn(Et([Hl,$l]))}),Ah=J({subscription:W(),result:W()}),_h=J({pubkey:ee(),gossip:se(ee()),tpu:se(ee()),rpc:se(ee()),version:se(ee())}),Mo=J({votePubkey:ee(),nodePubkey:ee(),activatedStake:W(),epochVoteAccount:Ht(),epochCredits:ie(hs([W(),W(),W()])),commission:W(),lastVote:W(),rootSlot:se(W())}),Ih=we(J({current:ie(Mo),delinquent:ie(Mo)})),Bh=Et([Ne("processed"),Ne("confirmed"),Ne("finalized")]),Rh=J({slot:W(),confirmations:se(W()),err:br,confirmationStatus:le(Bh)}),Mh=De(ie(se(Rh))),Ph=we(W()),Va=J({accountKey:Ue,writableIndexes:ie(W()),readonlyIndexes:ie(W())}),Ss=J({signatures:ie(ee()),message:J({accountKeys:ie(ee()),header:J({numRequiredSignatures:W(),numReadonlySignedAccounts:W(),numReadonlyUnsignedAccounts:W()}),instructions:ie(J({accounts:ie(W()),data:ee(),programIdIndex:W()})),recentBlockhash:ee(),addressTableLookups:le(ie(Va))})}),Ga=J({pubkey:Ue,signer:Ht(),writable:Ht(),source:le(Et([Ne("transaction"),Ne("lookupTable")]))}),ja=J({accountKeys:ie(Ga),signatures:ie(ee())}),Za=J({parsed:zr(),program:ee(),programId:Ue}),Ya=J({accounts:ie(Ue),data:ee(),programId:Ue}),Th=Et([Ya,Za]),Lh=Et([J({parsed:zr(),program:ee(),programId:ee()}),J({accounts:ie(ee()),data:ee(),programId:ee()})]),Ja=on(Th,Lh,r=>"accounts"in r?re(r,Ya):re(r,Za)),Xa=J({signatures:ie(ee()),message:J({accountKeys:ie(Ga),instructions:ie(Ja),recentBlockhash:ee(),addressTableLookups:le(se(ie(Va)))})}),Pn=J({accountIndex:W(),mint:ee(),owner:le(ee()),programId:le(ee()),uiTokenAmount:Xi}),Qa=J({writable:ie(Ue),readonly:ie(Ue)}),Gn=J({err:br,fee:W(),innerInstructions:le(se(ie(J({index:W(),instructions:ie(J({accounts:ie(W()),data:ee(),programIdIndex:W()}))})))),preBalances:ie(W()),postBalances:ie(W()),logMessages:le(se(ie(ee()))),preTokenBalances:le(se(ie(Pn))),postTokenBalances:le(se(ie(Pn))),loadedAddresses:le(Qa),computeUnitsConsumed:le(W()),costUnits:le(W())}),Es=J({err:br,fee:W(),innerInstructions:le(se(ie(J({index:W(),instructions:ie(Ja)})))),preBalances:ie(W()),postBalances:ie(W()),logMessages:le(se(ie(ee()))),preTokenBalances:le(se(ie(Pn))),postTokenBalances:le(se(ie(Pn))),loadedAddresses:le(Qa),computeUnitsConsumed:le(W()),costUnits:le(W())}),Fr=Et([Ne(0),Ne("legacy")]),vr=J({pubkey:ee(),lamports:W(),postBalance:se(W()),rewardType:se(ee()),commission:le(se(W()))}),Ch=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),transactions:ie(J({transaction:Ss,meta:se(Gn),version:le(Fr)})),rewards:le(ie(vr)),blockTime:se(W()),blockHeight:se(W())}))),Oh=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),rewards:le(ie(vr)),blockTime:se(W()),blockHeight:se(W())}))),Nh=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),transactions:ie(J({transaction:ja,meta:se(Gn),version:le(Fr)})),rewards:le(ie(vr)),blockTime:se(W()),blockHeight:se(W())}))),Uh=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),transactions:ie(J({transaction:Xa,meta:se(Es),version:le(Fr)})),rewards:le(ie(vr)),blockTime:se(W()),blockHeight:se(W())}))),zh=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),transactions:ie(J({transaction:ja,meta:se(Es),version:le(Fr)})),rewards:le(ie(vr)),blockTime:se(W()),blockHeight:se(W())}))),Fh=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),rewards:le(ie(vr)),blockTime:se(W()),blockHeight:se(W())}))),Dh=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),transactions:ie(J({transaction:Ss,meta:se(Gn)})),rewards:le(ie(vr)),blockTime:se(W())}))),Po=we(se(J({blockhash:ee(),previousBlockhash:ee(),parentSlot:W(),signatures:ie(ee()),blockTime:se(W())}))),Ui=we(se(J({slot:W(),meta:se(Gn),blockTime:le(se(W())),transaction:Ss,version:le(Fr)}))),mn=we(se(J({slot:W(),transaction:Xa,meta:se(Es),blockTime:le(se(W())),version:le(Fr)}))),qh=De(J({blockhash:ee(),lastValidBlockHeight:W()})),Kh=De(Ht()),Wh=J({slot:W(),numTransactions:W(),numSlots:W(),samplePeriodSecs:W()}),Hh=we(ie(Wh)),$h=De(se(J({feeCalculator:J({lamportsPerSignature:W()})}))),Vh=we(ee()),Gh=we(ee()),jh=J({err:br,logs:ie(ee()),signature:ee()}),Zh=J({result:Vn(jh),subscription:W()}),Yh={"solana-client":"js/1.0.0-maintenance"};class Jh{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const _={};return async I=>{const{commitment:T,config:D}=Pe(I),M=this._buildArgs([],T,void 0,D),F=_o(M);return _[F]=_[F]??(async()=>{try{const U=await this._rpcRequest("getBlockHeight",M),C=re(U,we(W()));if("error"in C)throw new ce(C.error,"failed to get block height information");return C.result}finally{delete _[F]}})(),await _[F]}})();let n,s,i,o,c,g;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,c=t.disableRetryOnRateLimit,g=t.httpAgent),this._rpcEndpoint=Ol(e),this._rpcWsEndpoint=n||Cl(e),this._rpcClient=Yl(e,s,i,o,c,g),this._rpcRequest=Jl(this._rpcClient),this._rpcBatchRequest=Xl(this._rpcClient),this._rpcWebSocket=new Ml(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),c=re(o,De(W()));if("error"in c)throw new ce(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=re(t,we(se(W())));if("error"in n)throw new ce(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=re(e,we(W()));if("error"in t)throw new ce(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=re(e,sh);if("error"in t)throw new ce(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=re(n,oh);if("error"in s)throw new ce(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=re(s,De(Xi));if("error"in i)throw new ce(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=re(s,De(Xi));if("error"in i)throw new ce(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=Pe(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),g=await this._rpcRequest("getTokenAccountsByOwner",c),_=re(g,ch);if("error"in _)throw new ce(_.error,`failed to get token accounts owned by account ${e.toBase58()}`);return _.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=re(o,uh);if("error"in c)throw new ce(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=re(s,fh);if("error"in i)throw new ce(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=re(s,ah);if("error"in i)throw new ce(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=re(o,De(se(tn)));if("error"in c)throw new ce(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=re(o,De(se(es)));if("error"in c)throw new ce(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=Pe(t),i=e.map(_=>_.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),g=re(c,De(ie(se(es))));if("error"in g)throw new ce(g.error,`failed to get info for accounts ${i}`);return g.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=Pe(t),i=e.map(_=>_.toBase58()),o=this._buildArgs([i],n,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),g=re(c,De(ie(se(tn))));if("error"in g)throw new ce(g.error,`failed to get info for accounts ${i}`);return g.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=Pe(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),g=re(c,we(ph));if("error"in g)throw new ce(g.error,`failed to get Stake Activation ${e.toBase58()}`);return g.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=Pe(t),{encoding:i,...o}=s||{},c=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Bo(o.filters)}:null}),g=await this._rpcRequest("getProgramAccounts",c),_=ie(lh),I=o.withContext===!0?re(g,De(_)):re(g,we(_));if("error"in I)throw new ce(I.error,`failed to get accounts owned by program ${e.toBase58()}`);return I.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=re(o,we(ie(dh)));if("error"in c)throw new ce(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=yt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Se(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((g,_)=>{try{n=this.onSignature(t,(T,D)=>{n=void 0;const M={context:D,value:T};g({__type:Zt.PROCESSED,response:M})},e);const I=new Promise(T=>{n==null?T():s=this._onSubscriptionStateChange(n,D=>{D==="subscribed"&&T()})});(async()=>{if(await I,i)return;const T=await this.getSignatureStatus(t);if(i||T==null)return;const{context:D,value:M}=T;if(M!=null)if(M?.err)_(M.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(M.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(M.confirmationStatus==="processed"||M.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,g({__type:Zt.PROCESSED,response:{context:D,value:M}})}})()}catch(I){_(I)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(T=>{const D=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let M=await D();if(!i){for(;M<=n;)if(await lr(1e3),i||(M=await D(),i))return;T({__type:Zt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),_=this.getCancellationPromise(t);let I;try{const T=await Promise.race([_,g,o]);if(T.__type===Zt.PROCESSED)I=T.response;else throw new ms(s)}finally{i=!0,c()}return I}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const g=new Promise(M=>{let F=i,U=null;const C=async()=>{try{const{context:H,value:z}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return U=H.slot,z?.nonce}catch{return F}};(async()=>{if(F=await C(),!c)for(;;){if(i!==F){M({__type:Zt.NONCE_INVALID,slotInWhichNonceDidAdvance:U});return}if(await lr(2e3),c||(F=await C(),c))return}})()}),{abortConfirmation:_,confirmationPromise:I}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),T=this.getCancellationPromise(t);let D;try{const M=await Promise.race([T,I,g]);if(M.__type===Zt.PROCESSED)D=M.response;else{let F;for(;;){const U=await this.getSignatureStatus(o);if(U==null)break;if(U.context.slot<(M.slotInWhichNonceDidAdvance??n)){await lr(400);continue}F=U;break}if(F?.value){const U=e||"finalized",{confirmationStatus:C}=F.value;switch(U){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new _r(o);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new _r(o);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new _r(o);break;default:}D={context:F.context,value:{err:F.value.err}}}else throw new _r(o)}}finally{c=!0,_()}return D}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(g=>{let _=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{_=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>g({__type:Zt.TIMED_OUT,timeoutMs:_}),_)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let c;try{const g=await Promise.race([o,s]);if(g.__type===Zt.PROCESSED)c=g.response;else throw new ws(t,g.timeoutMs/1e3)}finally{clearTimeout(n),i()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=re(e,we(ie(_h)));if("error"in t)throw new ce(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=re(n,Ih);if("error"in s)throw new ce(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=Pe(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=re(i,we(W()));if("error"in o)throw new ce(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Pe(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=re(i,we(ee()));if("error"in o)throw new ce(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=re(s,we(ie(Ue)));if("error"in i)throw new ce(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Se(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=re(s,Mh);if("error"in i)throw new ce(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=Pe(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=re(i,we(W()));if("error"in o)throw new ce(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=re(n,Ql);if("error"in s)throw new ce(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=Pe(n),o=this._buildArgs([e.map(_=>_.toBase58())],s,void 0,{...i,epoch:t??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),g=re(c,zl);if("error"in g)throw new ce(g.error,"failed to get inflation reward");return g.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=re(e,eh);if("error"in t)throw new ce(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Pe(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=re(i,rh);if("error"in o)throw new ce(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=re(e,nh);if("error"in t)throw new ce(t.error,"failed to get epoch schedule");const n=t.result;return new Ka(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=re(e,ih);if("error"in t)throw new ce(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=re(s,Ph);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=re(t,Hh);if("error"in n)throw new ce(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=re(s,$h);if("error"in i)throw new ce(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,t){const n=be(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=re(i,De(se(W())));if("error"in o)throw new ce(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=re(s,th);if("error"in i)throw new ce(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Pe(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=re(i,qh);if("error"in o)throw new ce(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=re(o,Kh);if("error"in c)throw new ce(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=re(e,we(Vl));if("error"in t)throw new ce(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=re(e,we(ee()));if("error"in t)throw new ce(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=re(o,Nh);if("error"in c)throw c.error;return c.result}case"none":{const c=re(o,Oh);if("error"in c)throw c.error;return c.result}default:{const c=re(o,Ch);if("error"in c)throw c.error;const{result:g}=c;return g?{...g,transactions:g.transactions.map(({transaction:_,meta:I,version:T})=>({meta:I,transaction:{..._,message:Ni(T,_.message)},version:T}))}:null}}}catch(c){throw new ce(c,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=re(o,zh);if("error"in c)throw c.error;return c.result}case"none":{const c=re(o,Fh);if("error"in c)throw c.error;return c.result}default:{const c=re(o,Uh);if("error"in c)throw c.error;return c.result}}}catch(c){throw new ce(c,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:c,...g}=e;n=c,t=g}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=re(i,Zl);if("error"in o)throw new ce(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),c=re(o,Ui);if("error"in c)throw new ce(c.error,"failed to get transaction");const g=c.result;return g&&{...g,transaction:{...g.transaction,message:Ni(g.version,g.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=Pe(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=re(o,mn);if("error"in c)throw new ce(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=Pe(t),i=e.map(g=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([g],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(g=>{const _=re(g,mn);if("error"in _)throw new ce(_.error,"failed to get transactions");return _.result})}async getTransactions(e,t){const{commitment:n,config:s}=Pe(t),i=e.map(g=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([g],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(g=>{const _=re(g,Ui);if("error"in _)throw new ce(_.error,"failed to get transactions");const I=_.result;return I&&{...I,transaction:{...I.transaction,message:Ni(I.version,I.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=re(s,Dh);if("error"in i)throw new ce(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const c={...o,transactions:o.transactions.map(({transaction:g,meta:_})=>{const I=new Nt(g.message);return{meta:_,transaction:{...g,message:I}}})};return{...c,transactions:c.transactions.map(({transaction:g,meta:_})=>({meta:_,transaction:Ae.populate(g.message,g.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=re(i,we(ie(W())));if("error"in o)throw new ce(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=re(s,Po);if("error"in i)throw new ce(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=re(s,Po);if("error"in i)throw new ce(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=re(s,Ui);if("error"in i)throw new ce(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new Nt(o.transaction.message),g=o.transaction.signatures;return{...o,transaction:Ae.populate(c,g)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=re(s,mn);if("error"in i)throw new ce(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=re(o,mn);if("error"in c)throw new ce(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const g=await this.getConfirmedBlockSignatures(t,"finalized");g.signatures.length>0&&(s.until=g.signatures[g.signatures.length-1].toString())}catch(g){if(g instanceof Error&&g.message.includes("skipped"))continue;throw g}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const g=await this.getConfirmedBlockSignatures(n);g.signatures.length>0&&(s.before=g.signatures[g.signatures.length-1].toString())}catch(g){if(g instanceof Error&&g.message.includes("skipped"))continue;throw g}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(g=>g.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=re(i,gh);if("error"in o)throw new ce(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=re(i,yh);if("error"in o)throw new ce(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new Ji({key:e,state:Ji.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=$n.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=re(n,Vh);if("error"in s)throw new ce(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await lr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Ha;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await lr(Fa/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Pe(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=re(i,De(W()));if("error"in o)throw new ce(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const U=e.serialize(),C=ae.Buffer.from(U).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const H=t||{};H.encoding="base64","commitment"in H||(H.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(H.innerInstructions=t.innerInstructions);const z=[C,H],j=await this._rpcRequest("simulateTransaction",z),te=re(j,Ro);if("error"in te)throw new Error("failed to simulate transaction: "+te.error.message);return te.result}let s;if(e instanceof Ae){let F=e;s=new Ae,s.feePayer=F.feePayer,s.instructions=e.instructions,s.nonceInfo=F.nonceInfo,s.signatures=F.signatures}else s=Ae.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let F=this._disableBlockhashCaching;for(;;){const U=await this._blockhashWithExpiryBlockHeight(F);if(s.lastValidBlockHeight=U.lastValidBlockHeight,s.recentBlockhash=U.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const C=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else F=!0}}const o=s._compile(),c=o.serialize(),_=s._serialize(c).toString("base64"),I={encoding:"base64",commitment:this.commitment};if(n){const F=(Array.isArray(n)?n:o.nonProgramIds()).map(U=>U.toBase58());I.accounts={encoding:"base64",addresses:F}}i&&(I.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(I.innerInstructions=t.innerInstructions);const T=[_,I],D=await this._rpcRequest("simulateTransaction",T),M=re(D,Ro);if("error"in M){let F;if("data"in M.error&&(F=M.error.data.logs,F&&Array.isArray(F))){const U=`
    `,C=U+F.join(U);console.error(M.error.message,C)}throw new en({action:"simulate",signature:"",transactionMessage:M.error.message,logs:F})}return M.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const g=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(g))o=!0;else{this._blockhashInfo.transactionSignatures.push(g);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=be(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],c=await this._rpcRequest("sendTransaction",o),g=re(c,Gh);if("error"in g){let _;throw"data"in g.error&&(_=g.error.data.logs),new en({action:s?"send":"simulate",signature:"",transactionMessage:g.error.message,logs:_})}return g.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=re(e,mh);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=_o([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Se(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=Pe(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=re(e,bh);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=Pe(n),c=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Bo(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=re(e,Zh);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=re(e,kh);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=re(e,Sh);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=re(e,Eh);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){t(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),c=this._makeSubscription({callback:(g,_)=>{t(g,_);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=re(e,Ah);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Br{constructor(e){this._keypair=void 0,this._keypair=e??xo()}static generate(){return new Br(xo())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=Mn(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Br({publicKey:n,secretKey:e})}static fromSeed(e){const t=Mn(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Br({publicKey:t,secretKey:n})}get publicKey(){return new Q(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Xt=Object.freeze({CreateLookupTable:{index:0,layout:L.struct([L.u32("instruction"),Or("recentSlot"),L.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:L.struct([L.u32("instruction")])},ExtendLookupTable:{index:2,layout:L.struct([L.u32("instruction"),Or(),L.seq(ke(),L.offset(L.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:L.struct([L.u32("instruction")])},CloseLookupTable:{index:4,layout:L.struct([L.u32("instruction")])}});class Xh{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Xt))if(o.index==n){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=_e(Xt.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=_e(Xt.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new Q(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(As.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class As{constructor(){}static createLookupTable(e){const[t,n]=Q.findProgramAddressSync([e.authority.toBuffer(),ma().encode(e.recentSlot)],this.programId),s=Xt.CreateLookupTable,i=xe(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:lt.programId,isSigner:!1,isWritable:!1}];return[new Be({programId:this.programId,keys:o,data:i}),t]}static freezeLookupTable(e){const t=Xt.FreezeLookupTable,n=xe(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Be({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){const t=Xt.ExtendLookupTable,n=xe(t,{addresses:e.addresses.map(i=>i.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:lt.programId,isSigner:!1,isWritable:!1}),new Be({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){const t=Xt.DeactivateLookupTable,n=xe(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Be({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){const t=Xt.CloseLookupTable,n=xe(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Be({programId:this.programId,keys:s,data:n})}}As.programId=new Q("AddressLookupTab1e1111111111111111111111111");class Qh{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=L.u8("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(qt))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=_e(qt.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=_e(qt.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=_e(qt.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=_e(qt.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(_s.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const qt=Object.freeze({RequestUnits:{index:0,layout:L.struct([L.u8("instruction"),L.u32("units"),L.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:L.struct([L.u8("instruction"),L.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:L.struct([L.u8("instruction"),L.u32("units")])},SetComputeUnitPrice:{index:3,layout:L.struct([L.u8("instruction"),Or("microLamports")])}});class _s{constructor(){}static requestUnits(e){const t=qt.RequestUnits,n=xe(t,e);return new Be({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=qt.RequestHeapFrame,n=xe(t,e);return new Be({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=qt.SetComputeUnitLimit,n=xe(t,e);return new Be({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=qt.SetComputeUnitPrice,n=xe(t,{microLamports:BigInt(e.microLamports)});return new Be({keys:[],programId:this.programId,data:n})}}_s.programId=new Q("ComputeBudget111111111111111111111111111111");const To=64,Lo=32,Co=64,Oo=L.struct([L.u8("numSignatures"),L.u8("padding"),L.u16("signatureOffset"),L.u16("signatureInstructionIndex"),L.u16("publicKeyOffset"),L.u16("publicKeyInstructionIndex"),L.u16("messageDataOffset"),L.u16("messageDataSize"),L.u16("messageInstructionIndex")]);class jn{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,instructionIndex:i}=e;Se(t.length===Lo,`Public Key must be ${Lo} bytes but received ${t.length} bytes`),Se(s.length===Co,`Signature must be ${Co} bytes but received ${s.length} bytes`);const o=Oo.span,c=o+t.length,g=c+s.length,_=1,I=ae.Buffer.alloc(g+n.length),T=i??65535;return Oo.encode({numSignatures:_,padding:0,signatureOffset:c,signatureInstructionIndex:T,publicKeyOffset:o,publicKeyInstructionIndex:T,messageDataOffset:g,messageDataSize:n.length,messageInstructionIndex:T},I),I.fill(t,o),I.fill(s,c),I.fill(n,g),new Be({keys:[],programId:jn.programId,data:I})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Se(t.length===To,`Private key must be ${To} bytes but received ${t.length} bytes`);try{const i=Br.fromSecretKey(t),o=i.publicKey.toBytes(),c=gs(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:c,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}jn.programId=new Q("Ed25519SigVerify111111111111111111111111111");const ed=(r,e)=>{const t=ps.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};ps.utils.isValidPrivateKey;const td=ps.getPublicKey,No=32,zi=20,Uo=64,rd=11,Fi=L.struct([L.u8("numSignatures"),L.u16("signatureOffset"),L.u8("signatureInstructionIndex"),L.u16("ethAddressOffset"),L.u8("ethAddressInstructionIndex"),L.u16("messageDataOffset"),L.u16("messageDataSize"),L.u8("messageInstructionIndex"),L.blob(20,"ethAddress"),L.blob(64,"signature"),L.u8("recoveryId")]);class Rr{constructor(){}static publicKeyToEthAddress(e){Se(e.length===Uo,`Public key must be ${Uo} bytes but received ${e.length} bytes`);try{return ae.Buffer.from(bo(be(e))).slice(-zi)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,recoveryId:i,instructionIndex:o}=e;return Rr.createInstructionWithEthAddress({ethAddress:Rr.publicKeyToEthAddress(t),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=e;let c;typeof t=="string"?t.startsWith("0x")?c=ae.Buffer.from(t.substr(2),"hex"):c=ae.Buffer.from(t,"hex"):c=t,Se(c.length===zi,`Address must be ${zi} bytes but received ${c.length} bytes`);const g=1+rd,_=g,I=g+c.length,T=I+s.length+1,D=1,M=ae.Buffer.alloc(Fi.span+n.length);return Fi.encode({numSignatures:D,signatureOffset:I,signatureInstructionIndex:o,ethAddressOffset:_,ethAddressInstructionIndex:o,messageDataOffset:T,messageDataSize:n.length,messageInstructionIndex:o,signature:be(s),ethAddress:be(c),recoveryId:i},M),M.fill(be(n),Fi.span),new Be({keys:[],programId:Rr.programId,data:M})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Se(t.length===No,`Private key must be ${No} bytes but received ${t.length} bytes`);try{const i=be(t),o=td(i,!1).slice(1),c=ae.Buffer.from(bo(be(n))),[g,_]=ed(c,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:g,recoveryId:_,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Rr.programId=new Q("KeccakSecp256k11111111111111111111111111111");var ec;const tc=new Q("StakeConfig11111111111111111111111111111111");class rc{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class an{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}ec=an;an.default=new ec(0,0,Q.default);class nd{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(dt))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=_e(dt.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new rc(new Q(t.staker),new Q(t.withdrawer)),lockup:new an(n.unixTimestamp,n.epoch,new Q(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),_e(dt.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=_e(dt.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Q(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:i}=_e(dt.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new Q(i),newAuthorizedPubkey:new Q(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=_e(dt.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),_e(dt.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=_e(dt.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),_e(dt.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Zn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const dt=Object.freeze({Initialize:{index:0,layout:L.struct([L.u32("instruction"),al(),cl()])},Authorize:{index:1,layout:L.struct([L.u32("instruction"),ke("newAuthorized"),L.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:L.struct([L.u32("instruction")])},Split:{index:3,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},Withdraw:{index:4,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},Deactivate:{index:5,layout:L.struct([L.u32("instruction")])},Merge:{index:7,layout:L.struct([L.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:L.struct([L.u32("instruction"),ke("newAuthorized"),L.u32("stakeAuthorizationType"),pr("authoritySeed"),ke("authorityOwner")])}}),id=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Zn{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:s}=e,i=s||an.default,o=dt.Initialize,c=xe(o,{authorized:{staker:be(n.staker.toBuffer()),withdrawer:be(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:be(i.custodian.toBuffer())}}),g={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Cr,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new Be(g)}static createAccountWithSeed(e){const t=new Ae;t.add(lt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(e){const t=new Ae;t.add(lt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:s}=e,i=dt.Delegate,o=xe(i);return new Ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:xn,isSigner:!1,isWritable:!1},{pubkey:tc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=e,c=dt.Authorize,g=xe(c,{newAuthorized:be(s.toBuffer()),stakeAuthorizationType:i.index}),_=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ft,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&_.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ae().add({keys:_,programId:this.programId,data:g})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:c,custodianPubkey:g}=e,_=dt.AuthorizeWithSeed,I=xe(_,{newAuthorized:be(o.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:s,authorityOwner:be(i.toBuffer())}),T=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:Ft,isSigner:!1,isWritable:!1}];return g&&T.push({pubkey:g,isSigner:!0,isWritable:!1}),new Ae().add({keys:T,programId:this.programId,data:I})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=e,o=dt.Split,c=xe(o,{lamports:i});return new Be({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(e,t){const n=new Ae;return n.add(lt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:c,lamports:g}=e,_=new Ae;return _.add(lt.allocate({accountPubkey:i,basePubkey:o,seed:c,space:this.space,programId:this.programId})),t&&t>0&&_.add(lt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),_.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:g}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:s}=e,i=dt.Merge,o=xe(i);return new Ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:xn,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=e,c=dt.Withdraw,g=xe(c,{lamports:i}),_=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:xn,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&_.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ae().add({keys:_,programId:this.programId,data:g})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,s=dt.Deactivate,i=xe(s);return new Ae().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Zn.programId=new Q("Stake11111111111111111111111111111111111111");Zn.space=200;class nc{constructor(e,t,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=s}}class sd{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=L.u32("instruction").decode(e.data);let s;for(const[i,o]of Object.entries(Kt))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=_e(Kt.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new nc(new Q(t.nodePubkey),new Q(t.authorizedVoter),new Q(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=_e(Kt.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Q(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:i}}=_e(Kt.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Q(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Q(s),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=_e(Kt.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Dr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Kt=Object.freeze({InitializeAccount:{index:0,layout:L.struct([L.u32("instruction"),ul()])},Authorize:{index:1,layout:L.struct([L.u32("instruction"),ke("newAuthorized"),L.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:L.struct([L.u32("instruction"),L.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:L.struct([L.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:L.struct([L.u32("instruction"),fl()])}}),od=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Dr{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:s}=e,i=Kt.InitializeAccount,o=xe(i,{voteInit:{nodePubkey:be(s.nodePubkey.toBuffer()),authorizedVoter:be(s.authorizedVoter.toBuffer()),authorizedWithdrawer:be(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Cr,isSigner:!1,isWritable:!1},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Be(c)}static createAccount(e){const t=new Ae;return t.add(lt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=e,o=Kt.Authorize,c=xe(o,{newAuthorized:be(s.toBuffer()),voteAuthorizationType:i.index}),g=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ae().add({keys:g,programId:this.programId,data:c})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:c}=e,g=Kt.AuthorizeWithSeed,_=xe(g,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:be(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:be(i.toBuffer()),voteAuthorizationType:o.index}}),I=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:Ft,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Ae().add({keys:I,programId:this.programId,data:_})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=e,o=Kt.Withdraw,c=xe(o,{lamports:s}),g=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ae().add({keys:g,programId:this.programId,data:c})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return Dr.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,i=Kt.UpdateValidatorIdentity,o=xe(i),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ae().add({keys:c,programId:this.programId,data:o})}}Dr.programId=new Q("Vote111111111111111111111111111111111111111");Dr.space=3762;const ic=new Q("Va1idator1nfo111111111111111111111111111111"),ad=J({name:ee(),website:le(ee()),details:le(ee()),iconUrl:le(ee()),keybaseUsername:le(ee())});class Is{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(_t(t)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new Q(It(t,0,Wt)),c=Dt(t)===1;s.push({publicKey:o,isSigner:c})}if(s[0].publicKey.equals(ic)&&s[1].isSigner){const i=pr().decode(ae.Buffer.from(t)),o=JSON.parse(i);return wa(o,ad),new Is(s[1].publicKey,o)}return null}}const cd=new Q("Vote111111111111111111111111111111111111111"),ud=L.struct([ke("nodePubkey"),ke("authorizedWithdrawer"),L.u8("commission"),L.nu64(),L.seq(L.struct([L.nu64("slot"),L.u32("confirmationCount")]),L.offset(L.u32(),-8),"votes"),L.u8("rootSlotValid"),L.nu64("rootSlot"),L.nu64(),L.seq(L.struct([L.nu64("epoch"),ke("authorizedVoter")]),L.offset(L.u32(),-8),"authorizedVoters"),L.struct([L.seq(L.struct([ke("authorizedPubkey"),L.nu64("epochOfLastAuthorizedSwitch"),L.nu64("targetEpoch")]),32,"buf"),L.nu64("idx"),L.u8("isEmpty")],"priorVoters"),L.nu64(),L.seq(L.struct([L.nu64("epoch"),L.nu64("credits"),L.nu64("prevCredits")]),L.offset(L.u32(),-8),"epochCredits"),L.struct([L.nu64("slot"),L.nu64("timestamp")],"lastTimestamp")]);class Bs{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=ud.decode(be(e),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new Bs({nodePubkey:new Q(n.nodePubkey),authorizedWithdrawer:new Q(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(fd),priorVoters:ld(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function fd({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new Q(r)}}function zo({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Q(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function ld({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(zo),...r.slice(0,e).map(zo)]}const Fo={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function hd(r,e){const t=e===!1?"http":"https";if(!r)return Fo[t].devnet;const n=Fo[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function dd(r,e,t,n){let s,i;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,i=n):i=t;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},c=await r.sendRawTransaction(e,o),g=i&&i.commitment,I=(await(s?r.confirmTransaction(s,g):r.confirmTransaction(c,g))).value;if(I.err)throw c!=null?new en({action:o?.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(I)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(I)})`);return c}const pd=1e9,Pd=Object.freeze(Object.defineProperty({__proto__:null,Account:il,AddressLookupTableAccount:Ji,AddressLookupTableInstruction:Xh,AddressLookupTableProgram:As,Authorized:rc,BLOCKHASH_CACHE_TIMEOUT_MS:Ha,BPF_LOADER_DEPRECATED_PROGRAM_ID:sl,BPF_LOADER_PROGRAM_ID:Sl,BpfLoader:El,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:qt,ComputeBudgetInstruction:Qh,ComputeBudgetProgram:_s,Connection:Jh,Ed25519Program:jn,Enum:rl,EpochSchedule:Ka,FeeCalculatorLayout:Da,Keypair:Br,LAMPORTS_PER_SOL:pd,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Xt,Loader:mr,Lockup:an,MAX_SEED_LENGTH:Na,Message:Nt,MessageAccountKeys:Qr,MessageV0:yr,NONCE_ACCOUNT_LENGTH:Yi,NonceAccount:$n,PACKET_DATA_SIZE:or,PUBLIC_KEY_LENGTH:Wt,PublicKey:Q,SIGNATURE_LENGTH_IN_BYTES:Xr,SOLANA_SCHEMA:jr,STAKE_CONFIG_ID:tc,STAKE_INSTRUCTION_LAYOUTS:dt,SYSTEM_INSTRUCTION_LAYOUTS:Te,SYSVAR_CLOCK_PUBKEY:Ft,SYSVAR_EPOCH_SCHEDULE_PUBKEY:gl,SYSVAR_INSTRUCTIONS_PUBKEY:yl,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:kn,SYSVAR_RENT_PUBKEY:Cr,SYSVAR_REWARDS_PUBKEY:ml,SYSVAR_SLOT_HASHES_PUBKEY:wl,SYSVAR_SLOT_HISTORY_PUBKEY:bl,SYSVAR_STAKE_HISTORY_PUBKEY:xn,Secp256k1Program:Rr,SendTransactionError:en,SolanaJSONRPCError:ce,SolanaJSONRPCErrorCode:vl,StakeAuthorizationLayout:id,StakeInstruction:nd,StakeProgram:Zn,Struct:ys,SystemInstruction:kl,SystemProgram:lt,Transaction:Ae,TransactionExpiredBlockheightExceededError:ms,TransactionExpiredNonceInvalidError:_r,TransactionExpiredTimeoutError:ws,TransactionInstruction:Be,TransactionMessage:vs,TransactionStatus:Zt,VALIDATOR_INFO_KEY:ic,VERSION_PREFIX_MASK:Wn,VOTE_PROGRAM_ID:cd,ValidatorInfo:Is,VersionedMessage:bs,VersionedTransaction:ks,VoteAccount:Bs,VoteAuthorizationLayout:od,VoteInit:nc,VoteInstruction:sd,VoteProgram:Dr,clusterApiUrl:hd,sendAndConfirmRawTransaction:dd,sendAndConfirmTransaction:Zi},Symbol.toStringTag,{value:"Module"}));var gd=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Di=Math.ceil,Pt=Math.floor,At="[BigNumber Error] ",Do=At+"Number primitive has more than 15 significant digits: ",Ct=1e14,ye=14,qi=9007199254740991,Ki=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ir=1e7,ht=1e9;function sc(r){var e,t,n,s=z.prototype={constructor:z,toString:null,valueOf:null},i=new z(1),o=20,c=4,g=-7,_=21,I=-1e7,T=1e7,D=!1,M=1,F=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},C="0123456789abcdefghijklmnopqrstuvwxyz",H=!0;function z(x,m){var v,S,E,d,a,f,h,w,b=this;if(!(b instanceof z))return new z(x,m);if(m==null){if(x&&x._isBigNumber===!0){b.s=x.s,!x.c||x.e>T?b.c=b.e=null:x.e<I?b.c=[b.e=0]:(b.e=x.e,b.c=x.c.slice());return}if((f=typeof x=="number")&&x*0==0){if(b.s=1/x<0?(x=-x,-1):1,x===~~x){for(d=0,a=x;a>=10;a/=10,d++);d>T?b.c=b.e=null:(b.e=d,b.c=[x]);return}w=String(x)}else{if(!gd.test(w=String(x)))return n(b,w,f);b.s=w.charCodeAt(0)==45?(w=w.slice(1),-1):1}(d=w.indexOf("."))>-1&&(w=w.replace(".","")),(a=w.search(/e/i))>0?(d<0&&(d=a),d+=+w.slice(a+1),w=w.substring(0,a)):d<0&&(d=w.length)}else{if(Oe(m,2,C.length,"Base"),m==10&&H)return b=new z(x),Y(b,o+b.e+1,c);if(w=String(x),f=typeof x=="number"){if(x*0!=0)return n(b,w,f,m);if(b.s=1/x<0?(w=w.slice(1),-1):1,z.DEBUG&&w.replace(/^0\.0*|\./,"").length>15)throw Error(Do+x)}else b.s=w.charCodeAt(0)===45?(w=w.slice(1),-1):1;for(v=C.slice(0,m),d=a=0,h=w.length;a<h;a++)if(v.indexOf(S=w.charAt(a))<0){if(S=="."){if(a>d){d=h;continue}}else if(!E&&(w==w.toUpperCase()&&(w=w.toLowerCase())||w==w.toLowerCase()&&(w=w.toUpperCase()))){E=!0,a=-1,d=0;continue}return n(b,String(x),f,m)}f=!1,w=t(w,m,10,b.s),(d=w.indexOf("."))>-1?w=w.replace(".",""):d=w.length}for(a=0;w.charCodeAt(a)===48;a++);for(h=w.length;w.charCodeAt(--h)===48;);if(w=w.slice(a,++h)){if(h-=a,f&&z.DEBUG&&h>15&&(x>qi||x!==Pt(x)))throw Error(Do+b.s*x);if((d=d-a-1)>T)b.c=b.e=null;else if(d<I)b.c=[b.e=0];else{if(b.e=d,b.c=[],a=(d+1)%ye,d<0&&(a+=ye),a<h){for(a&&b.c.push(+w.slice(0,a)),h-=ye;a<h;)b.c.push(+w.slice(a,a+=ye));a=ye-(w=w.slice(a)).length}else a-=h;for(;a--;w+="0");b.c.push(+w)}}else b.c=[b.e=0]}z.clone=sc,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(x){var m,v;if(x!=null)if(typeof x=="object"){if(x.hasOwnProperty(m="DECIMAL_PLACES")&&(v=x[m],Oe(v,0,ht,m),o=v),x.hasOwnProperty(m="ROUNDING_MODE")&&(v=x[m],Oe(v,0,8,m),c=v),x.hasOwnProperty(m="EXPONENTIAL_AT")&&(v=x[m],v&&v.pop?(Oe(v[0],-ht,0,m),Oe(v[1],0,ht,m),g=v[0],_=v[1]):(Oe(v,-ht,ht,m),g=-(_=v<0?-v:v))),x.hasOwnProperty(m="RANGE"))if(v=x[m],v&&v.pop)Oe(v[0],-ht,-1,m),Oe(v[1],1,ht,m),I=v[0],T=v[1];else if(Oe(v,-ht,ht,m),v)I=-(T=v<0?-v:v);else throw Error(At+m+" cannot be zero: "+v);if(x.hasOwnProperty(m="CRYPTO"))if(v=x[m],v===!!v)if(v)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))D=v;else throw D=!v,Error(At+"crypto unavailable");else D=v;else throw Error(At+m+" not true or false: "+v);if(x.hasOwnProperty(m="MODULO_MODE")&&(v=x[m],Oe(v,0,9,m),M=v),x.hasOwnProperty(m="POW_PRECISION")&&(v=x[m],Oe(v,0,ht,m),F=v),x.hasOwnProperty(m="FORMAT"))if(v=x[m],typeof v=="object")U=v;else throw Error(At+m+" not an object: "+v);if(x.hasOwnProperty(m="ALPHABET"))if(v=x[m],typeof v=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(v))H=v.slice(0,10)=="0123456789",C=v;else throw Error(At+m+" invalid: "+v)}else throw Error(At+"Object expected: "+x);return{DECIMAL_PLACES:o,ROUNDING_MODE:c,EXPONENTIAL_AT:[g,_],RANGE:[I,T],CRYPTO:D,MODULO_MODE:M,POW_PRECISION:F,FORMAT:U,ALPHABET:C}},z.isBigNumber=function(x){if(!x||x._isBigNumber!==!0)return!1;if(!z.DEBUG)return!0;var m,v,S=x.c,E=x.e,d=x.s;e:if({}.toString.call(S)=="[object Array]"){if((d===1||d===-1)&&E>=-ht&&E<=ht&&E===Pt(E)){if(S[0]===0){if(E===0&&S.length===1)return!0;break e}if(m=(E+1)%ye,m<1&&(m+=ye),String(S[0]).length==m){for(m=0;m<S.length;m++)if(v=S[m],v<0||v>=Ct||v!==Pt(v))break e;if(v!==0)return!0}}}else if(S===null&&E===null&&(d===null||d===1||d===-1))return!0;throw Error(At+"Invalid BigNumber: "+x)},z.maximum=z.max=function(){return te(arguments,-1)},z.minimum=z.min=function(){return te(arguments,1)},z.random=(function(){var x=9007199254740992,m=Math.random()*x&2097151?function(){return Pt(Math.random()*x)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(v){var S,E,d,a,f,h=0,w=[],b=new z(i);if(v==null?v=o:Oe(v,0,ht),a=Di(v/ye),D)if(crypto.getRandomValues){for(S=crypto.getRandomValues(new Uint32Array(a*=2));h<a;)f=S[h]*131072+(S[h+1]>>>11),f>=9e15?(E=crypto.getRandomValues(new Uint32Array(2)),S[h]=E[0],S[h+1]=E[1]):(w.push(f%1e14),h+=2);h=a/2}else if(crypto.randomBytes){for(S=crypto.randomBytes(a*=7);h<a;)f=(S[h]&31)*281474976710656+S[h+1]*1099511627776+S[h+2]*4294967296+S[h+3]*16777216+(S[h+4]<<16)+(S[h+5]<<8)+S[h+6],f>=9e15?crypto.randomBytes(7).copy(S,h):(w.push(f%1e14),h+=7);h=a/7}else throw D=!1,Error(At+"crypto unavailable");if(!D)for(;h<a;)f=m(),f<9e15&&(w[h++]=f%1e14);for(a=w[--h],v%=ye,a&&v&&(f=Ki[ye-v],w[h]=Pt(a/f)*f);w[h]===0;w.pop(),h--);if(h<0)w=[d=0];else{for(d=-1;w[0]===0;w.splice(0,1),d-=ye);for(h=1,f=w[0];f>=10;f/=10,h++);h<ye&&(d-=ye-h)}return b.e=d,b.c=w,b}})(),z.sum=function(){for(var x=1,m=arguments,v=new z(m[0]);x<m.length;)v=v.plus(m[x++]);return v},t=(function(){var x="0123456789";function m(v,S,E,d){for(var a,f=[0],h,w=0,b=v.length;w<b;){for(h=f.length;h--;f[h]*=S);for(f[0]+=d.indexOf(v.charAt(w++)),a=0;a<f.length;a++)f[a]>E-1&&(f[a+1]==null&&(f[a+1]=0),f[a+1]+=f[a]/E|0,f[a]%=E)}return f.reverse()}return function(v,S,E,d,a){var f,h,w,b,B,N,k,u,l=v.indexOf("."),A=o,R=c;for(l>=0&&(b=F,F=0,v=v.replace(".",""),u=new z(S),N=u.pow(v.length-l),F=b,u.c=m(jt(Mt(N.c),N.e,"0"),10,E,x),u.e=u.c.length),k=m(v,S,E,a?(f=C,x):(f=x,C)),w=b=k.length;k[--b]==0;k.pop());if(!k[0])return f.charAt(0);if(l<0?--w:(N.c=k,N.e=w,N.s=d,N=e(N,u,A,R,E),k=N.c,B=N.r,w=N.e),h=w+A+1,l=k[h],b=E/2,B=B||h<0||k[h+1]!=null,B=R<4?(l!=null||B)&&(R==0||R==(N.s<0?3:2)):l>b||l==b&&(R==4||B||R==6&&k[h-1]&1||R==(N.s<0?8:7)),h<1||!k[0])v=B?jt(f.charAt(1),-A,f.charAt(0)):f.charAt(0);else{if(k.length=h,B)for(--E;++k[--h]>E;)k[h]=0,h||(++w,k=[1].concat(k));for(b=k.length;!k[--b];);for(l=0,v="";l<=b;v+=f.charAt(k[l++]));v=jt(v,w,f.charAt(0))}return v}})(),e=(function(){function x(S,E,d){var a,f,h,w,b=0,B=S.length,N=E%ir,k=E/ir|0;for(S=S.slice();B--;)h=S[B]%ir,w=S[B]/ir|0,a=k*h+w*N,f=N*h+a%ir*ir+b,b=(f/d|0)+(a/ir|0)+k*w,S[B]=f%d;return b&&(S=[b].concat(S)),S}function m(S,E,d,a){var f,h;if(d!=a)h=d>a?1:-1;else for(f=h=0;f<d;f++)if(S[f]!=E[f]){h=S[f]>E[f]?1:-1;break}return h}function v(S,E,d,a){for(var f=0;d--;)S[d]-=f,f=S[d]<E[d]?1:0,S[d]=f*a+S[d]-E[d];for(;!S[0]&&S.length>1;S.splice(0,1));}return function(S,E,d,a,f){var h,w,b,B,N,k,u,l,A,R,q,G,oe,ue,Fe,pe,Ee,Me=S.s==E.s?1:-1,me=S.c,de=E.c;if(!me||!me[0]||!de||!de[0])return new z(!S.s||!E.s||(me?de&&me[0]==de[0]:!de)?NaN:me&&me[0]==0||!de?Me*0:Me/0);for(l=new z(Me),A=l.c=[],w=S.e-E.e,Me=d+w+1,f||(f=Ct,w=Tt(S.e/ye)-Tt(E.e/ye),Me=Me/ye|0),b=0;de[b]==(me[b]||0);b++);if(de[b]>(me[b]||0)&&w--,Me<0)A.push(1),B=!0;else{for(ue=me.length,pe=de.length,b=0,Me+=2,N=Pt(f/(de[0]+1)),N>1&&(de=x(de,N,f),me=x(me,N,f),pe=de.length,ue=me.length),oe=pe,R=me.slice(0,pe),q=R.length;q<pe;R[q++]=0);Ee=de.slice(),Ee=[0].concat(Ee),Fe=de[0],de[1]>=f/2&&Fe++;do{if(N=0,h=m(de,R,pe,q),h<0){if(G=R[0],pe!=q&&(G=G*f+(R[1]||0)),N=Pt(G/Fe),N>1)for(N>=f&&(N=f-1),k=x(de,N,f),u=k.length,q=R.length;m(k,R,u,q)==1;)N--,v(k,pe<u?Ee:de,u,f),u=k.length,h=1;else N==0&&(h=N=1),k=de.slice(),u=k.length;if(u<q&&(k=[0].concat(k)),v(R,k,q,f),q=R.length,h==-1)for(;m(de,R,pe,q)<1;)N++,v(R,pe<q?Ee:de,q,f),q=R.length}else h===0&&(N++,R=[0]);A[b++]=N,R[0]?R[q++]=me[oe]||0:(R=[me[oe]],q=1)}while((oe++<ue||R[0]!=null)&&Me--);B=R[0]!=null,A[0]||A.splice(0,1)}if(f==Ct){for(b=1,Me=A[0];Me>=10;Me/=10,b++);Y(l,d+(l.e=b+w*ye-1)+1,a,B)}else l.e=w,l.r=+B;return l}})();function j(x,m,v,S){var E,d,a,f,h;if(v==null?v=c:Oe(v,0,8),!x.c)return x.toString();if(E=x.c[0],a=x.e,m==null)h=Mt(x.c),h=S==1||S==2&&(a<=g||a>=_)?bn(h,a):jt(h,a,"0");else if(x=Y(new z(x),m,v),d=x.e,h=Mt(x.c),f=h.length,S==1||S==2&&(m<=d||d<=g)){for(;f<m;h+="0",f++);h=bn(h,d)}else if(m-=a,h=jt(h,d,"0"),d+1>f){if(--m>0)for(h+=".";m--;h+="0");}else if(m+=d-f,m>0)for(d+1==f&&(h+=".");m--;h+="0");return x.s<0&&E?"-"+h:h}function te(x,m){for(var v,S,E=1,d=new z(x[0]);E<x.length;E++)S=new z(x[E]),(!S.s||(v=ur(d,S))===m||v===0&&d.s===m)&&(d=S);return d}function V(x,m,v){for(var S=1,E=m.length;!m[--E];m.pop());for(E=m[0];E>=10;E/=10,S++);return(v=S+v*ye-1)>T?x.c=x.e=null:v<I?x.c=[x.e=0]:(x.e=v,x.c=m),x}n=(function(){var x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,m=/^([^.]+)\.$/,v=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,E=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(d,a,f,h){var w,b=f?a:a.replace(E,"");if(S.test(b))d.s=isNaN(b)?null:b<0?-1:1;else{if(!f&&(b=b.replace(x,function(B,N,k){return w=(k=k.toLowerCase())=="x"?16:k=="b"?2:8,!h||h==w?N:B}),h&&(w=h,b=b.replace(m,"$1").replace(v,"0.$1")),a!=b))return new z(b,w);if(z.DEBUG)throw Error(At+"Not a"+(h?" base "+h:"")+" number: "+a);d.s=null}d.c=d.e=null}})();function Y(x,m,v,S){var E,d,a,f,h,w,b,B=x.c,N=Ki;if(B){e:{for(E=1,f=B[0];f>=10;f/=10,E++);if(d=m-E,d<0)d+=ye,a=m,h=B[w=0],b=Pt(h/N[E-a-1]%10);else if(w=Di((d+1)/ye),w>=B.length)if(S){for(;B.length<=w;B.push(0));h=b=0,E=1,d%=ye,a=d-ye+1}else break e;else{for(h=f=B[w],E=1;f>=10;f/=10,E++);d%=ye,a=d-ye+E,b=a<0?0:Pt(h/N[E-a-1]%10)}if(S=S||m<0||B[w+1]!=null||(a<0?h:h%N[E-a-1]),S=v<4?(b||S)&&(v==0||v==(x.s<0?3:2)):b>5||b==5&&(v==4||S||v==6&&(d>0?a>0?h/N[E-a]:0:B[w-1])%10&1||v==(x.s<0?8:7)),m<1||!B[0])return B.length=0,S?(m-=x.e+1,B[0]=N[(ye-m%ye)%ye],x.e=-m||0):B[0]=x.e=0,x;if(d==0?(B.length=w,f=1,w--):(B.length=w+1,f=N[ye-d],B[w]=a>0?Pt(h/N[E-a]%N[a])*f:0),S)for(;;)if(w==0){for(d=1,a=B[0];a>=10;a/=10,d++);for(a=B[0]+=f,f=1;a>=10;a/=10,f++);d!=f&&(x.e++,B[0]==Ct&&(B[0]=1));break}else{if(B[w]+=f,B[w]!=Ct)break;B[w--]=0,f=1}for(d=B.length;B[--d]===0;B.pop());}x.e>T?x.c=x.e=null:x.e<I&&(x.c=[x.e=0])}return x}function ne(x){var m,v=x.e;return v===null?x.toString():(m=Mt(x.c),m=v<=g||v>=_?bn(m,v):jt(m,v,"0"),x.s<0?"-"+m:m)}return s.absoluteValue=s.abs=function(){var x=new z(this);return x.s<0&&(x.s=1),x},s.comparedTo=function(x,m){return ur(this,new z(x,m))},s.decimalPlaces=s.dp=function(x,m){var v,S,E,d=this;if(x!=null)return Oe(x,0,ht),m==null?m=c:Oe(m,0,8),Y(new z(d),x+d.e+1,m);if(!(v=d.c))return null;if(S=((E=v.length-1)-Tt(this.e/ye))*ye,E=v[E])for(;E%10==0;E/=10,S--);return S<0&&(S=0),S},s.dividedBy=s.div=function(x,m){return e(this,new z(x,m),o,c)},s.dividedToIntegerBy=s.idiv=function(x,m){return e(this,new z(x,m),0,1)},s.exponentiatedBy=s.pow=function(x,m){var v,S,E,d,a,f,h,w,b,B=this;if(x=new z(x),x.c&&!x.isInteger())throw Error(At+"Exponent not an integer: "+ne(x));if(m!=null&&(m=new z(m)),f=x.e>14,!B.c||!B.c[0]||B.c[0]==1&&!B.e&&B.c.length==1||!x.c||!x.c[0])return b=new z(Math.pow(+ne(B),f?x.s*(2-wn(x)):+ne(x))),m?b.mod(m):b;if(h=x.s<0,m){if(m.c?!m.c[0]:!m.s)return new z(NaN);S=!h&&B.isInteger()&&m.isInteger(),S&&(B=B.mod(m))}else{if(x.e>9&&(B.e>0||B.e<-1||(B.e==0?B.c[0]>1||f&&B.c[1]>=24e7:B.c[0]<8e13||f&&B.c[0]<=9999975e7)))return d=B.s<0&&wn(x)?-0:0,B.e>-1&&(d=1/d),new z(h?1/d:d);F&&(d=Di(F/ye+2))}for(f?(v=new z(.5),h&&(x.s=1),w=wn(x)):(E=Math.abs(+ne(x)),w=E%2),b=new z(i);;){if(w){if(b=b.times(B),!b.c)break;d?b.c.length>d&&(b.c.length=d):S&&(b=b.mod(m))}if(E){if(E=Pt(E/2),E===0)break;w=E%2}else if(x=x.times(v),Y(x,x.e+1,1),x.e>14)w=wn(x);else{if(E=+ne(x),E===0)break;w=E%2}B=B.times(B),d?B.c&&B.c.length>d&&(B.c.length=d):S&&(B=B.mod(m))}return S?b:(h&&(b=i.div(b)),m?b.mod(m):d?Y(b,F,c,a):b)},s.integerValue=function(x){var m=new z(this);return x==null?x=c:Oe(x,0,8),Y(m,m.e+1,x)},s.isEqualTo=s.eq=function(x,m){return ur(this,new z(x,m))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(x,m){return ur(this,new z(x,m))>0},s.isGreaterThanOrEqualTo=s.gte=function(x,m){return(m=ur(this,new z(x,m)))===1||m===0},s.isInteger=function(){return!!this.c&&Tt(this.e/ye)>this.c.length-2},s.isLessThan=s.lt=function(x,m){return ur(this,new z(x,m))<0},s.isLessThanOrEqualTo=s.lte=function(x,m){return(m=ur(this,new z(x,m)))===-1||m===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(x,m){var v,S,E,d,a=this,f=a.s;if(x=new z(x,m),m=x.s,!f||!m)return new z(NaN);if(f!=m)return x.s=-m,a.plus(x);var h=a.e/ye,w=x.e/ye,b=a.c,B=x.c;if(!h||!w){if(!b||!B)return b?(x.s=-m,x):new z(B?a:NaN);if(!b[0]||!B[0])return B[0]?(x.s=-m,x):new z(b[0]?a:c==3?-0:0)}if(h=Tt(h),w=Tt(w),b=b.slice(),f=h-w){for((d=f<0)?(f=-f,E=b):(w=h,E=B),E.reverse(),m=f;m--;E.push(0));E.reverse()}else for(S=(d=(f=b.length)<(m=B.length))?f:m,f=m=0;m<S;m++)if(b[m]!=B[m]){d=b[m]<B[m];break}if(d&&(E=b,b=B,B=E,x.s=-x.s),m=(S=B.length)-(v=b.length),m>0)for(;m--;b[v++]=0);for(m=Ct-1;S>f;){if(b[--S]<B[S]){for(v=S;v&&!b[--v];b[v]=m);--b[v],b[S]+=Ct}b[S]-=B[S]}for(;b[0]==0;b.splice(0,1),--w);return b[0]?V(x,b,w):(x.s=c==3?-1:1,x.c=[x.e=0],x)},s.modulo=s.mod=function(x,m){var v,S,E=this;return x=new z(x,m),!E.c||!x.s||x.c&&!x.c[0]?new z(NaN):!x.c||E.c&&!E.c[0]?new z(E):(M==9?(S=x.s,x.s=1,v=e(E,x,0,3),x.s=S,v.s*=S):v=e(E,x,0,M),x=E.minus(v.times(x)),!x.c[0]&&M==1&&(x.s=E.s),x)},s.multipliedBy=s.times=function(x,m){var v,S,E,d,a,f,h,w,b,B,N,k,u,l,A,R=this,q=R.c,G=(x=new z(x,m)).c;if(!q||!G||!q[0]||!G[0])return!R.s||!x.s||q&&!q[0]&&!G||G&&!G[0]&&!q?x.c=x.e=x.s=null:(x.s*=R.s,!q||!G?x.c=x.e=null:(x.c=[0],x.e=0)),x;for(S=Tt(R.e/ye)+Tt(x.e/ye),x.s*=R.s,h=q.length,B=G.length,h<B&&(u=q,q=G,G=u,E=h,h=B,B=E),E=h+B,u=[];E--;u.push(0));for(l=Ct,A=ir,E=B;--E>=0;){for(v=0,N=G[E]%A,k=G[E]/A|0,a=h,d=E+a;d>E;)w=q[--a]%A,b=q[a]/A|0,f=k*w+b*N,w=N*w+f%A*A+u[d]+v,v=(w/l|0)+(f/A|0)+k*b,u[d--]=w%l;u[d]=v}return v?++S:u.splice(0,1),V(x,u,S)},s.negated=function(){var x=new z(this);return x.s=-x.s||null,x},s.plus=function(x,m){var v,S=this,E=S.s;if(x=new z(x,m),m=x.s,!E||!m)return new z(NaN);if(E!=m)return x.s=-m,S.minus(x);var d=S.e/ye,a=x.e/ye,f=S.c,h=x.c;if(!d||!a){if(!f||!h)return new z(E/0);if(!f[0]||!h[0])return h[0]?x:new z(f[0]?S:E*0)}if(d=Tt(d),a=Tt(a),f=f.slice(),E=d-a){for(E>0?(a=d,v=h):(E=-E,v=f),v.reverse();E--;v.push(0));v.reverse()}for(E=f.length,m=h.length,E-m<0&&(v=h,h=f,f=v,m=E),E=0;m;)E=(f[--m]=f[m]+h[m]+E)/Ct|0,f[m]=Ct===f[m]?0:f[m]%Ct;return E&&(f=[E].concat(f),++a),V(x,f,a)},s.precision=s.sd=function(x,m){var v,S,E,d=this;if(x!=null&&x!==!!x)return Oe(x,1,ht),m==null?m=c:Oe(m,0,8),Y(new z(d),x,m);if(!(v=d.c))return null;if(E=v.length-1,S=E*ye+1,E=v[E]){for(;E%10==0;E/=10,S--);for(E=v[0];E>=10;E/=10,S++);}return x&&d.e+1>S&&(S=d.e+1),S},s.shiftedBy=function(x){return Oe(x,-qi,qi),this.times("1e"+x)},s.squareRoot=s.sqrt=function(){var x,m,v,S,E,d=this,a=d.c,f=d.s,h=d.e,w=o+4,b=new z("0.5");if(f!==1||!a||!a[0])return new z(!f||f<0&&(!a||a[0])?NaN:a?d:1/0);if(f=Math.sqrt(+ne(d)),f==0||f==1/0?(m=Mt(a),(m.length+h)%2==0&&(m+="0"),f=Math.sqrt(+m),h=Tt((h+1)/2)-(h<0||h%2),f==1/0?m="5e"+h:(m=f.toExponential(),m=m.slice(0,m.indexOf("e")+1)+h),v=new z(m)):v=new z(f+""),v.c[0]){for(h=v.e,f=h+w,f<3&&(f=0);;)if(E=v,v=b.times(E.plus(e(d,E,w,1))),Mt(E.c).slice(0,f)===(m=Mt(v.c)).slice(0,f))if(v.e<h&&--f,m=m.slice(f-3,f+1),m=="9999"||!S&&m=="4999"){if(!S&&(Y(E,E.e+o+2,0),E.times(E).eq(d))){v=E;break}w+=4,f+=4,S=1}else{(!+m||!+m.slice(1)&&m.charAt(0)=="5")&&(Y(v,v.e+o+2,1),x=!v.times(v).eq(d));break}}return Y(v,v.e+o+1,c,x)},s.toExponential=function(x,m){return x!=null&&(Oe(x,0,ht),x++),j(this,x,m,1)},s.toFixed=function(x,m){return x!=null&&(Oe(x,0,ht),x=x+this.e+1),j(this,x,m)},s.toFormat=function(x,m,v){var S,E=this;if(v==null)x!=null&&m&&typeof m=="object"?(v=m,m=null):x&&typeof x=="object"?(v=x,x=m=null):v=U;else if(typeof v!="object")throw Error(At+"Argument not an object: "+v);if(S=E.toFixed(x,m),E.c){var d,a=S.split("."),f=+v.groupSize,h=+v.secondaryGroupSize,w=v.groupSeparator||"",b=a[0],B=a[1],N=E.s<0,k=N?b.slice(1):b,u=k.length;if(h&&(d=f,f=h,h=d,u-=d),f>0&&u>0){for(d=u%f||f,b=k.substr(0,d);d<u;d+=f)b+=w+k.substr(d,f);h>0&&(b+=w+k.slice(d)),N&&(b="-"+b)}S=B?b+(v.decimalSeparator||"")+((h=+v.fractionGroupSize)?B.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(v.fractionGroupSeparator||"")):B):b}return(v.prefix||"")+S+(v.suffix||"")},s.toFraction=function(x){var m,v,S,E,d,a,f,h,w,b,B,N,k=this,u=k.c;if(x!=null&&(f=new z(x),!f.isInteger()&&(f.c||f.s!==1)||f.lt(i)))throw Error(At+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+ne(f));if(!u)return new z(k);for(m=new z(i),w=v=new z(i),S=h=new z(i),N=Mt(u),d=m.e=N.length-k.e-1,m.c[0]=Ki[(a=d%ye)<0?ye+a:a],x=!x||f.comparedTo(m)>0?d>0?m:w:f,a=T,T=1/0,f=new z(N),h.c[0]=0;b=e(f,m,0,1),E=v.plus(b.times(S)),E.comparedTo(x)!=1;)v=S,S=E,w=h.plus(b.times(E=w)),h=E,m=f.minus(b.times(E=m)),f=E;return E=e(x.minus(v),S,0,1),h=h.plus(E.times(w)),v=v.plus(E.times(S)),h.s=w.s=k.s,d=d*2,B=e(w,S,d,c).minus(k).abs().comparedTo(e(h,v,d,c).minus(k).abs())<1?[w,S]:[h,v],T=a,B},s.toNumber=function(){return+ne(this)},s.toPrecision=function(x,m){return x!=null&&Oe(x,1,ht),j(this,x,m,2)},s.toString=function(x){var m,v=this,S=v.s,E=v.e;return E===null?S?(m="Infinity",S<0&&(m="-"+m)):m="NaN":(x==null?m=E<=g||E>=_?bn(Mt(v.c),E):jt(Mt(v.c),E,"0"):x===10&&H?(v=Y(new z(v),o+E+1,c),m=jt(Mt(v.c),v.e,"0")):(Oe(x,2,C.length,"Base"),m=t(jt(Mt(v.c),E,"0"),10,x,S,!0)),S<0&&v.c[0]&&(m="-"+m)),m},s.valueOf=s.toJSON=function(){return ne(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,r!=null&&z.set(r),z}function Tt(r){var e=r|0;return r>0||r===e?e:e-1}function Mt(r){for(var e,t,n=1,s=r.length,i=r[0]+"";n<s;){for(e=r[n++]+"",t=ye-e.length;t--;e="0"+e);i+=e}for(s=i.length;i.charCodeAt(--s)===48;);return i.slice(0,s+1||1)}function ur(r,e){var t,n,s=r.c,i=e.c,o=r.s,c=e.s,g=r.e,_=e.e;if(!o||!c)return null;if(t=s&&!s[0],n=i&&!i[0],t||n)return t?n?0:-c:o;if(o!=c)return o;if(t=o<0,n=g==_,!s||!i)return n?0:!s^t?1:-1;if(!n)return g>_^t?1:-1;for(c=(g=s.length)<(_=i.length)?g:_,o=0;o<c;o++)if(s[o]!=i[o])return s[o]>i[o]^t?1:-1;return g==_?0:g>_^t?1:-1}function Oe(r,e,t,n){if(r<e||r>t||r!==Pt(r))throw Error(At+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function wn(r){var e=r.c.length-1;return Tt(r.e/ye)==e&&r.c[e]%2!=0}function bn(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function jt(r,e,t){var n,s;if(e<0){for(s=t+".";++e;s+=t);r=s+r}else if(n=r.length,++e>n){for(s=t,e-=n;--e;s+=t);r+=s}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}sc();const qr=new Q("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Q("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const Rs=new Q("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Q("So11111111111111111111111111111111111111112");new Q("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Ms=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};var fr={},qo;function yd(){if(qo)return fr;qo=1,Object.defineProperty(fr,"__esModule",{value:!0});function r(s){{const i=ae.Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}fr.toBigIntLE=r;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}fr.toBigIntBE=e;function t(s,i){{const o=s.toString(16),c=ae.Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return c.reverse(),c}}fr.toBufferLE=t;function n(s,i){{const o=s.toString(16);return ae.Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return fr.toBufferBE=n,fr}var Ko=yd();const md=r=>e=>{const t=L.blob(r,e),{encode:n,decode:s}=Ms(t),i=t;return i.decode=(o,c)=>{const g=s(o,c);return Ko.toBigIntLE(ae.Buffer.from(g))},i.encode=(o,c,g)=>{const _=Ko.toBufferLE(o,r);return n(_,c,g)},i},Zr=md(8),oc=r=>{const e=L.u8(r),{encode:t,decode:n}=Ms(e),s=e;return s.decode=(i,o)=>!!n(i,o),s.encode=(i,o,c)=>{const g=Number(i);return t(g,o,c)},s},gt=r=>{const e=L.blob(32,r),{encode:t,decode:n}=Ms(e),s=e;return s.decode=(i,o)=>{const c=n(i,o);return new Q(c)},s.encode=(i,o,c)=>{const g=i.toBuffer();return t(g,o,c)},s};class cn extends Error{constructor(e){super(e)}}class wd extends cn{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class bd extends cn{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class Wi extends cn{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class vd extends cn{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class kd extends cn{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var ts;(function(r){r[r.InitializeMint=0]="InitializeMint",r[r.InitializeAccount=1]="InitializeAccount",r[r.InitializeMultisig=2]="InitializeMultisig",r[r.Transfer=3]="Transfer",r[r.Approve=4]="Approve",r[r.Revoke=5]="Revoke",r[r.SetAuthority=6]="SetAuthority",r[r.MintTo=7]="MintTo",r[r.Burn=8]="Burn",r[r.CloseAccount=9]="CloseAccount",r[r.FreezeAccount=10]="FreezeAccount",r[r.ThawAccount=11]="ThawAccount",r[r.TransferChecked=12]="TransferChecked",r[r.ApproveChecked=13]="ApproveChecked",r[r.MintToChecked=14]="MintToChecked",r[r.BurnChecked=15]="BurnChecked",r[r.InitializeAccount2=16]="InitializeAccount2",r[r.SyncNative=17]="SyncNative",r[r.InitializeAccount3=18]="InitializeAccount3",r[r.InitializeMultisig2=19]="InitializeMultisig2",r[r.InitializeMint2=20]="InitializeMint2",r[r.GetAccountDataSize=21]="GetAccountDataSize",r[r.InitializeImmutableOwner=22]="InitializeImmutableOwner",r[r.AmountToUiAmount=23]="AmountToUiAmount",r[r.UiAmountToAmount=24]="UiAmountToAmount",r[r.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",r[r.TransferFeeExtension=26]="TransferFeeExtension",r[r.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",r[r.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",r[r.Reallocate=29]="Reallocate",r[r.MemoTransferExtension=30]="MemoTransferExtension",r[r.CreateNativeMint=31]="CreateNativeMint",r[r.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",r[r.InterestBearingMintExtension=33]="InterestBearingMintExtension",r[r.CpiGuardExtension=34]="CpiGuardExtension",r[r.InitializePermanentDelegate=35]="InitializePermanentDelegate",r[r.TransferHookExtension=36]="TransferHookExtension",r[r.MetadataPointerExtension=39]="MetadataPointerExtension",r[r.GroupPointerExtension=40]="GroupPointerExtension",r[r.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",r[r.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",r[r.PausableExtension=44]="PausableExtension"})(ts||(ts={}));var rs;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Mint=1]="Mint",r[r.Account=2]="Account"})(rs||(rs={}));const xd=1,Sd=L.struct([L.u8("m"),L.u8("n"),oc("isInitialized"),gt("signer1"),gt("signer2"),gt("signer3"),gt("signer4"),gt("signer5"),gt("signer6"),gt("signer7"),gt("signer8"),gt("signer9"),gt("signer10"),gt("signer11")]),Ed=Sd.span;var Wo;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initialized=1]="Initialized",r[r.Frozen=2]="Frozen"})(Wo||(Wo={}));const Ad=L.struct([gt("mint"),gt("owner"),Zr("amount"),L.u32("delegateOption"),gt("delegate"),L.u8("state"),L.u32("isNativeOption"),Zr("isNative"),Zr("delegatedAmount"),L.u32("closeAuthorityOption"),gt("closeAuthority")]),Hi=Ad.span;function _d(r,e,t){if(t.length){r.push({pubkey:e,isSigner:!1,isWritable:!1});for(const n of t)r.push({pubkey:n instanceof Q?n:n.publicKey,isSigner:!0,isWritable:!1})}else r.push({pubkey:e,isSigner:!0,isWritable:!1});return r}const ac=L.struct([L.u32("mintAuthorityOption"),gt("mintAuthority"),Zr("supply"),L.u8("decimals"),oc("isInitialized"),L.u32("freezeAuthorityOption"),gt("freezeAuthority")]),$i=ac.span;async function Td(r,e,t,n=qr){const s=await r.getAccountInfo(e,t);return Id(e,s,n)}function Id(r,e,t=qr){if(!e)throw new wd;if(!e.owner.equals(t))throw new bd;if(e.data.length<$i)throw new Wi;const n=ac.decode(e.data.slice(0,$i));let s=ae.Buffer.alloc(0);if(e.data.length>$i){if(e.data.length<=Hi)throw new Wi;if(e.data.length===Ed)throw new Wi;if(e.data[Hi]!=rs.Mint)throw new vd;s=e.data.slice(Hi+xd)}return{address:r,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:s}}function Ld(r,e,t=!1,n=qr,s=Rs){if(!t&&!Q.isOnCurve(e.toBuffer()))throw new kd;const[i]=Q.findProgramAddressSync([e.toBuffer(),n.toBuffer(),r.toBuffer()],s);return i}const Ho=L.struct([L.u8("instruction"),Zr("amount")]);function Cd(r,e,t,n,s=[],i=qr){const o=_d([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],t,s),c=ae.Buffer.alloc(Ho.span);return Ho.encode({instruction:ts.Approve,amount:BigInt(n)},c),new Be({keys:o,programId:i,data:c})}function Od(r,e,t,n,s=qr,i=Rs){return Bd(r,e,t,n,ae.Buffer.alloc(0),s,i)}function Bd(r,e,t,n,s,i=qr,o=Rs){const c=[{pubkey:r,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:lt.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Be({keys:c,programId:o,data:s})}export{Ji as A,io as B,Jh as C,_a as E,Br as K,Nt as M,Q as P,en as S,Ae as T,ks as V,$o as a,Be as b,ae as c,yr as d,Ur as e,Td as f,Tn as g,da as h,Pd as i,yt as j,lt as k,Ld as l,Od as m,Cd as n,qr as o,Rs as p,mu as q,_f as r,Ln as s};

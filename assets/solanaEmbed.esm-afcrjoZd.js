import{a as Ws,q as Fs,s as Et,g as Ot,c as ze,P as fi}from"./solana-vendor-D4f6MxZu.js";import{_ as he}from"./defineProperty-w7AU6ifp.js";import{p as mr}from"./wallet-adapter-xIsJfVGg.js";var ur={exports:{}},ci;function Kt(){if(ci)return ur.exports;ci=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(v,P,B){return Function.prototype.apply.call(v,P,B)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:t=function(v){return Object.getOwnPropertyNames(v)};function n(S){console&&console.warn&&console.warn(S)}var o=Number.isNaN||function(v){return v!==v};function i(){i.init.call(this)}ur.exports=i,ur.exports.once=l,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(S){if(typeof S!="number"||S<0||o(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");a=S}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||o(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function u(S){return S._maxListeners===void 0?i.defaultMaxListeners:S._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(v){for(var P=[],B=1;B<arguments.length;B++)P.push(arguments[B]);var M=v==="error",oe=this._events;if(oe!==void 0)M=M&&oe.error===void 0;else if(!M)return!1;if(M){var C;if(P.length>0&&(C=P[0]),C instanceof Error)throw C;var R=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw R.context=C,R}var U=oe[v];if(U===void 0)return!1;if(typeof U=="function")e(U,this,P);else for(var L=U.length,X=T(U,L),B=0;B<L;++B)e(X[B],this,P);return!0};function f(S,v,P,B){var M,oe,C;if(s(P),oe=S._events,oe===void 0?(oe=S._events=Object.create(null),S._eventsCount=0):(oe.newListener!==void 0&&(S.emit("newListener",v,P.listener?P.listener:P),oe=S._events),C=oe[v]),C===void 0)C=oe[v]=P,++S._eventsCount;else if(typeof C=="function"?C=oe[v]=B?[P,C]:[C,P]:B?C.unshift(P):C.push(P),M=u(S),M>0&&C.length>M&&!C.warned){C.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");R.name="MaxListenersExceededWarning",R.emitter=S,R.type=v,R.count=C.length,n(R)}return S}i.prototype.addListener=function(v,P){return f(this,v,P,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(v,P){return f(this,v,P,!0)};function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(S,v,P){var B={fired:!1,wrapFn:void 0,target:S,type:v,listener:P},M=E.bind(B);return M.listener=P,B.wrapFn=M,M}i.prototype.once=function(v,P){return s(P),this.on(v,m(this,v,P)),this},i.prototype.prependOnceListener=function(v,P){return s(P),this.prependListener(v,m(this,v,P)),this},i.prototype.removeListener=function(v,P){var B,M,oe,C,R;if(s(P),M=this._events,M===void 0)return this;if(B=M[v],B===void 0)return this;if(B===P||B.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete M[v],M.removeListener&&this.emit("removeListener",v,B.listener||P));else if(typeof B!="function"){for(oe=-1,C=B.length-1;C>=0;C--)if(B[C]===P||B[C].listener===P){R=B[C].listener,oe=C;break}if(oe<0)return this;oe===0?B.shift():d(B,oe),B.length===1&&(M[v]=B[0]),M.removeListener!==void 0&&this.emit("removeListener",v,R||P)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(v){var P,B,M;if(B=this._events,B===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete B[v]),this;if(arguments.length===0){var oe=Object.keys(B),C;for(M=0;M<oe.length;++M)C=oe[M],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=B[v],typeof P=="function")this.removeListener(v,P);else if(P!==void 0)for(M=P.length-1;M>=0;M--)this.removeListener(v,P[M]);return this};function p(S,v,P){var B=S._events;if(B===void 0)return[];var M=B[v];return M===void 0?[]:typeof M=="function"?P?[M.listener||M]:[M]:P?c(M):T(M,M.length)}i.prototype.listeners=function(v){return p(this,v,!0)},i.prototype.rawListeners=function(v){return p(this,v,!1)},i.listenerCount=function(S,v){return typeof S.listenerCount=="function"?S.listenerCount(v):x.call(S,v)},i.prototype.listenerCount=x;function x(S){var v=this._events;if(v!==void 0){var P=v[S];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function T(S,v){for(var P=new Array(v),B=0;B<v;++B)P[B]=S[B];return P}function d(S,v){for(;v+1<S.length;v++)S[v]=S[v+1];S.pop()}function c(S){for(var v=new Array(S.length),P=0;P<v.length;++P)v[P]=S[P].listener||S[P];return v}function l(S,v){return new Promise(function(P,B){function M(C){S.removeListener(v,oe),B(C)}function oe(){typeof S.removeListener=="function"&&S.removeListener("error",M),P([].slice.call(arguments))}h(S,v,oe,{once:!0}),v!=="error"&&b(S,M,{once:!0})})}function b(S,v,P){typeof S.on=="function"&&h(S,"error",v,P)}function h(S,v,P,B){if(typeof S.on=="function")B.once?S.once(v,P):S.on(v,P);else if(typeof S.addEventListener=="function")S.addEventListener(v,function M(oe){B.once&&S.removeEventListener(v,M),P(oe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return ur.exports}var $s=Kt();const Hs={},zs=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),Ks=Ws(zs);var Vr={},di;function Vs(){if(di)return Vr;di=1;var r=Fs().Buffer,e=r.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(l){if(!l)return"utf8";for(var b;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(b)return;l=(""+l).toLowerCase(),b=!0}}function n(l){var b=t(l);if(typeof b!="string"&&(r.isEncoding===e||!e(l)))throw new Error("Unknown encoding: "+l);return b||l}Vr.StringDecoder=o;function o(l){this.encoding=n(l);var b;switch(this.encoding){case"utf16le":this.text=m,this.end=p,b=4;break;case"utf8":this.fillLast=u,b=4;break;case"base64":this.text=x,this.end=T,b=3;break;default:this.write=d,this.end=c;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(b)}o.prototype.write=function(l){if(l.length===0)return"";var b,h;if(this.lastNeed){if(b=this.fillLast(l),b===void 0)return"";h=this.lastNeed,this.lastNeed=0}else h=0;return h<l.length?b?b+this.text(l,h):this.text(l,h):b||""},o.prototype.end=E,o.prototype.text=f,o.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function i(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function a(l,b,h){var S=b.length-1;if(S<h)return 0;var v=i(b[S]);return v>=0?(v>0&&(l.lastNeed=v-1),v):--S<h||v===-2?0:(v=i(b[S]),v>=0?(v>0&&(l.lastNeed=v-2),v):--S<h||v===-2?0:(v=i(b[S]),v>=0?(v>0&&(v===2?v=0:l.lastNeed=v-3),v):0))}function s(l,b,h){if((b[0]&192)!==128)return l.lastNeed=0,"�";if(l.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return l.lastNeed=1,"�";if(l.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return l.lastNeed=2,"�"}}function u(l){var b=this.lastTotal-this.lastNeed,h=s(this,l);if(h!==void 0)return h;if(this.lastNeed<=l.length)return l.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,b,0,l.length),this.lastNeed-=l.length}function f(l,b){var h=a(this,l,b);if(!this.lastNeed)return l.toString("utf8",b);this.lastTotal=h;var S=l.length-(h-this.lastNeed);return l.copy(this.lastChar,0,S),l.toString("utf8",b,S)}function E(l){var b=l&&l.length?this.write(l):"";return this.lastNeed?b+"�":b}function m(l,b){if((l.length-b)%2===0){var h=l.toString("utf16le",b);if(h){var S=h.charCodeAt(h.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",b,l.length-1)}function p(l){var b=l&&l.length?this.write(l):"";if(this.lastNeed){var h=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,h)}return b}function x(l,b){var h=(l.length-b)%3;return h===0?l.toString("base64",b):(this.lastNeed=3-h,this.lastTotal=3,h===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",b,l.length-h))}function T(l){var b=l&&l.length?this.write(l):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function d(l){return l.toString(this.encoding)}function c(l){return l&&l.length?this.write(l):""}return Vr}function hi(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function We(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hi(Object(t),!0).forEach(function(n){he(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hi(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Gr={exports:{}},Yr={exports:{}},Jr,gi;function Re(){if(gi)return Jr;gi=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let o=0;o<t.length;o++)n+=`    ${t[o].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return Jr={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},Jr}var Zr={exports:{}},Qr,pi;function Lo(){return pi||(pi=1,Qr={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const o=e.shift();return n==="f"?o.toFixed(6):n==="j"?JSON.stringify(o):n==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),Qr}var Xr,bi;function Ne(){if(bi)return Xr;bi=1;const{format:r,inspect:e}=Lo(),{AggregateError:t}=Re(),n=globalThis.AggregateError||t,o=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function f(c,l){if(!c)throw new u.ERR_INTERNAL_ASSERTION(l)}function E(c){let l="",b=c.length;const h=c[0]==="-"?1:0;for(;b>=h+4;b-=3)l=`_${c.slice(b-3,b)}${l}`;return`${c.slice(0,b)}${l}`}function m(c,l,b){if(typeof l=="function")return f(l.length<=b.length,`Code: ${c}; The provided arguments length (${b.length}) does not match the required ones (${l.length}).`),l(...b);const h=(l.match(/%[dfijoOs]/g)||[]).length;return f(h===b.length,`Code: ${c}; The provided arguments length (${b.length}) does not match the required ones (${h}).`),b.length===0?l:r(l,...b)}function p(c,l,b){b||(b=Error);class h extends b{constructor(...v){super(m(c,l,v))}toString(){return`${this.name} [${c}]: ${this.message}`}}Object.defineProperties(h.prototype,{name:{value:b.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${c}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),h.prototype.code=c,h.prototype[o]=!0,u[c]=h}function x(c){const l=s+c.name;return Object.defineProperty(c,"name",{value:l}),c}function T(c,l){if(c&&l&&c!==l){if(Array.isArray(l.errors))return l.errors.push(c),l;const b=new n([l,c],l.message);return b.code=l.code,b}return c||l}class d extends Error{constructor(l="The operation was aborted",b=void 0){if(b!==void 0&&typeof b!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",b);super(l,b),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(c,l,b)=>{f(typeof c=="string","'name' must be a string"),Array.isArray(l)||(l=[l]);let h="The ";c.endsWith(" argument")?h+=`${c} `:h+=`"${c}" ${c.includes(".")?"property":"argument"} `,h+="must be ";const S=[],v=[],P=[];for(const M of l)f(typeof M=="string","All expected entries have to be of type string"),i.includes(M)?S.push(M.toLowerCase()):a.test(M)?v.push(M):(f(M!=="object",'The value "object" should be written as "Object"'),P.push(M));if(v.length>0){const M=S.indexOf("object");M!==-1&&(S.splice(S,M,1),v.push("Object"))}if(S.length>0){switch(S.length){case 1:h+=`of type ${S[0]}`;break;case 2:h+=`one of type ${S[0]} or ${S[1]}`;break;default:{const M=S.pop();h+=`one of type ${S.join(", ")}, or ${M}`}}(v.length>0||P.length>0)&&(h+=" or ")}if(v.length>0){switch(v.length){case 1:h+=`an instance of ${v[0]}`;break;case 2:h+=`an instance of ${v[0]} or ${v[1]}`;break;default:{const M=v.pop();h+=`an instance of ${v.join(", ")}, or ${M}`}}P.length>0&&(h+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(h+="an "),h+=`${P[0]}`;break;case 2:h+=`one of ${P[0]} or ${P[1]}`;break;default:{const M=P.pop();h+=`one of ${P.join(", ")}, or ${M}`}}if(b==null)h+=`. Received ${b}`;else if(typeof b=="function"&&b.name)h+=`. Received function ${b.name}`;else if(typeof b=="object"){var B;if((B=b.constructor)!==null&&B!==void 0&&B.name)h+=`. Received an instance of ${b.constructor.name}`;else{const M=e(b,{depth:-1});h+=`. Received ${M}`}}else{let M=e(b,{colors:!1});M.length>25&&(M=`${M.slice(0,25)}...`),h+=`. Received type ${typeof b} (${M})`}return h},TypeError),p("ERR_INVALID_ARG_VALUE",(c,l,b="is invalid")=>{let h=e(l);return h.length>128&&(h=h.slice(0,128)+"..."),`The ${c.includes(".")?"property":"argument"} '${c}' ${b}. Received ${h}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(c,l,b)=>{var h;const S=b!=null&&(h=b.constructor)!==null&&h!==void 0&&h.name?`instance of ${b.constructor.name}`:`type ${typeof b}`;return`Expected ${c} to be returned from the "${l}" function but got ${S}.`},TypeError),p("ERR_MISSING_ARGS",(...c)=>{f(c.length>0,"At least one arg needs to be specified");let l;const b=c.length;switch(c=(Array.isArray(c)?c:[c]).map(h=>`"${h}"`).join(" or "),b){case 1:l+=`The ${c[0]} argument`;break;case 2:l+=`The ${c[0]} and ${c[1]} arguments`;break;default:{const h=c.pop();l+=`The ${c.join(", ")}, and ${h} arguments`}break}return`${l} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(c,l,b)=>{f(l,'Missing "range" argument');let h;if(Number.isInteger(b)&&Math.abs(b)>2**32)h=E(String(b));else if(typeof b=="bigint"){h=String(b);const S=BigInt(2)**BigInt(32);(b>S||b<-S)&&(h=E(h)),h+="n"}else h=e(b);return`The value of "${c}" is out of range. It must be ${l}. Received ${h}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Xr={AbortError:d,aggregateTwoErrors:x(T),hideStackFrames:x,codes:u},Xr}var kt={exports:{}},wi;function Ht(){if(wi)return kt.exports;wi=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return kt.exports=r,kt.exports.AbortSignal=e,kt.exports.default=r,kt.exports}var yi;function Be(){return yi||(yi=1,(function(r){const e=Et(),{format:t,inspect:n}=Lo(),{codes:{ERR_INVALID_ARG_TYPE:o}}=Ne(),{kResistStopPropagation:i,AggregateError:a,SymbolDispose:s}=Re(),u=globalThis.AbortSignal||Ht().AbortSignal,f=globalThis.AbortController||Ht().AbortController,E=Object.getPrototypeOf(async function(){}).constructor,m=globalThis.Blob||e.Blob,p=typeof m<"u"?function(c){return c instanceof m}:function(c){return!1},x=(d,c)=>{if(d!==void 0&&(d===null||typeof d!="object"||!("aborted"in d)))throw new o(c,"AbortSignal",d)},T=(d,c)=>{if(typeof d!="function")throw new o(c,"Function",d)};r.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(d){let c=!1;return function(...l){c||(c=!0,d.apply(this,l))}},createDeferredPromise:function(){let d,c;return{promise:new Promise((b,h)=>{d=b,c=h}),resolve:d,reject:c}},promisify(d){return new Promise((c,l)=>{d((b,...h)=>b?l(b):c(...h))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(d){return d instanceof E},isArrayBufferView(d){return ArrayBuffer.isView(d)}},isBlob:p,deprecate(d,c){return d},addAbortListener:Kt().addAbortListener||function(c,l){if(c===void 0)throw new o("signal","AbortSignal",c);x(c,"signal"),T(l,"listener");let b;return c.aborted?queueMicrotask(()=>l()):(c.addEventListener("abort",l,{__proto__:null,once:!0,[i]:!0}),b=()=>{c.removeEventListener("abort",l)}),{__proto__:null,[s](){var h;(h=b)===null||h===void 0||h()}}},AbortSignalAny:u.any||function(c){if(c.length===1)return c[0];const l=new f,b=()=>l.abort();return c.forEach(h=>{x(h,"signals"),h.addEventListener("abort",b,{once:!0})}),l.signal.addEventListener("abort",()=>{c.forEach(h=>h.removeEventListener("abort",b))},{once:!0}),l.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Zr)),Zr.exports}var fr={},en,_i;function Vt(){if(_i)return en;_i=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:E,String:m,StringPrototypeToUpperCase:p,StringPrototypeTrim:x}=Re(),{hideStackFrames:T,codes:{ERR_SOCKET_BAD_PORT:d,ERR_INVALID_ARG_TYPE:c,ERR_INVALID_ARG_VALUE:l,ERR_OUT_OF_RANGE:b,ERR_UNKNOWN_SIGNAL:h}}=Ne(),{normalizeEncoding:S}=Be(),{isAsyncFunction:v,isArrayBufferView:P}=Be().types,B={};function M(I){return I===(I|0)}function oe(I){return I===I>>>0}const C=/^[0-7]+$/,R="must be a 32-bit unsigned integer or an octal string";function U(I,V,Z){if(typeof I>"u"&&(I=Z),typeof I=="string"){if(E(C,I)===null)throw new l(V,I,R);I=u(I,8)}return D(I,V),I}const L=T((I,V,Z=s,K=a)=>{if(typeof I!="number")throw new c(V,"number",I);if(!o(I))throw new b(V,"an integer",I);if(I<Z||I>K)throw new b(V,`>= ${Z} && <= ${K}`,I)}),X=T((I,V,Z=-2147483648,K=2147483647)=>{if(typeof I!="number")throw new c(V,"number",I);if(!o(I))throw new b(V,"an integer",I);if(I<Z||I>K)throw new b(V,`>= ${Z} && <= ${K}`,I)}),D=T((I,V,Z=!1)=>{if(typeof I!="number")throw new c(V,"number",I);if(!o(I))throw new b(V,"an integer",I);const K=Z?1:0,pe=4294967295;if(I<K||I>pe)throw new b(V,`>= ${K} && <= ${pe}`,I)});function z(I,V){if(typeof I!="string")throw new c(V,"string",I)}function se(I,V,Z=void 0,K){if(typeof I!="number")throw new c(V,"number",I);if(Z!=null&&I<Z||K!=null&&I>K||(Z!=null||K!=null)&&i(I))throw new b(V,`${Z!=null?`>= ${Z}`:""}${Z!=null&&K!=null?" && ":""}${K!=null?`<= ${K}`:""}`,I)}const j=T((I,V,Z)=>{if(!e(Z,I)){const pe="must be one of: "+t(n(Z,Ae=>typeof Ae=="string"?`'${Ae}'`:m(Ae)),", ");throw new l(V,I,pe)}});function J(I,V){if(typeof I!="boolean")throw new c(V,"boolean",I)}function _(I,V,Z){return I==null||!f(I,V)?Z:I[V]}const $=T((I,V,Z=null)=>{const K=_(Z,"allowArray",!1),pe=_(Z,"allowFunction",!1);if(!_(Z,"nullable",!1)&&I===null||!K&&r(I)||typeof I!="object"&&(!pe||typeof I!="function"))throw new c(V,"Object",I)}),Q=T((I,V)=>{if(I!=null&&typeof I!="object"&&typeof I!="function")throw new c(V,"a dictionary",I)}),W=T((I,V,Z=0)=>{if(!r(I))throw new c(V,"Array",I);if(I.length<Z){const K=`must be longer than ${Z}`;throw new l(V,I,K)}});function G(I,V){W(I,V);for(let Z=0;Z<I.length;Z++)z(I[Z],`${V}[${Z}]`)}function le(I,V){W(I,V);for(let Z=0;Z<I.length;Z++)J(I[Z],`${V}[${Z}]`)}function ge(I,V){W(I,V);for(let Z=0;Z<I.length;Z++){const K=I[Z],pe=`${V}[${Z}]`;if(K==null)throw new c(pe,"AbortSignal",K);de(K,pe)}}function ce(I,V="signal"){if(z(I,V),B[I]===void 0)throw B[p(I)]!==void 0?new h(I+" (signals must use all capital letters)"):new h(I)}const F=T((I,V="buffer")=>{if(!P(I))throw new c(V,["Buffer","TypedArray","DataView"],I)});function H(I,V){const Z=S(V),K=I.length;if(Z==="hex"&&K%2!==0)throw new l("encoding",V,`is invalid for data of length ${K}`)}function ie(I,V="Port",Z=!0){if(typeof I!="number"&&typeof I!="string"||typeof I=="string"&&x(I).length===0||+I!==+I>>>0||I>65535||I===0&&!Z)throw new d(V,I,Z);return I|0}const de=T((I,V)=>{if(I!==void 0&&(I===null||typeof I!="object"||!("aborted"in I)))throw new c(V,"AbortSignal",I)}),ae=T((I,V)=>{if(typeof I!="function")throw new c(V,"Function",I)}),A=T((I,V)=>{if(typeof I!="function"||v(I))throw new c(V,"Function",I)}),N=T((I,V)=>{if(I!==void 0)throw new c(V,"undefined",I)});function q(I,V,Z){if(!e(Z,I))throw new c(V,`('${t(Z,"|")}')`,I)}const ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function re(I,V){if(typeof I>"u"||!E(ee,I))throw new l(V,I,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function te(I){if(typeof I=="string")return re(I,"hints"),I;if(r(I)){const V=I.length;let Z="";if(V===0)return Z;for(let K=0;K<V;K++){const pe=I[K];re(pe,"hints"),Z+=pe,K!==V-1&&(Z+=", ")}return Z}throw new l("hints",I,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return en={isInt32:M,isUint32:oe,parseFileMode:U,validateArray:W,validateStringArray:G,validateBooleanArray:le,validateAbortSignalArray:ge,validateBoolean:J,validateBuffer:F,validateDictionary:Q,validateEncoding:H,validateFunction:ae,validateInt32:X,validateInteger:L,validateNumber:se,validateObject:$,validateOneOf:j,validatePlainFunction:A,validatePort:ie,validateSignalName:ce,validateString:z,validateUint32:D,validateUndefined:N,validateUnion:q,validateAbortSignal:de,validateLinkHeaderValue:te},en}var cr={exports:{}},tn={exports:{}},mi;function St(){if(mi)return tn.exports;mi=1;var r=tn.exports={},e,t;function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?t=clearTimeout:t=o}catch{t=o}})();function i(d){if(e===setTimeout)return setTimeout(d,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(d,0);try{return e(d,0)}catch{try{return e.call(null,d,0)}catch{return e.call(this,d,0)}}}function a(d){if(t===clearTimeout)return clearTimeout(d);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(d);try{return t(d)}catch{try{return t.call(null,d)}catch{return t.call(this,d)}}}var s=[],u=!1,f,E=-1;function m(){!u||!f||(u=!1,f.length?s=f.concat(s):E=-1,s.length&&p())}function p(){if(!u){var d=i(m);u=!0;for(var c=s.length;c;){for(f=s,s=[];++E<c;)f&&f[E].run();E=-1,c=s.length}f=null,u=!1,a(d)}}r.nextTick=function(d){var c=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)c[l-1]=arguments[l];s.push(new x(d,c)),s.length===1&&!u&&i(p)};function x(d,c){this.fun=d,this.array=c}x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function T(){}return r.on=T,r.addListener=T,r.once=T,r.off=T,r.removeListener=T,r.removeAllListeners=T,r.emit=T,r.prependListener=T,r.prependOnceListener=T,r.listeners=function(d){return[]},r.binding=function(d){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(d){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},tn.exports}var rn,vi;function st(){if(vi)return rn;vi=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Re(),n=t("nodejs.stream.destroyed"),o=t("nodejs.stream.errored"),i=t("nodejs.stream.readable"),a=t("nodejs.stream.writable"),s=t("nodejs.stream.disturbed"),u=t("nodejs.webstream.isClosedPromise"),f=t("nodejs.webstream.controllerErrorFunction");function E(_,$=!1){var Q;return!!(_&&typeof _.pipe=="function"&&typeof _.on=="function"&&(!$||typeof _.pause=="function"&&typeof _.resume=="function")&&(!_._writableState||((Q=_._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!_._writableState||_._readableState))}function m(_){var $;return!!(_&&typeof _.write=="function"&&typeof _.on=="function"&&(!_._readableState||(($=_._writableState)===null||$===void 0?void 0:$.writable)!==!1))}function p(_){return!!(_&&typeof _.pipe=="function"&&_._readableState&&typeof _.on=="function"&&typeof _.write=="function")}function x(_){return _&&(_._readableState||_._writableState||typeof _.write=="function"&&typeof _.on=="function"||typeof _.pipe=="function"&&typeof _.on=="function")}function T(_){return!!(_&&!x(_)&&typeof _.pipeThrough=="function"&&typeof _.getReader=="function"&&typeof _.cancel=="function")}function d(_){return!!(_&&!x(_)&&typeof _.getWriter=="function"&&typeof _.abort=="function")}function c(_){return!!(_&&!x(_)&&typeof _.readable=="object"&&typeof _.writable=="object")}function l(_){return T(_)||d(_)||c(_)}function b(_,$){return _==null?!1:$===!0?typeof _[r]=="function":$===!1?typeof _[e]=="function":typeof _[r]=="function"||typeof _[e]=="function"}function h(_){if(!x(_))return null;const $=_._writableState,Q=_._readableState,W=$||Q;return!!(_.destroyed||_[n]||W!=null&&W.destroyed)}function S(_){if(!m(_))return null;if(_.writableEnded===!0)return!0;const $=_._writableState;return $!=null&&$.errored?!1:typeof $?.ended!="boolean"?null:$.ended}function v(_,$){if(!m(_))return null;if(_.writableFinished===!0)return!0;const Q=_._writableState;return Q!=null&&Q.errored?!1:typeof Q?.finished!="boolean"?null:!!(Q.finished||$===!1&&Q.ended===!0&&Q.length===0)}function P(_){if(!E(_))return null;if(_.readableEnded===!0)return!0;const $=_._readableState;return!$||$.errored?!1:typeof $?.ended!="boolean"?null:$.ended}function B(_,$){if(!E(_))return null;const Q=_._readableState;return Q!=null&&Q.errored?!1:typeof Q?.endEmitted!="boolean"?null:!!(Q.endEmitted||$===!1&&Q.ended===!0&&Q.length===0)}function M(_){return _&&_[i]!=null?_[i]:typeof _?.readable!="boolean"?null:h(_)?!1:E(_)&&_.readable&&!B(_)}function oe(_){return _&&_[a]!=null?_[a]:typeof _?.writable!="boolean"?null:h(_)?!1:m(_)&&_.writable&&!S(_)}function C(_,$){return x(_)?h(_)?!0:!($?.readable!==!1&&M(_)||$?.writable!==!1&&oe(_)):null}function R(_){var $,Q;return x(_)?_.writableErrored?_.writableErrored:($=(Q=_._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&$!==void 0?$:null:null}function U(_){var $,Q;return x(_)?_.readableErrored?_.readableErrored:($=(Q=_._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&$!==void 0?$:null:null}function L(_){if(!x(_))return null;if(typeof _.closed=="boolean")return _.closed;const $=_._writableState,Q=_._readableState;return typeof $?.closed=="boolean"||typeof Q?.closed=="boolean"?$?.closed||Q?.closed:typeof _._closed=="boolean"&&X(_)?_._closed:null}function X(_){return typeof _._closed=="boolean"&&typeof _._defaultKeepAlive=="boolean"&&typeof _._removedConnection=="boolean"&&typeof _._removedContLen=="boolean"}function D(_){return typeof _._sent100=="boolean"&&X(_)}function z(_){var $;return typeof _._consuming=="boolean"&&typeof _._dumped=="boolean"&&(($=_.req)===null||$===void 0?void 0:$.upgradeOrConnect)===void 0}function se(_){if(!x(_))return null;const $=_._writableState,Q=_._readableState,W=$||Q;return!W&&D(_)||!!(W&&W.autoDestroy&&W.emitClose&&W.closed===!1)}function j(_){var $;return!!(_&&(($=_[s])!==null&&$!==void 0?$:_.readableDidRead||_.readableAborted))}function J(_){var $,Q,W,G,le,ge,ce,F,H,ie;return!!(_&&(($=(Q=(W=(G=(le=(ge=_[o])!==null&&ge!==void 0?ge:_.readableErrored)!==null&&le!==void 0?le:_.writableErrored)!==null&&G!==void 0?G:(ce=_._readableState)===null||ce===void 0?void 0:ce.errorEmitted)!==null&&W!==void 0?W:(F=_._writableState)===null||F===void 0?void 0:F.errorEmitted)!==null&&Q!==void 0?Q:(H=_._readableState)===null||H===void 0?void 0:H.errored)!==null&&$!==void 0?$:!((ie=_._writableState)===null||ie===void 0)&&ie.errored))}return rn={isDestroyed:h,kIsDestroyed:n,isDisturbed:j,kIsDisturbed:s,isErrored:J,kIsErrored:o,isReadable:M,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:f,kIsWritable:a,isClosed:L,isDuplexNodeStream:p,isFinished:C,isIterable:b,isReadableNodeStream:E,isReadableStream:T,isReadableEnded:P,isReadableFinished:B,isReadableErrored:U,isNodeStream:x,isWebStream:l,isWritable:oe,isWritableNodeStream:m,isWritableStream:d,isWritableEnded:S,isWritableFinished:v,isWritableErrored:R,isServerRequest:z,isServerResponse:D,willEmitClose:se,isTransformStream:c},rn}var Ei;function ct(){if(Ei)return cr.exports;Ei=1;const r=St(),{AbortError:e,codes:t}=Ne(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:o}=t,{kEmptyObject:i,once:a}=Be(),{validateAbortSignal:s,validateFunction:u,validateObject:f,validateBoolean:E}=Vt(),{Promise:m,PromisePrototypeThen:p,SymbolDispose:x}=Re(),{isClosed:T,isReadable:d,isReadableNodeStream:c,isReadableStream:l,isReadableFinished:b,isReadableErrored:h,isWritable:S,isWritableNodeStream:v,isWritableStream:P,isWritableFinished:B,isWritableErrored:M,isNodeStream:oe,willEmitClose:C,kIsClosedPromise:R}=st();let U;function L(j){return j.setHeader&&typeof j.abort=="function"}const X=()=>{};function D(j,J,_){var $,Q;if(arguments.length===2?(_=J,J=i):J==null?J=i:f(J,"options"),u(_,"callback"),s(J.signal,"options.signal"),_=a(_),l(j)||P(j))return z(j,J,_);if(!oe(j))throw new n("stream",["ReadableStream","WritableStream","Stream"],j);const W=($=J.readable)!==null&&$!==void 0?$:c(j),G=(Q=J.writable)!==null&&Q!==void 0?Q:v(j),le=j._writableState,ge=j._readableState,ce=()=>{j.writable||ie()};let F=C(j)&&c(j)===W&&v(j)===G,H=B(j,!1);const ie=()=>{H=!0,j.destroyed&&(F=!1),!(F&&(!j.readable||W))&&(!W||de)&&_.call(j)};let de=b(j,!1);const ae=()=>{de=!0,j.destroyed&&(F=!1),!(F&&(!j.writable||G))&&(!G||H)&&_.call(j)},A=I=>{_.call(j,I)};let N=T(j);const q=()=>{N=!0;const I=M(j)||h(j);if(I&&typeof I!="boolean")return _.call(j,I);if(W&&!de&&c(j,!0)&&!b(j,!1))return _.call(j,new o);if(G&&!H&&!B(j,!1))return _.call(j,new o);_.call(j)},ee=()=>{N=!0;const I=M(j)||h(j);if(I&&typeof I!="boolean")return _.call(j,I);_.call(j)},re=()=>{j.req.on("finish",ie)};L(j)?(j.on("complete",ie),F||j.on("abort",q),j.req?re():j.on("request",re)):G&&!le&&(j.on("end",ce),j.on("close",ce)),!F&&typeof j.aborted=="boolean"&&j.on("aborted",q),j.on("end",ae),j.on("finish",ie),J.error!==!1&&j.on("error",A),j.on("close",q),N?r.nextTick(q):le!=null&&le.errorEmitted||ge!=null&&ge.errorEmitted?F||r.nextTick(ee):(!W&&(!F||d(j))&&(H||S(j)===!1)||!G&&(!F||S(j))&&(de||d(j)===!1)||ge&&j.req&&j.aborted)&&r.nextTick(ee);const te=()=>{_=X,j.removeListener("aborted",q),j.removeListener("complete",ie),j.removeListener("abort",q),j.removeListener("request",re),j.req&&j.req.removeListener("finish",ie),j.removeListener("end",ce),j.removeListener("close",ce),j.removeListener("finish",ie),j.removeListener("end",ae),j.removeListener("error",A),j.removeListener("close",q)};if(J.signal&&!N){const I=()=>{const V=_;te(),V.call(j,new e(void 0,{cause:J.signal.reason}))};if(J.signal.aborted)r.nextTick(I);else{U=U||Be().addAbortListener;const V=U(J.signal,I),Z=_;_=a((...K)=>{V[x](),Z.apply(j,K)})}}return te}function z(j,J,_){let $=!1,Q=X;if(J.signal)if(Q=()=>{$=!0,_.call(j,new e(void 0,{cause:J.signal.reason}))},J.signal.aborted)r.nextTick(Q);else{U=U||Be().addAbortListener;const G=U(J.signal,Q),le=_;_=a((...ge)=>{G[x](),le.apply(j,ge)})}const W=(...G)=>{$||r.nextTick(()=>_.apply(j,G))};return p(j[R].promise,W,W),X}function se(j,J){var _;let $=!1;return J===null&&(J=i),(_=J)!==null&&_!==void 0&&_.cleanup&&(E(J.cleanup,"cleanup"),$=J.cleanup),new m((Q,W)=>{const G=D(j,J,le=>{$&&G(),le?W(le):Q()})})}return cr.exports=D,cr.exports.finished=se,cr.exports}var nn,Si;function Ct(){if(Si)return nn;Si=1;const r=St(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=Ne(),{Symbol:o}=Re(),{kIsDestroyed:i,isDestroyed:a,isFinished:s,isServerRequest:u}=st(),f=o("kDestroy"),E=o("kConstruct");function m(C,R,U){C&&(C.stack,R&&!R.errored&&(R.errored=C),U&&!U.errored&&(U.errored=C))}function p(C,R){const U=this._readableState,L=this._writableState,X=L||U;return L!=null&&L.destroyed||U!=null&&U.destroyed?(typeof R=="function"&&R(),this):(m(C,L,U),L&&(L.destroyed=!0),U&&(U.destroyed=!0),X.constructed?x(this,C,R):this.once(f,function(D){x(this,e(D,C),R)}),this)}function x(C,R,U){let L=!1;function X(D){if(L)return;L=!0;const z=C._readableState,se=C._writableState;m(D,se,z),se&&(se.closed=!0),z&&(z.closed=!0),typeof U=="function"&&U(D),D?r.nextTick(T,C,D):r.nextTick(d,C)}try{C._destroy(R||null,X)}catch(D){X(D)}}function T(C,R){c(C,R),d(C)}function d(C){const R=C._readableState,U=C._writableState;U&&(U.closeEmitted=!0),R&&(R.closeEmitted=!0),(U!=null&&U.emitClose||R!=null&&R.emitClose)&&C.emit("close")}function c(C,R){const U=C._readableState,L=C._writableState;L!=null&&L.errorEmitted||U!=null&&U.errorEmitted||(L&&(L.errorEmitted=!0),U&&(U.errorEmitted=!0),C.emit("error",R))}function l(){const C=this._readableState,R=this._writableState;C&&(C.constructed=!0,C.closed=!1,C.closeEmitted=!1,C.destroyed=!1,C.errored=null,C.errorEmitted=!1,C.reading=!1,C.ended=C.readable===!1,C.endEmitted=C.readable===!1),R&&(R.constructed=!0,R.destroyed=!1,R.closed=!1,R.closeEmitted=!1,R.errored=null,R.errorEmitted=!1,R.finalCalled=!1,R.prefinished=!1,R.ended=R.writable===!1,R.ending=R.writable===!1,R.finished=R.writable===!1)}function b(C,R,U){const L=C._readableState,X=C._writableState;if(X!=null&&X.destroyed||L!=null&&L.destroyed)return this;L!=null&&L.autoDestroy||X!=null&&X.autoDestroy?C.destroy(R):R&&(R.stack,X&&!X.errored&&(X.errored=R),L&&!L.errored&&(L.errored=R),U?r.nextTick(c,C,R):c(C,R))}function h(C,R){if(typeof C._construct!="function")return;const U=C._readableState,L=C._writableState;U&&(U.constructed=!1),L&&(L.constructed=!1),C.once(E,R),!(C.listenerCount(E)>1)&&r.nextTick(S,C)}function S(C){let R=!1;function U(L){if(R){b(C,L??new t);return}R=!0;const X=C._readableState,D=C._writableState,z=D||X;X&&(X.constructed=!0),D&&(D.constructed=!0),z.destroyed?C.emit(f,L):L?b(C,L,!0):r.nextTick(v,C)}try{C._construct(L=>{r.nextTick(U,L)})}catch(L){r.nextTick(U,L)}}function v(C){C.emit(E)}function P(C){return C?.setHeader&&typeof C.abort=="function"}function B(C){C.emit("close")}function M(C,R){C.emit("error",R),r.nextTick(B,C)}function oe(C,R){!C||a(C)||(!R&&!s(C)&&(R=new n),u(C)?(C.socket=null,C.destroy(R)):P(C)?C.abort():P(C.req)?C.req.abort():typeof C.destroy=="function"?C.destroy(R):typeof C.close=="function"?C.close():R?r.nextTick(M,C,R):r.nextTick(B,C),C.destroyed||(C[i]=!0))}return nn={construct:h,destroyer:oe,destroy:p,undestroy:l,errorOrDestroy:b},nn}var on,Ai;function Wn(){if(Ai)return on;Ai=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Re(),{EventEmitter:t}=Kt();function n(i){t.call(this,i)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(i,a){const s=this;function u(d){i.writable&&i.write(d)===!1&&s.pause&&s.pause()}s.on("data",u);function f(){s.readable&&s.resume&&s.resume()}i.on("drain",f),!i._isStdio&&(!a||a.end!==!1)&&(s.on("end",m),s.on("close",p));let E=!1;function m(){E||(E=!0,i.end())}function p(){E||(E=!0,typeof i.destroy=="function"&&i.destroy())}function x(d){T(),t.listenerCount(this,"error")===0&&this.emit("error",d)}o(s,"error",x),o(i,"error",x);function T(){s.removeListener("data",u),i.removeListener("drain",f),s.removeListener("end",m),s.removeListener("close",p),s.removeListener("error",x),i.removeListener("error",x),s.removeListener("end",T),s.removeListener("close",T),i.removeListener("close",T)}return s.on("end",T),s.on("close",T),i.on("close",T),i.emit("pipe",s),i};function o(i,a,s){if(typeof i.prependListener=="function")return i.prependListener(a,s);!i._events||!i._events[a]?i.on(a,s):r(i._events[a])?i._events[a].unshift(s):i._events[a]=[s,i._events[a]]}return on={Stream:n,prependListener:o},on}var sn={exports:{}},Ri;function Sr(){return Ri||(Ri=1,(function(r){const{SymbolDispose:e}=Re(),{AbortError:t,codes:n}=Ne(),{isNodeStream:o,isWebStream:i,kControllerErrorFunction:a}=st(),s=ct(),{ERR_INVALID_ARG_TYPE:u}=n;let f;const E=(m,p)=>{if(typeof m!="object"||!("aborted"in m))throw new u(p,"AbortSignal",m)};r.exports.addAbortSignal=function(p,x){if(E(p,"signal"),!o(x)&&!i(x))throw new u("stream",["ReadableStream","WritableStream","Stream"],x);return r.exports.addAbortSignalNoValidate(p,x)},r.exports.addAbortSignalNoValidate=function(m,p){if(typeof m!="object"||!("aborted"in m))return p;const x=o(p)?()=>{p.destroy(new t(void 0,{cause:m.reason}))}:()=>{p[a](new t(void 0,{cause:m.reason}))};if(m.aborted)x();else{f=f||Be().addAbortListener;const T=f(m,x);s(p,T[e])}return p}})(sn)),sn.exports}var an,Ii;function Gs(){if(Ii)return an;Ii=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Re(),{Buffer:o}=Et(),{inspect:i}=Be();return an=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,f=""+u.data;for(;(u=u.next)!==null;)f+=s+u.data;return f}concat(s){if(this.length===0)return o.alloc(0);const u=o.allocUnsafe(s>>>0);let f=this.head,E=0;for(;f;)t(u,f.data,E),E+=f.data.length,f=f.next;return u}consume(s,u){const f=this.head.data;if(s<f.length){const E=f.slice(0,s);return this.head.data=f.slice(s),E}return s===f.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[e](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",f=this.head,E=0;do{const m=f.data;if(s>m.length)u+=m,s-=m.length;else{s===m.length?(u+=m,++E,f.next?this.head=f.next:this.head=this.tail=null):(u+=r(m,0,s),this.head=f,f.data=r(m,s));break}++E}while((f=f.next)!==null);return this.length-=E,u}_getBuffer(s){const u=o.allocUnsafe(s),f=s;let E=this.head,m=0;do{const p=E.data;if(s>p.length)t(u,p,f-s),s-=p.length;else{s===p.length?(t(u,p,f-s),++m,E.next?this.head=E.next:this.head=this.tail=null):(t(u,new n(p.buffer,p.byteOffset,s),f-s),this.head=E,E.data=p.slice(s));break}++m}while((E=E.next)!==null);return this.length-=m,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},an}var ln,Ti;function Ar(){if(Ti)return ln;Ti=1;const{MathFloor:r,NumberIsInteger:e}=Re(),{validateInteger:t}=Vt(),{ERR_INVALID_ARG_VALUE:n}=Ne().codes;let o=16*1024,i=16;function a(E,m,p){return E.highWaterMark!=null?E.highWaterMark:m?E[p]:null}function s(E){return E?i:o}function u(E,m){t(m,"value",0),E?i=m:o=m}function f(E,m,p,x){const T=a(m,x,p);if(T!=null){if(!e(T)||T<0){const d=x?`options.${p}`:"options.highWaterMark";throw new n(d,T)}return r(T)}return s(E.objectMode)}return ln={getHighWaterMark:f,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},ln}var un,xi;function No(){if(xi)return un;xi=1;const r=St(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Re(),{Buffer:o}=Et(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:a}=Ne().codes;function s(u,f,E){let m;if(typeof f=="string"||f instanceof o)return new u({objectMode:!0,...E,read(){this.push(f),this.push(null)}});let p;if(f&&f[t])p=!0,m=f[t]();else if(f&&f[n])p=!1,m=f[n]();else throw new i("iterable",["Iterable"],f);const x=new u({objectMode:!0,highWaterMark:1,...E});let T=!1;x._read=function(){T||(T=!0,c())},x._destroy=function(l,b){e(d(l),()=>r.nextTick(b,l),h=>r.nextTick(b,h||l))};async function d(l){const b=l!=null,h=typeof m.throw=="function";if(b&&h){const{value:S,done:v}=await m.throw(l);if(await S,v)return}if(typeof m.return=="function"){const{value:S}=await m.return();await S}}async function c(){for(;;){try{const{value:l,done:b}=p?await m.next():m.next();if(b)x.push(null);else{const h=l&&typeof l.then=="function"?await l:l;if(h===null)throw T=!1,new a;if(x.push(h))continue;T=!1}}catch(l){x.destroy(l)}break}}return x}return un=s,un}var fn,Oi;function Rr(){if(Oi)return fn;Oi=1;const r=St(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:i,ObjectKeys:a,ObjectSetPrototypeOf:s,Promise:u,SafeSet:f,SymbolAsyncDispose:E,SymbolAsyncIterator:m,Symbol:p}=Re();fn=K,K.ReadableState=Z;const{EventEmitter:x}=Kt(),{Stream:T,prependListener:d}=Wn(),{Buffer:c}=Et(),{addAbortSignal:l}=Sr(),b=ct();let h=Be().debuglog("stream",g=>{h=g});const S=Gs(),v=Ct(),{getHighWaterMark:P,getDefaultHighWaterMark:B}=Ar(),{aggregateTwoErrors:M,codes:{ERR_INVALID_ARG_TYPE:oe,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_OUT_OF_RANGE:R,ERR_STREAM_PUSH_AFTER_EOF:U,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:L},AbortError:X}=Ne(),{validateObject:D}=Vt(),z=p("kPaused"),{StringDecoder:se}=Vs(),j=No();s(K.prototype,T.prototype),s(K,T);const J=()=>{},{errorOrDestroy:_}=v,$=1,Q=2,W=4,G=8,le=16,ge=32,ce=64,F=128,H=256,ie=512,de=1024,ae=2048,A=4096,N=8192,q=16384,ee=32768,re=65536,te=1<<17,I=1<<18;function V(g){return{enumerable:!1,get(){return(this.state&g)!==0},set(y){y?this.state|=g:this.state&=~g}}}i(Z.prototype,{objectMode:V($),ended:V(Q),endEmitted:V(W),reading:V(G),constructed:V(le),sync:V(ge),needReadable:V(ce),emittedReadable:V(F),readableListening:V(H),resumeScheduled:V(ie),errorEmitted:V(de),emitClose:V(ae),autoDestroy:V(A),destroyed:V(N),closed:V(q),closeEmitted:V(ee),multiAwaitDrain:V(re),readingMore:V(te),dataEmitted:V(I)});function Z(g,y,ne){typeof ne!="boolean"&&(ne=y instanceof ot()),this.state=ae|A|le|ge,g&&g.objectMode&&(this.state|=$),ne&&g&&g.readableObjectMode&&(this.state|=$),this.highWaterMark=g?P(this,g,"readableHighWaterMark",ne):B(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[z]=null,g&&g.emitClose===!1&&(this.state&=~ae),g&&g.autoDestroy===!1&&(this.state&=~A),this.errored=null,this.defaultEncoding=g&&g.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,g&&g.encoding&&(this.decoder=new se(g.encoding),this.encoding=g.encoding)}function K(g){if(!(this instanceof K))return new K(g);const y=this instanceof ot();this._readableState=new Z(g,this,y),g&&(typeof g.read=="function"&&(this._read=g.read),typeof g.destroy=="function"&&(this._destroy=g.destroy),typeof g.construct=="function"&&(this._construct=g.construct),g.signal&&!y&&l(g.signal,this)),T.call(this,g),v.construct(this,()=>{this._readableState.needReadable&&Le(this,this._readableState)})}K.prototype.destroy=v.destroy,K.prototype._undestroy=v.undestroy,K.prototype._destroy=function(g,y){y(g)},K.prototype[x.captureRejectionSymbol]=function(g){this.destroy(g)},K.prototype[E]=function(){let g;return this.destroyed||(g=this.readableEnded?null:new X,this.destroy(g)),new u((y,ne)=>b(this,Y=>Y&&Y!==g?ne(Y):y(null)))},K.prototype.push=function(g,y){return pe(this,g,y,!1)},K.prototype.unshift=function(g,y){return pe(this,g,y,!0)};function pe(g,y,ne,Y){h("readableAddChunk",y);const ue=g._readableState;let xe;if((ue.state&$)===0&&(typeof y=="string"?(ne=ne||ue.defaultEncoding,ue.encoding!==ne&&(Y&&ue.encoding?y=c.from(y,ne).toString(ue.encoding):(y=c.from(y,ne),ne=""))):y instanceof c?ne="":T._isUint8Array(y)?(y=T._uint8ArrayToBuffer(y),ne=""):y!=null&&(xe=new oe("chunk",["string","Buffer","Uint8Array"],y))),xe)_(g,xe);else if(y===null)ue.state&=~G,De(g,ue);else if((ue.state&$)!==0||y&&y.length>0)if(Y)if((ue.state&W)!==0)_(g,new L);else{if(ue.destroyed||ue.errored)return!1;Ae(g,ue,y,!0)}else if(ue.ended)_(g,new U);else{if(ue.destroyed||ue.errored)return!1;ue.state&=~G,ue.decoder&&!ne?(y=ue.decoder.write(y),ue.objectMode||y.length!==0?Ae(g,ue,y,!1):Le(g,ue)):Ae(g,ue,y,!1)}else Y||(ue.state&=~G,Le(g,ue));return!ue.ended&&(ue.length<ue.highWaterMark||ue.length===0)}function Ae(g,y,ne,Y){y.flowing&&y.length===0&&!y.sync&&g.listenerCount("data")>0?((y.state&re)!==0?y.awaitDrainWriters.clear():y.awaitDrainWriters=null,y.dataEmitted=!0,g.emit("data",ne)):(y.length+=y.objectMode?1:ne.length,Y?y.buffer.unshift(ne):y.buffer.push(ne),(y.state&ce)!==0&&je(g)),Le(g,y)}K.prototype.isPaused=function(){const g=this._readableState;return g[z]===!0||g.flowing===!1},K.prototype.setEncoding=function(g){const y=new se(g);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;const ne=this._readableState.buffer;let Y="";for(const ue of ne)Y+=y.write(ue);return ne.clear(),Y!==""&&ne.push(Y),this._readableState.length=Y.length,this};const we=1073741824;function Ce(g){if(g>we)throw new R("size","<= 1GiB",g);return g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++,g}function Te(g,y){return g<=0||y.length===0&&y.ended?0:(y.state&$)!==0?1:n(g)?y.flowing&&y.length?y.buffer.first().length:y.length:g<=y.length?g:y.ended?y.length:0}K.prototype.read=function(g){h("read",g),g===void 0?g=NaN:t(g)||(g=o(g,10));const y=this._readableState,ne=g;if(g>y.highWaterMark&&(y.highWaterMark=Ce(g)),g!==0&&(y.state&=~F),g===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return h("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?Je(this):je(this),null;if(g=Te(g,y),g===0&&y.ended)return y.length===0&&Je(this),null;let Y=(y.state&ce)!==0;if(h("need readable",Y),(y.length===0||y.length-g<y.highWaterMark)&&(Y=!0,h("length less than watermark",Y)),y.ended||y.reading||y.destroyed||y.errored||!y.constructed)Y=!1,h("reading, ended or constructing",Y);else if(Y){h("do read"),y.state|=G|ge,y.length===0&&(y.state|=ce);try{this._read(y.highWaterMark)}catch(xe){_(this,xe)}y.state&=~ge,y.reading||(g=Te(ne,y))}let ue;return g>0?ue=Nt(g,y):ue=null,ue===null?(y.needReadable=y.length<=y.highWaterMark,g=0):(y.length-=g,y.multiAwaitDrain?y.awaitDrainWriters.clear():y.awaitDrainWriters=null),y.length===0&&(y.ended||(y.needReadable=!0),ne!==g&&y.ended&&Je(this)),ue!==null&&!y.errorEmitted&&!y.closeEmitted&&(y.dataEmitted=!0,this.emit("data",ue)),ue};function De(g,y){if(h("onEofChunk"),!y.ended){if(y.decoder){const ne=y.decoder.end();ne&&ne.length&&(y.buffer.push(ne),y.length+=y.objectMode?1:ne.length)}y.ended=!0,y.sync?je(g):(y.needReadable=!1,y.emittedReadable=!0,dt(g))}}function je(g){const y=g._readableState;h("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(h("emitReadable",y.flowing),y.emittedReadable=!0,r.nextTick(dt,g))}function dt(g){const y=g._readableState;h("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&!y.errored&&(y.length||y.ended)&&(g.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,er(g)}function Le(g,y){!y.readingMore&&y.constructed&&(y.readingMore=!0,r.nextTick(Zt,g,y))}function Zt(g,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){const ne=y.length;if(h("maybeReadMore read 0"),g.read(0),ne===y.length)break}y.readingMore=!1}K.prototype._read=function(g){throw new C("_read()")},K.prototype.pipe=function(g,y){const ne=this,Y=this._readableState;Y.pipes.length===1&&(Y.multiAwaitDrain||(Y.multiAwaitDrain=!0,Y.awaitDrainWriters=new f(Y.awaitDrainWriters?[Y.awaitDrainWriters]:[]))),Y.pipes.push(g),h("pipe count=%d opts=%j",Y.pipes.length,y);const xe=(!y||y.end!==!1)&&g!==r.stdout&&g!==r.stderr?rr:ht;Y.endEmitted?r.nextTick(xe):ne.once("end",xe),g.on("unpipe",Pe);function Pe(et,Fe){h("onunpipe"),et===ne&&Fe&&Fe.hasUnpiped===!1&&(Fe.hasUnpiped=!0,Dr())}function rr(){h("onend"),g.end()}let Qe,Xe=!1;function Dr(){h("cleanup"),g.removeListener("close",Bt),g.removeListener("finish",Ke),Qe&&g.removeListener("drain",Qe),g.removeListener("error",Mt),g.removeListener("unpipe",Pe),ne.removeListener("end",rr),ne.removeListener("end",ht),ne.removeListener("data",ir),Xe=!0,Qe&&Y.awaitDrainWriters&&(!g._writableState||g._writableState.needDrain)&&Qe()}function nr(){Xe||(Y.pipes.length===1&&Y.pipes[0]===g?(h("false write response, pause",0),Y.awaitDrainWriters=g,Y.multiAwaitDrain=!1):Y.pipes.length>1&&Y.pipes.includes(g)&&(h("false write response, pause",Y.awaitDrainWriters.size),Y.awaitDrainWriters.add(g)),ne.pause()),Qe||(Qe=Qt(ne,g),g.on("drain",Qe))}ne.on("data",ir);function ir(et){h("ondata");const Fe=g.write(et);h("dest.write",Fe),Fe===!1&&nr()}function Mt(et){if(h("onerror",et),ht(),g.removeListener("error",Mt),g.listenerCount("error")===0){const Fe=g._writableState||g._readableState;Fe&&!Fe.errorEmitted?_(g,et):g.emit("error",et)}}d(g,"error",Mt);function Bt(){g.removeListener("finish",Ke),ht()}g.once("close",Bt);function Ke(){h("onfinish"),g.removeListener("close",Bt),ht()}g.once("finish",Ke);function ht(){h("unpipe"),ne.unpipe(g)}return g.emit("pipe",ne),g.writableNeedDrain===!0?nr():Y.flowing||(h("pipe resume"),ne.resume()),g};function Qt(g,y){return function(){const Y=g._readableState;Y.awaitDrainWriters===y?(h("pipeOnDrain",1),Y.awaitDrainWriters=null):Y.multiAwaitDrain&&(h("pipeOnDrain",Y.awaitDrainWriters.size),Y.awaitDrainWriters.delete(y)),(!Y.awaitDrainWriters||Y.awaitDrainWriters.size===0)&&g.listenerCount("data")&&g.resume()}}K.prototype.unpipe=function(g){const y=this._readableState,ne={hasUnpiped:!1};if(y.pipes.length===0)return this;if(!g){const ue=y.pipes;y.pipes=[],this.pause();for(let xe=0;xe<ue.length;xe++)ue[xe].emit("unpipe",this,{hasUnpiped:!1});return this}const Y=e(y.pipes,g);return Y===-1?this:(y.pipes.splice(Y,1),y.pipes.length===0&&this.pause(),g.emit("unpipe",this,ne),this)},K.prototype.on=function(g,y){const ne=T.prototype.on.call(this,g,y),Y=this._readableState;return g==="data"?(Y.readableListening=this.listenerCount("readable")>0,Y.flowing!==!1&&this.resume()):g==="readable"&&!Y.endEmitted&&!Y.readableListening&&(Y.readableListening=Y.needReadable=!0,Y.flowing=!1,Y.emittedReadable=!1,h("on readable",Y.length,Y.reading),Y.length?je(this):Y.reading||r.nextTick(Pr,this)),ne},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(g,y){const ne=T.prototype.removeListener.call(this,g,y);return g==="readable"&&r.nextTick(Xt,this),ne},K.prototype.off=K.prototype.removeListener,K.prototype.removeAllListeners=function(g){const y=T.prototype.removeAllListeners.apply(this,arguments);return(g==="readable"||g===void 0)&&r.nextTick(Xt,this),y};function Xt(g){const y=g._readableState;y.readableListening=g.listenerCount("readable")>0,y.resumeScheduled&&y[z]===!1?y.flowing=!0:g.listenerCount("data")>0?g.resume():y.readableListening||(y.flowing=null)}function Pr(g){h("readable nexttick read 0"),g.read(0)}K.prototype.resume=function(){const g=this._readableState;return g.flowing||(h("resume"),g.flowing=!g.readableListening,Ye(this,g)),g[z]=!1,this};function Ye(g,y){y.resumeScheduled||(y.resumeScheduled=!0,r.nextTick(At,g,y))}function At(g,y){h("resume",y.reading),y.reading||g.read(0),y.resumeScheduled=!1,g.emit("resume"),er(g),y.flowing&&!y.reading&&g.read(0)}K.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[z]=!0,this};function er(g){const y=g._readableState;for(h("flow",y.flowing);y.flowing&&g.read()!==null;);}K.prototype.wrap=function(g){let y=!1;g.on("data",Y=>{!this.push(Y)&&g.pause&&(y=!0,g.pause())}),g.on("end",()=>{this.push(null)}),g.on("error",Y=>{_(this,Y)}),g.on("close",()=>{this.destroy()}),g.on("destroy",()=>{this.destroy()}),this._read=()=>{y&&g.resume&&(y=!1,g.resume())};const ne=a(g);for(let Y=1;Y<ne.length;Y++){const ue=ne[Y];this[ue]===void 0&&typeof g[ue]=="function"&&(this[ue]=g[ue].bind(g))}return this},K.prototype[m]=function(){return Lt(this)},K.prototype.iterator=function(g){return g!==void 0&&D(g,"options"),Lt(this,g)};function Lt(g,y){typeof g.read!="function"&&(g=K.wrap(g,{objectMode:!0}));const ne=Mr(g,y);return ne.stream=g,ne}async function*Mr(g,y){let ne=J;function Y(Pe){this===g?(ne(),ne=J):ne=Pe}g.on("readable",Y);let ue;const xe=b(g,{writable:!1},Pe=>{ue=Pe?M(ue,Pe):null,ne(),ne=J});try{for(;;){const Pe=g.destroyed?null:g.read();if(Pe!==null)yield Pe;else{if(ue)throw ue;if(ue===null)return;await new u(Y)}}}catch(Pe){throw ue=M(ue,Pe),ue}finally{(ue||y?.destroyOnReturn!==!1)&&(ue===void 0||g._readableState.autoDestroy)?v.destroyer(g,null):(g.off("readable",Y),xe())}}i(K.prototype,{readable:{__proto__:null,get(){const g=this._readableState;return!!g&&g.readable!==!1&&!g.destroyed&&!g.errorEmitted&&!g.endEmitted},set(g){this._readableState&&(this._readableState.readable=!!g)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(g){this._readableState&&(this._readableState.destroyed=g)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Z.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[z]!==!1},set(g){this[z]=!!g}}}),K._fromList=Nt;function Nt(g,y){if(y.length===0)return null;let ne;return y.objectMode?ne=y.buffer.shift():!g||g>=y.length?(y.decoder?ne=y.buffer.join(""):y.buffer.length===1?ne=y.buffer.first():ne=y.buffer.concat(y.length),y.buffer.clear()):ne=y.buffer.consume(g,y.decoder),ne}function Je(g){const y=g._readableState;h("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,r.nextTick(Br,y,g))}function Br(g,y){if(h("endReadableNT",g.endEmitted,g.length),!g.errored&&!g.closeEmitted&&!g.endEmitted&&g.length===0){if(g.endEmitted=!0,y.emit("end"),y.writable&&y.allowHalfOpen===!1)r.nextTick(Ze,y);else if(g.autoDestroy){const ne=y._writableState;(!ne||ne.autoDestroy&&(ne.finished||ne.writable===!1))&&y.destroy()}}}function Ze(g){g.writable&&!g.writableEnded&&!g.destroyed&&g.end()}K.from=function(g,y){return j(K,g,y)};let Pt;function tr(){return Pt===void 0&&(Pt={}),Pt}return K.fromWeb=function(g,y){return tr().newStreamReadableFromReadableStream(g,y)},K.toWeb=function(g,y){return tr().newReadableStreamFromStreamReadable(g,y)},K.wrap=function(g,y){var ne,Y;return new K({objectMode:(ne=(Y=g.readableObjectMode)!==null&&Y!==void 0?Y:g.objectMode)!==null&&ne!==void 0?ne:!0,...y,destroy(ue,xe){v.destroyer(g,ue),xe(ue)}}).wrap(g)},fn}var cn,Ci;function Fn(){if(Ci)return cn;Ci=1;const r=St(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:i,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:f}=Re();cn=D,D.WritableState=L;const{EventEmitter:E}=Kt(),m=Wn().Stream,{Buffer:p}=Et(),x=Ct(),{addAbortSignal:T}=Sr(),{getHighWaterMark:d,getDefaultHighWaterMark:c}=Ar(),{ERR_INVALID_ARG_TYPE:l,ERR_METHOD_NOT_IMPLEMENTED:b,ERR_MULTIPLE_CALLBACK:h,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:v,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:M,ERR_UNKNOWN_ENCODING:oe}=Ne().codes,{errorOrDestroy:C}=x;a(D.prototype,m.prototype),a(D,m);function R(){}const U=u("kOnFinished");function L(A,N,q){typeof q!="boolean"&&(q=N instanceof ot()),this.objectMode=!!(A&&A.objectMode),q&&(this.objectMode=this.objectMode||!!(A&&A.writableObjectMode)),this.highWaterMark=A?d(this,A,"writableHighWaterMark",q):c(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ee=!!(A&&A.decodeStrings===!1);this.decodeStrings=!ee,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=_.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,X(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!A||A.emitClose!==!1,this.autoDestroy=!A||A.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[U]=[]}function X(A){A.buffered=[],A.bufferedIndex=0,A.allBuffers=!0,A.allNoop=!0}L.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function D(A){const N=this instanceof ot();if(!N&&!n(D,this))return new D(A);this._writableState=new L(A,this,N),A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&T(A.signal,this)),m.call(this,A),x.construct(this,()=>{const q=this._writableState;q.writing||G(this,q),F(this,q)})}o(D,f,{__proto__:null,value:function(A){return n(this,A)?!0:this!==D?!1:A&&A._writableState instanceof L}}),D.prototype.pipe=function(){C(this,new S)};function z(A,N,q,ee){const re=A._writableState;if(typeof q=="function")ee=q,q=re.defaultEncoding;else{if(!q)q=re.defaultEncoding;else if(q!=="buffer"&&!p.isEncoding(q))throw new oe(q);typeof ee!="function"&&(ee=R)}if(N===null)throw new B;if(!re.objectMode)if(typeof N=="string")re.decodeStrings!==!1&&(N=p.from(N,q),q="buffer");else if(N instanceof p)q="buffer";else if(m._isUint8Array(N))N=m._uint8ArrayToBuffer(N),q="buffer";else throw new l("chunk",["string","Buffer","Uint8Array"],N);let te;return re.ending?te=new M:re.destroyed&&(te=new v("write")),te?(r.nextTick(ee,te),C(A,te,!0),te):(re.pendingcb++,se(A,re,N,q,ee))}D.prototype.write=function(A,N,q){return z(this,A,N,q)===!0},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){const A=this._writableState;A.corked&&(A.corked--,A.writing||G(this,A))},D.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=s(N)),!p.isEncoding(N))throw new oe(N);return this._writableState.defaultEncoding=N,this};function se(A,N,q,ee,re){const te=N.objectMode?1:q.length;N.length+=te;const I=N.length<N.highWaterMark;return I||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:q,encoding:ee,callback:re}),N.allBuffers&&ee!=="buffer"&&(N.allBuffers=!1),N.allNoop&&re!==R&&(N.allNoop=!1)):(N.writelen=te,N.writecb=re,N.writing=!0,N.sync=!0,A._write(q,ee,N.onwrite),N.sync=!1),I&&!N.errored&&!N.destroyed}function j(A,N,q,ee,re,te,I){N.writelen=ee,N.writecb=I,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new v("write")):q?A._writev(re,N.onwrite):A._write(re,te,N.onwrite),N.sync=!1}function J(A,N,q,ee){--N.pendingcb,ee(q),W(N),C(A,q)}function _(A,N){const q=A._writableState,ee=q.sync,re=q.writecb;if(typeof re!="function"){C(A,new h);return}q.writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,N?(N.stack,q.errored||(q.errored=N),A._readableState&&!A._readableState.errored&&(A._readableState.errored=N),ee?r.nextTick(J,A,q,N,re):J(A,q,N,re)):(q.buffered.length>q.bufferedIndex&&G(A,q),ee?q.afterWriteTickInfo!==null&&q.afterWriteTickInfo.cb===re?q.afterWriteTickInfo.count++:(q.afterWriteTickInfo={count:1,cb:re,stream:A,state:q},r.nextTick($,q.afterWriteTickInfo)):Q(A,q,1,re))}function $({stream:A,state:N,count:q,cb:ee}){return N.afterWriteTickInfo=null,Q(A,N,q,ee)}function Q(A,N,q,ee){for(!N.ending&&!A.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,A.emit("drain"));q-- >0;)N.pendingcb--,ee();N.destroyed&&W(N),F(A,N)}function W(A){if(A.writing)return;for(let re=A.bufferedIndex;re<A.buffered.length;++re){var N;const{chunk:te,callback:I}=A.buffered[re],V=A.objectMode?1:te.length;A.length-=V,I((N=A.errored)!==null&&N!==void 0?N:new v("write"))}const q=A[U].splice(0);for(let re=0;re<q.length;re++){var ee;q[re]((ee=A.errored)!==null&&ee!==void 0?ee:new v("end"))}X(A)}function G(A,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;const{buffered:q,bufferedIndex:ee,objectMode:re}=N,te=q.length-ee;if(!te)return;let I=ee;if(N.bufferProcessing=!0,te>1&&A._writev){N.pendingcb-=te-1;const V=N.allNoop?R:K=>{for(let pe=I;pe<q.length;++pe)q[pe].callback(K)},Z=N.allNoop&&I===0?q:e(q,I);Z.allBuffers=N.allBuffers,j(A,N,!0,N.length,Z,"",V),X(N)}else{do{const{chunk:V,encoding:Z,callback:K}=q[I];q[I++]=null;const pe=re?1:V.length;j(A,N,!1,pe,V,Z,K)}while(I<q.length&&!N.writing);I===q.length?X(N):I>256?(q.splice(0,I),N.bufferedIndex=0):N.bufferedIndex=I}N.bufferProcessing=!1}D.prototype._write=function(A,N,q){if(this._writev)this._writev([{chunk:A,encoding:N}],q);else throw new b("_write()")},D.prototype._writev=null,D.prototype.end=function(A,N,q){const ee=this._writableState;typeof A=="function"?(q=A,A=null,N=null):typeof N=="function"&&(q=N,N=null);let re;if(A!=null){const te=z(this,A,N);te instanceof t&&(re=te)}return ee.corked&&(ee.corked=1,this.uncork()),re||(!ee.errored&&!ee.ending?(ee.ending=!0,F(this,ee,!0),ee.ended=!0):ee.finished?re=new P("end"):ee.destroyed&&(re=new v("end"))),typeof q=="function"&&(re||ee.finished?r.nextTick(q,re):ee[U].push(q)),this};function le(A){return A.ending&&!A.destroyed&&A.constructed&&A.length===0&&!A.errored&&A.buffered.length===0&&!A.finished&&!A.writing&&!A.errorEmitted&&!A.closeEmitted}function ge(A,N){let q=!1;function ee(re){if(q){C(A,re??h());return}if(q=!0,N.pendingcb--,re){const te=N[U].splice(0);for(let I=0;I<te.length;I++)te[I](re);C(A,re,N.sync)}else le(N)&&(N.prefinished=!0,A.emit("prefinish"),N.pendingcb++,r.nextTick(H,A,N))}N.sync=!0,N.pendingcb++;try{A._final(ee)}catch(re){ee(re)}N.sync=!1}function ce(A,N){!N.prefinished&&!N.finalCalled&&(typeof A._final=="function"&&!N.destroyed?(N.finalCalled=!0,ge(A,N)):(N.prefinished=!0,A.emit("prefinish")))}function F(A,N,q){le(N)&&(ce(A,N),N.pendingcb===0&&(q?(N.pendingcb++,r.nextTick((ee,re)=>{le(re)?H(ee,re):re.pendingcb--},A,N)):le(N)&&(N.pendingcb++,H(A,N))))}function H(A,N){N.pendingcb--,N.finished=!0;const q=N[U].splice(0);for(let ee=0;ee<q.length;ee++)q[ee]();if(A.emit("finish"),N.autoDestroy){const ee=A._readableState;(!ee||ee.autoDestroy&&(ee.endEmitted||ee.readable===!1))&&A.destroy()}}i(D.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(A){this._writableState&&(this._writableState.destroyed=A)}},writable:{__proto__:null,get(){const A=this._writableState;return!!A&&A.writable!==!1&&!A.destroyed&&!A.errored&&!A.ending&&!A.ended},set(A){this._writableState&&(this._writableState.writable=!!A)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const A=this._writableState;return A?!A.destroyed&&!A.ending&&A.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ie=x.destroy;D.prototype.destroy=function(A,N){const q=this._writableState;return!q.destroyed&&(q.bufferedIndex<q.buffered.length||q[U].length)&&r.nextTick(W,q),ie.call(this,A,N),this},D.prototype._undestroy=x.undestroy,D.prototype._destroy=function(A,N){N(A)},D.prototype[E.captureRejectionSymbol]=function(A){this.destroy(A)};let de;function ae(){return de===void 0&&(de={}),de}return D.fromWeb=function(A,N){return ae().newStreamWritableFromWritableStream(A,N)},D.toWeb=function(A){return ae().newWritableStreamFromStreamWritable(A)},cn}var dn,Li;function Ys(){if(Li)return dn;Li=1;const r=St(),e=Et(),{isReadable:t,isWritable:n,isIterable:o,isNodeStream:i,isReadableNodeStream:a,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:f,isWritableStream:E}=st(),m=ct(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:x,ERR_INVALID_RETURN_VALUE:T}}=Ne(),{destroyer:d}=Ct(),c=ot(),l=Rr(),b=Fn(),{createDeferredPromise:h}=Be(),S=No(),v=globalThis.Blob||e.Blob,P=typeof v<"u"?function(L){return L instanceof v}:function(L){return!1},B=globalThis.AbortController||Ht().AbortController,{FunctionPrototypeCall:M}=Re();class oe extends c{constructor(L){super(L),L?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),L?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}dn=function U(L,X){if(u(L))return L;if(a(L))return R({readable:L});if(s(L))return R({writable:L});if(i(L))return R({writable:!1,readable:!1});if(f(L))return R({readable:l.fromWeb(L)});if(E(L))return R({writable:b.fromWeb(L)});if(typeof L=="function"){const{value:z,write:se,final:j,destroy:J}=C(L);if(o(z))return S(oe,z,{objectMode:!0,write:se,final:j,destroy:J});const _=z?.then;if(typeof _=="function"){let $;const Q=M(_,z,W=>{if(W!=null)throw new T("nully","body",W)},W=>{d($,W)});return $=new oe({objectMode:!0,readable:!1,write:se,final(W){j(async()=>{try{await Q,r.nextTick(W,null)}catch(G){r.nextTick(W,G)}})},destroy:J})}throw new T("Iterable, AsyncIterable or AsyncFunction",X,z)}if(P(L))return U(L.arrayBuffer());if(o(L))return S(oe,L,{objectMode:!0,writable:!1});if(f(L?.readable)&&E(L?.writable))return oe.fromWeb(L);if(typeof L?.writable=="object"||typeof L?.readable=="object"){const z=L!=null&&L.readable?a(L?.readable)?L?.readable:U(L.readable):void 0,se=L!=null&&L.writable?s(L?.writable)?L?.writable:U(L.writable):void 0;return R({readable:z,writable:se})}const D=L?.then;if(typeof D=="function"){let z;return M(D,L,se=>{se!=null&&z.push(se),z.push(null)},se=>{d(z,se)}),z=new oe({objectMode:!0,writable:!1,read(){}})}throw new x(X,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],L)};function C(U){let{promise:L,resolve:X}=h();const D=new B,z=D.signal;return{value:U((async function*(){for(;;){const j=L;L=null;const{chunk:J,done:_,cb:$}=await j;if(r.nextTick($),_)return;if(z.aborted)throw new p(void 0,{cause:z.reason});({promise:L,resolve:X}=h()),yield J}})(),{signal:z}),write(j,J,_){const $=X;X=null,$({chunk:j,done:!1,cb:_})},final(j){const J=X;X=null,J({done:!0,cb:j})},destroy(j,J){D.abort(),J(j)}}}function R(U){const L=U.readable&&typeof U.readable.read!="function"?l.wrap(U.readable):U.readable,X=U.writable;let D=!!t(L),z=!!n(X),se,j,J,_,$;function Q(W){const G=_;_=null,G?G(W):W&&$.destroy(W)}return $=new oe({readableObjectMode:!!(L!=null&&L.readableObjectMode),writableObjectMode:!!(X!=null&&X.writableObjectMode),readable:D,writable:z}),z&&(m(X,W=>{z=!1,W&&d(L,W),Q(W)}),$._write=function(W,G,le){X.write(W,G)?le():se=le},$._final=function(W){X.end(),j=W},X.on("drain",function(){if(se){const W=se;se=null,W()}}),X.on("finish",function(){if(j){const W=j;j=null,W()}})),D&&(m(L,W=>{D=!1,W&&d(L,W),Q(W)}),L.on("readable",function(){if(J){const W=J;J=null,W()}}),L.on("end",function(){$.push(null)}),$._read=function(){for(;;){const W=L.read();if(W===null){J=$._read;return}if(!$.push(W))return}}),$._destroy=function(W,G){!W&&_!==null&&(W=new p),J=null,se=null,j=null,_===null?G(W):(_=G,d(X,W),d(L,W))},$}return dn}var hn,Ni;function ot(){if(Ni)return hn;Ni=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Re();hn=a;const o=Rr(),i=Fn();n(a.prototype,o.prototype),n(a,o);{const E=t(i.prototype);for(let m=0;m<E.length;m++){const p=E[m];a.prototype[p]||(a.prototype[p]=i.prototype[p])}}function a(E){if(!(this instanceof a))return new a(E);o.call(this,E),i.call(this,E),E?(this.allowHalfOpen=E.allowHalfOpen!==!1,E.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),E.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(a.prototype,{writable:{__proto__:null,...e(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(i.prototype,"writableLength")},writableFinished:{__proto__:null,...e(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(E){this._readableState&&this._writableState&&(this._readableState.destroyed=E,this._writableState.destroyed=E)}}});let s;function u(){return s===void 0&&(s={}),s}a.fromWeb=function(E,m){return u().newStreamDuplexFromReadableWritablePair(E,m)},a.toWeb=function(E){return u().newReadableWritablePairFromDuplex(E)};let f;return a.from=function(E){return f||(f=Ys()),f(E,"body")},hn}var gn,Pi;function Po(){if(Pi)return gn;Pi=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Re();gn=a;const{ERR_METHOD_NOT_IMPLEMENTED:t}=Ne().codes,n=ot(),{getHighWaterMark:o}=Ar();r(a.prototype,n.prototype),r(a,n);const i=e("kCallback");function a(f){if(!(this instanceof a))return new a(f);const E=f?o(this,f,"readableHighWaterMark",!0):null;E===0&&(f={...f,highWaterMark:null,readableHighWaterMark:E,writableHighWaterMark:f.writableHighWaterMark||0}),n.call(this,f),this._readableState.sync=!1,this[i]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",u)}function s(f){typeof this._flush=="function"&&!this.destroyed?this._flush((E,m)=>{if(E){f?f(E):this.destroy(E);return}m!=null&&this.push(m),this.push(null),f&&f()}):(this.push(null),f&&f())}function u(){this._final!==s&&s.call(this)}return a.prototype._final=s,a.prototype._transform=function(f,E,m){throw new t("_transform()")},a.prototype._write=function(f,E,m){const p=this._readableState,x=this._writableState,T=p.length;this._transform(f,E,(d,c)=>{if(d){m(d);return}c!=null&&this.push(c),x.ended||T===p.length||p.length<p.highWaterMark?m():this[i]=m})},a.prototype._read=function(){if(this[i]){const f=this[i];this[i]=null,f()}},gn}var pn,Mi;function Mo(){if(Mi)return pn;Mi=1;const{ObjectSetPrototypeOf:r}=Re();pn=t;const e=Po();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,o,i){i(null,n)},pn}var bn,Bi;function $n(){if(Bi)return bn;Bi=1;const r=St(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:o}=Re(),i=ct(),{once:a}=Be(),s=Ct(),u=ot(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:E,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:x,ERR_STREAM_PREMATURE_CLOSE:T},AbortError:d}=Ne(),{validateFunction:c,validateAbortSignal:l}=Vt(),{isIterable:b,isReadable:h,isReadableNodeStream:S,isNodeStream:v,isTransformStream:P,isWebStream:B,isReadableStream:M,isReadableFinished:oe}=st(),C=globalThis.AbortController||Ht().AbortController;let R,U,L;function X(W,G,le){let ge=!1;W.on("close",()=>{ge=!0});const ce=i(W,{readable:G,writable:le},F=>{ge=!F});return{destroy:F=>{ge||(ge=!0,s.destroyer(W,F||new x("pipe")))},cleanup:ce}}function D(W){return c(W[W.length-1],"streams[stream.length - 1]"),W.pop()}function z(W){if(b(W))return W;if(S(W))return se(W);throw new E("val",["Readable","Iterable","AsyncIterable"],W)}async function*se(W){U||(U=Rr()),yield*U.prototype[n].call(W)}async function j(W,G,le,{end:ge}){let ce,F=null;const H=ae=>{if(ae&&(ce=ae),F){const A=F;F=null,A()}},ie=()=>new t((ae,A)=>{ce?A(ce):F=()=>{ce?A(ce):ae()}});G.on("drain",H);const de=i(G,{readable:!1},H);try{G.writableNeedDrain&&await ie();for await(const ae of W)G.write(ae)||await ie();ge&&(G.end(),await ie()),le()}catch(ae){le(ce!==ae?f(ce,ae):ae)}finally{de(),G.off("drain",H)}}async function J(W,G,le,{end:ge}){P(G)&&(G=G.writable);const ce=G.getWriter();try{for await(const F of W)await ce.ready,ce.write(F).catch(()=>{});await ce.ready,ge&&await ce.close(),le()}catch(F){try{await ce.abort(F),le(F)}catch(H){le(H)}}}function _(...W){return $(W,a(D(W)))}function $(W,G,le){if(W.length===1&&e(W[0])&&(W=W[0]),W.length<2)throw new p("streams");const ge=new C,ce=ge.signal,F=le?.signal,H=[];l(F,"options.signal");function ie(){re(new d)}L=L||Be().addAbortListener;let de;F&&(de=L(F,ie));let ae,A;const N=[];let q=0;function ee(Z){re(Z,--q===0)}function re(Z,K){var pe;if(Z&&(!ae||ae.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ae=Z),!(!ae&&!K)){for(;N.length;)N.shift()(ae);(pe=de)===null||pe===void 0||pe[o](),ge.abort(),K&&(ae||H.forEach(Ae=>Ae()),r.nextTick(G,ae,A))}}let te;for(let Z=0;Z<W.length;Z++){const K=W[Z],pe=Z<W.length-1,Ae=Z>0,we=pe||le?.end!==!1,Ce=Z===W.length-1;if(v(K)){let Te=function(De){De&&De.name!=="AbortError"&&De.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ee(De)};if(we){const{destroy:De,cleanup:je}=X(K,pe,Ae);N.push(De),h(K)&&Ce&&H.push(je)}K.on("error",Te),h(K)&&Ce&&H.push(()=>{K.removeListener("error",Te)})}if(Z===0)if(typeof K=="function"){if(te=K({signal:ce}),!b(te))throw new m("Iterable, AsyncIterable or Stream","source",te)}else b(K)||S(K)||P(K)?te=K:te=u.from(K);else if(typeof K=="function"){if(P(te)){var I;te=z((I=te)===null||I===void 0?void 0:I.readable)}else te=z(te);if(te=K(te,{signal:ce}),pe){if(!b(te,!0))throw new m("AsyncIterable",`transform[${Z-1}]`,te)}else{var V;R||(R=Mo());const Te=new R({objectMode:!0}),De=(V=te)===null||V===void 0?void 0:V.then;if(typeof De=="function")q++,De.call(te,Le=>{A=Le,Le!=null&&Te.write(Le),we&&Te.end(),r.nextTick(ee)},Le=>{Te.destroy(Le),r.nextTick(ee,Le)});else if(b(te,!0))q++,j(te,Te,ee,{end:we});else if(M(te)||P(te)){const Le=te.readable||te;q++,j(Le,Te,ee,{end:we})}else throw new m("AsyncIterable or Promise","destination",te);te=Te;const{destroy:je,cleanup:dt}=X(te,!1,!0);N.push(je),Ce&&H.push(dt)}}else if(v(K)){if(S(te)){q+=2;const Te=Q(te,K,ee,{end:we});h(K)&&Ce&&H.push(Te)}else if(P(te)||M(te)){const Te=te.readable||te;q++,j(Te,K,ee,{end:we})}else if(b(te))q++,j(te,K,ee,{end:we});else throw new E("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],te);te=K}else if(B(K)){if(S(te))q++,J(z(te),K,ee,{end:we});else if(M(te)||b(te))q++,J(te,K,ee,{end:we});else if(P(te))q++,J(te.readable,K,ee,{end:we});else throw new E("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],te);te=K}else te=u.from(K)}return(ce!=null&&ce.aborted||F!=null&&F.aborted)&&r.nextTick(ie),te}function Q(W,G,le,{end:ge}){let ce=!1;if(G.on("close",()=>{ce||le(new T)}),W.pipe(G,{end:!1}),ge){let F=function(){ce=!0,G.end()};oe(W)?r.nextTick(F):W.once("end",F)}else le();return i(W,{readable:!0,writable:!1},F=>{const H=W._readableState;F&&F.code==="ERR_STREAM_PREMATURE_CLOSE"&&H&&H.ended&&!H.errored&&!H.errorEmitted?W.once("end",le).once("error",le):le(F)}),i(G,{readable:!1,writable:!0},le)}return bn={pipelineImpl:$,pipeline:_},bn}var wn,Di;function Bo(){if(Di)return wn;Di=1;const{pipeline:r}=$n(),e=ot(),{destroyer:t}=Ct(),{isNodeStream:n,isReadable:o,isWritable:i,isWebStream:a,isTransformStream:s,isWritableStream:u,isReadableStream:f}=st(),{AbortError:E,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:p}}=Ne(),x=ct();return wn=function(...d){if(d.length===0)throw new p("streams");if(d.length===1)return e.from(d[0]);const c=[...d];if(typeof d[0]=="function"&&(d[0]=e.from(d[0])),typeof d[d.length-1]=="function"){const R=d.length-1;d[R]=e.from(d[R])}for(let R=0;R<d.length;++R)if(!(!n(d[R])&&!a(d[R]))){if(R<d.length-1&&!(o(d[R])||f(d[R])||s(d[R])))throw new m(`streams[${R}]`,c[R],"must be readable");if(R>0&&!(i(d[R])||u(d[R])||s(d[R])))throw new m(`streams[${R}]`,c[R],"must be writable")}let l,b,h,S,v;function P(R){const U=S;S=null,U?U(R):R?v.destroy(R):!C&&!oe&&v.destroy()}const B=d[0],M=r(d,P),oe=!!(i(B)||u(B)||s(B)),C=!!(o(M)||f(M)||s(M));if(v=new e({writableObjectMode:!!(B!=null&&B.writableObjectMode),readableObjectMode:!!(M!=null&&M.readableObjectMode),writable:oe,readable:C}),oe){if(n(B))v._write=function(U,L,X){B.write(U,L)?X():l=X},v._final=function(U){B.end(),b=U},B.on("drain",function(){if(l){const U=l;l=null,U()}});else if(a(B)){const L=(s(B)?B.writable:B).getWriter();v._write=async function(X,D,z){try{await L.ready,L.write(X).catch(()=>{}),z()}catch(se){z(se)}},v._final=async function(X){try{await L.ready,L.close().catch(()=>{}),b=X}catch(D){X(D)}}}const R=s(M)?M.readable:M;x(R,()=>{if(b){const U=b;b=null,U()}})}if(C){if(n(M))M.on("readable",function(){if(h){const R=h;h=null,R()}}),M.on("end",function(){v.push(null)}),v._read=function(){for(;;){const R=M.read();if(R===null){h=v._read;return}if(!v.push(R))return}};else if(a(M)){const U=(s(M)?M.readable:M).getReader();v._read=async function(){for(;;)try{const{value:L,done:X}=await U.read();if(!v.push(L))return;if(X){v.push(null);return}}catch{return}}}}return v._destroy=function(R,U){!R&&S!==null&&(R=new E),h=null,l=null,b=null,S===null?U(R):(S=U,n(M)&&t(M,R))},v},wn}var ji;function Js(){if(ji)return fr;ji=1;const r=globalThis.AbortController||Ht().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:o},AbortError:i}=Ne(),{validateAbortSignal:a,validateInteger:s,validateObject:u}=Vt(),f=Re().Symbol("kWeak"),E=Re().Symbol("kResistStopPropagation"),{finished:m}=ct(),p=Bo(),{addAbortSignalNoValidate:x}=Sr(),{isWritable:T,isNodeStream:d}=st(),{deprecate:c}=Be(),{ArrayPrototypePush:l,Boolean:b,MathFloor:h,Number:S,NumberIsNaN:v,Promise:P,PromiseReject:B,PromiseResolve:M,PromisePrototypeThen:oe,Symbol:C}=Re(),R=C("kEmpty"),U=C("kEof");function L(F,H){if(H!=null&&u(H,"options"),H?.signal!=null&&a(H.signal,"options.signal"),d(F)&&!T(F))throw new e("stream",F,"must be writable");const ie=p(this,F);return H!=null&&H.signal&&x(H.signal,ie),ie}function X(F,H){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);H!=null&&u(H,"options"),H?.signal!=null&&a(H.signal,"options.signal");let ie=1;H?.concurrency!=null&&(ie=h(H.concurrency));let de=ie-1;return H?.highWaterMark!=null&&(de=h(H.highWaterMark)),s(ie,"options.concurrency",1),s(de,"options.highWaterMark",0),de+=ie,async function*(){const A=Be().AbortSignalAny([H?.signal].filter(b)),N=this,q=[],ee={signal:A};let re,te,I=!1,V=0;function Z(){I=!0,K()}function K(){V-=1,pe()}function pe(){te&&!I&&V<ie&&q.length<de&&(te(),te=null)}async function Ae(){try{for await(let we of N){if(I)return;if(A.aborted)throw new i;try{if(we=F(we,ee),we===R)continue;we=M(we)}catch(Ce){we=B(Ce)}V+=1,oe(we,K,Z),q.push(we),re&&(re(),re=null),!I&&(q.length>=de||V>=ie)&&await new P(Ce=>{te=Ce})}q.push(U)}catch(we){const Ce=B(we);oe(Ce,K,Z),q.push(Ce)}finally{I=!0,re&&(re(),re=null)}}Ae();try{for(;;){for(;q.length>0;){const we=await q[0];if(we===U)return;if(A.aborted)throw new i;we!==R&&(yield we),q.shift(),pe()}await new P(we=>{re=we})}}finally{I=!0,te&&(te(),te=null)}}.call(this)}function D(F=void 0){return F!=null&&u(F,"options"),F?.signal!=null&&a(F.signal,"options.signal"),async function*(){let ie=0;for await(const ae of this){var de;if(F!=null&&(de=F.signal)!==null&&de!==void 0&&de.aborted)throw new i({cause:F.signal.reason});yield[ie++,ae]}}.call(this)}async function z(F,H=void 0){for await(const ie of _.call(this,F,H))return!0;return!1}async function se(F,H=void 0){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);return!await z.call(this,async(...ie)=>!await F(...ie),H)}async function j(F,H){for await(const ie of _.call(this,F,H))return ie}async function J(F,H){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);async function ie(de,ae){return await F(de,ae),R}for await(const de of X.call(this,ie,H));}function _(F,H){if(typeof F!="function")throw new t("fn",["Function","AsyncFunction"],F);async function ie(de,ae){return await F(de,ae)?de:R}return X.call(this,ie,H)}class $ extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(F,H,ie){var de;if(typeof F!="function")throw new t("reducer",["Function","AsyncFunction"],F);ie!=null&&u(ie,"options"),ie?.signal!=null&&a(ie.signal,"options.signal");let ae=arguments.length>1;if(ie!=null&&(de=ie.signal)!==null&&de!==void 0&&de.aborted){const re=new i(void 0,{cause:ie.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(re)),re}const A=new r,N=A.signal;if(ie!=null&&ie.signal){const re={once:!0,[f]:this,[E]:!0};ie.signal.addEventListener("abort",()=>A.abort(),re)}let q=!1;try{for await(const re of this){var ee;if(q=!0,ie!=null&&(ee=ie.signal)!==null&&ee!==void 0&&ee.aborted)throw new i;ae?H=await F(H,re,{signal:N}):(H=re,ae=!0)}if(!q&&!ae)throw new $}finally{A.abort()}return H}async function W(F){F!=null&&u(F,"options"),F?.signal!=null&&a(F.signal,"options.signal");const H=[];for await(const de of this){var ie;if(F!=null&&(ie=F.signal)!==null&&ie!==void 0&&ie.aborted)throw new i(void 0,{cause:F.signal.reason});l(H,de)}return H}function G(F,H){const ie=X.call(this,F,H);return async function*(){for await(const ae of ie)yield*ae}.call(this)}function le(F){if(F=S(F),v(F))return 0;if(F<0)throw new o("number",">= 0",F);return F}function ge(F,H=void 0){return H!=null&&u(H,"options"),H?.signal!=null&&a(H.signal,"options.signal"),F=le(F),async function*(){var de;if(H!=null&&(de=H.signal)!==null&&de!==void 0&&de.aborted)throw new i;for await(const A of this){var ae;if(H!=null&&(ae=H.signal)!==null&&ae!==void 0&&ae.aborted)throw new i;F--<=0&&(yield A)}}.call(this)}function ce(F,H=void 0){return H!=null&&u(H,"options"),H?.signal!=null&&a(H.signal,"options.signal"),F=le(F),async function*(){var de;if(H!=null&&(de=H.signal)!==null&&de!==void 0&&de.aborted)throw new i;for await(const A of this){var ae;if(H!=null&&(ae=H.signal)!==null&&ae!==void 0&&ae.aborted)throw new i;if(F-- >0&&(yield A),F<=0)return}}.call(this)}return fr.streamReturningOperators={asIndexedPairs:c(D,"readable.asIndexedPairs will be removed in a future version."),drop:ge,filter:_,flatMap:G,map:X,take:ce,compose:L},fr.promiseReturningOperators={every:se,forEach:J,reduce:Q,toArray:W,some:z,find:j},fr}var yn,ki;function Do(){if(ki)return yn;ki=1;const{ArrayPrototypePop:r,Promise:e}=Re(),{isIterable:t,isNodeStream:n,isWebStream:o}=st(),{pipelineImpl:i}=$n(),{finished:a}=ct();jo();function s(...u){return new e((f,E)=>{let m,p;const x=u[u.length-1];if(x&&typeof x=="object"&&!n(x)&&!t(x)&&!o(x)){const T=r(u);m=T.signal,p=T.end}i(u,(T,d)=>{T?E(T):f(d)},{signal:m,end:p})})}return yn={finished:a,pipeline:s},yn}var qi;function jo(){if(qi)return Yr.exports;qi=1;const{Buffer:r}=Et(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Re(),{promisify:{custom:o}}=Be(),{streamReturningOperators:i,promiseReturningOperators:a}=Js(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=Ne(),u=Bo(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:E}=Ar(),{pipeline:m}=$n(),{destroyer:p}=Ct(),x=ct(),T=Do(),d=st(),c=Yr.exports=Wn().Stream;c.isDestroyed=d.isDestroyed,c.isDisturbed=d.isDisturbed,c.isErrored=d.isErrored,c.isReadable=d.isReadable,c.isWritable=d.isWritable,c.Readable=Rr();for(const b of t(i)){let S=function(...v){if(new.target)throw s();return c.Readable.from(n(h,this,v))};const h=i[b];e(S,"name",{__proto__:null,value:h.name}),e(S,"length",{__proto__:null,value:h.length}),e(c.Readable.prototype,b,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const b of t(a)){let S=function(...v){if(new.target)throw s();return n(h,this,v)};const h=a[b];e(S,"name",{__proto__:null,value:h.name}),e(S,"length",{__proto__:null,value:h.length}),e(c.Readable.prototype,b,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}c.Writable=Fn(),c.Duplex=ot(),c.Transform=Po(),c.PassThrough=Mo(),c.pipeline=m;const{addAbortSignal:l}=Sr();return c.addAbortSignal=l,c.finished=x,c.destroy=p,c.compose=u,c.setDefaultHighWaterMark=f,c.getDefaultHighWaterMark=E,e(c,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return T}}),e(m,o,{__proto__:null,enumerable:!0,get(){return T.pipeline}}),e(x,o,{__proto__:null,enumerable:!0,get(){return T.finished}}),c.Stream=c,c._isUint8Array=function(h){return h instanceof Uint8Array},c._uint8ArrayToBuffer=function(h){return r.from(h.buffer,h.byteOffset,h.byteLength)},Yr.exports}var Ui;function Zs(){return Ui||(Ui=1,(function(r){const e=jo(),t=Do(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports})(Gr)),Gr.exports}var Ir=Zs(),_n,Wi;function ko(){if(Wi)return _n;Wi=1,_n=i,i.default=i,i.stable=f,i.stableStringify=f;var r="[...]",e="[Circular]",t=[],n=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function i(p,x,T,d){typeof d>"u"&&(d=o()),s(p,"",0,[],void 0,0,d);var c;try{n.length===0?c=JSON.stringify(p,x,T):c=JSON.stringify(p,m(x),T)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var l=t.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return c}function a(p,x,T,d){var c=Object.getOwnPropertyDescriptor(d,T);c.get!==void 0?c.configurable?(Object.defineProperty(d,T,{value:p}),t.push([d,T,x,c])):n.push([x,T,p]):(d[T]=p,t.push([d,T,x]))}function s(p,x,T,d,c,l,b){l+=1;var h;if(typeof p=="object"&&p!==null){for(h=0;h<d.length;h++)if(d[h]===p){a(e,p,x,c);return}if(typeof b.depthLimit<"u"&&l>b.depthLimit){a(r,p,x,c);return}if(typeof b.edgesLimit<"u"&&T+1>b.edgesLimit){a(r,p,x,c);return}if(d.push(p),Array.isArray(p))for(h=0;h<p.length;h++)s(p[h],h,h,d,p,l,b);else{var S=Object.keys(p);for(h=0;h<S.length;h++){var v=S[h];s(p[v],v,h,d,p,l,b)}}d.pop()}}function u(p,x){return p<x?-1:p>x?1:0}function f(p,x,T,d){typeof d>"u"&&(d=o());var c=E(p,"",0,[],void 0,0,d)||p,l;try{n.length===0?l=JSON.stringify(c,x,T):l=JSON.stringify(c,m(x),T)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var b=t.pop();b.length===4?Object.defineProperty(b[0],b[1],b[3]):b[0][b[1]]=b[2]}}return l}function E(p,x,T,d,c,l,b){l+=1;var h;if(typeof p=="object"&&p!==null){for(h=0;h<d.length;h++)if(d[h]===p){a(e,p,x,c);return}try{if(typeof p.toJSON=="function")return}catch{return}if(typeof b.depthLimit<"u"&&l>b.depthLimit){a(r,p,x,c);return}if(typeof b.edgesLimit<"u"&&T+1>b.edgesLimit){a(r,p,x,c);return}if(d.push(p),Array.isArray(p))for(h=0;h<p.length;h++)E(p[h],h,h,d,p,l,b);else{var S={},v=Object.keys(p).sort(u);for(h=0;h<v.length;h++){var P=v[h];E(p[P],P,h,d,p,l,b),S[P]=p[P]}if(typeof c<"u")t.push([c,x,p]),c[x]=S;else return S}d.pop()}}function m(p){return p=typeof p<"u"?p:function(x,T){return T},function(x,T){if(n.length>0)for(var d=0;d<n.length;d++){var c=n[d];if(c[1]===x&&c[0]===T){T=c[2],n.splice(d,1);break}}return p.call(this,x,T)}}return _n}var Qs=ko();const Xs=Ot(Qs);var dr={exports:{}},mn,Fi;function ea(){if(Fi)return mn;Fi=1,mn=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){n[o]=e[o]}),n;function n(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=e.apply(this,o),s=o[o.length-1];return typeof a=="function"&&a!==s&&Object.keys(s).forEach(function(u){a[u]=s[u]}),a}}return mn}var $i;function Hn(){if($i)return dr.exports;$i=1;var r=ea();dr.exports=r(e),dr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var o=function(){return o.called?o.value:(o.called=!0,o.value=n.apply(this,arguments))};return o.called=!1,o}function t(n){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=n.apply(this,arguments)},i=n.name||"Function wrapped with `once`";return o.onceError=i+" shouldn't be called more than once",o.called=!1,o}return dr.exports}var vn,Hi;function qo(){if(Hi)return vn;Hi=1;var r={},e=Hn(),t=function(){},n=r.Bare?queueMicrotask:mr.nextTick.bind(mr),o=function(s){return s.setHeader&&typeof s.abort=="function"},i=function(s){return s.stdio&&Array.isArray(s.stdio)&&s.stdio.length===3},a=function(s,u,f){if(typeof u=="function")return a(s,null,u);u||(u={}),f=e(f||t);var E=s._writableState,m=s._readableState,p=u.readable||u.readable!==!1&&s.readable,x=u.writable||u.writable!==!1&&s.writable,T=!1,d=function(){s.writable||c()},c=function(){x=!1,p||f.call(s)},l=function(){p=!1,x||f.call(s)},b=function(B){f.call(s,B?new Error("exited with error code: "+B):null)},h=function(B){f.call(s,B)},S=function(){n(v)},v=function(){if(!T){if(p&&!(m&&m.ended&&!m.destroyed))return f.call(s,new Error("premature close"));if(x&&!(E&&E.ended&&!E.destroyed))return f.call(s,new Error("premature close"))}},P=function(){s.req.on("finish",c)};return o(s)?(s.on("complete",c),s.on("abort",S),s.req?P():s.on("request",P)):x&&!E&&(s.on("end",d),s.on("close",d)),i(s)&&s.on("exit",b),s.on("end",l),s.on("finish",c),u.error!==!1&&s.on("error",h),s.on("close",S),function(){T=!0,s.removeListener("complete",c),s.removeListener("abort",S),s.removeListener("request",P),s.req&&s.req.removeListener("finish",c),s.removeListener("end",d),s.removeListener("close",d),s.removeListener("finish",c),s.removeListener("exit",b),s.removeListener("end",l),s.removeListener("error",h),s.removeListener("close",S)}};return vn=a,vn}var ta=qo();const zi=Ot(ta);var ra=Hn();const na=Ot(ra);var En,Ki;function ia(){if(Ki)return En;Ki=1;var r=Hn(),e=qo(),t;try{t=Ks}catch{}var n=function(){},o=typeof mr>"u"?!1:/^v?\.0/.test(mr.version),i=function(p){return typeof p=="function"},a=function(p){return!o||!t?!1:(p instanceof(t.ReadStream||n)||p instanceof(t.WriteStream||n))&&i(p.close)},s=function(p){return p.setHeader&&i(p.abort)},u=function(p,x,T,d){d=r(d);var c=!1;p.on("close",function(){c=!0}),e(p,{readable:x,writable:T},function(b){if(b)return d(b);c=!0,d()});var l=!1;return function(b){if(!c&&!l){if(l=!0,a(p))return p.close(n);if(s(p))return p.abort();if(i(p.destroy))return p.destroy();d(b||new Error("stream was destroyed"))}}},f=function(p){p()},E=function(p,x){return p.pipe(x)},m=function(){var p=Array.prototype.slice.call(arguments),x=i(p[p.length-1]||n)&&p.pop()||n;if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new Error("pump requires two streams per minimum");var T,d=p.map(function(c,l){var b=l<p.length-1,h=l>0;return u(c,b,h,function(S){T||(T=S),S&&d.forEach(f),!b&&(d.forEach(f),x(T))})});return p.reduce(E)};return En=m,En}var oa=ia();const Vi=Ot(oa);function hr(){}const Gi="SYN",Sn="ACK",Yi="BRK";class Ji extends Ir.Duplex{constructor(e){let{name:t,target:n,targetWindow:o=window,targetOrigin:i="*"}=e;if(super({objectMode:!0}),he(this,"_init",void 0),he(this,"_haveSyn",void 0),he(this,"_name",void 0),he(this,"_target",void 0),he(this,"_targetWindow",void 0),he(this,"_targetOrigin",void 0),he(this,"_onMessage",void 0),he(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=o,this._targetOrigin=i,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Yi,null,hr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(Gi,null,hr),this.cork()}_onData(e){if(!this._init)e===Gi?(this._haveSyn=!0,this._write(Sn,null,hr)):e===Sn&&(this._init=!0,this._haveSyn||this._write(Sn,null,hr),this.uncork());else if(e===Yi)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const sa={rpc:{internal:-32603}},Zi={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Qi=sa.rpc.internal,aa="Unspecified error message. This is a bug, please report it.";function Uo(r){return Number.isInteger(r)}function Xi(r){return typeof r=="string"&&r.length>0}function eo(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function Wo(r){const e=r;return!(!e||!Uo(e.code)||!Xi(e.message)||e.stack&&!Xi(e.stack))}function la(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aa;if(Uo(r)){const t=r.toString();if(Object.hasOwn(Zi,t))return Zi[t].message}return e}const ua={code:Qi,message:la(Qi)};function Pn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function to(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return Pn(n)&&(e[t]=n),e},{})}function fa(r){return Array.isArray(r)?r.map(e=>Pn(e)?e:eo(e)?to(e):null):eo(r)?to(r):Pn(r)?r:null}function ca(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(Wo(r))return r;const t=fa(r);return We(We({},e),{},{data:{cause:t}})}function ro(r){let{fallbackError:e=ua,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Wo(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=ca(r,e);return t||delete n.stack,n}function no(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function da(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class Tr extends $s.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(t){let u;if(i.length>0&&([u]=i),u instanceof Error)throw u;const f=new Error(`Unhandled error.${u?` (${u.message})`:""}`);throw f.context=u,f}const s=n[e];if(s===void 0)return!1;if(typeof s=="function")no(s,this,i);else{const u=s.length,f=da(s);for(let E=0;E<u;E+=1)no(f[E],this,i)}return!0}}class qt extends Error{constructor(e){let{code:t,message:n,data:o}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),he(this,"code",void 0),he(this,"data",void 0),this.code=t,o!==void 0&&(this.data=o)}toString(){return Xs({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Mn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,o)=>{n||o.error?e(n||o.error):!t||Array.isArray(o)?r(o):r(o.result)}};function ha(){const r={};function e(){return!1}const t=new Tr;function n(u){const f=r[u.id];if(!f)throw new Error(`StreamMiddleware - Unknown response id "${u.id}"`);delete r[u.id],Object.assign(f.res,u),setTimeout(f.end)}function o(u){t.emit("notification",u)}function i(u,f,E){let m;try{!u.id?o(u):n(u)}catch(p){m=p}E(m)}const a=new Ir.Duplex({objectMode:!0,read:e,write:i});return{events:t,middleware:(u,f,E,m)=>{a.push(u),r[u.id]={req:u,res:f,next:E,end:m}},stream:a}}function ga(){return(r,e,t,n)=>{const o=r.id,i=Math.random().toString(36).slice(2);r.id=i,e.id=i,t(a=>{r.id=o,e.id=o,a()})}}class rt extends Tr{constructor(){super(),he(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const o=[];let i=null,a=!1;for(const s of n)if([i,a]=await rt._runMiddleware(e,t,s,o),a)break;return[i,a,o.reverse()]}static _runMiddleware(e,t,n,o){return new Promise(i=>{const a=u=>{const f=u||t.error;f&&(typeof f=="object"&&Object.keys(f).includes("stack")===!1&&(f.stack="Stack trace is not available."),t.error=ro(f,{shouldIncludeStack:!0,fallbackError:{message:f?.message||f?.toString(),code:f?.code||-32603,stack:f?.stack||"Stack trace is not available.",data:f?.data||f?.message||f?.toString()}})),i([f,!0])},s=u=>{t.error?a(t.error):(u&&(typeof u!="function"&&a(new qt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(u)),i([null,!1]))};try{n(e,t,s,a)}catch(u){a(u)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,o)=>{t(i=>i?o(i):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new qt({code:-32603,message:"Response has no error or result for request"});if(!n)throw new qt({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,o)=>{try{const[i,a,s]=await rt._runAllMiddleware(e,t,this._middleware);return a?(await rt._runReturnHandlers(s),o(i)):n(async u=>{try{await rt._runReturnHandlers(s)}catch(f){return u(f)}return u()})}catch(i){return o(i)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(o,i)=>{o&&i===void 0?n(o):t(i)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const x=new qt({code:-32603,message:"request must be plain object"});return t(x,{id:void 0,jsonrpc:"2.0",error:x})}if(typeof e.method!="string"){const x=new qt({code:-32603,message:"method must be string"});return t(x,{id:e.id,jsonrpc:"2.0",error:x})}const n=We({},e),o={id:n.id,jsonrpc:n.jsonrpc};let i=null;try{await this._processRequest(n,o)}catch(x){i=x}if(i&&(delete o.result,!o.error)){var a,s,u,f,E,m,p;typeof i=="object"&&Object.keys(i).includes("stack")===!1&&(i.stack="Stack trace is not available."),o.error=ro(i,{shouldIncludeStack:!0,fallbackError:{message:((a=i)===null||a===void 0?void 0:a.message)||((s=i)===null||s===void 0?void 0:s.toString()),code:((u=i)===null||u===void 0?void 0:u.code)||-32603,stack:((f=i)===null||f===void 0?void 0:f.stack)||"Stack trace is not available.",data:((E=i)===null||E===void 0?void 0:E.data)||((m=i)===null||m===void 0?void 0:m.message)||((p=i)===null||p===void 0?void 0:p.toString())}})}return t(i,o)}async _processRequest(e,t){const[n,o,i]=await rt._runAllMiddleware(e,t,this._middleware);if(rt._checkForCompletion(e,t,o),await rt._runReturnHandlers(i),n)throw n}}class pa extends Ir.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),he(this,"_parent",void 0),he(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const io=Symbol("IGNORE_SUBSTREAM");class ba extends Ir.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(We(We({},e),{},{objectMode:!0})),he(this,"_substreams",void 0),he(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new pa({parent:this,name:e});return this._substreams[e]=t,wa(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=io}_read(){}_write(e,t,n){const{name:o,data:i}=e;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const a=this._substreams[o];return a?(a!==io&&a.push(i),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n())}}function wa(r,e){const t=na(e);zi(r,{readable:!1},t),zi(r,{writable:!1},t)}var Wt={exports:{}};Wt.exports;var oo;function ya(){return oo||(oo=1,(function(r,e){var t={},n=200,o="__lodash_hash_undefined__",i=800,a=16,s=9007199254740991,u="[object Arguments]",f="[object Array]",E="[object AsyncFunction]",m="[object Boolean]",p="[object Date]",x="[object Error]",T="[object Function]",d="[object GeneratorFunction]",c="[object Map]",l="[object Number]",b="[object Null]",h="[object Object]",S="[object Proxy]",v="[object RegExp]",P="[object Set]",B="[object String]",M="[object Undefined]",oe="[object WeakMap]",C="[object ArrayBuffer]",R="[object DataView]",U="[object Float32Array]",L="[object Float64Array]",X="[object Int8Array]",D="[object Int16Array]",z="[object Int32Array]",se="[object Uint8Array]",j="[object Uint8ClampedArray]",J="[object Uint16Array]",_="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,G={};G[U]=G[L]=G[X]=G[D]=G[z]=G[se]=G[j]=G[J]=G[_]=!0,G[u]=G[f]=G[C]=G[m]=G[R]=G[p]=G[x]=G[T]=G[c]=G[l]=G[h]=G[v]=G[P]=G[B]=G[oe]=!1;var le=typeof t=="object"&&t&&t.Object===Object&&t,ge=typeof self=="object"&&self&&self.Object===Object&&self,ce=le||ge||Function("return this")(),F=e&&!e.nodeType&&e,H=F&&!0&&r&&!r.nodeType&&r,ie=H&&H.exports===F,de=ie&&le.process,ae=(function(){try{var w=H&&H.require&&H.require("util").types;return w||de&&de.binding&&de.binding("util")}catch{}})(),A=ae&&ae.isTypedArray;function N(w,O,k){switch(k.length){case 0:return w.call(O);case 1:return w.call(O,k[0]);case 2:return w.call(O,k[0],k[1]);case 3:return w.call(O,k[0],k[1],k[2])}return w.apply(O,k)}function q(w,O){for(var k=-1,fe=Array(w);++k<w;)fe[k]=O(k);return fe}function ee(w){return function(O){return w(O)}}function re(w,O){return w?.[O]}function te(w,O){return function(k){return w(O(k))}}var I=Array.prototype,V=Function.prototype,Z=Object.prototype,K=ce["__core-js_shared__"],pe=V.toString,Ae=Z.hasOwnProperty,we=(function(){var w=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Ce=Z.toString,Te=pe.call(Object),De=RegExp("^"+pe.call(Ae).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=ie?ce.Buffer:void 0,dt=ce.Symbol,Le=ce.Uint8Array;je&&je.allocUnsafe;var Zt=te(Object.getPrototypeOf,Object),Qt=Object.create,Xt=Z.propertyIsEnumerable,Pr=I.splice,Ye=dt?dt.toStringTag:void 0,At=(function(){try{var w=qr(Object,"defineProperty");return w({},"",{}),w}catch{}})(),er=je?je.isBuffer:void 0,Lt=Math.max,Mr=Date.now,Nt=qr(ce,"Map"),Je=qr(Object,"create"),Br=(function(){function w(){}return function(O){if(!gt(O))return{};if(Qt)return Qt(O);w.prototype=O;var k=new w;return w.prototype=void 0,k}})();function Ze(w){var O=-1,k=w==null?0:w.length;for(this.clear();++O<k;){var fe=w[O];this.set(fe[0],fe[1])}}function Pt(){this.__data__=Je?Je(null):{},this.size=0}function tr(w){var O=this.has(w)&&delete this.__data__[w];return this.size-=O?1:0,O}function g(w){var O=this.__data__;if(Je){var k=O[w];return k===o?void 0:k}return Ae.call(O,w)?O[w]:void 0}function y(w){var O=this.__data__;return Je?O[w]!==void 0:Ae.call(O,w)}function ne(w,O){var k=this.__data__;return this.size+=this.has(w)?0:1,k[w]=Je&&O===void 0?o:O,this}Ze.prototype.clear=Pt,Ze.prototype.delete=tr,Ze.prototype.get=g,Ze.prototype.has=y,Ze.prototype.set=ne;function Y(w){var O=-1,k=w==null?0:w.length;for(this.clear();++O<k;){var fe=w[O];this.set(fe[0],fe[1])}}function ue(){this.__data__=[],this.size=0}function xe(w){var O=this.__data__,k=or(O,w);if(k<0)return!1;var fe=O.length-1;return k==fe?O.pop():Pr.call(O,k,1),--this.size,!0}function Pe(w){var O=this.__data__,k=or(O,w);return k<0?void 0:O[k][1]}function rr(w){return or(this.__data__,w)>-1}function Qe(w,O){var k=this.__data__,fe=or(k,w);return fe<0?(++this.size,k.push([w,O])):k[fe][1]=O,this}Y.prototype.clear=ue,Y.prototype.delete=xe,Y.prototype.get=Pe,Y.prototype.has=rr,Y.prototype.set=Qe;function Xe(w){var O=-1,k=w==null?0:w.length;for(this.clear();++O<k;){var fe=w[O];this.set(fe[0],fe[1])}}function Dr(){this.size=0,this.__data__={hash:new Ze,map:new(Nt||Y),string:new Ze}}function nr(w){var O=ar(this,w).delete(w);return this.size-=O?1:0,O}function ir(w){return ar(this,w).get(w)}function Mt(w){return ar(this,w).has(w)}function Bt(w,O){var k=ar(this,w),fe=k.size;return k.set(w,O),this.size+=k.size==fe?0:1,this}Xe.prototype.clear=Dr,Xe.prototype.delete=nr,Xe.prototype.get=ir,Xe.prototype.has=Mt,Xe.prototype.set=Bt;function Ke(w){var O=this.__data__=new Y(w);this.size=O.size}function ht(){this.__data__=new Y,this.size=0}function et(w){var O=this.__data__,k=O.delete(w);return this.size=O.size,k}function Fe(w){return this.__data__.get(w)}function ss(w){return this.__data__.has(w)}function as(w,O){var k=this.__data__;if(k instanceof Y){var fe=k.__data__;if(!Nt||fe.length<n-1)return fe.push([w,O]),this.size=++k.size,this;k=this.__data__=new Xe(fe)}return k.set(w,O),this.size=k.size,this}Ke.prototype.clear=ht,Ke.prototype.delete=et,Ke.prototype.get=Fe,Ke.prototype.has=ss,Ke.prototype.set=as;function ls(w,O){var k=Fr(w),fe=!k&&Wr(w),be=!k&&!fe&&ii(w),_e=!k&&!fe&&!be&&si(w),Ee=k||fe||be||_e,ye=Ee?q(w.length,String):[],Se=ye.length;for(var $e in w)Ee&&($e=="length"||be&&($e=="offset"||$e=="parent")||_e&&($e=="buffer"||$e=="byteLength"||$e=="byteOffset")||ri($e,Se))||ye.push($e);return ye}function jr(w,O,k){(k!==void 0&&!lr(w[O],k)||k===void 0&&!(O in w))&&kr(w,O,k)}function us(w,O,k){var fe=w[O];(!(Ae.call(w,O)&&lr(fe,k))||k===void 0&&!(O in w))&&kr(w,O,k)}function or(w,O){for(var k=w.length;k--;)if(lr(w[k][0],O))return k;return-1}function kr(w,O,k){O=="__proto__"&&At?At(w,O,{configurable:!0,enumerable:!0,value:k,writable:!0}):w[O]=k}var fs=Ss();function sr(w){return w==null?w===void 0?M:b:Ye&&Ye in Object(w)?As(w):Cs(w)}function ei(w){return Dt(w)&&sr(w)==u}function cs(w){if(!gt(w)||xs(w))return!1;var O=Hr(w)?De:Q;return O.test(Ms(w))}function ds(w){return Dt(w)&&oi(w.length)&&!!G[sr(w)]}function hs(w){if(!gt(w))return Os(w);var O=ni(w),k=[];for(var fe in w)fe=="constructor"&&(O||!Ae.call(w,fe))||k.push(fe);return k}function ti(w,O,k,fe,be){w!==O&&fs(O,function(_e,Ee){if(be||(be=new Ke),gt(_e))gs(w,O,Ee,k,ti,fe,be);else{var ye=fe?fe(Ur(w,Ee),_e,Ee+"",w,O,be):void 0;ye===void 0&&(ye=_e),jr(w,Ee,ye)}},ai)}function gs(w,O,k,fe,be,_e,Ee){var ye=Ur(w,k),Se=Ur(O,k),$e=Ee.get(Se);if($e){jr(w,k,$e);return}var ke=_e?_e(ye,Se,k+"",w,O,Ee):void 0,jt=ke===void 0;if(jt){var zr=Fr(Se),Kr=!zr&&ii(Se),ui=!zr&&!Kr&&si(Se);ke=Se,zr||Kr||ui?Fr(ye)?ke=ye:Bs(ye)?ke=ms(ye):Kr?(jt=!1,ke=ws(Se)):ui?(jt=!1,ke=_s(Se)):ke=[]:Ds(Se)||Wr(Se)?(ke=ye,Wr(ye)?ke=js(ye):(!gt(ye)||Hr(ye))&&(ke=Rs(Se))):jt=!1}jt&&(Ee.set(Se,ke),be(ke,Se,fe,_e,Ee),Ee.delete(Se)),jr(w,k,ke)}function ps(w,O){return Ns(Ls(w,O,li),w+"")}var bs=At?function(w,O){return At(w,"toString",{configurable:!0,enumerable:!1,value:qs(O),writable:!0})}:li;function ws(w,O){return w.slice()}function ys(w){var O=new w.constructor(w.byteLength);return new Le(O).set(new Le(w)),O}function _s(w,O){var k=ys(w.buffer);return new w.constructor(k,w.byteOffset,w.length)}function ms(w,O){var k=-1,fe=w.length;for(O||(O=Array(fe));++k<fe;)O[k]=w[k];return O}function vs(w,O,k,fe){var be=!k;k||(k={});for(var _e=-1,Ee=O.length;++_e<Ee;){var ye=O[_e],Se=void 0;Se===void 0&&(Se=w[ye]),be?kr(k,ye,Se):us(k,ye,Se)}return k}function Es(w){return ps(function(O,k){var fe=-1,be=k.length,_e=be>1?k[be-1]:void 0,Ee=be>2?k[2]:void 0;for(_e=w.length>3&&typeof _e=="function"?(be--,_e):void 0,Ee&&Is(k[0],k[1],Ee)&&(_e=be<3?void 0:_e,be=1),O=Object(O);++fe<be;){var ye=k[fe];ye&&w(O,ye,fe,_e)}return O})}function Ss(w){return function(O,k,fe){for(var be=-1,_e=Object(O),Ee=fe(O),ye=Ee.length;ye--;){var Se=Ee[++be];if(k(_e[Se],Se,_e)===!1)break}return O}}function ar(w,O){var k=w.__data__;return Ts(O)?k[typeof O=="string"?"string":"hash"]:k.map}function qr(w,O){var k=re(w,O);return cs(k)?k:void 0}function As(w){var O=Ae.call(w,Ye),k=w[Ye];try{w[Ye]=void 0;var fe=!0}catch{}var be=Ce.call(w);return fe&&(O?w[Ye]=k:delete w[Ye]),be}function Rs(w){return typeof w.constructor=="function"&&!ni(w)?Br(Zt(w)):{}}function ri(w,O){var k=typeof w;return O=O??s,!!O&&(k=="number"||k!="symbol"&&W.test(w))&&w>-1&&w%1==0&&w<O}function Is(w,O,k){if(!gt(k))return!1;var fe=typeof O;return(fe=="number"?$r(k)&&ri(O,k.length):fe=="string"&&O in k)?lr(k[O],w):!1}function Ts(w){var O=typeof w;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?w!=="__proto__":w===null}function xs(w){return!!we&&we in w}function ni(w){var O=w&&w.constructor,k=typeof O=="function"&&O.prototype||Z;return w===k}function Os(w){var O=[];if(w!=null)for(var k in Object(w))O.push(k);return O}function Cs(w){return Ce.call(w)}function Ls(w,O,k){return O=Lt(O===void 0?w.length-1:O,0),function(){for(var fe=arguments,be=-1,_e=Lt(fe.length-O,0),Ee=Array(_e);++be<_e;)Ee[be]=fe[O+be];be=-1;for(var ye=Array(O+1);++be<O;)ye[be]=fe[be];return ye[O]=k(Ee),N(w,this,ye)}}function Ur(w,O){if(!(O==="constructor"&&typeof w[O]=="function")&&O!="__proto__")return w[O]}var Ns=Ps(bs);function Ps(w){var O=0,k=0;return function(){var fe=Mr(),be=a-(fe-k);if(k=fe,be>0){if(++O>=i)return arguments[0]}else O=0;return w.apply(void 0,arguments)}}function Ms(w){if(w!=null){try{return pe.call(w)}catch{}try{return w+""}catch{}}return""}function lr(w,O){return w===O||w!==w&&O!==O}var Wr=ei((function(){return arguments})())?ei:function(w){return Dt(w)&&Ae.call(w,"callee")&&!Xt.call(w,"callee")},Fr=Array.isArray;function $r(w){return w!=null&&oi(w.length)&&!Hr(w)}function Bs(w){return Dt(w)&&$r(w)}var ii=er||Us;function Hr(w){if(!gt(w))return!1;var O=sr(w);return O==T||O==d||O==E||O==S}function oi(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=s}function gt(w){var O=typeof w;return w!=null&&(O=="object"||O=="function")}function Dt(w){return w!=null&&typeof w=="object"}function Ds(w){if(!Dt(w)||sr(w)!=h)return!1;var O=Zt(w);if(O===null)return!0;var k=Ae.call(O,"constructor")&&O.constructor;return typeof k=="function"&&k instanceof k&&pe.call(k)==Te}var si=A?ee(A):ds;function js(w){return vs(w,ai(w))}function ai(w){return $r(w)?ls(w):hs(w)}var ks=Es(function(w,O,k){ti(w,O,k)});function qs(w){return function(){return w}}function li(w){return w}function Us(){return!1}r.exports=ks})(Wt,Wt.exports)),Wt.exports}ya();var _r={exports:{}},_a=_r.exports,so;function ma(){return so||(so=1,(function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(_a,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],i={},a=null;function s(d,c){var l=d[c];if(typeof l.bind=="function")return l.bind(d);try{return Function.prototype.bind.call(l,d)}catch{return function(){return Function.prototype.apply.apply(l,[d,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(d){return d==="debug"&&(d="log"),typeof console===t?!1:d==="trace"&&n?u:console[d]!==void 0?s(console,d):console.log!==void 0?s(console,"log"):e}function E(){for(var d=this.getLevel(),c=0;c<o.length;c++){var l=o[c];this[l]=c<d?e:this.methodFactory(l,d,this.name)}if(this.log=this.debug,typeof console===t&&d<this.levels.SILENT)return"No console available for logging"}function m(d){return function(){typeof console!==t&&(E.call(this),this[d].apply(this,arguments))}}function p(d,c,l){return f(d)||m.apply(this,arguments)}function x(d,c){var l=this,b,h,S,v="loglevel";typeof d=="string"?v+=":"+d:typeof d=="symbol"&&(v=void 0);function P(R){var U=(o[R]||"silent").toUpperCase();if(!(typeof window===t||!v)){try{window.localStorage[v]=U;return}catch{}try{window.document.cookie=encodeURIComponent(v)+"="+U+";"}catch{}}}function B(){var R;if(!(typeof window===t||!v)){try{R=window.localStorage[v]}catch{}if(typeof R===t)try{var U=window.document.cookie,L=encodeURIComponent(v),X=U.indexOf(L+"=");X!==-1&&(R=/^([^;]+)/.exec(U.slice(X+L.length+1))[1])}catch{}return l.levels[R]===void 0&&(R=void 0),R}}function M(){if(!(typeof window===t||!v)){try{window.localStorage.removeItem(v)}catch{}try{window.document.cookie=encodeURIComponent(v)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function oe(R){var U=R;if(typeof U=="string"&&l.levels[U.toUpperCase()]!==void 0&&(U=l.levels[U.toUpperCase()]),typeof U=="number"&&U>=0&&U<=l.levels.SILENT)return U;throw new TypeError("log.setLevel() called with invalid level: "+R)}l.name=d,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=c||p,l.getLevel=function(){return S??h??b},l.setLevel=function(R,U){return S=oe(R),U!==!1&&P(S),E.call(l)},l.setDefaultLevel=function(R){h=oe(R),B()||l.setLevel(R,!1)},l.resetLevel=function(){S=null,M(),E.call(l)},l.enableAll=function(R){l.setLevel(l.levels.TRACE,R)},l.disableAll=function(R){l.setLevel(l.levels.SILENT,R)},l.rebuild=function(){if(a!==l&&(b=oe(a.getLevel())),E.call(l),a===l)for(var R in i)i[R].rebuild()},b=oe(a?a.getLevel():"WARN");var C=B();C!=null&&(S=oe(C)),E.call(l)}a=new x,a.getLogger=function(c){if(typeof c!="symbol"&&typeof c!="string"||c==="")throw new TypeError("You must supply a name when creating a logger.");var l=i[c];return l||(l=i[c]=new x(c,a.methodFactory)),l};var T=typeof window!==t?window.log:void 0;return a.noConflict=function(){return typeof window!==t&&window.log===a&&(window.log=T),a},a.getLoggers=function(){return i},a.default=a,a})})(_r)),_r.exports}var Fo=ma();const vr=Ot(Fo),va=vr.getLogger("http-helpers");va.setLevel(Fo.levels.INFO);function ao(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Ea(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function xr(r,...e){if(!Ea(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Sa(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ao(r.outputLen),ao(r.blockLen)}function Er(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Aa(r,e){xr(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const An=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rn=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Ve=(r,e)=>r<<32-e|r>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Ra(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function zn(r){return typeof r=="string"&&(r=Ra(r)),xr(r),r}function Ia(...r){let e=0;for(let n=0;n<r.length;n++){const o=r[n];xr(o),e+=o.length}const t=new Uint8Array(e);for(let n=0,o=0;n<r.length;n++){const i=r[n];t.set(i,o),o+=i.length}return t}class $o{clone(){return this._cloneInto()}}function Ta(r){const e=n=>r().update(zn(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function xa(r=32){if(An&&typeof An.getRandomValues=="function")return An.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Oa(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const o=BigInt(32),i=BigInt(4294967295),a=Number(t>>o&i),s=Number(t&i),u=n?4:0,f=n?0:4;r.setUint32(e+u,a,n),r.setUint32(e+f,s,n)}const Ca=(r,e,t)=>r&e^~r&t,La=(r,e,t)=>r&e^r&t^e&t;class Na extends $o{constructor(e,t,n,o){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Rn(this.buffer)}update(e){Er(this);const{view:t,buffer:n,blockLen:o}=this;e=zn(e);const i=e.length;for(let a=0;a<i;){const s=Math.min(o-this.pos,i-a);if(s===o){const u=Rn(e);for(;o<=i-a;a+=o)this.process(u,a);continue}n.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Er(this),Aa(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:o,isLE:i}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let m=a;m<o;m++)t[m]=0;Oa(n,o-8,BigInt(this.length*8),i),this.process(n,0);const s=Rn(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,E=this.get();if(f>E.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<f;m++)s.setUint32(4*m,E[m],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:o,finished:i,destroyed:a,pos:s}=this;return e.length=o,e.pos=s,e.finished=i,e.destroyed=a,o%t&&e.buffer.set(n),e}}const Pa=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),at=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lt=new Uint32Array(64);class Ma extends Na{constructor(){super(64,32,8,!1),this.A=at[0]|0,this.B=at[1]|0,this.C=at[2]|0,this.D=at[3]|0,this.E=at[4]|0,this.F=at[5]|0,this.G=at[6]|0,this.H=at[7]|0}get(){const{A:e,B:t,C:n,D:o,E:i,F:a,G:s,H:u}=this;return[e,t,n,o,i,a,s,u]}set(e,t,n,o,i,a,s,u){this.A=e|0,this.B=t|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=s|0,this.H=u|0}process(e,t){for(let m=0;m<16;m++,t+=4)lt[m]=e.getUint32(t,!1);for(let m=16;m<64;m++){const p=lt[m-15],x=lt[m-2],T=Ve(p,7)^Ve(p,18)^p>>>3,d=Ve(x,17)^Ve(x,19)^x>>>10;lt[m]=d+lt[m-7]+T+lt[m-16]|0}let{A:n,B:o,C:i,D:a,E:s,F:u,G:f,H:E}=this;for(let m=0;m<64;m++){const p=Ve(s,6)^Ve(s,11)^Ve(s,25),x=E+p+Ca(s,u,f)+Pa[m]+lt[m]|0,d=(Ve(n,2)^Ve(n,13)^Ve(n,22))+La(n,o,i)|0;E=f,f=u,u=s,s=a+x|0,a=i,i=o,o=n,n=x+d|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,u=u+this.F|0,f=f+this.G|0,E=E+this.H|0,this.set(n,o,i,a,s,u,f,E)}roundClean(){lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ba=Ta(()=>new Ma);class Ho extends $o{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Sa(e);const n=zn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Er(this),this.iHash.update(e),this}digestInto(e){Er(this),xr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:o,destroyed:i,blockLen:a,outputLen:s}=this;return e=e,e.finished=o,e.destroyed=i,e.blockLen=a,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zo=(r,e,t)=>new Ho(r,e).update(t).digest();zo.create=(r,e)=>new Ho(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ko=BigInt(0),Or=BigInt(1),Da=BigInt(2);function mt(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Gt(r){if(!mt(r))throw new Error("Uint8Array expected")}const ja=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function It(r){Gt(r);let e="";for(let t=0;t<r.length;t++)e+=ja[r[t]];return e}function Vo(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function Kn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const tt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function lo(r){if(r>=tt._0&&r<=tt._9)return r-tt._0;if(r>=tt._A&&r<=tt._F)return r-(tt._A-10);if(r>=tt._a&&r<=tt._f)return r-(tt._a-10)}function Tt(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let o=0,i=0;o<t;o++,i+=2){const a=lo(r.charCodeAt(i)),s=lo(r.charCodeAt(i+1));if(a===void 0||s===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[o]=a*16+s}return n}function _t(r){return Kn(It(r))}function Vn(r){return Gt(r),Kn(It(Uint8Array.from(r).reverse()))}function xt(r,e){return Tt(r.toString(16).padStart(e*2,"0"))}function Gn(r,e){return xt(r,e).reverse()}function ka(r){return Tt(Vo(r))}function He(r,e,t){let n;if(typeof e=="string")try{n=Tt(e)}catch(i){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${i}`)}else if(mt(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const o=n.length;if(typeof t=="number"&&o!==t)throw new Error(`${r} expected ${t} bytes, got ${o}`);return n}function zt(...r){let e=0;for(let n=0;n<r.length;n++){const o=r[n];Gt(o),e+=o.length}const t=new Uint8Array(e);for(let n=0,o=0;n<r.length;n++){const i=r[n];t.set(i,o),o+=i.length}return t}function qa(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Ua(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Wa(r){let e;for(e=0;r>Ko;r>>=Or,e+=1);return e}function Fa(r,e){return r>>BigInt(e)&Or}function $a(r,e,t){return r|(t?Or:Ko)<<BigInt(e)}const Yn=r=>(Da<<BigInt(r-1))-Or,In=r=>new Uint8Array(r),uo=r=>Uint8Array.from(r);function Go(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=In(r),o=In(r),i=0;const a=()=>{n.fill(1),o.fill(0),i=0},s=(...m)=>t(o,n,...m),u=(m=In())=>{o=s(uo([0]),m),n=s(),m.length!==0&&(o=s(uo([1]),m),n=s())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const p=[];for(;m<e;){n=s();const x=n.slice();p.push(x),m+=n.length}return zt(...p)};return(m,p)=>{a(),u(m);let x;for(;!(x=p(f()));)u();return a(),x}}const Ha={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||mt(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Yt(r,e,t={}){const n=(o,i,a)=>{const s=Ha[i];if(typeof s!="function")throw new Error(`Invalid validator "${i}", expected function`);const u=r[o];if(!(a&&u===void 0)&&!s(u,r))throw new Error(`Invalid param ${String(o)}=${u} (${typeof u}), expected ${i}`)};for(const[o,i]of Object.entries(e))n(o,i,!1);for(const[o,i]of Object.entries(t))n(o,i,!0);return r}const za=Object.freeze(Object.defineProperty({__proto__:null,abytes:Gt,bitGet:Fa,bitLen:Wa,bitMask:Yn,bitSet:$a,bytesToHex:It,bytesToNumberBE:_t,bytesToNumberLE:Vn,concatBytes:zt,createHmacDrbg:Go,ensureBytes:He,equalBytes:qa,hexToBytes:Tt,hexToNumber:Kn,isBytes:mt,numberToBytesBE:xt,numberToBytesLE:Gn,numberToHexUnpadded:Vo,numberToVarBytesBE:ka,utf8ToBytes:Ua,validateObject:Yt},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oe=BigInt(0),Ie=BigInt(1),wt=BigInt(2),Ka=BigInt(3),Bn=BigInt(4),fo=BigInt(5),co=BigInt(8);BigInt(9);BigInt(16);function Me(r,e){const t=r%e;return t>=Oe?t:e+t}function Va(r,e,t){if(t<=Oe||e<Oe)throw new Error("Expected power/modulo > 0");if(t===Ie)return Oe;let n=Ie;for(;e>Oe;)e&Ie&&(n=n*r%t),r=r*r%t,e>>=Ie;return n}function qe(r,e,t){let n=r;for(;e-- >Oe;)n*=n,n%=t;return n}function Dn(r,e){if(r===Oe||e<=Oe)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Me(r,e),n=e,o=Oe,i=Ie;for(;t!==Oe;){const s=n/t,u=n%t,f=o-i*s;n=t,t=u,o=i,i=f}if(n!==Ie)throw new Error("invert: does not exist");return Me(o,e)}function Ga(r){const e=(r-Ie)/wt;let t,n,o;for(t=r-Ie,n=0;t%wt===Oe;t/=wt,n++);for(o=wt;o<r&&Va(o,e,r)!==r-Ie;o++);if(n===1){const a=(r+Ie)/Bn;return function(u,f){const E=u.pow(f,a);if(!u.eql(u.sqr(E),f))throw new Error("Cannot find square root");return E}}const i=(t+Ie)/wt;return function(s,u){if(s.pow(u,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let f=n,E=s.pow(s.mul(s.ONE,o),t),m=s.pow(u,i),p=s.pow(u,t);for(;!s.eql(p,s.ONE);){if(s.eql(p,s.ZERO))return s.ZERO;let x=1;for(let d=s.sqr(p);x<f&&!s.eql(d,s.ONE);x++)d=s.sqr(d);const T=s.pow(E,Ie<<BigInt(f-x-1));E=s.sqr(T),m=s.mul(m,T),p=s.mul(p,E),f=x}return m}}function Ya(r){if(r%Bn===Ka){const e=(r+Ie)/Bn;return function(n,o){const i=n.pow(o,e);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(r%co===fo){const e=(r-fo)/co;return function(n,o){const i=n.mul(o,wt),a=n.pow(i,e),s=n.mul(o,a),u=n.mul(n.mul(s,wt),a),f=n.mul(s,n.sub(u,n.ONE));if(!n.eql(n.sqr(f),o))throw new Error("Cannot find square root");return f}}return Ga(r)}const Ja=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Za(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Ja.reduce((n,o)=>(n[o]="function",n),e);return Yt(r,t)}function Qa(r,e,t){if(t<Oe)throw new Error("Expected power > 0");if(t===Oe)return r.ONE;if(t===Ie)return e;let n=r.ONE,o=e;for(;t>Oe;)t&Ie&&(n=r.mul(n,o)),o=r.sqr(o),t>>=Ie;return n}function Xa(r,e){const t=new Array(e.length),n=e.reduce((i,a,s)=>r.is0(a)?i:(t[s]=i,r.mul(i,a)),r.ONE),o=r.inv(n);return e.reduceRight((i,a,s)=>r.is0(a)?i:(t[s]=r.mul(i,t[s]),r.mul(i,a)),o),t}function Yo(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function el(r,e,t=!1,n={}){if(r<=Oe)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:o,nByteLength:i}=Yo(r,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Ya(r),s=Object.freeze({ORDER:r,BITS:o,BYTES:i,MASK:Yn(o),ZERO:Oe,ONE:Ie,create:u=>Me(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Oe<=u&&u<r},is0:u=>u===Oe,isOdd:u=>(u&Ie)===Ie,neg:u=>Me(-u,r),eql:(u,f)=>u===f,sqr:u=>Me(u*u,r),add:(u,f)=>Me(u+f,r),sub:(u,f)=>Me(u-f,r),mul:(u,f)=>Me(u*f,r),pow:(u,f)=>Qa(s,u,f),div:(u,f)=>Me(u*Dn(f,r),r),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>Dn(u,r),sqrt:n.sqrt||(u=>a(s,u)),invertBatch:u=>Xa(s,u),cmov:(u,f,E)=>E?f:u,toBytes:u=>t?Gn(u,i):xt(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return t?Vn(u):_t(u)}});return Object.freeze(s)}function Jo(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Zo(r){const e=Jo(r);return e+Math.ceil(e/2)}function tl(r,e,t=!1){const n=r.length,o=Jo(e),i=Zo(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const a=t?_t(r):Vn(r),s=Me(a,e-Ie)+Ie;return t?Gn(s,o):xt(s,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rl=BigInt(0),Tn=BigInt(1);function nl(r,e){const t=(o,i)=>{const a=i.negate();return o?a:i},n=o=>{const i=Math.ceil(e/o)+1,a=2**(o-1);return{windows:i,windowSize:a}};return{constTimeNegate:t,unsafeLadder(o,i){let a=r.ZERO,s=o;for(;i>rl;)i&Tn&&(a=a.add(s)),s=s.double(),i>>=Tn;return a},precomputeWindow(o,i){const{windows:a,windowSize:s}=n(i),u=[];let f=o,E=f;for(let m=0;m<a;m++){E=f,u.push(E);for(let p=1;p<s;p++)E=E.add(f),u.push(E);f=E.double()}return u},wNAF(o,i,a){const{windows:s,windowSize:u}=n(o);let f=r.ZERO,E=r.BASE;const m=BigInt(2**o-1),p=2**o,x=BigInt(o);for(let T=0;T<s;T++){const d=T*u;let c=Number(a&m);a>>=x,c>u&&(c-=p,a+=Tn);const l=d,b=d+Math.abs(c)-1,h=T%2!==0,S=c<0;c===0?E=E.add(t(h,i[l])):f=f.add(t(S,i[b]))}return{p:f,f:E}},wNAFCached(o,i,a,s){const u=o._WINDOW_SIZE||1;let f=i.get(o);return f||(f=this.precomputeWindow(o,u),u!==1&&i.set(o,s(f))),this.wNAF(u,f,a)}}}function Qo(r){return Za(r.Fp),Yt(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Yo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function il(r){const e=Qo(r);Yt(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:o}=e;if(t){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ol,hexToBytes:sl}=za,yt={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=yt;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ol(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=yt,t=typeof r=="string"?sl(r):r;Gt(t);let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:o,l:i}=yt._parseInt(t.subarray(2)),{d:a,l:s}=yt._parseInt(i);if(s.length)throw new e("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(r){const e=f=>Number.parseInt(f[0],16)&8?"00"+f:f,t=f=>{const E=f.toString(16);return E.length&1?`0${E}`:E},n=e(t(r.s)),o=e(t(r.r)),i=n.length/2,a=o.length/2,s=t(i),u=t(a);return`30${t(a+i+4)}02${u}${o}02${s}${n}`}},nt=BigInt(0),Ue=BigInt(1);BigInt(2);const ho=BigInt(3);BigInt(4);function al(r){const e=il(r),{Fp:t}=e,n=e.toBytes||((T,d,c)=>{const l=d.toAffine();return zt(Uint8Array.from([4]),t.toBytes(l.x),t.toBytes(l.y))}),o=e.fromBytes||(T=>{const d=T.subarray(1),c=t.fromBytes(d.subarray(0,t.BYTES)),l=t.fromBytes(d.subarray(t.BYTES,2*t.BYTES));return{x:c,y:l}});function i(T){const{a:d,b:c}=e,l=t.sqr(T),b=t.mul(l,T);return t.add(t.add(b,t.mul(T,d)),c)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function a(T){return typeof T=="bigint"&&nt<T&&T<e.n}function s(T){if(!a(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(T){const{allowedPrivateKeyLengths:d,nByteLength:c,wrapPrivateKey:l,n:b}=e;if(d&&typeof T!="bigint"){if(mt(T)&&(T=It(T)),typeof T!="string"||!d.includes(T.length))throw new Error("Invalid key");T=T.padStart(c*2,"0")}let h;try{h=typeof T=="bigint"?T:_t(He("private key",T,c))}catch{throw new Error(`private key must be ${c} bytes, hex or bigint, not ${typeof T}`)}return l&&(h=Me(h,b)),s(h),h}const f=new Map;function E(T){if(!(T instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(d,c,l){if(this.px=d,this.py=c,this.pz=l,d==null||!t.isValid(d))throw new Error("x required");if(c==null||!t.isValid(c))throw new Error("y required");if(l==null||!t.isValid(l))throw new Error("z required")}static fromAffine(d){const{x:c,y:l}=d||{};if(!d||!t.isValid(c)||!t.isValid(l))throw new Error("invalid affine point");if(d instanceof m)throw new Error("projective point not allowed");const b=h=>t.eql(h,t.ZERO);return b(c)&&b(l)?m.ZERO:new m(c,l,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){const c=t.invertBatch(d.map(l=>l.pz));return d.map((l,b)=>l.toAffine(c[b])).map(m.fromAffine)}static fromHex(d){const c=m.fromAffine(o(He("pointHex",d)));return c.assertValidity(),c}static fromPrivateKey(d){return m.BASE.multiply(u(d))}_setWindowSize(d){this._WINDOW_SIZE=d,f.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:d,y:c}=this.toAffine();if(!t.isValid(d)||!t.isValid(c))throw new Error("bad point: x or y not FE");const l=t.sqr(c),b=i(d);if(!t.eql(l,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:d}=this.toAffine();if(t.isOdd)return!t.isOdd(d);throw new Error("Field doesn't support isOdd")}equals(d){E(d);const{px:c,py:l,pz:b}=this,{px:h,py:S,pz:v}=d,P=t.eql(t.mul(c,v),t.mul(h,b)),B=t.eql(t.mul(l,v),t.mul(S,b));return P&&B}negate(){return new m(this.px,t.neg(this.py),this.pz)}double(){const{a:d,b:c}=e,l=t.mul(c,ho),{px:b,py:h,pz:S}=this;let v=t.ZERO,P=t.ZERO,B=t.ZERO,M=t.mul(b,b),oe=t.mul(h,h),C=t.mul(S,S),R=t.mul(b,h);return R=t.add(R,R),B=t.mul(b,S),B=t.add(B,B),v=t.mul(d,B),P=t.mul(l,C),P=t.add(v,P),v=t.sub(oe,P),P=t.add(oe,P),P=t.mul(v,P),v=t.mul(R,v),B=t.mul(l,B),C=t.mul(d,C),R=t.sub(M,C),R=t.mul(d,R),R=t.add(R,B),B=t.add(M,M),M=t.add(B,M),M=t.add(M,C),M=t.mul(M,R),P=t.add(P,M),C=t.mul(h,S),C=t.add(C,C),M=t.mul(C,R),v=t.sub(v,M),B=t.mul(C,oe),B=t.add(B,B),B=t.add(B,B),new m(v,P,B)}add(d){E(d);const{px:c,py:l,pz:b}=this,{px:h,py:S,pz:v}=d;let P=t.ZERO,B=t.ZERO,M=t.ZERO;const oe=e.a,C=t.mul(e.b,ho);let R=t.mul(c,h),U=t.mul(l,S),L=t.mul(b,v),X=t.add(c,l),D=t.add(h,S);X=t.mul(X,D),D=t.add(R,U),X=t.sub(X,D),D=t.add(c,b);let z=t.add(h,v);return D=t.mul(D,z),z=t.add(R,L),D=t.sub(D,z),z=t.add(l,b),P=t.add(S,v),z=t.mul(z,P),P=t.add(U,L),z=t.sub(z,P),M=t.mul(oe,D),P=t.mul(C,L),M=t.add(P,M),P=t.sub(U,M),M=t.add(U,M),B=t.mul(P,M),U=t.add(R,R),U=t.add(U,R),L=t.mul(oe,L),D=t.mul(C,D),U=t.add(U,L),L=t.sub(R,L),L=t.mul(oe,L),D=t.add(D,L),R=t.mul(U,D),B=t.add(B,R),R=t.mul(z,D),P=t.mul(X,P),P=t.sub(P,R),R=t.mul(X,U),M=t.mul(z,M),M=t.add(M,R),new m(P,B,M)}subtract(d){return this.add(d.negate())}is0(){return this.equals(m.ZERO)}wNAF(d){return x.wNAFCached(this,f,d,c=>{const l=t.invertBatch(c.map(b=>b.pz));return c.map((b,h)=>b.toAffine(l[h])).map(m.fromAffine)})}multiplyUnsafe(d){const c=m.ZERO;if(d===nt)return c;if(s(d),d===Ue)return this;const{endo:l}=e;if(!l)return x.unsafeLadder(this,d);let{k1neg:b,k1:h,k2neg:S,k2:v}=l.splitScalar(d),P=c,B=c,M=this;for(;h>nt||v>nt;)h&Ue&&(P=P.add(M)),v&Ue&&(B=B.add(M)),M=M.double(),h>>=Ue,v>>=Ue;return b&&(P=P.negate()),S&&(B=B.negate()),B=new m(t.mul(B.px,l.beta),B.py,B.pz),P.add(B)}multiply(d){s(d);let c=d,l,b;const{endo:h}=e;if(h){const{k1neg:S,k1:v,k2neg:P,k2:B}=h.splitScalar(c);let{p:M,f:oe}=this.wNAF(v),{p:C,f:R}=this.wNAF(B);M=x.constTimeNegate(S,M),C=x.constTimeNegate(P,C),C=new m(t.mul(C.px,h.beta),C.py,C.pz),l=M.add(C),b=oe.add(R)}else{const{p:S,f:v}=this.wNAF(c);l=S,b=v}return m.normalizeZ([l,b])[0]}multiplyAndAddUnsafe(d,c,l){const b=m.BASE,h=(v,P)=>P===nt||P===Ue||!v.equals(b)?v.multiplyUnsafe(P):v.multiply(P),S=h(this,c).add(h(d,l));return S.is0()?void 0:S}toAffine(d){const{px:c,py:l,pz:b}=this,h=this.is0();d==null&&(d=h?t.ONE:t.inv(b));const S=t.mul(c,d),v=t.mul(l,d),P=t.mul(b,d);if(h)return{x:t.ZERO,y:t.ZERO};if(!t.eql(P,t.ONE))throw new Error("invZ was invalid");return{x:S,y:v}}isTorsionFree(){const{h:d,isTorsionFree:c}=e;if(d===Ue)return!0;if(c)return c(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:d,clearCofactor:c}=e;return d===Ue?this:c?c(m,this):this.multiplyUnsafe(e.h)}toRawBytes(d=!0){return this.assertValidity(),n(m,this,d)}toHex(d=!0){return It(this.toRawBytes(d))}}m.BASE=new m(e.Gx,e.Gy,t.ONE),m.ZERO=new m(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,x=nl(m,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:a}}function ll(r){const e=Qo(r);return Yt(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ul(r){const e=ll(r),{Fp:t,n}=e,o=t.BYTES+1,i=2*t.BYTES+1;function a(D){return nt<D&&D<t.ORDER}function s(D){return Me(D,n)}function u(D){return Dn(D,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:E,weierstrassEquation:m,isWithinCurveOrder:p}=al({...e,toBytes(D,z,se){const j=z.toAffine(),J=t.toBytes(j.x),_=zt;return se?_(Uint8Array.from([z.hasEvenY()?2:3]),J):_(Uint8Array.from([4]),J,t.toBytes(j.y))},fromBytes(D){const z=D.length,se=D[0],j=D.subarray(1);if(z===o&&(se===2||se===3)){const J=_t(j);if(!a(J))throw new Error("Point is not on curve");const _=m(J);let $;try{$=t.sqrt(_)}catch(G){const le=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+le)}const Q=($&Ue)===Ue;return(se&1)===1!==Q&&($=t.neg($)),{x:J,y:$}}else if(z===i&&se===4){const J=t.fromBytes(j.subarray(0,t.BYTES)),_=t.fromBytes(j.subarray(t.BYTES,2*t.BYTES));return{x:J,y:_}}else throw new Error(`Point of length ${z} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),x=D=>It(xt(D,e.nByteLength));function T(D){const z=n>>Ue;return D>z}function d(D){return T(D)?s(-D):D}const c=(D,z,se)=>_t(D.slice(z,se));class l{constructor(z,se,j){this.r=z,this.s=se,this.recovery=j,this.assertValidity()}static fromCompact(z){const se=e.nByteLength;return z=He("compactSignature",z,se*2),new l(c(z,0,se),c(z,se,2*se))}static fromDER(z){const{r:se,s:j}=yt.toSig(He("DER",z));return new l(se,j)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new l(this.r,this.s,z)}recoverPublicKey(z){const{r:se,s:j,recovery:J}=this,_=B(He("msgHash",z));if(J==null||![0,1,2,3].includes(J))throw new Error("recovery id invalid");const $=J===2||J===3?se+e.n:se;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const Q=(J&1)===0?"02":"03",W=f.fromHex(Q+x($)),G=u($),le=s(-_*G),ge=s(j*G),ce=f.BASE.multiplyAndAddUnsafe(W,le,ge);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new l(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Tt(this.toDERHex())}toDERHex(){return yt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Tt(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}const b={isValidPrivateKey(D){try{return E(D),!0}catch{return!1}},normPrivateKeyToScalar:E,randomPrivateKey:()=>{const D=Zo(e.n);return tl(e.randomBytes(D),e.n)},precompute(D=8,z=f.BASE){return z._setWindowSize(D),z.multiply(BigInt(3)),z}};function h(D,z=!0){return f.fromPrivateKey(D).toRawBytes(z)}function S(D){const z=mt(D),se=typeof D=="string",j=(z||se)&&D.length;return z?j===o||j===i:se?j===2*o||j===2*i:D instanceof f}function v(D,z,se=!0){if(S(D))throw new Error("first arg must be private key");if(!S(z))throw new Error("second arg must be public key");return f.fromHex(z).multiply(E(D)).toRawBytes(se)}const P=e.bits2int||function(D){const z=_t(D),se=D.length*8-e.nBitLength;return se>0?z>>BigInt(se):z},B=e.bits2int_modN||function(D){return s(P(D))},M=Yn(e.nBitLength);function oe(D){if(typeof D!="bigint")throw new Error("bigint expected");if(!(nt<=D&&D<M))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xt(D,e.nByteLength)}function C(D,z,se=R){if(["recovered","canonical"].some(H=>H in se))throw new Error("sign() legacy options not supported");const{hash:j,randomBytes:J}=e;let{lowS:_,prehash:$,extraEntropy:Q}=se;_==null&&(_=!0),D=He("msgHash",D),$&&(D=He("prehashed msgHash",j(D)));const W=B(D),G=E(z),le=[oe(G),oe(W)];if(Q!=null&&Q!==!1){const H=Q===!0?J(t.BYTES):Q;le.push(He("extraEntropy",H))}const ge=zt(...le),ce=W;function F(H){const ie=P(H);if(!p(ie))return;const de=u(ie),ae=f.BASE.multiply(ie).toAffine(),A=s(ae.x);if(A===nt)return;const N=s(de*s(ce+A*G));if(N===nt)return;let q=(ae.x===A?0:2)|Number(ae.y&Ue),ee=N;return _&&T(N)&&(ee=d(N),q^=1),new l(A,ee,q)}return{seed:ge,k2sig:F}}const R={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function L(D,z,se=R){const{seed:j,k2sig:J}=C(D,z,se),_=e;return Go(_.hash.outputLen,_.nByteLength,_.hmac)(j,J)}f.BASE._setWindowSize(8);function X(D,z,se,j=U){const J=D;if(z=He("msgHash",z),se=He("publicKey",se),"strict"in j)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:$}=j;let Q,W;try{if(typeof J=="string"||mt(J))try{Q=l.fromDER(J)}catch(ae){if(!(ae instanceof yt.Err))throw ae;Q=l.fromCompact(J)}else if(typeof J=="object"&&typeof J.r=="bigint"&&typeof J.s=="bigint"){const{r:ae,s:A}=J;Q=new l(ae,A)}else throw new Error("PARSE");W=f.fromHex(se)}catch(ae){if(ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&Q.hasHighS())return!1;$&&(z=e.hash(z));const{r:G,s:le}=Q,ge=B(z),ce=u(le),F=s(ge*ce),H=s(G*ce),ie=f.BASE.multiplyAndAddUnsafe(W,F,H)?.toAffine();return ie?s(ie.x)===G:!1}return{CURVE:e,getPublicKey:h,getSharedSecret:v,sign:L,verify:X,ProjectivePoint:f,Signature:l,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fl(r){return{hash:r,hmac:(e,...t)=>zo(r,e,Ia(...t)),randomBytes:xa}}function cl(r,e){const t=n=>ul({...r,...fl(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),go=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),dl=BigInt(1),jn=BigInt(2),po=(r,e)=>(r+e/jn)/e;function hl(r){const e=Xo,t=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),u=BigInt(88),f=r*r*r%e,E=f*f*r%e,m=qe(E,t,e)*E%e,p=qe(m,t,e)*E%e,x=qe(p,jn,e)*f%e,T=qe(x,o,e)*x%e,d=qe(T,i,e)*T%e,c=qe(d,s,e)*d%e,l=qe(c,u,e)*c%e,b=qe(l,s,e)*d%e,h=qe(b,t,e)*E%e,S=qe(h,a,e)*T%e,v=qe(S,n,e)*f%e,P=qe(v,jn,e);if(!kn.eql(kn.sqr(P),r))throw new Error("Cannot find square root");return P}const kn=el(Xo,void 0,void 0,{sqrt:hl}),Jn=cl({a:BigInt(0),b:BigInt(7),Fp:kn,n:go,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=go,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-dl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,a=BigInt("0x100000000000000000000000000000000"),s=po(i*r,e),u=po(-n*r,e);let f=Me(r-s*t-u*o,e),E=Me(-s*n-u*i,e);const m=f>a,p=E>a;if(m&&(f=e-f),p&&(E=e-E),f>a||E>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:m,k1:f,k2neg:p,k2:E}}}},Ba);BigInt(0);Jn.ProjectivePoint;function gl(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const qn={},Un={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();Un[n]=e,Un[n.toUpperCase()]=e,qn[n]=t,qn[n.toUpperCase()]=t}function pl(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=qn[r[n]]+Un[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const Cr=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return pl(e.length%2===0?e:gl(e))},bl=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},Jt=r=>{const e=bl(r);return Cr(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");Jn.CURVE.n;Jn.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const wl="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Cr(wl);const yl="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Cr(yl);const _l="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Cr(_l);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var bo;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(bo||(bo={}));var wo;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(wo||(wo={}));var yo;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(yo||(yo={}));var _o;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(_o||(_o={}));var vt;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(vt||(vt={}));Jt(vt.Version);Jt(vt.Balance);Jt(vt.Nonce);Jt(vt.CodeHash);Jt(vt.CodeSize);BigInt(256)**BigInt(31);var xn={exports:{}},gr={},pr={},mo;function ml(){if(mo)return pr;mo=1,Object.defineProperty(pr,"__esModule",{value:!0});function r(e){var t=4,n=e.length,o=n%t;if(!o)return e;var i=n,a=t-o,s=n+a,u=ze.Buffer.alloc(s);for(u.write(e);a--;)u.write("=",i++);return u.toString()}return pr.default=r,pr}var vo;function vl(){if(vo)return gr;vo=1,Object.defineProperty(gr,"__esModule",{value:!0});var r=ml();function e(s,u){return u===void 0&&(u="utf8"),ze.Buffer.isBuffer(s)?o(s.toString("base64")):o(ze.Buffer.from(s,u).toString("base64"))}function t(s,u){return u===void 0&&(u="utf8"),ze.Buffer.from(n(s),"base64").toString(u)}function n(s){return s=s.toString(),r.default(s).replace(/\-/g,"+").replace(/_/g,"/")}function o(s){return s.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function i(s){return ze.Buffer.from(n(s),"base64")}var a=e;return a.encode=e,a.decode=t,a.toBase64=n,a.fromBase64=o,a.toBuffer=i,gr.default=a,gr}var Eo;function El(){return Eo||(Eo=1,(function(r){r.exports=vl().default,r.exports.default=r.exports})(xn)),xn.exports}El();const ve={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},ut={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";ve.AQUA+"",ut.SAPPHIRE_MAINNET,ve.CELESTE+"",ut.SAPPHIRE_MAINNET,ve.CYAN+"",ut.SAPPHIRE_MAINNET,ve.MAINNET+"",ut.SAPPHIRE_MAINNET,ve.TESTNET+"",ut.SAPPHIRE_DEVNET;ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";ut.SAPPHIRE_MAINNET+"",ut.SAPPHIRE_DEVNET+"",ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";ve.MAINNET+"",ve.TESTNET+"",ve.CYAN+"",ve.AQUA+"",ve.CELESTE+"";function So(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const o="__storage_test__";return n.setItem(o,o),n.removeItem(o),!0}catch(o){const i=o;return i&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class Sl{constructor(){he(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class Al{constructor(e,t){he(this,"storage",void 0),he(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&So("localStorage")?n=window.localStorage:t==="session"&&So("sessionStorage")?n=window.sessionStorage:n=new Sl,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}he(Al,"instanceMap",new Map);We(We({},ut),ve);class Rl extends Error{}Rl.prototype.name="InvalidTokenError";const br={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},it={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Il={GET_PROVIDER_STATE:"wallet_get_provider_state"},On={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Tl(r){return function(t,n,o){o(i=>{n.error&&vr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(vr.info(`RPC (${r.origin}):`,t,"->",n),i())})}}var Cn={},pt={},Ao;function Zn(){if(Ao)return pt;Ao=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.EthereumProviderError=pt.EthereumRpcError=void 0;const r=ko();class e extends Error{constructor(a,s,u){if(!Number.isInteger(a))throw new Error('"code" must be an integer.');if(!s||typeof s!="string")throw new Error('"message" must be a nonempty string.');super(s),this.code=a,u!==void 0&&(this.data=u)}serialize(){const a={code:this.code,message:this.message};return this.data!==void 0&&(a.data=this.data),this.stack&&(a.stack=this.stack),a}toString(){return r.default(this.serialize(),o,2)}}pt.EthereumRpcError=e;class t extends e{constructor(a,s,u){if(!n(a))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(a,s,u)}}pt.EthereumProviderError=t;function n(i){return Number.isInteger(i)&&i>=1e3&&i<=4999}function o(i,a){if(a!=="[Circular]")return a}return pt}var Ln={},bt={},Ro;function Qn(){return Ro||(Ro=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.errorValues=bt.errorCodes=void 0,bt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},bt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),bt}var Io;function es(){return Io||(Io=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Qn(),t=Zn(),n=e.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",i={code:n,message:a(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function a(p,x=o){if(Number.isInteger(p)){const T=p.toString();if(m(e.errorValues,T))return e.errorValues[T].message;if(f(p))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return x}r.getMessageFromCode=a;function s(p){if(!Number.isInteger(p))return!1;const x=p.toString();return!!(e.errorValues[x]||f(p))}r.isValidCode=s;function u(p,{fallbackError:x=i,shouldIncludeStack:T=!1}={}){var d,c;if(!x||!Number.isInteger(x.code)||typeof x.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(p instanceof t.EthereumRpcError)return p.serialize();const l={};if(p&&typeof p=="object"&&!Array.isArray(p)&&m(p,"code")&&s(p.code)){const h=p;l.code=h.code,h.message&&typeof h.message=="string"?(l.message=h.message,m(h,"data")&&(l.data=h.data)):(l.message=a(l.code),l.data={originalError:E(p)})}else{l.code=x.code;const h=(d=p)===null||d===void 0?void 0:d.message;l.message=h&&typeof h=="string"?h:x.message,l.data={originalError:E(p)}}const b=(c=p)===null||c===void 0?void 0:c.stack;return T&&p&&b&&typeof b=="string"&&(l.stack=b),l}r.serializeError=u;function f(p){return p>=-32099&&p<=-32e3}function E(p){return p&&typeof p=="object"&&!Array.isArray(p)?Object.assign({},p):p}function m(p,x){return Object.prototype.hasOwnProperty.call(p,x)}})(Ln)),Ln}var Ut={},To;function xl(){if(To)return Ut;To=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.ethErrors=void 0;const r=Zn(),e=es(),t=Qn();Ut.ethErrors={rpc:{parse:a=>n(t.errorCodes.rpc.parse,a),invalidRequest:a=>n(t.errorCodes.rpc.invalidRequest,a),invalidParams:a=>n(t.errorCodes.rpc.invalidParams,a),methodNotFound:a=>n(t.errorCodes.rpc.methodNotFound,a),internal:a=>n(t.errorCodes.rpc.internal,a),server:a=>{if(!a||typeof a!="object"||Array.isArray(a))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:s}=a;if(!Number.isInteger(s)||s>-32005||s<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(s,a)},invalidInput:a=>n(t.errorCodes.rpc.invalidInput,a),resourceNotFound:a=>n(t.errorCodes.rpc.resourceNotFound,a),resourceUnavailable:a=>n(t.errorCodes.rpc.resourceUnavailable,a),transactionRejected:a=>n(t.errorCodes.rpc.transactionRejected,a),methodNotSupported:a=>n(t.errorCodes.rpc.methodNotSupported,a),limitExceeded:a=>n(t.errorCodes.rpc.limitExceeded,a)},provider:{userRejectedRequest:a=>o(t.errorCodes.provider.userRejectedRequest,a),unauthorized:a=>o(t.errorCodes.provider.unauthorized,a),unsupportedMethod:a=>o(t.errorCodes.provider.unsupportedMethod,a),disconnected:a=>o(t.errorCodes.provider.disconnected,a),chainDisconnected:a=>o(t.errorCodes.provider.chainDisconnected,a),custom:a=>{if(!a||typeof a!="object"||Array.isArray(a))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:s,message:u,data:f}=a;if(!u||typeof u!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(s,u,f)}}};function n(a,s){const[u,f]=i(s);return new r.EthereumRpcError(a,u||e.getMessageFromCode(a),f)}function o(a,s){const[u,f]=i(s);return new r.EthereumProviderError(a,u||e.getMessageFromCode(a),f)}function i(a){if(a){if(typeof a=="string")return[a];if(typeof a=="object"&&!Array.isArray(a)){const{message:s,data:u}=a;if(s&&typeof s!="string")throw new Error("Must specify string message.");return[s||void 0,u]}}return[]}return Ut}var xo;function Ol(){return xo||(xo=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=Zn();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=es();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=xl();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=Qn();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})})(Cn)),Cn}var ft=Ol(),Nn,Oo;function Cl(){return Oo||(Oo=1,Nn=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!r(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}),Nn}var Ll=Cl();const Nl=Ot(Ll);var Pl="2.1.0";function ts(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function Ml(r){return ts(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function Bl(r){return ts(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function Dl(r){return Ml(r)&&Bl(r)}var Ge={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const jl={PRODUCTION:"production"},Ft={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},kl={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Xn={translations:kl,localStorageKeyPrefix:"torus-"},me=vr.getLogger("solana-embed");function ql(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=ft.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:o}=e;return o&&me.error(`Torus - RPC Error: ${o.message}`,o),n()})}}function Ul(r,e,t){let n=`Torus: Lost connection to "${r}".`;e?.stack&&(n+=`
${e.stack}`),me.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const wr=()=>Math.random().toString(36).slice(2),rs=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},Wl=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(Xn.translations,e[0])?e[0]:"en",r},Fl={height:660,width:375},$l={height:740,width:1315},Hl={height:700,width:1200},ns={height:600,width:400};function zl(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function $t(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,i=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=1,u=Math.abs((i-e)/2/s+n),f=Math.abs((a-t)/2/s+o);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/s},width=${e/s},top=${f},left=${u}`}class is extends Tr{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;if(super(),he(this,"isTorus",void 0),he(this,"_rpcEngine",void 0),he(this,"jsonRpcConnectionEvents",void 0),he(this,"_state",void 0),!Dl(e))throw new Error(Ge.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new ba;Vi(e,i,e,this._handleStreamDisconnect.bind(this,"Torus")),i.ignoreStream("phishing");const a=ha();Vi(a.stream,i.createStream(o),a.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const s=new rt;s.push(ga()),s.push(ql()),s.push(Tl({origin:location.origin})),s.push(a.middleware),this._rpcEngine=s,this.jsonRpcConnectionEvents=a.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw ft.ethErrors.rpc.invalidRequest({message:Ge.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw ft.ethErrors.rpc.invalidRequest({message:Ge.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw ft.ethErrors.rpc.invalidRequest({message:Ge.errors.invalidRequestParams(),data:e});return new Promise((o,i)=>{this._rpcRequest({method:t,params:n},Mn(o,i))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,Mn(t,n))})}_handleStreamDisconnect(e,t){Ul(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const Rt=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function yr(r){return r.version===void 0}class os extends Tr{constructor(e){let{url:t,target:n,features:o,timeout:i=3e4}=e;super(),he(this,"url",void 0),he(this,"target",void 0),he(this,"features",void 0),he(this,"window",void 0),he(this,"windowTimer",void 0),he(this,"iClosedWindow",void 0),he(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=o||$t(Hl),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=i,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){return this.window=window.open(this.url.href,this.target,this.features),this.window?.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class Lr extends is{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),he(this,"embedTranslations",void 0),he(this,"torusUrl",void 0),he(this,"dappStorageKey",void 0),he(this,"windowRefs",void 0),he(this,"tryWindowHandle",void 0),he(this,"torusAlertContainer",void 0),he(this,"torusIframe",void 0),this._state=We({},Lr._defaultState),this.torusUrl="",this.dappStorageKey="";const i=Xn.translations[Wl()];this.embedTranslations=i.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const a=s=>{const{method:u,params:f}=s;if(u===br.IFRAME_STATUS){const{isFullScreen:E,rid:m}=f;this._displayIframe({isFull:E,rid:m})}else if(u==="create_window"){const{windowId:E,url:m}=f;this._createPopupBlockAlert(E,m)}else if(u===br.CLOSE_WINDOW)this._handleCloseWindow(f);else if(u===br.USER_LOGGED_IN){const{currentLoginProvider:E}=f;this._state.isLoggedIn=!0,this._state.currentLoginProvider=E}else u===br.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",a)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:o,torusIframe:i}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=o,this.torusIframe=i,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:a,isLoggedIn:s}=await this.request({method:it.GET_PROVIDER_STATE,params:[]});this._handleConnect(a,s)}catch(t){me.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{me.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(i.hash?i.hash+=`&dappStorageKey=${this.dappStorageKey}`:i.hash=`#dappStorageKey=${this.dappStorageKey}`);const a=new os({url:i,target:n,features:o});if(a.open(),!a.window){this._createPopupBlockAlert(e,i.href);return}this.windowRefs[e]=a,this.request({method:"opened_window",params:{windowId:e}}),a.once("close",()=>{delete this.windowRefs[e],this.request({method:it.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Ft.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Ft.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Ft.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Ft.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:it.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,o=e;Array.isArray(o)||o.jsonrpc||(o.jsonrpc="2.0"),this.tryWindowHandle(o,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),me.debug(Ge.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new ft.EthereumRpcError(1013,t||Ge.errors.disconnected()),me.debug(n)):(n=new ft.EthereumRpcError(1011,t||Ge.errors.permanentlyDisconnected()),me.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),o=Rt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),i=Rt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),a=Rt('<div id="torusAlert__btn-container"></div>');a.appendChild(i),o.appendChild(a);const s=()=>{i.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:$t(ns)}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(o)})(),s(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}he(Lr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Nr extends is{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),he(this,"chainId",void 0),he(this,"selectedAddress",void 0),he(this,"tryWindowHandle",void 0),this._state=We({},Nr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const i=a=>{const{method:s,params:u}=a;s===On.ACCOUNTS_CHANGED?this._handleAccountsChanged(u):s===On.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(u):s===On.CHAIN_CHANGED&&this._handleChainChanged(u)};this.jsonRpcConnectionEvents.on("notification",i)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:Il.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){me.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{me.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;const i=e;if(!Array.isArray(i)){if(i.jsonrpc||(i.jsonrpc="2.0"),i.method==="solana_accounts"||i.method==="solana_requestAccounts")o=(a,s)=>{this._handleAccountsChanged(s.result||[],i.method==="solana_accounts",n),t(a,s)};else if(i.method==="wallet_getProviderState"){this._rpcEngine.handle(e,o);return}}this.tryWindowHandle(i,o)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),me.debug(Ge.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new ft.EthereumRpcError(1013,t||Ge.errors.disconnected()),me.debug(n)):(n=new ft.EthereumRpcError(1011,t||Ge.errors.permanentlyDisconnected()),me.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=e;Array.isArray(o)||(me.error("Torus: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const i of e)if(typeof i!="string"){me.error("Torus: Received non-string account. Please report this bug.",e),o=[];break}Nl(this._state.accounts,o)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&me.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){me.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){me.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}he(Nr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Co(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const Kl=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function Vl(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Co(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await Co(t.href))?t.href:""}catch{return""}}const Gl=async()=>({name:Kl(window),icon:await Vl(window)}),Yl=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Jl=[it.SET_PROVIDER],Zl=zl("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await rs("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){me.warn(e)}})();class nu{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};he(this,"isInitialized",void 0),he(this,"torusAlert",void 0),he(this,"modalZIndex",void 0),he(this,"alertZIndex",void 0),he(this,"requestedLoginProvider",void 0),he(this,"provider",void 0),he(this,"communicationProvider",void 0),he(this,"dappStorageKey",void 0),he(this,"isTopupHidden",!1),he(this,"torusAlertContainer",void 0),he(this,"torusUrl",void 0),he(this,"torusIframe",void 0),he(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=jl.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:o=!1,useLocalStorage:i=!1,buttonPosition:a=Ft.BOTTOM_LEFT,apiKey:s="torus-default",extraParams:u={},whiteLabel:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:E,logLevel:m}=await rs(e);me.enableAll(),me.info(E,"url loaded"),me.info(`Solana Embed Version :${Pl}`),this.torusUrl=E,me.setDefaultLevel(m),t?me.enableAll():me.disableAll();const p=this.handleDappStorageKey(i),x=new URL(E);x.pathname.endsWith("/")?x.pathname+="frame":x.pathname+="/frame";const T=new URLSearchParams;return p&&T.append("dappStorageKey",p),T.append("origin",window.location.origin),x.hash=T.toString(),this.torusIframe=Rt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${x.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=Rt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Rt(`<link href="${E}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((d,c)=>{try{this.torusIframe.addEventListener("load",async()=>{const l=await Gl();this.torusIframe.contentWindow.postMessage({buttonPosition:a,apiKey:s,network:n,dappMetadata:l,extraParams:u,whiteLabel:f},x.origin),await this._setupWeb3({torusUrl:E}),o&&this.showTorusButton(),f?.topupHide?this.isTopupHidden=f.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,d()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(l){c(l)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,o)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Mn(n,o))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw me.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:o}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!o)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:it.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:it.SET_PROVIDER,params:We({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:it.WALLET_INSTANCE_ID,params:[]}),o=e?`/${e}`:"",i=new URL(`${this.torusUrl}/wallet${o}`);i.searchParams.append("instanceId",n),Object.keys(t).forEach(s=>{i.searchParams.append(s,t[s])}),this.dappStorageKey&&(i.hash=`#dappStorageKey=${this.dappStorageKey}`),new os({url:i,features:$t($l)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:it.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=wr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:it.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=yr(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):ze.Buffer.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=yr(e),o=n?e.serialize({requireAllSignatures:!1}).toString("hex"):ze.Buffer.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=yr(e),n=t?e.serializeMessage().toString("hex"):ze.Buffer.from(e.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),i=JSON.parse(o),a={publicKey:new fi(i.publicKey),signature:ze.Buffer.from(i.signature,"hex")};return e.addSignature(a.publicKey,a.signature),e}async signAllTransactions(e){let t;const n=e.map(a=>(t=yr(a),t?a.serializeMessage().toString("hex"):ze.Buffer.from(a.message.serialize()).toString("hex"))),i=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(a=>{const s=JSON.parse(a);return{publicKey:new fi(s.publicKey),signature:ze.Buffer.from(s.signature,"hex")}});return e.forEach((a,s)=>(a.addSignature(i[s].publicKey,i[s].signature),a)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${Xn.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(Zl&&e){const o=window.localStorage.getItem(t);if(o)n=o;else{const i=`torus-app-${wr()}`;window.localStorage.setItem(t,i),n=i}}return this.dappStorageKey=n,n}async _setupWeb3(e){me.info("setupWeb3 running");const t=new Ji({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new Ji({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),o=new Nr(t,{}),i=new Lr(n,{});o.tryWindowHandle=(f,E)=>{const m=f;if(!Array.isArray(m)&&Yl.includes(m.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const p=wr();i._handleWindow(p,{target:"_blank",features:$t(ns)}),m.windowId=p}o._rpcEngine.handle(m,E)},i.tryWindowHandle=(f,E)=>{const m=f;if(!Array.isArray(m)&&Jl.includes(m.method)){const p=wr();i._handleWindow(p,{target:"_blank",features:$t(Fl)}),m.params.windowId=p}i._rpcEngine.handle(m,E)};const a=f=>{const E=o[f],m=this;o[f]=function(x,T){const{method:d,params:c=[]}=x;if(d==="solana_requestAccounts"){if(!T)return m.login({loginProvider:c[0]});m.login({loginProvider:c[0]}).then(l=>T(null,l)).catch(l=>T(l))}return E.apply(this,[x,T])}};a("request"),a("sendAsync"),a("send");const s=new Proxy(o,{deleteProperty:()=>!0}),u=new Proxy(i,{deleteProperty:()=>!0});this.provider=s,this.communicationProvider=u,await Promise.all([o._initializeState(),i._initializeState(We(We({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),me.debug("Torus - injected provider")}}export{Ft as BUTTON_POSITION,jl as TORUS_BUILD_ENV,Nr as TorusInPageProvider,nu as default};

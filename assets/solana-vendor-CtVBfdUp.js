function bn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Bo(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var ri={},Pr={},_s;function Ha(){if(_s)return Pr;_s=1,Pr.byteLength=c,Pr.toByteArray=w,Pr.fromByteArray=U;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(x){var O=x.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=x.indexOf("=");M===-1&&(M=O);var R=M===O?0:4-M%4;return[M,R]}function c(x){var O=o(x),M=O[0],R=O[1];return(M+R)*3/4-R}function d(x,O,M){return(O+M)*3/4-M}function w(x){var O,M=o(x),R=M[0],q=M[1],$=new e(d(x,R,q)),V=0,et=q>0?R-4:R,H;for(H=0;H<et;H+=4)O=t[x.charCodeAt(H)]<<18|t[x.charCodeAt(H+1)]<<12|t[x.charCodeAt(H+2)]<<6|t[x.charCodeAt(H+3)],$[V++]=O>>16&255,$[V++]=O>>8&255,$[V++]=O&255;return q===2&&(O=t[x.charCodeAt(H)]<<2|t[x.charCodeAt(H+1)]>>4,$[V++]=O&255),q===1&&(O=t[x.charCodeAt(H)]<<10|t[x.charCodeAt(H+1)]<<4|t[x.charCodeAt(H+2)]>>2,$[V++]=O>>8&255,$[V++]=O&255),$}function b(x){return n[x>>18&63]+n[x>>12&63]+n[x>>6&63]+n[x&63]}function _(x,O,M){for(var R,q=[],$=O;$<M;$+=3)R=(x[$]<<16&16711680)+(x[$+1]<<8&65280)+(x[$+2]&255),q.push(b(R));return q.join("")}function U(x){for(var O,M=x.length,R=M%3,q=[],$=16383,V=0,et=M-R;V<et;V+=$)q.push(_(x,V,V+$>et?et:V+$));return R===1?(O=x[M-1],q.push(n[O>>2]+n[O<<4&63]+"==")):R===2&&(O=(x[M-2]<<8)+x[M-1],q.push(n[O>>10]+n[O>>4&63]+n[O<<2&63]+"=")),q.join("")}return Pr}var Jr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Is;function $a(){return Is||(Is=1,Jr.read=function(n,t,e,r,s){var i,o,c=s*8-r-1,d=(1<<c)-1,w=d>>1,b=-7,_=e?s-1:0,U=e?-1:1,x=n[t+_];for(_+=U,i=x&(1<<-b)-1,x>>=-b,b+=c;b>0;i=i*256+n[t+_],_+=U,b-=8);for(o=i&(1<<-b)-1,i>>=-b,b+=r;b>0;o=o*256+n[t+_],_+=U,b-=8);if(i===0)i=1-w;else{if(i===d)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-w}return(x?-1:1)*o*Math.pow(2,i-r)},Jr.write=function(n,t,e,r,s,i){var o,c,d,w=i*8-s-1,b=(1<<w)-1,_=b>>1,U=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=r?0:i-1,O=r?1:-1,M=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=b):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+_>=1?t+=U/d:t+=U*Math.pow(2,1-_),t*d>=2&&(o++,d/=2),o+_>=b?(c=0,o=b):o+_>=1?(c=(t*d-1)*Math.pow(2,s),o=o+_):(c=t*Math.pow(2,_-1)*Math.pow(2,s),o=0));s>=8;n[e+x]=c&255,x+=O,c/=256,s-=8);for(o=o<<s|c,w+=s;w>0;n[e+x]=o&255,x+=O,o/=256,w-=8);n[e+x-O]|=M*128}),Jr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Bs;function vn(){return Bs||(Bs=1,(function(n){var t=Ha(),e=$a(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=$,n.INSPECT_MAX_BYTES=50;var s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var S=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(S,h),S.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(S){if(S>s)throw new RangeError('The value "'+S+'" is invalid for option "size"');var h=new Uint8Array(S);return Object.setPrototypeOf(h,c.prototype),h}function c(S,h,p){if(typeof S=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(S)}return d(S,h,p)}c.poolSize=8192;function d(S,h,p){if(typeof S=="string")return U(S,h);if(ArrayBuffer.isView(S))return O(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(Ee(S,ArrayBuffer)||S&&Ee(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ee(S,SharedArrayBuffer)||S&&Ee(S.buffer,SharedArrayBuffer)))return M(S,h,p);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var B=S.valueOf&&S.valueOf();if(B!=null&&B!==S)return c.from(B,h,p);var F=R(S);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return c.from(S[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}c.from=function(S,h,p){return d(S,h,p)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function w(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function b(S,h,p){return w(S),S<=0?o(S):h!==void 0?typeof p=="string"?o(S).fill(h,p):o(S).fill(h):o(S)}c.alloc=function(S,h,p){return b(S,h,p)};function _(S){return w(S),o(S<0?0:q(S)|0)}c.allocUnsafe=function(S){return _(S)},c.allocUnsafeSlow=function(S){return _(S)};function U(S,h){if((typeof h!="string"||h==="")&&(h="utf8"),!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h);var p=V(S,h)|0,B=o(p),F=B.write(S,h);return F!==p&&(B=B.slice(0,F)),B}function x(S){for(var h=S.length<0?0:q(S.length)|0,p=o(h),B=0;B<h;B+=1)p[B]=S[B]&255;return p}function O(S){if(Ee(S,Uint8Array)){var h=new Uint8Array(S);return M(h.buffer,h.byteOffset,h.byteLength)}return x(S)}function M(S,h,p){if(h<0||S.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');var B;return h===void 0&&p===void 0?B=new Uint8Array(S):p===void 0?B=new Uint8Array(S,h):B=new Uint8Array(S,h,p),Object.setPrototypeOf(B,c.prototype),B}function R(S){if(c.isBuffer(S)){var h=q(S.length)|0,p=o(h);return p.length===0||S.copy(p,0,0,h),p}if(S.length!==void 0)return typeof S.length!="number"||Rt(S.length)?o(0):x(S);if(S.type==="Buffer"&&Array.isArray(S.data))return x(S.data)}function q(S){if(S>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return S|0}function $(S){return+S!=S&&(S=0),c.alloc(+S)}c.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==c.prototype},c.compare=function(h,p){if(Ee(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),Ee(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(h)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;for(var B=h.length,F=p.length,G=0,Y=Math.min(B,F);G<Y;++G)if(h[G]!==p[G]){B=h[G],F=p[G];break}return B<F?-1:F<B?1:0},c.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return c.alloc(0);var B;if(p===void 0)for(p=0,B=0;B<h.length;++B)p+=h[B].length;var F=c.allocUnsafe(p),G=0;for(B=0;B<h.length;++B){var Y=h[B];if(Ee(Y,Uint8Array))G+Y.length>F.length?c.from(Y).copy(F,G):Uint8Array.prototype.set.call(F,Y,G);else if(c.isBuffer(Y))Y.copy(F,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Y.length}return F};function V(S,h){if(c.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||Ee(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);var p=S.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&p===0)return 0;for(var F=!1;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return at(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return bt(S).length;default:if(F)return B?-1:at(S).length;h=(""+h).toLowerCase(),F=!0}}c.byteLength=V;function et(S,h,p){var B=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(S||(S="utf8");;)switch(S){case"hex":return C(this,h,p);case"utf8":case"utf-8":return a(this,h,p);case"ascii":return k(this,h,p);case"latin1":case"binary":return E(this,h,p);case"base64":return y(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,h,p);default:if(B)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),B=!0}}c.prototype._isBuffer=!0;function H(S,h,p){var B=S[h];S[h]=S[p],S[p]=B}c.prototype.swap16=function(){var h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var p=0;p<h;p+=2)H(this,p,p+1);return this},c.prototype.swap32=function(){var h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var p=0;p<h;p+=4)H(this,p,p+3),H(this,p+1,p+2);return this},c.prototype.swap64=function(){var h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var p=0;p<h;p+=8)H(this,p,p+7),H(this,p+1,p+6),H(this,p+2,p+5),H(this,p+3,p+4);return this},c.prototype.toString=function(){var h=this.length;return h===0?"":arguments.length===0?a(this,0,h):et.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(h){if(!c.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:c.compare(this,h)===0},c.prototype.inspect=function(){var h="",p=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(h,p,B,F,G){if(Ee(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(p===void 0&&(p=0),B===void 0&&(B=h?h.length:0),F===void 0&&(F=0),G===void 0&&(G=this.length),p<0||B>h.length||F<0||G>this.length)throw new RangeError("out of range index");if(F>=G&&p>=B)return 0;if(F>=G)return-1;if(p>=B)return 1;if(p>>>=0,B>>>=0,F>>>=0,G>>>=0,this===h)return 0;for(var Y=G-F,ft=B-p,ht=Math.min(Y,ft),At=this.slice(F,G),yt=h.slice(p,B),dt=0;dt<ht;++dt)if(At[dt]!==yt[dt]){Y=At[dt],ft=yt[dt];break}return Y<ft?-1:ft<Y?1:0};function X(S,h,p,B,F){if(S.length===0)return-1;if(typeof p=="string"?(B=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Rt(p)&&(p=F?0:S.length-1),p<0&&(p=S.length+p),p>=S.length){if(F)return-1;p=S.length-1}else if(p<0)if(F)p=0;else return-1;if(typeof h=="string"&&(h=c.from(h,B)),c.isBuffer(h))return h.length===0?-1:ot(S,h,p,B,F);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(S,h,p):Uint8Array.prototype.lastIndexOf.call(S,h,p):ot(S,[h],p,B,F);throw new TypeError("val must be string, number or Buffer")}function ot(S,h,p,B,F){var G=1,Y=S.length,ft=h.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(S.length<2||h.length<2)return-1;G=2,Y/=2,ft/=2,p/=2}function ht(Mt,Pt){return G===1?Mt[Pt]:Mt.readUInt16BE(Pt*G)}var At;if(F){var yt=-1;for(At=p;At<Y;At++)if(ht(S,At)===ht(h,yt===-1?0:At-yt)){if(yt===-1&&(yt=At),At-yt+1===ft)return yt*G}else yt!==-1&&(At-=At-yt),yt=-1}else for(p+ft>Y&&(p=Y-ft),At=p;At>=0;At--){for(var dt=!0,Xe=0;Xe<ft;Xe++)if(ht(S,At+Xe)!==ht(h,Xe)){dt=!1;break}if(dt)return At}return-1}c.prototype.includes=function(h,p,B){return this.indexOf(h,p,B)!==-1},c.prototype.indexOf=function(h,p,B){return X(this,h,p,B,!0)},c.prototype.lastIndexOf=function(h,p,B){return X(this,h,p,B,!1)};function rt(S,h,p,B){p=Number(p)||0;var F=S.length-p;B?(B=Number(B),B>F&&(B=F)):B=F;var G=h.length;B>G/2&&(B=G/2);for(var Y=0;Y<B;++Y){var ft=parseInt(h.substr(Y*2,2),16);if(Rt(ft))return Y;S[p+Y]=ft}return Y}function L(S,h,p,B){return Bt(at(h,S.length-p),S,p,B)}function P(S,h,p,B){return Bt(ut(h),S,p,B)}function T(S,h,p,B){return Bt(bt(h),S,p,B)}function z(S,h,p,B){return Bt(ue(h,S.length-p),S,p,B)}c.prototype.write=function(h,p,B,F){if(p===void 0)F="utf8",B=this.length,p=0;else if(B===void 0&&typeof p=="string")F=p,B=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(B)?(B=B>>>0,F===void 0&&(F="utf8")):(F=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var G=this.length-p;if((B===void 0||B>G)&&(B=G),h.length>0&&(B<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");for(var Y=!1;;)switch(F){case"hex":return rt(this,h,p,B);case"utf8":case"utf-8":return L(this,h,p,B);case"ascii":case"latin1":case"binary":return P(this,h,p,B);case"base64":return T(this,h,p,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,h,p,B);default:if(Y)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),Y=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y(S,h,p){return h===0&&p===S.length?t.fromByteArray(S):t.fromByteArray(S.slice(h,p))}function a(S,h,p){p=Math.min(S.length,p);for(var B=[],F=h;F<p;){var G=S[F],Y=null,ft=G>239?4:G>223?3:G>191?2:1;if(F+ft<=p){var ht,At,yt,dt;switch(ft){case 1:G<128&&(Y=G);break;case 2:ht=S[F+1],(ht&192)===128&&(dt=(G&31)<<6|ht&63,dt>127&&(Y=dt));break;case 3:ht=S[F+1],At=S[F+2],(ht&192)===128&&(At&192)===128&&(dt=(G&15)<<12|(ht&63)<<6|At&63,dt>2047&&(dt<55296||dt>57343)&&(Y=dt));break;case 4:ht=S[F+1],At=S[F+2],yt=S[F+3],(ht&192)===128&&(At&192)===128&&(yt&192)===128&&(dt=(G&15)<<18|(ht&63)<<12|(At&63)<<6|yt&63,dt>65535&&dt<1114112&&(Y=dt))}}Y===null?(Y=65533,ft=1):Y>65535&&(Y-=65536,B.push(Y>>>10&1023|55296),Y=56320|Y&1023),B.push(Y),F+=ft}return g(B)}var l=4096;function g(S){var h=S.length;if(h<=l)return String.fromCharCode.apply(String,S);for(var p="",B=0;B<h;)p+=String.fromCharCode.apply(String,S.slice(B,B+=l));return p}function k(S,h,p){var B="";p=Math.min(S.length,p);for(var F=h;F<p;++F)B+=String.fromCharCode(S[F]&127);return B}function E(S,h,p){var B="";p=Math.min(S.length,p);for(var F=h;F<p;++F)B+=String.fromCharCode(S[F]);return B}function C(S,h,p){var B=S.length;(!h||h<0)&&(h=0),(!p||p<0||p>B)&&(p=B);for(var F="",G=h;G<p;++G)F+=Ct[S[G]];return F}function N(S,h,p){for(var B=S.slice(h,p),F="",G=0;G<B.length-1;G+=2)F+=String.fromCharCode(B[G]+B[G+1]*256);return F}c.prototype.slice=function(h,p){var B=this.length;h=~~h,p=p===void 0?B:~~p,h<0?(h+=B,h<0&&(h=0)):h>B&&(h=B),p<0?(p+=B,p<0&&(p=0)):p>B&&(p=B),p<h&&(p=h);var F=this.subarray(h,p);return Object.setPrototypeOf(F,c.prototype),F};function v(S,h,p){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+h>p)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(h,p,B){h=h>>>0,p=p>>>0,B||v(h,p,this.length);for(var F=this[h],G=1,Y=0;++Y<p&&(G*=256);)F+=this[h+Y]*G;return F},c.prototype.readUintBE=c.prototype.readUIntBE=function(h,p,B){h=h>>>0,p=p>>>0,B||v(h,p,this.length);for(var F=this[h+--p],G=1;p>0&&(G*=256);)F+=this[h+--p]*G;return F},c.prototype.readUint8=c.prototype.readUInt8=function(h,p){return h=h>>>0,p||v(h,1,this.length),this[h]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||v(h,2,this.length),this[h]|this[h+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||v(h,2,this.length),this[h]<<8|this[h+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||v(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||v(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},c.prototype.readIntLE=function(h,p,B){h=h>>>0,p=p>>>0,B||v(h,p,this.length);for(var F=this[h],G=1,Y=0;++Y<p&&(G*=256);)F+=this[h+Y]*G;return G*=128,F>=G&&(F-=Math.pow(2,8*p)),F},c.prototype.readIntBE=function(h,p,B){h=h>>>0,p=p>>>0,B||v(h,p,this.length);for(var F=p,G=1,Y=this[h+--F];F>0&&(G*=256);)Y+=this[h+--F]*G;return G*=128,Y>=G&&(Y-=Math.pow(2,8*p)),Y},c.prototype.readInt8=function(h,p){return h=h>>>0,p||v(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},c.prototype.readInt16LE=function(h,p){h=h>>>0,p||v(h,2,this.length);var B=this[h]|this[h+1]<<8;return B&32768?B|4294901760:B},c.prototype.readInt16BE=function(h,p){h=h>>>0,p||v(h,2,this.length);var B=this[h+1]|this[h]<<8;return B&32768?B|4294901760:B},c.prototype.readInt32LE=function(h,p){return h=h>>>0,p||v(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},c.prototype.readInt32BE=function(h,p){return h=h>>>0,p||v(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},c.prototype.readFloatLE=function(h,p){return h=h>>>0,p||v(h,4,this.length),e.read(this,h,!0,23,4)},c.prototype.readFloatBE=function(h,p){return h=h>>>0,p||v(h,4,this.length),e.read(this,h,!1,23,4)},c.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||v(h,8,this.length),e.read(this,h,!0,52,8)},c.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||v(h,8,this.length),e.read(this,h,!1,52,8)};function u(S,h,p,B,F,G){if(!c.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>F||h<G)throw new RangeError('"value" argument is out of bounds');if(p+B>S.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(h,p,B,F){if(h=+h,p=p>>>0,B=B>>>0,!F){var G=Math.pow(2,8*B)-1;u(this,h,p,B,G,0)}var Y=1,ft=0;for(this[p]=h&255;++ft<B&&(Y*=256);)this[p+ft]=h/Y&255;return p+B},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(h,p,B,F){if(h=+h,p=p>>>0,B=B>>>0,!F){var G=Math.pow(2,8*B)-1;u(this,h,p,B,G,0)}var Y=B-1,ft=1;for(this[p+Y]=h&255;--Y>=0&&(ft*=256);)this[p+Y]=h/ft&255;return p+B},c.prototype.writeUint8=c.prototype.writeUInt8=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,1,255,0),this[p]=h&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},c.prototype.writeIntLE=function(h,p,B,F){if(h=+h,p=p>>>0,!F){var G=Math.pow(2,8*B-1);u(this,h,p,B,G-1,-G)}var Y=0,ft=1,ht=0;for(this[p]=h&255;++Y<B&&(ft*=256);)h<0&&ht===0&&this[p+Y-1]!==0&&(ht=1),this[p+Y]=(h/ft>>0)-ht&255;return p+B},c.prototype.writeIntBE=function(h,p,B,F){if(h=+h,p=p>>>0,!F){var G=Math.pow(2,8*B-1);u(this,h,p,B,G-1,-G)}var Y=B-1,ft=1,ht=0;for(this[p+Y]=h&255;--Y>=0&&(ft*=256);)h<0&&ht===0&&this[p+Y+1]!==0&&(ht=1),this[p+Y]=(h/ft>>0)-ht&255;return p+B},c.prototype.writeInt8=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},c.prototype.writeInt16LE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},c.prototype.writeInt16BE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},c.prototype.writeInt32LE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},c.prototype.writeInt32BE=function(h,p,B){return h=+h,p=p>>>0,B||u(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function f(S,h,p,B,F,G){if(p+B>S.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function m(S,h,p,B,F){return h=+h,p=p>>>0,F||f(S,h,p,4),e.write(S,h,p,B,23,4),p+4}c.prototype.writeFloatLE=function(h,p,B){return m(this,h,p,!0,B)},c.prototype.writeFloatBE=function(h,p,B){return m(this,h,p,!1,B)};function A(S,h,p,B,F){return h=+h,p=p>>>0,F||f(S,h,p,8),e.write(S,h,p,B,52,8),p+8}c.prototype.writeDoubleLE=function(h,p,B){return A(this,h,p,!0,B)},c.prototype.writeDoubleBE=function(h,p,B){return A(this,h,p,!1,B)},c.prototype.copy=function(h,p,B,F){if(!c.isBuffer(h))throw new TypeError("argument should be a Buffer");if(B||(B=0),!F&&F!==0&&(F=this.length),p>=h.length&&(p=h.length),p||(p=0),F>0&&F<B&&(F=B),F===B||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),h.length-p<F-B&&(F=h.length-p+B);var G=F-B;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,B,F):Uint8Array.prototype.set.call(h,this.subarray(B,F),p),G},c.prototype.fill=function(h,p,B,F){if(typeof h=="string"){if(typeof p=="string"?(F=p,p=0,B=this.length):typeof B=="string"&&(F=B,B=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!c.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(h.length===1){var G=h.charCodeAt(0);(F==="utf8"&&G<128||F==="latin1")&&(h=G)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<B)throw new RangeError("Out of range index");if(B<=p)return this;p=p>>>0,B=B===void 0?this.length:B>>>0,h||(h=0);var Y;if(typeof h=="number")for(Y=p;Y<B;++Y)this[Y]=h;else{var ft=c.isBuffer(h)?h:c.from(h,F),ht=ft.length;if(ht===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(Y=0;Y<B-p;++Y)this[Y+p]=ft[Y%ht]}return this};var K=/[^+/0-9A-Za-z-_]/g;function j(S){if(S=S.split("=")[0],S=S.trim().replace(K,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function at(S,h){h=h||1/0;for(var p,B=S.length,F=null,G=[],Y=0;Y<B;++Y){if(p=S.charCodeAt(Y),p>55295&&p<57344){if(!F){if(p>56319){(h-=3)>-1&&G.push(239,191,189);continue}else if(Y+1===B){(h-=3)>-1&&G.push(239,191,189);continue}F=p;continue}if(p<56320){(h-=3)>-1&&G.push(239,191,189),F=p;continue}p=(F-55296<<10|p-56320)+65536}else F&&(h-=3)>-1&&G.push(239,191,189);if(F=null,p<128){if((h-=1)<0)break;G.push(p)}else if(p<2048){if((h-=2)<0)break;G.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;G.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;G.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return G}function ut(S){for(var h=[],p=0;p<S.length;++p)h.push(S.charCodeAt(p)&255);return h}function ue(S,h){for(var p,B,F,G=[],Y=0;Y<S.length&&!((h-=2)<0);++Y)p=S.charCodeAt(Y),B=p>>8,F=p%256,G.push(F),G.push(B);return G}function bt(S){return t.toByteArray(j(S))}function Bt(S,h,p,B){for(var F=0;F<B&&!(F+p>=h.length||F>=S.length);++F)h[F+p]=S[F];return F}function Ee(S,h){return S instanceof h||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===h.name}function Rt(S){return S!==S}var Ct=(function(){for(var S="0123456789abcdef",h=new Array(256),p=0;p<16;++p)for(var B=p*16,F=0;F<16;++F)h[B+F]=S[p]+S[F];return h})()})(ri)),ri}var st=vn();const fr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Di(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Fr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function _e(n,...t){if(!Di(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Va(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fr(n.outputLen),Fr(n.blockLen)}function br(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Ro(n,t){_e(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Ga(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Je(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function ni(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Re(n,t){return n<<32-t|n>>>t}const ja=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Za(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Ya(n){for(let t=0;t<n.length;t++)n[t]=Za(n[t]);return n}const Rs=ja?n=>n:Ya,Mo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Ja=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function vr(n){if(_e(n),Mo)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=Ja[n[e]];return t}const ze={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ms(n){if(n>=ze._0&&n<=ze._9)return n-ze._0;if(n>=ze.A&&n<=ze.F)return n-(ze.A-10);if(n>=ze.a&&n<=ze.f)return n-(ze.a-10)}function qi(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Mo)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ms(n.charCodeAt(i)),c=Ms(n.charCodeAt(i+1));if(o===void 0||c===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=o*16+c}return r}function Xa(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function kn(n){return typeof n=="string"&&(n=Xa(n)),_e(n),n}function He(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];_e(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Wi{}function Hi(n){const t=r=>n().update(kn(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Po(n=32){if(fr&&typeof fr.getRandomValues=="function")return fr.getRandomValues(new Uint8Array(n));if(fr&&typeof fr.randomBytes=="function")return Uint8Array.from(fr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Qa(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),d=r?4:0,w=r?0:4;n.setUint32(t+d,o,r),n.setUint32(t+w,c,r)}function tc(n,t,e){return n&t^~n&e}function ec(n,t,e){return n&t^n&e^t&e}class To extends Wi{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=ni(this.buffer)}update(t){br(this),t=kn(t),_e(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const d=ni(t);for(;s<=i-o;o+=s)this.process(d,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){br(this),Ro(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Je(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let _=o;_<s;_++)e[_]=0;Qa(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=ni(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const w=d/4,b=this.get();if(w>b.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<w;_++)c.setUint32(4*_,b[_],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const $e=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Xr=BigInt(2**32-1),Ps=BigInt(32);function rc(n,t=!1){return t?{h:Number(n&Xr),l:Number(n>>Ps&Xr)}:{h:Number(n>>Ps&Xr)|0,l:Number(n&Xr)|0}}function Lo(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=rc(n[i],t);[r[i],s[i]]=[o,c]}return[r,s]}const Ts=(n,t,e)=>n>>>e,Ls=(n,t,e)=>n<<32-e|t>>>e,lr=(n,t,e)=>n>>>e|t<<32-e,hr=(n,t,e)=>n<<32-e|t>>>e,Qr=(n,t,e)=>n<<64-e|t>>>e-32,tn=(n,t,e)=>n>>>e-32|t<<64-e,nc=(n,t,e)=>n<<e|t>>>32-e,ic=(n,t,e)=>t<<e|n>>>32-e,sc=(n,t,e)=>t<<e-32|n>>>64-e,oc=(n,t,e)=>n<<e-32|t>>>64-e;function Fe(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const ac=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),cc=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,uc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),fc=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,lc=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),hc=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,dc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ve=new Uint32Array(64);class pc extends To{constructor(t=32){super(64,t,8,!1),this.A=$e[0]|0,this.B=$e[1]|0,this.C=$e[2]|0,this.D=$e[3]|0,this.E=$e[4]|0,this.F=$e[5]|0,this.G=$e[6]|0,this.H=$e[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:d}=this;return[t,e,r,s,i,o,c,d]}set(t,e,r,s,i,o,c,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,e){for(let _=0;_<16;_++,e+=4)Ve[_]=t.getUint32(e,!1);for(let _=16;_<64;_++){const U=Ve[_-15],x=Ve[_-2],O=Re(U,7)^Re(U,18)^U>>>3,M=Re(x,17)^Re(x,19)^x>>>10;Ve[_]=M+Ve[_-7]+O+Ve[_-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:d,G:w,H:b}=this;for(let _=0;_<64;_++){const U=Re(c,6)^Re(c,11)^Re(c,25),x=b+U+tc(c,d,w)+dc[_]+Ve[_]|0,M=(Re(r,2)^Re(r,13)^Re(r,22))+ec(r,s,i)|0;b=w,w=d,d=c,c=o+x|0,o=i,i=s,s=r,r=x+M|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,w=w+this.G|0,b=b+this.H|0,this.set(r,s,i,o,c,d,w,b)}roundClean(){Je(Ve)}destroy(){this.set(0,0,0,0,0,0,0,0),Je(this.buffer)}}const Co=Lo(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),gc=Co[0],yc=Co[1],Ge=new Uint32Array(80),je=new Uint32Array(80);class mc extends To{constructor(t=64){super(128,t,16,!1),this.Ah=pe[0]|0,this.Al=pe[1]|0,this.Bh=pe[2]|0,this.Bl=pe[3]|0,this.Ch=pe[4]|0,this.Cl=pe[5]|0,this.Dh=pe[6]|0,this.Dl=pe[7]|0,this.Eh=pe[8]|0,this.El=pe[9]|0,this.Fh=pe[10]|0,this.Fl=pe[11]|0,this.Gh=pe[12]|0,this.Gl=pe[13]|0,this.Hh=pe[14]|0,this.Hl=pe[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:d,Eh:w,El:b,Fh:_,Fl:U,Gh:x,Gl:O,Hh:M,Hl:R}=this;return[t,e,r,s,i,o,c,d,w,b,_,U,x,O,M,R]}set(t,e,r,s,i,o,c,d,w,b,_,U,x,O,M,R){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=d|0,this.Eh=w|0,this.El=b|0,this.Fh=_|0,this.Fl=U|0,this.Gh=x|0,this.Gl=O|0,this.Hh=M|0,this.Hl=R|0}process(t,e){for(let V=0;V<16;V++,e+=4)Ge[V]=t.getUint32(e),je[V]=t.getUint32(e+=4);for(let V=16;V<80;V++){const et=Ge[V-15]|0,H=je[V-15]|0,X=lr(et,H,1)^lr(et,H,8)^Ts(et,H,7),ot=hr(et,H,1)^hr(et,H,8)^Ls(et,H,7),rt=Ge[V-2]|0,L=je[V-2]|0,P=lr(rt,L,19)^Qr(rt,L,61)^Ts(rt,L,6),T=hr(rt,L,19)^tn(rt,L,61)^Ls(rt,L,6),z=uc(ot,T,je[V-7],je[V-16]),y=fc(z,X,P,Ge[V-7],Ge[V-16]);Ge[V]=y|0,je[V]=z|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:d,Dh:w,Dl:b,Eh:_,El:U,Fh:x,Fl:O,Gh:M,Gl:R,Hh:q,Hl:$}=this;for(let V=0;V<80;V++){const et=lr(_,U,14)^lr(_,U,18)^Qr(_,U,41),H=hr(_,U,14)^hr(_,U,18)^tn(_,U,41),X=_&x^~_&M,ot=U&O^~U&R,rt=lc($,H,ot,yc[V],je[V]),L=hc(rt,q,et,X,gc[V],Ge[V]),P=rt|0,T=lr(r,s,28)^Qr(r,s,34)^Qr(r,s,39),z=hr(r,s,28)^tn(r,s,34)^tn(r,s,39),y=r&i^r&c^i&c,a=s&o^s&d^o&d;q=M|0,$=R|0,M=x|0,R=O|0,x=_|0,O=U|0,{h:_,l:U}=Fe(w|0,b|0,L|0,P|0),w=c|0,b=d|0,c=i|0,d=o|0,i=r|0,o=s|0;const l=ac(P,z,a);r=cc(l,L,T,y),s=l|0}({h:r,l:s}=Fe(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Fe(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:d}=Fe(this.Ch|0,this.Cl|0,c|0,d|0),{h:w,l:b}=Fe(this.Dh|0,this.Dl|0,w|0,b|0),{h:_,l:U}=Fe(this.Eh|0,this.El|0,_|0,U|0),{h:x,l:O}=Fe(this.Fh|0,this.Fl|0,x|0,O|0),{h:M,l:R}=Fe(this.Gh|0,this.Gl|0,M|0,R|0),{h:q,l:$}=Fe(this.Hh|0,this.Hl|0,q|0,$|0),this.set(r,s,i,o,c,d,w,b,_,U,x,O,M,R,q,$)}roundClean(){Je(Ge,je)}destroy(){Je(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Oo=Hi(()=>new pc),wc=Hi(()=>new mc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $i=BigInt(0),Mi=BigInt(1);function ir(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function en(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Uo(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?$i:BigInt("0x"+n)}function xn(n){return Uo(vr(n))}function Kr(n){return _e(n),Uo(vr(Uint8Array.from(n).reverse()))}function Vi(n,t){return qi(n.toString(16).padStart(t*2,"0"))}function Sn(n,t){return Vi(n,t).reverse()}function Nt(n,t,e){let r;if(typeof t=="string")try{r=qi(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Di(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}const ii=n=>typeof n=="bigint"&&$i<=n;function bc(n,t,e){return ii(n)&&ii(t)&&ii(e)&&t<=n&&n<e}function pr(n,t,e,r){if(!bc(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function vc(n){let t;for(t=0;n>$i;n>>=Mi,t+=1);return t}const En=n=>(Mi<<BigInt(n))-Mi;function kc(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=x=>new Uint8Array(x),s=x=>Uint8Array.of(x);let i=r(n),o=r(n),c=0;const d=()=>{i.fill(1),o.fill(0),c=0},w=(...x)=>e(o,i,...x),b=(x=r(0))=>{o=w(s(0),x),i=w(),x.length!==0&&(o=w(s(1),x),i=w())},_=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const O=[];for(;x<t;){i=w();const M=i.slice();O.push(M),x+=i.length}return He(...O)};return(x,O)=>{d(),b(x);let M;for(;!(M=O(_()));)b();return d(),M}}function $r(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const c=n[s];if(o&&c===void 0)return;const d=typeof c;if(d!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${d}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function fn(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Se=BigInt(0),de=BigInt(1),er=BigInt(2),xc=BigInt(3),No=BigInt(4),zo=BigInt(5),Fo=BigInt(8);function zt(n,t){const e=n%t;return e>=Se?e:t+e}function Ot(n,t,e){let r=n;for(;t-- >Se;)r*=r,r%=e;return r}function Cs(n,t){if(n===Se)throw new Error("invert: expected non-zero number");if(t<=Se)throw new Error("invert: expected positive modulus, got "+t);let e=zt(n,t),r=t,s=Se,i=de;for(;e!==Se;){const c=r/e,d=r%e,w=s-i*c;r=e,e=d,s=i,i=w}if(r!==de)throw new Error("invert: does not exist");return zt(s,t)}function Ko(n,t){const e=(n.ORDER+de)/No,r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}function Sc(n,t){const e=(n.ORDER-zo)/Fo,r=n.mul(t,er),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,er),s),c=n.mul(i,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),t))throw new Error("Cannot find square root");return c}function Ec(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let t=n-de,e=0;for(;t%er===Se;)t/=er,e++;let r=er;const s=Ar(n);for(;Os(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Ko;let i=s.pow(r,t);const o=(t+de)/er;return function(d,w){if(d.is0(w))return w;if(Os(d,w)!==1)throw new Error("Cannot find square root");let b=e,_=d.mul(d.ONE,i),U=d.pow(w,t),x=d.pow(w,o);for(;!d.eql(U,d.ONE);){if(d.is0(U))return d.ZERO;let O=1,M=d.sqr(U);for(;!d.eql(M,d.ONE);)if(O++,M=d.sqr(M),O===b)throw new Error("Cannot find square root");const R=de<<BigInt(b-O-1),q=d.pow(_,R);b=O,_=d.sqr(q),U=d.mul(U,_),x=d.mul(x,q)}return x}}function Ac(n){return n%No===xc?Ko:n%Fo===zo?Sc:Ec(n)}const _c=(n,t)=>(zt(n,t)&de)===de,Ic=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Ic.reduce((r,s)=>(r[s]="function",r),t);return $r(n,e),n}function Rc(n,t,e){if(e<Se)throw new Error("invalid exponent, negatives unsupported");if(e===Se)return n.ONE;if(e===de)return t;let r=n.ONE,s=t;for(;e>Se;)e&de&&(r=n.mul(r,s)),s=n.sqr(s),e>>=de;return r}function Do(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,c,d)=>n.is0(c)?o:(r[d]=o,n.mul(o,c)),n.ONE),i=n.inv(s);return t.reduceRight((o,c,d)=>n.is0(c)?o:(r[d]=n.mul(o,r[d]),n.mul(o,c)),i),r}function Os(n,t){const e=(n.ORDER-de)/er,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Mc(n,t){t!==void 0&&Fr(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Ar(n,t,e=!1,r={}){if(n<=Se)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const b=t;b.BITS&&(s=b.BITS),b.sqrt&&(i=b.sqrt),typeof b.isLE=="boolean"&&(e=b.isLE)}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:c}=Mc(n,s);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const w=Object.freeze({ORDER:n,isLE:e,BITS:o,BYTES:c,MASK:En(o),ZERO:Se,ONE:de,create:b=>zt(b,n),isValid:b=>{if(typeof b!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof b);return Se<=b&&b<n},is0:b=>b===Se,isValidNot0:b=>!w.is0(b)&&w.isValid(b),isOdd:b=>(b&de)===de,neg:b=>zt(-b,n),eql:(b,_)=>b===_,sqr:b=>zt(b*b,n),add:(b,_)=>zt(b+_,n),sub:(b,_)=>zt(b-_,n),mul:(b,_)=>zt(b*_,n),pow:(b,_)=>Rc(w,b,_),div:(b,_)=>zt(b*Cs(_,n),n),sqrN:b=>b*b,addN:(b,_)=>b+_,subN:(b,_)=>b-_,mulN:(b,_)=>b*_,inv:b=>Cs(b,n),sqrt:i||(b=>(d||(d=Ac(n)),d(w,b))),toBytes:b=>e?Sn(b,c):Vi(b,c),fromBytes:b=>{if(b.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+b.length);return e?Kr(b):xn(b)},invertBatch:b=>Do(w,b),cmov:(b,_,U)=>U?_:b});return Object.freeze(w)}function qo(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Wo(n){const t=qo(n);return t+Math.ceil(t/2)}function Pc(n,t,e=!1){const r=n.length,s=qo(t),i=Wo(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?Kr(n):xn(n),c=zt(o,t-de)+de;return e?Sn(c,s):Vi(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kr=BigInt(0),rr=BigInt(1);function Cr(n,t){const e=t.negate();return n?e:t}function Ho(n,t,e){const r=t==="pz"?o=>o.pz:o=>o.ez,s=Do(n.Fp,e.map(r));return e.map((o,c)=>o.toAffine(s[c])).map(n.fromAffine)}function $o(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function si(n,t){$o(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=En(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Us(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(n&s),d=n>>o;c>r&&(c-=i,d+=rr);const w=t*r,b=w+Math.abs(c)-1,_=c===0,U=c<0,x=t%2!==0;return{nextN:d,offset:b,isZero:_,isNeg:U,isNegF:x,offsetF:w}}function Tc(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Lc(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const oi=new WeakMap,Vo=new WeakMap;function ai(n){return Vo.get(n)||1}function Ns(n){if(n!==kr)throw new Error("invalid wNAF")}function Go(n,t){return{constTimeNegate:Cr,hasPrecomputes(e){return ai(e)!==1},unsafeLadder(e,r,s=n.ZERO){let i=e;for(;r>kr;)r&rr&&(s=s.add(i)),i=i.double(),r>>=rr;return s},precomputeWindow(e,r){const{windows:s,windowSize:i}=si(r,t),o=[];let c=e,d=c;for(let w=0;w<s;w++){d=c,o.push(d);for(let b=1;b<i;b++)d=d.add(c),o.push(d);c=d.double()}return o},wNAF(e,r,s){let i=n.ZERO,o=n.BASE;const c=si(e,t);for(let d=0;d<c.windows;d++){const{nextN:w,offset:b,isZero:_,isNeg:U,isNegF:x,offsetF:O}=Us(s,d,c);s=w,_?o=o.add(Cr(x,r[O])):i=i.add(Cr(U,r[b]))}return Ns(s),{p:i,f:o}},wNAFUnsafe(e,r,s,i=n.ZERO){const o=si(e,t);for(let c=0;c<o.windows&&s!==kr;c++){const{nextN:d,offset:w,isZero:b,isNeg:_}=Us(s,c,o);if(s=d,!b){const U=r[w];i=i.add(_?U.negate():U)}}return Ns(s),i},getPrecomputes(e,r,s){let i=oi.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof s=="function"&&(i=s(i)),oi.set(r,i))),i},wNAFCached(e,r,s){const i=ai(e);return this.wNAF(i,this.getPrecomputes(i,e,s),r)},wNAFCachedUnsafe(e,r,s,i){const o=ai(e);return o===1?this.unsafeLadder(e,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),r,i)},setWindowSize(e,r){$o(r,t),Vo.set(e,r),oi.delete(e)}}}function Cc(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>kr||r>kr;)e&rr&&(i=i.add(s)),r&rr&&(o=o.add(s)),s=s.double(),e>>=rr,r>>=rr;return{p1:i,p2:o}}function jo(n,t,e,r){Tc(e,n),Lc(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=vc(BigInt(s));let d=1;c>12?d=c-3:c>4?d=c-2:c>0&&(d=2);const w=En(d),b=new Array(Number(w)+1).fill(o),_=Math.floor((t.BITS-1)/d)*d;let U=o;for(let x=_;x>=0;x-=d){b.fill(o);for(let M=0;M<i;M++){const R=r[M],q=Number(R>>BigInt(x)&w);b[q]=b[q].add(e[M])}let O=o;for(let M=b.length-1,R=o;M>0;M--)R=R.add(b[M]),O=O.add(R);if(U=U.add(O),x!==0)for(let M=0;M<d;M++)U=U.double()}return U}function zs(n,t){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Bc(t),t}else return Ar(n)}function Zo(n,t,e={}){if(!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const d=t[c];if(!(typeof d=="bigint"&&d>kr))throw new Error(`CURVE.${c} must be positive bigint`)}const r=zs(t.p,e.Fp),s=zs(t.n,e.Fn),o=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const c of o)if(!r.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Me=BigInt(0),be=BigInt(1),ci=BigInt(2),Oc=BigInt(8),Uc={zip215:!0};function Nc(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),c=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,c)}function zc(n,t={}){const{Fp:e,Fn:r}=Zo("edwards",n,t),{h:s,n:i}=n;$r(t,{},{uvRatio:"function"});const o=ci<<BigInt(r.BYTES*8)-be,c=M=>e.create(M),d=t.uvRatio||((M,R)=>{try{return{isValid:!0,value:e.sqrt(e.div(M,R))}}catch{return{isValid:!1,value:Me}}});if(!Nc(e,n,n.Gx,n.Gy))throw new Error("bad curve params: generator point");function w(M,R,q=!1){const $=q?be:Me;return pr("coordinate "+M,R,$,o),R}function b(M){if(!(M instanceof x))throw new Error("ExtendedPoint expected")}const _=fn((M,R)=>{const{ex:q,ey:$,ez:V}=M,et=M.is0();R==null&&(R=et?Oc:e.inv(V));const H=c(q*R),X=c($*R),ot=c(V*R);if(et)return{x:Me,y:be};if(ot!==be)throw new Error("invZ was invalid");return{x:H,y:X}}),U=fn(M=>{const{a:R,d:q}=n;if(M.is0())throw new Error("bad point: ZERO");const{ex:$,ey:V,ez:et,et:H}=M,X=c($*$),ot=c(V*V),rt=c(et*et),L=c(rt*rt),P=c(X*R),T=c(rt*c(P+ot)),z=c(L+c(q*c(X*ot)));if(T!==z)throw new Error("bad point: equation left != right (1)");const y=c($*V),a=c(et*H);if(y!==a)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(R,q,$,V){this.ex=w("x",R),this.ey=w("y",q),this.ez=w("z",$,!0),this.et=w("t",V),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof x)throw new Error("extended point not allowed");const{x:q,y:$}=R||{};return w("x",q),w("y",$),new x(q,$,be,c(q*$))}static normalizeZ(R){return Ho(x,"ez",R)}static msm(R,q){return jo(x,r,R,q)}_setWindowSize(R){this.precompute(R)}precompute(R=8,q=!0){return O.setWindowSize(this,R),q||this.multiply(ci),this}assertValidity(){U(this)}equals(R){b(R);const{ex:q,ey:$,ez:V}=this,{ex:et,ey:H,ez:X}=R,ot=c(q*X),rt=c(et*V),L=c($*X),P=c(H*V);return ot===rt&&L===P}is0(){return this.equals(x.ZERO)}negate(){return new x(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:R}=n,{ex:q,ey:$,ez:V}=this,et=c(q*q),H=c($*$),X=c(ci*c(V*V)),ot=c(R*et),rt=q+$,L=c(c(rt*rt)-et-H),P=ot+H,T=P-X,z=ot-H,y=c(L*T),a=c(P*z),l=c(L*z),g=c(T*P);return new x(y,a,g,l)}add(R){b(R);const{a:q,d:$}=n,{ex:V,ey:et,ez:H,et:X}=this,{ex:ot,ey:rt,ez:L,et:P}=R,T=c(V*ot),z=c(et*rt),y=c(X*$*P),a=c(H*L),l=c((V+et)*(ot+rt)-T-z),g=a-y,k=a+y,E=c(z-q*T),C=c(l*g),N=c(k*E),v=c(l*E),u=c(g*k);return new x(C,N,u,v)}subtract(R){return this.add(R.negate())}multiply(R){const q=R;pr("scalar",q,be,i);const{p:$,f:V}=O.wNAFCached(this,q,x.normalizeZ);return x.normalizeZ([$,V])[0]}multiplyUnsafe(R,q=x.ZERO){const $=R;return pr("scalar",$,Me,i),$===Me?x.ZERO:this.is0()||$===be?this:O.wNAFCachedUnsafe(this,$,x.normalizeZ,q)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return O.wNAFCachedUnsafe(this,i).is0()}toAffine(R){return _(this,R)}clearCofactor(){return s===be?this:this.multiplyUnsafe(s)}static fromBytes(R,q=!1){return _e(R),this.fromHex(R,q)}static fromHex(R,q=!1){const{d:$,a:V}=n,et=e.BYTES;R=Nt("pointHex",R,et),ir("zip215",q);const H=R.slice(),X=R[et-1];H[et-1]=X&-129;const ot=Kr(H),rt=q?o:e.ORDER;pr("pointHex.y",ot,Me,rt);const L=c(ot*ot),P=c(L-be),T=c($*L-V);let{isValid:z,value:y}=d(P,T);if(!z)throw new Error("Point.fromHex: invalid y coordinate");const a=(y&be)===be,l=(X&128)!==0;if(!q&&y===Me&&l)throw new Error("Point.fromHex: x=0 and x_0=1");return l!==a&&(y=c(-y)),x.fromAffine({x:y,y:ot})}static fromPrivateScalar(R){return x.BASE.multiply(R)}toBytes(){const{x:R,y:q}=this.toAffine(),$=Sn(q,e.BYTES);return $[$.length-1]|=R&be?128:0,$}toRawBytes(){return this.toBytes()}toHex(){return vr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(n.Gx,n.Gy,be,c(n.Gx*n.Gy)),x.ZERO=new x(Me,be,be,Me),x.Fp=e,x.Fn=r;const O=Go(x,r.BYTES*8);return x}function Fc(n,t){$r(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:e,hash:r}=t,{BASE:s,Fp:i,Fn:o}=n,c=o.ORDER,d=t.randomBytes||Po,w=t.adjustScalarBytes||(H=>H),b=t.domain||((H,X,ot)=>{if(ir("phflag",ot),X.length||ot)throw new Error("Contexts/pre-hash are not supported");return H});function _(H){return o.create(H)}function U(H){return _(Kr(H))}function x(H){const X=i.BYTES;H=Nt("private key",H,X);const ot=Nt("hashed private key",r(H),2*X),rt=w(ot.slice(0,X)),L=ot.slice(X,2*X),P=U(rt);return{head:rt,prefix:L,scalar:P}}function O(H){const{head:X,prefix:ot,scalar:rt}=x(H),L=s.multiply(rt),P=L.toBytes();return{head:X,prefix:ot,scalar:rt,point:L,pointBytes:P}}function M(H){return O(H).pointBytes}function R(H=Uint8Array.of(),...X){const ot=He(...X);return U(r(b(ot,Nt("context",H),!!e)))}function q(H,X,ot={}){H=Nt("message",H),e&&(H=e(H));const{prefix:rt,scalar:L,pointBytes:P}=O(X),T=R(ot.context,rt,H),z=s.multiply(T).toBytes(),y=R(ot.context,z,P,H),a=_(T+y*L);pr("signature.s",a,Me,c);const l=i.BYTES,g=He(z,Sn(a,l));return Nt("result",g,l*2)}const $=Uc;function V(H,X,ot,rt=$){const{context:L,zip215:P}=rt,T=i.BYTES;H=Nt("signature",H,2*T),X=Nt("message",X),ot=Nt("publicKey",ot,T),P!==void 0&&ir("zip215",P),e&&(X=e(X));const z=Kr(H.slice(T,2*T));let y,a,l;try{y=n.fromHex(ot,P),a=n.fromHex(H.slice(0,T),P),l=s.multiplyUnsafe(z)}catch{return!1}if(!P&&y.isSmallOrder())return!1;const g=R(L,a.toBytes(),y.toBytes(),X);return a.add(y.multiplyUnsafe(g)).subtract(l).clearCofactor().is0()}return s.precompute(8),{getPublicKey:M,sign:q,verify:V,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>d(i.BYTES),precompute(H=8,X=n.BASE){return X.precompute(H,!1)}},Point:n}}function Kc(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Ar(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={hash:n.hash,randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,eddsaOpts:i}}function Dc(n,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:n})}function qc(n){const{CURVE:t,curveOpts:e,eddsaOpts:r}=Kc(n),s=zc(t,e),i=Fc(s,r);return Dc(n,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Wc=BigInt(1),Fs=BigInt(2);BigInt(3);const Hc=BigInt(5),$c=BigInt(8),An={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:$c,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Vc(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=An.p,c=n*n%i*n%i,d=Ot(c,Fs,i)*c%i,w=Ot(d,Wc,i)*n%i,b=Ot(w,Hc,i)*w%i,_=Ot(b,t,i)*b%i,U=Ot(_,e,i)*_%i,x=Ot(U,r,i)*U%i,O=Ot(x,s,i)*x%i,M=Ot(O,s,i)*x%i,R=Ot(M,t,i)*b%i;return{pow_p_5_8:Ot(R,Fs,i)*n%i,b2:c}}function Gc(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const Ks=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function jc(n,t){const e=An.p,r=zt(t*t*t,e),s=zt(r*r*t,e),i=Vc(n*s).pow_p_5_8;let o=zt(n*r*i,e);const c=zt(t*o*o,e),d=o,w=zt(o*Ks,e),b=c===n,_=c===zt(-n,e),U=c===zt(-n*Ks,e);return b&&(o=d),(_||U)&&(o=w),_c(o,e)&&(o=zt(-o,e)),{isValid:b||_,value:o}}const Zc=Ar(An.p,void 0,!0),Yc={...An,Fp:Zc,hash:wc,adjustScalarBytes:Gc,uvRatio:jc},_r=qc(Yc);var an={exports:{}},Jc=an.exports,Ds;function Yo(){return Ds||(Ds=1,(function(n){(function(t,e){function r(y,a){if(!y)throw new Error(a||"Assertion failed")}function s(y,a){y.super_=a;var l=function(){};l.prototype=a.prototype,y.prototype=new l,y.prototype.constructor=y}function i(y,a,l){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(y||0,a||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=vn().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,g){if(typeof a=="number")return this._initNumber(a,l,g);if(typeof a=="object")return this._initArray(a,l,g);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var k=0;a[0]==="-"&&(k++,this.negative=1),k<a.length&&(l===16?this._parseHex(a,k,g):(this._parseBase(a,l,k),g==="le"&&this._initArray(this.toArray(),l,g)))},i.prototype._initNumber=function(a,l,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},i.prototype._initArray=function(a,l,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var E,C,N=0;if(g==="be")for(k=a.length-1,E=0;k>=0;k-=3)C=a[k]|a[k-1]<<8|a[k-2]<<16,this.words[E]|=C<<N&67108863,this.words[E+1]=C>>>26-N&67108863,N+=24,N>=26&&(N-=26,E++);else if(g==="le")for(k=0,E=0;k<a.length;k+=3)C=a[k]|a[k+1]<<8|a[k+2]<<16,this.words[E]|=C<<N&67108863,this.words[E+1]=C>>>26-N&67108863,N+=24,N>=26&&(N-=26,E++);return this._strip()};function c(y,a){var l=y.charCodeAt(a);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+y)}function d(y,a,l){var g=c(y,l);return l-1>=a&&(g|=c(y,l-1)<<4),g}i.prototype._parseHex=function(a,l,g){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var E=0,C=0,N;if(g==="be")for(k=a.length-1;k>=l;k-=2)N=d(a,l,k)<<E,this.words[C]|=N&67108863,E>=18?(E-=18,C+=1,this.words[C]|=N>>>26):E+=8;else{var v=a.length-l;for(k=v%2===0?l+1:l;k<a.length;k+=2)N=d(a,l,k)<<E,this.words[C]|=N&67108863,E>=18?(E-=18,C+=1,this.words[C]|=N>>>26):E+=8}this._strip()};function w(y,a,l,g){for(var k=0,E=0,C=Math.min(y.length,l),N=a;N<C;N++){var v=y.charCodeAt(N)-48;k*=g,v>=49?E=v-49+10:v>=17?E=v-17+10:E=v,r(v>=0&&E<g,"Invalid character"),k+=E}return k}i.prototype._parseBase=function(a,l,g){this.words=[0],this.length=1;for(var k=0,E=1;E<=67108863;E*=l)k++;k--,E=E/l|0;for(var C=a.length-g,N=C%k,v=Math.min(C,C-N)+g,u=0,f=g;f<v;f+=k)u=w(a,f,f+k,l),this.imuln(E),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(N!==0){var m=1;for(u=w(a,f,a.length,l),f=0;f<N;f++)m*=l;this.imuln(m),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red};function b(y,a){y.words=a.words,y.length=a.length,y.negative=a.negative,y.red=a.red}if(i.prototype._move=function(a){b(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{i.prototype.inspect=_}else i.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var g;if(a===16||a==="hex"){g="";for(var k=0,E=0,C=0;C<this.length;C++){var N=this.words[C],v=((N<<k|E)&16777215).toString(16);E=N>>>24-k&16777215,k+=2,k>=26&&(k-=26,C--),E!==0||C!==this.length-1?g=U[6-v.length]+v+g:g=v+g}for(E!==0&&(g=E.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],f=O[a];g="";var m=this.clone();for(m.negative=0;!m.isZero();){var A=m.modrn(f).toString(a);m=m.idivn(f),m.isZero()?g=A+g:g=U[u-A.length]+A+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,l){return this.toArrayLike(o,a,l)}),i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)};var M=function(a,l){return a.allocUnsafe?a.allocUnsafe(l):new a(l)};i.prototype.toArrayLike=function(a,l,g){this._strip();var k=this.byteLength(),E=g||Math.max(1,k);r(k<=E,"byte array longer than desired length"),r(E>0,"Requested array length <= 0");var C=M(a,E),N=l==="le"?"LE":"BE";return this["_toArrayLike"+N](C,k),C},i.prototype._toArrayLikeLE=function(a,l){for(var g=0,k=0,E=0,C=0;E<this.length;E++){var N=this.words[E]<<C|k;a[g++]=N&255,g<a.length&&(a[g++]=N>>8&255),g<a.length&&(a[g++]=N>>16&255),C===6?(g<a.length&&(a[g++]=N>>24&255),k=0,C=0):(k=N>>>24,C+=2)}if(g<a.length)for(a[g++]=k;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,l){for(var g=a.length-1,k=0,E=0,C=0;E<this.length;E++){var N=this.words[E]<<C|k;a[g--]=N&255,g>=0&&(a[g--]=N>>8&255),g>=0&&(a[g--]=N>>16&255),C===6?(g>=0&&(a[g--]=N>>24&255),k=0,C=0):(k=N>>>24,C+=2)}if(g>=0)for(a[g--]=k;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,g=0;return(l&8191)===0&&(g+=13,l>>>=13),(l&127)===0&&(g+=7,l>>>=7),(l&15)===0&&(g+=4,l>>>=4),(l&3)===0&&(g+=2,l>>>=2),(l&1)===0&&g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function R(y){for(var a=new Array(y.bitLength()),l=0;l<a.length;l++){var g=l/26|0,k=l%26;a[l]=y.words[g]>>>k&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=l.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,g;this.length>a.length?(l=this,g=a):(l=a,g=this);for(var k=0;k<g.length;k++)this.words[k]=l.words[k]^g.words[k];if(this!==l)for(;k<l.length;k++)this.words[k]=l.words[k];return this.length=l.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,g=a%26;this._expand(l),g>0&&l--;for(var k=0;k<l;k++)this.words[k]=~this.words[k]&67108863;return g>0&&(this.words[k]=~this.words[k]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){r(typeof a=="number"&&a>=0);var g=a/26|0,k=a%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<k:this.words[g]=this.words[g]&~(1<<k),this._strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var g,k;this.length>a.length?(g=this,k=a):(g=a,k=this);for(var E=0,C=0;C<k.length;C++)l=(g.words[C]|0)+(k.words[C]|0)+E,this.words[C]=l&67108863,E=l>>>26;for(;E!==0&&C<g.length;C++)l=(g.words[C]|0)+E,this.words[C]=l&67108863,E=l>>>26;if(this.length=g.length,E!==0)this.words[this.length]=E,this.length++;else if(g!==this)for(;C<g.length;C++)this.words[C]=g.words[C];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,E;g>0?(k=this,E=a):(k=a,E=this);for(var C=0,N=0;N<E.length;N++)l=(k.words[N]|0)-(E.words[N]|0)+C,C=l>>26,this.words[N]=l&67108863;for(;C!==0&&N<k.length;N++)l=(k.words[N]|0)+C,C=l>>26,this.words[N]=l&67108863;if(C===0&&N<k.length&&k!==this)for(;N<k.length;N++)this.words[N]=k.words[N];return this.length=Math.max(this.length,N),k!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function q(y,a,l){l.negative=a.negative^y.negative;var g=y.length+a.length|0;l.length=g,g=g-1|0;var k=y.words[0]|0,E=a.words[0]|0,C=k*E,N=C&67108863,v=C/67108864|0;l.words[0]=N;for(var u=1;u<g;u++){for(var f=v>>>26,m=v&67108863,A=Math.min(u,a.length-1),K=Math.max(0,u-y.length+1);K<=A;K++){var j=u-K|0;k=y.words[j]|0,E=a.words[K]|0,C=k*E+m,f+=C/67108864|0,m=C&67108863}l.words[u]=m|0,v=f|0}return v!==0?l.words[u]=v|0:l.length--,l._strip()}var $=function(a,l,g){var k=a.words,E=l.words,C=g.words,N=0,v,u,f,m=k[0]|0,A=m&8191,K=m>>>13,j=k[1]|0,at=j&8191,ut=j>>>13,ue=k[2]|0,bt=ue&8191,Bt=ue>>>13,Ee=k[3]|0,Rt=Ee&8191,Ct=Ee>>>13,S=k[4]|0,h=S&8191,p=S>>>13,B=k[5]|0,F=B&8191,G=B>>>13,Y=k[6]|0,ft=Y&8191,ht=Y>>>13,At=k[7]|0,yt=At&8191,dt=At>>>13,Xe=k[8]|0,Mt=Xe&8191,Pt=Xe>>>13,gs=k[9]|0,Ft=gs&8191,Kt=gs>>>13,ys=E[0]|0,Dt=ys&8191,qt=ys>>>13,ms=E[1]|0,Wt=ms&8191,Ht=ms>>>13,ws=E[2]|0,$t=ws&8191,Vt=ws>>>13,bs=E[3]|0,Gt=bs&8191,jt=bs>>>13,vs=E[4]|0,Zt=vs&8191,Yt=vs>>>13,ks=E[5]|0,Jt=ks&8191,Xt=ks>>>13,xs=E[6]|0,Qt=xs&8191,te=xs>>>13,Ss=E[7]|0,ee=Ss&8191,re=Ss>>>13,Es=E[8]|0,ne=Es&8191,ie=Es>>>13,As=E[9]|0,se=As&8191,oe=As>>>13;g.negative=a.negative^l.negative,g.length=19,v=Math.imul(A,Dt),u=Math.imul(A,qt),u=u+Math.imul(K,Dt)|0,f=Math.imul(K,qt);var Nn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,v=Math.imul(at,Dt),u=Math.imul(at,qt),u=u+Math.imul(ut,Dt)|0,f=Math.imul(ut,qt),v=v+Math.imul(A,Wt)|0,u=u+Math.imul(A,Ht)|0,u=u+Math.imul(K,Wt)|0,f=f+Math.imul(K,Ht)|0;var zn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(zn>>>26)|0,zn&=67108863,v=Math.imul(bt,Dt),u=Math.imul(bt,qt),u=u+Math.imul(Bt,Dt)|0,f=Math.imul(Bt,qt),v=v+Math.imul(at,Wt)|0,u=u+Math.imul(at,Ht)|0,u=u+Math.imul(ut,Wt)|0,f=f+Math.imul(ut,Ht)|0,v=v+Math.imul(A,$t)|0,u=u+Math.imul(A,Vt)|0,u=u+Math.imul(K,$t)|0,f=f+Math.imul(K,Vt)|0;var Fn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,v=Math.imul(Rt,Dt),u=Math.imul(Rt,qt),u=u+Math.imul(Ct,Dt)|0,f=Math.imul(Ct,qt),v=v+Math.imul(bt,Wt)|0,u=u+Math.imul(bt,Ht)|0,u=u+Math.imul(Bt,Wt)|0,f=f+Math.imul(Bt,Ht)|0,v=v+Math.imul(at,$t)|0,u=u+Math.imul(at,Vt)|0,u=u+Math.imul(ut,$t)|0,f=f+Math.imul(ut,Vt)|0,v=v+Math.imul(A,Gt)|0,u=u+Math.imul(A,jt)|0,u=u+Math.imul(K,Gt)|0,f=f+Math.imul(K,jt)|0;var Kn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,v=Math.imul(h,Dt),u=Math.imul(h,qt),u=u+Math.imul(p,Dt)|0,f=Math.imul(p,qt),v=v+Math.imul(Rt,Wt)|0,u=u+Math.imul(Rt,Ht)|0,u=u+Math.imul(Ct,Wt)|0,f=f+Math.imul(Ct,Ht)|0,v=v+Math.imul(bt,$t)|0,u=u+Math.imul(bt,Vt)|0,u=u+Math.imul(Bt,$t)|0,f=f+Math.imul(Bt,Vt)|0,v=v+Math.imul(at,Gt)|0,u=u+Math.imul(at,jt)|0,u=u+Math.imul(ut,Gt)|0,f=f+Math.imul(ut,jt)|0,v=v+Math.imul(A,Zt)|0,u=u+Math.imul(A,Yt)|0,u=u+Math.imul(K,Zt)|0,f=f+Math.imul(K,Yt)|0;var Dn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,v=Math.imul(F,Dt),u=Math.imul(F,qt),u=u+Math.imul(G,Dt)|0,f=Math.imul(G,qt),v=v+Math.imul(h,Wt)|0,u=u+Math.imul(h,Ht)|0,u=u+Math.imul(p,Wt)|0,f=f+Math.imul(p,Ht)|0,v=v+Math.imul(Rt,$t)|0,u=u+Math.imul(Rt,Vt)|0,u=u+Math.imul(Ct,$t)|0,f=f+Math.imul(Ct,Vt)|0,v=v+Math.imul(bt,Gt)|0,u=u+Math.imul(bt,jt)|0,u=u+Math.imul(Bt,Gt)|0,f=f+Math.imul(Bt,jt)|0,v=v+Math.imul(at,Zt)|0,u=u+Math.imul(at,Yt)|0,u=u+Math.imul(ut,Zt)|0,f=f+Math.imul(ut,Yt)|0,v=v+Math.imul(A,Jt)|0,u=u+Math.imul(A,Xt)|0,u=u+Math.imul(K,Jt)|0,f=f+Math.imul(K,Xt)|0;var qn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(qn>>>26)|0,qn&=67108863,v=Math.imul(ft,Dt),u=Math.imul(ft,qt),u=u+Math.imul(ht,Dt)|0,f=Math.imul(ht,qt),v=v+Math.imul(F,Wt)|0,u=u+Math.imul(F,Ht)|0,u=u+Math.imul(G,Wt)|0,f=f+Math.imul(G,Ht)|0,v=v+Math.imul(h,$t)|0,u=u+Math.imul(h,Vt)|0,u=u+Math.imul(p,$t)|0,f=f+Math.imul(p,Vt)|0,v=v+Math.imul(Rt,Gt)|0,u=u+Math.imul(Rt,jt)|0,u=u+Math.imul(Ct,Gt)|0,f=f+Math.imul(Ct,jt)|0,v=v+Math.imul(bt,Zt)|0,u=u+Math.imul(bt,Yt)|0,u=u+Math.imul(Bt,Zt)|0,f=f+Math.imul(Bt,Yt)|0,v=v+Math.imul(at,Jt)|0,u=u+Math.imul(at,Xt)|0,u=u+Math.imul(ut,Jt)|0,f=f+Math.imul(ut,Xt)|0,v=v+Math.imul(A,Qt)|0,u=u+Math.imul(A,te)|0,u=u+Math.imul(K,Qt)|0,f=f+Math.imul(K,te)|0;var Wn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,v=Math.imul(yt,Dt),u=Math.imul(yt,qt),u=u+Math.imul(dt,Dt)|0,f=Math.imul(dt,qt),v=v+Math.imul(ft,Wt)|0,u=u+Math.imul(ft,Ht)|0,u=u+Math.imul(ht,Wt)|0,f=f+Math.imul(ht,Ht)|0,v=v+Math.imul(F,$t)|0,u=u+Math.imul(F,Vt)|0,u=u+Math.imul(G,$t)|0,f=f+Math.imul(G,Vt)|0,v=v+Math.imul(h,Gt)|0,u=u+Math.imul(h,jt)|0,u=u+Math.imul(p,Gt)|0,f=f+Math.imul(p,jt)|0,v=v+Math.imul(Rt,Zt)|0,u=u+Math.imul(Rt,Yt)|0,u=u+Math.imul(Ct,Zt)|0,f=f+Math.imul(Ct,Yt)|0,v=v+Math.imul(bt,Jt)|0,u=u+Math.imul(bt,Xt)|0,u=u+Math.imul(Bt,Jt)|0,f=f+Math.imul(Bt,Xt)|0,v=v+Math.imul(at,Qt)|0,u=u+Math.imul(at,te)|0,u=u+Math.imul(ut,Qt)|0,f=f+Math.imul(ut,te)|0,v=v+Math.imul(A,ee)|0,u=u+Math.imul(A,re)|0,u=u+Math.imul(K,ee)|0,f=f+Math.imul(K,re)|0;var Hn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,v=Math.imul(Mt,Dt),u=Math.imul(Mt,qt),u=u+Math.imul(Pt,Dt)|0,f=Math.imul(Pt,qt),v=v+Math.imul(yt,Wt)|0,u=u+Math.imul(yt,Ht)|0,u=u+Math.imul(dt,Wt)|0,f=f+Math.imul(dt,Ht)|0,v=v+Math.imul(ft,$t)|0,u=u+Math.imul(ft,Vt)|0,u=u+Math.imul(ht,$t)|0,f=f+Math.imul(ht,Vt)|0,v=v+Math.imul(F,Gt)|0,u=u+Math.imul(F,jt)|0,u=u+Math.imul(G,Gt)|0,f=f+Math.imul(G,jt)|0,v=v+Math.imul(h,Zt)|0,u=u+Math.imul(h,Yt)|0,u=u+Math.imul(p,Zt)|0,f=f+Math.imul(p,Yt)|0,v=v+Math.imul(Rt,Jt)|0,u=u+Math.imul(Rt,Xt)|0,u=u+Math.imul(Ct,Jt)|0,f=f+Math.imul(Ct,Xt)|0,v=v+Math.imul(bt,Qt)|0,u=u+Math.imul(bt,te)|0,u=u+Math.imul(Bt,Qt)|0,f=f+Math.imul(Bt,te)|0,v=v+Math.imul(at,ee)|0,u=u+Math.imul(at,re)|0,u=u+Math.imul(ut,ee)|0,f=f+Math.imul(ut,re)|0,v=v+Math.imul(A,ne)|0,u=u+Math.imul(A,ie)|0,u=u+Math.imul(K,ne)|0,f=f+Math.imul(K,ie)|0;var $n=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+($n>>>26)|0,$n&=67108863,v=Math.imul(Ft,Dt),u=Math.imul(Ft,qt),u=u+Math.imul(Kt,Dt)|0,f=Math.imul(Kt,qt),v=v+Math.imul(Mt,Wt)|0,u=u+Math.imul(Mt,Ht)|0,u=u+Math.imul(Pt,Wt)|0,f=f+Math.imul(Pt,Ht)|0,v=v+Math.imul(yt,$t)|0,u=u+Math.imul(yt,Vt)|0,u=u+Math.imul(dt,$t)|0,f=f+Math.imul(dt,Vt)|0,v=v+Math.imul(ft,Gt)|0,u=u+Math.imul(ft,jt)|0,u=u+Math.imul(ht,Gt)|0,f=f+Math.imul(ht,jt)|0,v=v+Math.imul(F,Zt)|0,u=u+Math.imul(F,Yt)|0,u=u+Math.imul(G,Zt)|0,f=f+Math.imul(G,Yt)|0,v=v+Math.imul(h,Jt)|0,u=u+Math.imul(h,Xt)|0,u=u+Math.imul(p,Jt)|0,f=f+Math.imul(p,Xt)|0,v=v+Math.imul(Rt,Qt)|0,u=u+Math.imul(Rt,te)|0,u=u+Math.imul(Ct,Qt)|0,f=f+Math.imul(Ct,te)|0,v=v+Math.imul(bt,ee)|0,u=u+Math.imul(bt,re)|0,u=u+Math.imul(Bt,ee)|0,f=f+Math.imul(Bt,re)|0,v=v+Math.imul(at,ne)|0,u=u+Math.imul(at,ie)|0,u=u+Math.imul(ut,ne)|0,f=f+Math.imul(ut,ie)|0,v=v+Math.imul(A,se)|0,u=u+Math.imul(A,oe)|0,u=u+Math.imul(K,se)|0,f=f+Math.imul(K,oe)|0;var Vn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,v=Math.imul(Ft,Wt),u=Math.imul(Ft,Ht),u=u+Math.imul(Kt,Wt)|0,f=Math.imul(Kt,Ht),v=v+Math.imul(Mt,$t)|0,u=u+Math.imul(Mt,Vt)|0,u=u+Math.imul(Pt,$t)|0,f=f+Math.imul(Pt,Vt)|0,v=v+Math.imul(yt,Gt)|0,u=u+Math.imul(yt,jt)|0,u=u+Math.imul(dt,Gt)|0,f=f+Math.imul(dt,jt)|0,v=v+Math.imul(ft,Zt)|0,u=u+Math.imul(ft,Yt)|0,u=u+Math.imul(ht,Zt)|0,f=f+Math.imul(ht,Yt)|0,v=v+Math.imul(F,Jt)|0,u=u+Math.imul(F,Xt)|0,u=u+Math.imul(G,Jt)|0,f=f+Math.imul(G,Xt)|0,v=v+Math.imul(h,Qt)|0,u=u+Math.imul(h,te)|0,u=u+Math.imul(p,Qt)|0,f=f+Math.imul(p,te)|0,v=v+Math.imul(Rt,ee)|0,u=u+Math.imul(Rt,re)|0,u=u+Math.imul(Ct,ee)|0,f=f+Math.imul(Ct,re)|0,v=v+Math.imul(bt,ne)|0,u=u+Math.imul(bt,ie)|0,u=u+Math.imul(Bt,ne)|0,f=f+Math.imul(Bt,ie)|0,v=v+Math.imul(at,se)|0,u=u+Math.imul(at,oe)|0,u=u+Math.imul(ut,se)|0,f=f+Math.imul(ut,oe)|0;var Gn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,v=Math.imul(Ft,$t),u=Math.imul(Ft,Vt),u=u+Math.imul(Kt,$t)|0,f=Math.imul(Kt,Vt),v=v+Math.imul(Mt,Gt)|0,u=u+Math.imul(Mt,jt)|0,u=u+Math.imul(Pt,Gt)|0,f=f+Math.imul(Pt,jt)|0,v=v+Math.imul(yt,Zt)|0,u=u+Math.imul(yt,Yt)|0,u=u+Math.imul(dt,Zt)|0,f=f+Math.imul(dt,Yt)|0,v=v+Math.imul(ft,Jt)|0,u=u+Math.imul(ft,Xt)|0,u=u+Math.imul(ht,Jt)|0,f=f+Math.imul(ht,Xt)|0,v=v+Math.imul(F,Qt)|0,u=u+Math.imul(F,te)|0,u=u+Math.imul(G,Qt)|0,f=f+Math.imul(G,te)|0,v=v+Math.imul(h,ee)|0,u=u+Math.imul(h,re)|0,u=u+Math.imul(p,ee)|0,f=f+Math.imul(p,re)|0,v=v+Math.imul(Rt,ne)|0,u=u+Math.imul(Rt,ie)|0,u=u+Math.imul(Ct,ne)|0,f=f+Math.imul(Ct,ie)|0,v=v+Math.imul(bt,se)|0,u=u+Math.imul(bt,oe)|0,u=u+Math.imul(Bt,se)|0,f=f+Math.imul(Bt,oe)|0;var jn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(jn>>>26)|0,jn&=67108863,v=Math.imul(Ft,Gt),u=Math.imul(Ft,jt),u=u+Math.imul(Kt,Gt)|0,f=Math.imul(Kt,jt),v=v+Math.imul(Mt,Zt)|0,u=u+Math.imul(Mt,Yt)|0,u=u+Math.imul(Pt,Zt)|0,f=f+Math.imul(Pt,Yt)|0,v=v+Math.imul(yt,Jt)|0,u=u+Math.imul(yt,Xt)|0,u=u+Math.imul(dt,Jt)|0,f=f+Math.imul(dt,Xt)|0,v=v+Math.imul(ft,Qt)|0,u=u+Math.imul(ft,te)|0,u=u+Math.imul(ht,Qt)|0,f=f+Math.imul(ht,te)|0,v=v+Math.imul(F,ee)|0,u=u+Math.imul(F,re)|0,u=u+Math.imul(G,ee)|0,f=f+Math.imul(G,re)|0,v=v+Math.imul(h,ne)|0,u=u+Math.imul(h,ie)|0,u=u+Math.imul(p,ne)|0,f=f+Math.imul(p,ie)|0,v=v+Math.imul(Rt,se)|0,u=u+Math.imul(Rt,oe)|0,u=u+Math.imul(Ct,se)|0,f=f+Math.imul(Ct,oe)|0;var Zn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,v=Math.imul(Ft,Zt),u=Math.imul(Ft,Yt),u=u+Math.imul(Kt,Zt)|0,f=Math.imul(Kt,Yt),v=v+Math.imul(Mt,Jt)|0,u=u+Math.imul(Mt,Xt)|0,u=u+Math.imul(Pt,Jt)|0,f=f+Math.imul(Pt,Xt)|0,v=v+Math.imul(yt,Qt)|0,u=u+Math.imul(yt,te)|0,u=u+Math.imul(dt,Qt)|0,f=f+Math.imul(dt,te)|0,v=v+Math.imul(ft,ee)|0,u=u+Math.imul(ft,re)|0,u=u+Math.imul(ht,ee)|0,f=f+Math.imul(ht,re)|0,v=v+Math.imul(F,ne)|0,u=u+Math.imul(F,ie)|0,u=u+Math.imul(G,ne)|0,f=f+Math.imul(G,ie)|0,v=v+Math.imul(h,se)|0,u=u+Math.imul(h,oe)|0,u=u+Math.imul(p,se)|0,f=f+Math.imul(p,oe)|0;var Yn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,v=Math.imul(Ft,Jt),u=Math.imul(Ft,Xt),u=u+Math.imul(Kt,Jt)|0,f=Math.imul(Kt,Xt),v=v+Math.imul(Mt,Qt)|0,u=u+Math.imul(Mt,te)|0,u=u+Math.imul(Pt,Qt)|0,f=f+Math.imul(Pt,te)|0,v=v+Math.imul(yt,ee)|0,u=u+Math.imul(yt,re)|0,u=u+Math.imul(dt,ee)|0,f=f+Math.imul(dt,re)|0,v=v+Math.imul(ft,ne)|0,u=u+Math.imul(ft,ie)|0,u=u+Math.imul(ht,ne)|0,f=f+Math.imul(ht,ie)|0,v=v+Math.imul(F,se)|0,u=u+Math.imul(F,oe)|0,u=u+Math.imul(G,se)|0,f=f+Math.imul(G,oe)|0;var Jn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,v=Math.imul(Ft,Qt),u=Math.imul(Ft,te),u=u+Math.imul(Kt,Qt)|0,f=Math.imul(Kt,te),v=v+Math.imul(Mt,ee)|0,u=u+Math.imul(Mt,re)|0,u=u+Math.imul(Pt,ee)|0,f=f+Math.imul(Pt,re)|0,v=v+Math.imul(yt,ne)|0,u=u+Math.imul(yt,ie)|0,u=u+Math.imul(dt,ne)|0,f=f+Math.imul(dt,ie)|0,v=v+Math.imul(ft,se)|0,u=u+Math.imul(ft,oe)|0,u=u+Math.imul(ht,se)|0,f=f+Math.imul(ht,oe)|0;var Xn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,v=Math.imul(Ft,ee),u=Math.imul(Ft,re),u=u+Math.imul(Kt,ee)|0,f=Math.imul(Kt,re),v=v+Math.imul(Mt,ne)|0,u=u+Math.imul(Mt,ie)|0,u=u+Math.imul(Pt,ne)|0,f=f+Math.imul(Pt,ie)|0,v=v+Math.imul(yt,se)|0,u=u+Math.imul(yt,oe)|0,u=u+Math.imul(dt,se)|0,f=f+Math.imul(dt,oe)|0;var Qn=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,v=Math.imul(Ft,ne),u=Math.imul(Ft,ie),u=u+Math.imul(Kt,ne)|0,f=Math.imul(Kt,ie),v=v+Math.imul(Mt,se)|0,u=u+Math.imul(Mt,oe)|0,u=u+Math.imul(Pt,se)|0,f=f+Math.imul(Pt,oe)|0;var ti=(N+v|0)+((u&8191)<<13)|0;N=(f+(u>>>13)|0)+(ti>>>26)|0,ti&=67108863,v=Math.imul(Ft,se),u=Math.imul(Ft,oe),u=u+Math.imul(Kt,se)|0,f=Math.imul(Kt,oe);var ei=(N+v|0)+((u&8191)<<13)|0;return N=(f+(u>>>13)|0)+(ei>>>26)|0,ei&=67108863,C[0]=Nn,C[1]=zn,C[2]=Fn,C[3]=Kn,C[4]=Dn,C[5]=qn,C[6]=Wn,C[7]=Hn,C[8]=$n,C[9]=Vn,C[10]=Gn,C[11]=jn,C[12]=Zn,C[13]=Yn,C[14]=Jn,C[15]=Xn,C[16]=Qn,C[17]=ti,C[18]=ei,N!==0&&(C[19]=N,g.length++),g};Math.imul||($=q);function V(y,a,l){l.negative=a.negative^y.negative,l.length=y.length+a.length;for(var g=0,k=0,E=0;E<l.length-1;E++){var C=k;k=0;for(var N=g&67108863,v=Math.min(E,a.length-1),u=Math.max(0,E-y.length+1);u<=v;u++){var f=E-u,m=y.words[f]|0,A=a.words[u]|0,K=m*A,j=K&67108863;C=C+(K/67108864|0)|0,j=j+N|0,N=j&67108863,C=C+(j>>>26)|0,k+=C>>>26,C&=67108863}l.words[E]=N,g=C,C=k}return g!==0?l.words[E]=g:l.length--,l._strip()}function et(y,a,l){return V(y,a,l)}i.prototype.mulTo=function(a,l){var g,k=this.length+a.length;return this.length===10&&a.length===10?g=$(this,a,l):k<63?g=q(this,a,l):k<1024?g=V(this,a,l):g=et(this,a,l),g},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),et(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var l=a<0;l&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var g=0,k=0;k<this.length;k++){var E=(this.words[k]|0)*a,C=(E&67108863)+(g&67108863);g>>=26,g+=E/67108864|0,g+=C>>>26,this.words[k]=C&67108863}return g!==0&&(this.words[k]=g,this.length++),this.length=a===0?1:this.length,l?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=R(a);if(l.length===0)return new i(1);for(var g=this,k=0;k<l.length&&l[k]===0;k++,g=g.sqr());if(++k<l.length)for(var E=g.sqr();k<l.length;k++,E=E.sqr())l[k]!==0&&(g=g.mul(E));return g},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,k=67108863>>>26-l<<26-l,E;if(l!==0){var C=0;for(E=0;E<this.length;E++){var N=this.words[E]&k,v=(this.words[E]|0)-N<<l;this.words[E]=v|C,C=N>>>26-l}C&&(this.words[E]=C,this.length++)}if(g!==0){for(E=this.length-1;E>=0;E--)this.words[E+g]=this.words[E];for(E=0;E<g;E++)this.words[E]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,g){r(typeof a=="number"&&a>=0);var k;l?k=(l-l%26)/26:k=0;var E=a%26,C=Math.min((a-E)/26,this.length),N=67108863^67108863>>>E<<E,v=g;if(k-=C,k=Math.max(0,k),v){for(var u=0;u<C;u++)v.words[u]=this.words[u];v.length=C}if(C!==0)if(this.length>C)for(this.length-=C,u=0;u<this.length;u++)this.words[u]=this.words[u+C];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(f!==0||u>=k);u--){var m=this.words[u]|0;this.words[u]=f<<26-E|m>>>E,f=m&N}return v&&f!==0&&(v.words[v.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,l,g){return r(this.negative===0),this.iushrn(a,l,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,k=1<<l;if(this.length<=g)return!1;var E=this.words[g];return!!(E&k)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var k=67108863^67108863>>>l<<l;this.words[this.length-1]&=k}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,g){var k=a.length+g,E;this._expand(k);var C,N=0;for(E=0;E<a.length;E++){C=(this.words[E+g]|0)+N;var v=(a.words[E]|0)*l;C-=v&67108863,N=(C>>26)-(v/67108864|0),this.words[E+g]=C&67108863}for(;E<this.length-g;E++)C=(this.words[E+g]|0)+N,N=C>>26,this.words[E+g]=C&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,E=0;E<this.length;E++)C=-(this.words[E]|0)+N,N=C>>26,this.words[E]=C&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,l){var g=this.length-a.length,k=this.clone(),E=a,C=E.words[E.length-1]|0,N=this._countBits(C);g=26-N,g!==0&&(E=E.ushln(g),k.iushln(g),C=E.words[E.length-1]|0);var v=k.length-E.length,u;if(l!=="mod"){u=new i(null),u.length=v+1,u.words=new Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var m=k.clone()._ishlnsubmul(E,1,v);m.negative===0&&(k=m,u&&(u.words[v]=1));for(var A=v-1;A>=0;A--){var K=(k.words[E.length+A]|0)*67108864+(k.words[E.length+A-1]|0);for(K=Math.min(K/C|0,67108863),k._ishlnsubmul(E,K,A);k.negative!==0;)K--,k.negative=0,k._ishlnsubmul(E,1,A),k.isZero()||(k.negative^=1);u&&(u.words[A]=K)}return u&&u._strip(),k._strip(),l!=="div"&&g!==0&&k.iushrn(g),{div:u||null,mod:k}},i.prototype.divmod=function(a,l,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var k,E,C;return this.negative!==0&&a.negative===0?(C=this.neg().divmod(a,l),l!=="mod"&&(k=C.div.neg()),l!=="div"&&(E=C.mod.neg(),g&&E.negative!==0&&E.iadd(a)),{div:k,mod:E}):this.negative===0&&a.negative!==0?(C=this.divmod(a.neg(),l),l!=="mod"&&(k=C.div.neg()),{div:k,mod:C.mod}):(this.negative&a.negative)!==0?(C=this.neg().divmod(a.neg(),l),l!=="div"&&(E=C.mod.neg(),g&&E.negative!==0&&E.isub(a)),{div:C.div,mod:E}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(a):l.mod,k=a.ushrn(1),E=a.andln(1),C=g.cmp(k);return C<0||E===1&&C===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(a){var l=a<0;l&&(a=-a),r(a<=67108863);for(var g=(1<<26)%a,k=0,E=this.length-1;E>=0;E--)k=(g*k+(this.words[E]|0))%a;return l?-k:k},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var l=a<0;l&&(a=-a),r(a<=67108863);for(var g=0,k=this.length-1;k>=0;k--){var E=(this.words[k]|0)+g*67108864;this.words[k]=E/a|0,g=E%a}return this._strip(),l?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var k=new i(1),E=new i(0),C=new i(0),N=new i(1),v=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++v;for(var u=g.clone(),f=l.clone();!l.isZero();){for(var m=0,A=1;(l.words[0]&A)===0&&m<26;++m,A<<=1);if(m>0)for(l.iushrn(m);m-- >0;)(k.isOdd()||E.isOdd())&&(k.iadd(u),E.isub(f)),k.iushrn(1),E.iushrn(1);for(var K=0,j=1;(g.words[0]&j)===0&&K<26;++K,j<<=1);if(K>0)for(g.iushrn(K);K-- >0;)(C.isOdd()||N.isOdd())&&(C.iadd(u),N.isub(f)),C.iushrn(1),N.iushrn(1);l.cmp(g)>=0?(l.isub(g),k.isub(C),E.isub(N)):(g.isub(l),C.isub(k),N.isub(E))}return{a:C,b:N,gcd:g.iushln(v)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var k=new i(1),E=new i(0),C=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var N=0,v=1;(l.words[0]&v)===0&&N<26;++N,v<<=1);if(N>0)for(l.iushrn(N);N-- >0;)k.isOdd()&&k.iadd(C),k.iushrn(1);for(var u=0,f=1;(g.words[0]&f)===0&&u<26;++u,f<<=1);if(u>0)for(g.iushrn(u);u-- >0;)E.isOdd()&&E.iadd(C),E.iushrn(1);l.cmp(g)>=0?(l.isub(g),k.isub(E)):(g.isub(l),E.isub(k))}var m;return l.cmpn(1)===0?m=k:m=E,m.cmpn(0)<0&&m.iadd(a),m},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),g=a.clone();l.negative=0,g.negative=0;for(var k=0;l.isEven()&&g.isEven();k++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var E=l.cmp(g);if(E<0){var C=l;l=g,g=C}else if(E===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(k)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var l=a%26,g=(a-l)/26,k=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=k,this;for(var E=k,C=g;E!==0&&C<this.length;C++){var N=this.words[C]|0;N+=E,E=N>>>26,N&=67108863,this.words[C]=N}return E!==0&&(this.words[C]=E,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var g;if(this.length>1)g=1;else{l&&(a=-a),r(a<=67108863,"Number is too big");var k=this.words[0]|0;g=k===a?0:k<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var k=this.words[g]|0,E=a.words[g]|0;if(k!==E){k<E?l=-1:k>E&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new T(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var H={k256:null,p224:null,p192:null,p25519:null};function X(y,a){this.name=y,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},X.prototype.ireduce=function(a){var l=a,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var k=g<this.n?-1:l.ucmp(this.p);return k===0?(l.words[0]=0,l.length=1):k>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},X.prototype.split=function(a,l){a.iushrn(this.n,0,l)},X.prototype.imulK=function(a){return a.imul(this.k)};function ot(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ot,X),ot.prototype.split=function(a,l){for(var g=4194303,k=Math.min(a.length,9),E=0;E<k;E++)l.words[E]=a.words[E];if(l.length=k,a.length<=9){a.words[0]=0,a.length=1;return}var C=a.words[9];for(l.words[l.length++]=C&g,E=10;E<a.length;E++){var N=a.words[E]|0;a.words[E-10]=(N&g)<<4|C>>>22,C=N}C>>>=22,a.words[E-10]=C,C===0&&a.length>10?a.length-=10:a.length-=9},ot.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,g=0;g<a.length;g++){var k=a.words[g]|0;l+=k*977,a.words[g]=l&67108863,l=k*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function rt(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(rt,X);function L(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(L,X);function P(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(P,X),P.prototype.imulK=function(a){for(var l=0,g=0;g<a.length;g++){var k=(a.words[g]|0)*19+l,E=k&67108863;k>>>=26,a.words[g]=E,l=k}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(H[a])return H[a];var l;if(a==="k256")l=new ot;else if(a==="p224")l=new rt;else if(a==="p192")l=new L;else if(a==="p25519")l=new P;else throw new Error("Unknown prime "+a);return H[a]=l,l};function T(y){if(typeof y=="string"){var a=i._prime(y);this.m=a.p,this.prime=a}else r(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}T.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},T.prototype._verify2=function(a,l){r((a.negative|l.negative)===0,"red works only with positives"),r(a.red&&a.red===l.red,"red works only with red numbers")},T.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(b(a,a.umod(this.m)._forceRed(this)),a)},T.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},T.prototype.add=function(a,l){this._verify2(a,l);var g=a.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},T.prototype.iadd=function(a,l){this._verify2(a,l);var g=a.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},T.prototype.sub=function(a,l){this._verify2(a,l);var g=a.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},T.prototype.isub=function(a,l){this._verify2(a,l);var g=a.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},T.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},T.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},T.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},T.prototype.isqr=function(a){return this.imul(a,a.clone())},T.prototype.sqr=function(a){return this.mul(a,a)},T.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var k=this.m.subn(1),E=0;!k.isZero()&&k.andln(1)===0;)E++,k.iushrn(1);r(!k.isZero());var C=new i(1).toRed(this),N=C.redNeg(),v=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,v).cmp(N)!==0;)u.redIAdd(N);for(var f=this.pow(u,k),m=this.pow(a,k.addn(1).iushrn(1)),A=this.pow(a,k),K=E;A.cmp(C)!==0;){for(var j=A,at=0;j.cmp(C)!==0;at++)j=j.redSqr();r(at<K);var ut=this.pow(f,new i(1).iushln(K-at-1));m=m.redMul(ut),f=ut.redSqr(),A=A.redMul(f),K=at}return m},T.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},T.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var g=4,k=new Array(1<<g);k[0]=new i(1).toRed(this),k[1]=a;for(var E=2;E<k.length;E++)k[E]=this.mul(k[E-1],a);var C=k[0],N=0,v=0,u=l.bitLength()%26;for(u===0&&(u=26),E=l.length-1;E>=0;E--){for(var f=l.words[E],m=u-1;m>=0;m--){var A=f>>m&1;if(C!==k[0]&&(C=this.sqr(C)),A===0&&N===0){v=0;continue}N<<=1,N|=A,v++,!(v!==g&&(E!==0||m!==0))&&(C=this.mul(C,k[N]),v=0,N=0)}u=26}return C},T.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},T.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new z(a)};function z(y){T.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(z,T),z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},z.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},z.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(l),k=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=g.isub(k).iushrn(this.shift),C=E;return E.cmp(this.m)>=0?C=E.isub(this.m):E.cmpn(0)<0&&(C=E.iadd(this.m)),C._forceRed(this)},z.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var g=a.mul(l),k=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=g.isub(k).iushrn(this.shift),C=E;return E.cmp(this.m)>=0?C=E.isub(this.m):E.cmpn(0)<0&&(C=E.iadd(this.m)),C._forceRed(this)},z.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,Jc)})(an)),an.exports}var Xc=Yo();const qs=bn(Xc);var rn={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ws;function Qc(){return Ws||(Ws=1,(function(n,t){var e=vn(),r=e.Buffer;function s(o,c){for(var d in o)c[d]=o[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,c,d){return r(o,c,d)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,c,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,d)},i.alloc=function(o,c,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var w=r(o);return c!==void 0?typeof d=="string"?w.fill(c,d):w.fill(c):w.fill(0),w},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(rn,rn.exports)),rn.exports}var ui,Hs;function tu(){if(Hs)return ui;Hs=1;var n=Qc().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var d=e.length,w=e.charAt(0),b=Math.log(d)/Math.log(256),_=Math.log(256)/Math.log(d);function U(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=n.from(M)),!n.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var R=0,q=0,$=0,V=M.length;$!==V&&M[$]===0;)$++,R++;for(var et=(V-$)*_+1>>>0,H=new Uint8Array(et);$!==V;){for(var X=M[$],ot=0,rt=et-1;(X!==0||ot<q)&&rt!==-1;rt--,ot++)X+=256*H[rt]>>>0,H[rt]=X%d>>>0,X=X/d>>>0;if(X!==0)throw new Error("Non-zero carry");q=ot,$++}for(var L=et-q;L!==et&&H[L]===0;)L++;for(var P=w.repeat(R);L<et;++L)P+=e.charAt(H[L]);return P}function x(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return n.alloc(0);for(var R=0,q=0,$=0;M[R]===w;)q++,R++;for(var V=(M.length-R)*b+1>>>0,et=new Uint8Array(V);R<M.length;){var H=M.charCodeAt(R);if(H>255)return;var X=r[H];if(X===255)return;for(var ot=0,rt=V-1;(X!==0||ot<$)&&rt!==-1;rt--,ot++)X+=d*et[rt]>>>0,et[rt]=X%256>>>0,X=X/256>>>0;if(X!==0)throw new Error("Non-zero carry");$=ot,R++}for(var L=V-$;L!==V&&et[L]===0;)L++;var P=n.allocUnsafe(q+(V-L));P.fill(0,0,q);for(var T=q;L!==V;)P[T++]=et[L++];return P}function O(M){var R=x(M);if(R)return R;throw new Error("Non-base"+d+" character")}return{encode:U,decodeUnsafe:x,decode:O}}return ui=t,ui}var fi,$s;function Jo(){if($s)return fi;$s=1;var n=tu(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return fi=n(t),fi}var eu=Jo();const he=bn(eu),Vs=Oo;var St={};function qe(n,t,e){return t<=n&&n<=e}function _n(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function ru(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,d=o&1023;s.push(65536+(c<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function nu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var ln=-1;function Gi(n){this.tokens=[].slice.call(n)}Gi.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ln},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var xr=-1;function li(n,t){if(n)throw TypeError("Decoder error");return t||65533}var hn="utf-8";function dn(n,t){if(!(this instanceof dn))return new dn(n,t);if(n=n!==void 0?String(n).toLowerCase():hn,n!==hn)throw new Error("Encoding not supported. Only utf-8 is supported");t=_n(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}dn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=_n(e),this._streaming||(this._decoder=new iu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Gi(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==xr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===xr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),nu(i)}};function pn(n,t){if(!(this instanceof pn))return new pn(n,t);if(n=n!==void 0?String(n).toLowerCase():hn,n!==hn)throw new Error("Encoding not supported. Only utf-8 is supported");t=_n(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}pn.prototype={encode:function(t,e){t=t?String(t):"",e=_n(e),this._streaming||(this._encoder=new su(this._options)),this._streaming=!!e.stream;for(var r=[],s=new Gi(ru(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==xr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==xr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function iu(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(c,d){if(d===ln&&s!==0)return s=0,li(t);if(d===ln)return xr;if(s===0){if(qe(d,0,127))return d;if(qe(d,194,223))s=1,e=d-192;else if(qe(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,e=d-224;else if(qe(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,e=d-240;else return li(t);return e=e<<6*s,null}if(!qe(d,i,o))return e=s=r=0,i=128,o=191,c.prepend(d),li(t);if(i=128,o=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var w=e;return e=s=r=0,w}}function su(n){n.fatal,this.handler=function(t,e){if(e===ln)return xr;if(qe(e,0,127))return e;var r,s;qe(e,128,2047)?(r=1,s=192):qe(e,2048,65535)?(r=2,s=224):qe(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const ou=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:dn,TextEncoder:pn},Symbol.toStringTag,{value:"Module"})),au=Bo(ou);var Gs;function cu(){if(Gs)return St;Gs=1;var n=St&&St.__createBinding||(Object.create?(function(L,P,T,z){z===void 0&&(z=T),Object.defineProperty(L,z,{enumerable:!0,get:function(){return P[T]}})}):(function(L,P,T,z){z===void 0&&(z=T),L[z]=P[T]})),t=St&&St.__setModuleDefault||(Object.create?(function(L,P){Object.defineProperty(L,"default",{enumerable:!0,value:P})}):function(L,P){L.default=P}),e=St&&St.__decorate||function(L,P,T,z){var y=arguments.length,a=y<3?P:z===null?z=Object.getOwnPropertyDescriptor(P,T):z,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(L,P,T,z);else for(var g=L.length-1;g>=0;g--)(l=L[g])&&(a=(y<3?l(a):y>3?l(P,T,a):l(P,T))||a);return y>3&&a&&Object.defineProperty(P,T,a),a},r=St&&St.__importStar||function(L){if(L&&L.__esModule)return L;var P={};if(L!=null)for(var T in L)T!=="default"&&Object.hasOwnProperty.call(L,T)&&n(P,L,T);return t(P,L),P},s=St&&St.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(St,"__esModule",{value:!0}),St.deserializeUnchecked=St.deserialize=St.serialize=St.BinaryReader=St.BinaryWriter=St.BorshError=St.baseDecode=St.baseEncode=void 0;const i=s(Yo()),o=s(Jo()),c=r(au),d=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,w=new d("utf-8",{fatal:!0});function b(L){return typeof L=="string"&&(L=st.Buffer.from(L,"utf8")),o.default.encode(st.Buffer.from(L))}St.baseEncode=b;function _(L){return st.Buffer.from(o.default.decode(L))}St.baseDecode=_;const U=1024;class x extends Error{constructor(P){super(P),this.fieldPath=[],this.originalMessage=P}addToFieldPath(P){this.fieldPath.splice(0,0,P),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}St.BorshError=x;class O{constructor(){this.buf=st.Buffer.alloc(U),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=st.Buffer.concat([this.buf,st.Buffer.alloc(U)]))}writeU8(P){this.maybeResize(),this.buf.writeUInt8(P,this.length),this.length+=1}writeU16(P){this.maybeResize(),this.buf.writeUInt16LE(P,this.length),this.length+=2}writeU32(P){this.maybeResize(),this.buf.writeUInt32LE(P,this.length),this.length+=4}writeU64(P){this.maybeResize(),this.writeBuffer(st.Buffer.from(new i.default(P).toArray("le",8)))}writeU128(P){this.maybeResize(),this.writeBuffer(st.Buffer.from(new i.default(P).toArray("le",16)))}writeU256(P){this.maybeResize(),this.writeBuffer(st.Buffer.from(new i.default(P).toArray("le",32)))}writeU512(P){this.maybeResize(),this.writeBuffer(st.Buffer.from(new i.default(P).toArray("le",64)))}writeBuffer(P){this.buf=st.Buffer.concat([st.Buffer.from(this.buf.subarray(0,this.length)),P,st.Buffer.alloc(U)]),this.length+=P.length}writeString(P){this.maybeResize();const T=st.Buffer.from(P,"utf8");this.writeU32(T.length),this.writeBuffer(T)}writeFixedArray(P){this.writeBuffer(st.Buffer.from(P))}writeArray(P,T){this.maybeResize(),this.writeU32(P.length);for(const z of P)this.maybeResize(),T(z)}toArray(){return this.buf.subarray(0,this.length)}}St.BinaryWriter=O;function M(L,P,T){const z=T.value;T.value=function(...y){try{return z.apply(this,y)}catch(a){if(a instanceof RangeError){const l=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(l)>=0)throw new x("Reached the end of buffer when deserializing")}throw a}}}class R{constructor(P){this.buf=P,this.offset=0}readU8(){const P=this.buf.readUInt8(this.offset);return this.offset+=1,P}readU16(){const P=this.buf.readUInt16LE(this.offset);return this.offset+=2,P}readU32(){const P=this.buf.readUInt32LE(this.offset);return this.offset+=4,P}readU64(){const P=this.readBuffer(8);return new i.default(P,"le")}readU128(){const P=this.readBuffer(16);return new i.default(P,"le")}readU256(){const P=this.readBuffer(32);return new i.default(P,"le")}readU512(){const P=this.readBuffer(64);return new i.default(P,"le")}readBuffer(P){if(this.offset+P>this.buf.length)throw new x(`Expected buffer length ${P} isn't within bounds`);const T=this.buf.slice(this.offset,this.offset+P);return this.offset+=P,T}readString(){const P=this.readU32(),T=this.readBuffer(P);try{return w.decode(T)}catch(z){throw new x(`Error decoding UTF-8 string: ${z}`)}}readFixedArray(P){return new Uint8Array(this.readBuffer(P))}readArray(P){const T=this.readU32(),z=Array();for(let y=0;y<T;++y)z.push(P());return z}}e([M],R.prototype,"readU8",null),e([M],R.prototype,"readU16",null),e([M],R.prototype,"readU32",null),e([M],R.prototype,"readU64",null),e([M],R.prototype,"readU128",null),e([M],R.prototype,"readU256",null),e([M],R.prototype,"readU512",null),e([M],R.prototype,"readString",null),e([M],R.prototype,"readFixedArray",null),e([M],R.prototype,"readArray",null),St.BinaryReader=R;function q(L){return L.charAt(0).toUpperCase()+L.slice(1)}function $(L,P,T,z,y){try{if(typeof z=="string")y[`write${q(z)}`](T);else if(z instanceof Array)if(typeof z[0]=="number"){if(T.length!==z[0])throw new x(`Expecting byte array of length ${z[0]}, but got ${T.length} bytes`);y.writeFixedArray(T)}else if(z.length===2&&typeof z[1]=="number"){if(T.length!==z[1])throw new x(`Expecting byte array of length ${z[1]}, but got ${T.length} bytes`);for(let a=0;a<z[1];a++)$(L,null,T[a],z[0],y)}else y.writeArray(T,a=>{$(L,P,a,z[0],y)});else if(z.kind!==void 0)switch(z.kind){case"option":{T==null?y.writeU8(0):(y.writeU8(1),$(L,P,T,z.type,y));break}case"map":{y.writeU32(T.size),T.forEach((a,l)=>{$(L,P,l,z.key,y),$(L,P,a,z.value,y)});break}default:throw new x(`FieldType ${z} unrecognized`)}else V(L,T,y)}catch(a){throw a instanceof x&&a.addToFieldPath(P),a}}function V(L,P,T){if(typeof P.borshSerialize=="function"){P.borshSerialize(T);return}const z=L.get(P.constructor);if(!z)throw new x(`Class ${P.constructor.name} is missing in schema`);if(z.kind==="struct")z.fields.map(([y,a])=>{$(L,y,P[y],a,T)});else if(z.kind==="enum"){const y=P[z.field];for(let a=0;a<z.values.length;++a){const[l,g]=z.values[a];if(l===y){T.writeU8(a),$(L,l,P[l],g,T);break}}}else throw new x(`Unexpected schema kind: ${z.kind} for ${P.constructor.name}`)}function et(L,P,T=O){const z=new T;return V(L,P,z),z.toArray()}St.serialize=et;function H(L,P,T,z){try{if(typeof T=="string")return z[`read${q(T)}`]();if(T instanceof Array){if(typeof T[0]=="number")return z.readFixedArray(T[0]);if(typeof T[1]=="number"){const y=[];for(let a=0;a<T[1];a++)y.push(H(L,null,T[0],z));return y}else return z.readArray(()=>H(L,P,T[0],z))}if(T.kind==="option")return z.readU8()?H(L,P,T.type,z):void 0;if(T.kind==="map"){let y=new Map;const a=z.readU32();for(let l=0;l<a;l++){const g=H(L,P,T.key,z),k=H(L,P,T.value,z);y.set(g,k)}return y}return X(L,T,z)}catch(y){throw y instanceof x&&y.addToFieldPath(P),y}}function X(L,P,T){if(typeof P.borshDeserialize=="function")return P.borshDeserialize(T);const z=L.get(P);if(!z)throw new x(`Class ${P.name} is missing in schema`);if(z.kind==="struct"){const y={};for(const[a,l]of L.get(P).fields)y[a]=H(L,a,l,T);return new P(y)}if(z.kind==="enum"){const y=T.readU8();if(y>=z.values.length)throw new x(`Enum index: ${y} is out of range`);const[a,l]=z.values[y],g=H(L,a,l,T);return new P({[a]:g})}throw new x(`Unexpected schema kind: ${z.kind} for ${P.constructor.name}`)}function ot(L,P,T,z=R){const y=new z(T),a=X(L,P,y);if(y.offset<T.length)throw new x(`Unexpected ${T.length-y.offset} bytes after deserialized data`);return a}St.deserialize=ot;function rt(L,P,T,z=R){const y=new z(T);return X(L,P,y)}return St.deserializeUnchecked=rt,St}var hi=cu(),W={},js;function uu(){if(js)return W;js=1,Object.defineProperty(W,"__esModule",{value:!0}),W.s16=W.s8=W.nu64be=W.u48be=W.u40be=W.u32be=W.u24be=W.u16be=W.nu64=W.u48=W.u40=W.u32=W.u24=W.u16=W.u8=W.offset=W.greedy=W.Constant=W.UTF8=W.CString=W.Blob=W.Boolean=W.BitField=W.BitStructure=W.VariantLayout=W.Union=W.UnionLayoutDiscriminator=W.UnionDiscriminator=W.Structure=W.Sequence=W.DoubleBE=W.Double=W.FloatBE=W.Float=W.NearInt64BE=W.NearInt64=W.NearUInt64BE=W.NearUInt64=W.IntBE=W.Int=W.UIntBE=W.UInt=W.OffsetLayout=W.GreedyCount=W.ExternalLayout=W.bindConstructorLayout=W.nameWithProperty=W.Layout=W.uint8ArrayToBuffer=W.checkUint8Array=void 0,W.constant=W.utf8=W.cstr=W.blob=W.unionLayoutDiscriminator=W.union=W.seq=W.bits=W.struct=W.f64be=W.f64=W.f32be=W.f32=W.ns64be=W.s48be=W.s40be=W.s32be=W.s24be=W.s16be=W.ns64=W.s48=W.s40=W.s32=W.s24=void 0;const n=vn();function t(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}W.checkUint8Array=t;function e(u){return t(u),n.Buffer.from(u.buffer,u.byteOffset,u.length)}W.uint8ArrayToBuffer=e;let r=class{constructor(f,m){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=m}makeDestinationObject(){return{}}getSpan(f,m){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const m=Object.create(this.constructor.prototype);return Object.assign(m,this),m.property=f,m}fromArray(f){}};W.Layout=r;function s(u,f){return f.property?u+"["+f.property+"]":u}W.nameWithProperty=s;function i(u,f){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=f,f.boundConstructor_=u,f.makeDestinationObject=(()=>new u),Object.defineProperty(u.prototype,"encode",{value(m,A){return f.encode(this,m,A)},writable:!0}),Object.defineProperty(u,"decode",{value(m,A){return f.decode(m,A)},writable:!0})}W.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}W.ExternalLayout=o;class c extends o{constructor(f=1,m){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,m),this.elementSpan=f}isCount(){return!0}decode(f,m=0){t(f);const A=f.length-m;return Math.floor(A/this.elementSpan)}encode(f,m,A){return 0}}W.GreedyCount=c;class d extends o{constructor(f,m=0,A){if(!(f instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(m))throw new TypeError("offset must be integer or undefined");super(f.span,A||f.property),this.layout=f,this.offset=m}isCount(){return this.layout instanceof w||this.layout instanceof b}decode(f,m=0){return this.layout.decode(f,m+this.offset)}encode(f,m,A=0){return this.layout.encode(f,m,A+this.offset)}}W.OffsetLayout=d;class w extends r{constructor(f,m){if(super(f,m),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,m=0){return e(f).readUIntLE(m,this.span)}encode(f,m,A=0){return e(m).writeUIntLE(f,A,this.span),this.span}}W.UInt=w;class b extends r{constructor(f,m){if(super(f,m),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,m=0){return e(f).readUIntBE(m,this.span)}encode(f,m,A=0){return e(m).writeUIntBE(f,A,this.span),this.span}}W.UIntBE=b;class _ extends r{constructor(f,m){if(super(f,m),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,m=0){return e(f).readIntLE(m,this.span)}encode(f,m,A=0){return e(m).writeIntLE(f,A,this.span),this.span}}W.Int=_;class U extends r{constructor(f,m){if(super(f,m),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,m=0){return e(f).readIntBE(m,this.span)}encode(f,m,A=0){return e(m).writeIntBE(f,A,this.span),this.span}}W.IntBE=U;const x=Math.pow(2,32);function O(u){const f=Math.floor(u/x),m=u-f*x;return{hi32:f,lo32:m}}function M(u,f){return u*x+f}class R extends r{constructor(f){super(8,f)}decode(f,m=0){const A=e(f),K=A.readUInt32LE(m),j=A.readUInt32LE(m+4);return M(j,K)}encode(f,m,A=0){const K=O(f),j=e(m);return j.writeUInt32LE(K.lo32,A),j.writeUInt32LE(K.hi32,A+4),8}}W.NearUInt64=R;class q extends r{constructor(f){super(8,f)}decode(f,m=0){const A=e(f),K=A.readUInt32BE(m),j=A.readUInt32BE(m+4);return M(K,j)}encode(f,m,A=0){const K=O(f),j=e(m);return j.writeUInt32BE(K.hi32,A),j.writeUInt32BE(K.lo32,A+4),8}}W.NearUInt64BE=q;class $ extends r{constructor(f){super(8,f)}decode(f,m=0){const A=e(f),K=A.readUInt32LE(m),j=A.readInt32LE(m+4);return M(j,K)}encode(f,m,A=0){const K=O(f),j=e(m);return j.writeUInt32LE(K.lo32,A),j.writeInt32LE(K.hi32,A+4),8}}W.NearInt64=$;class V extends r{constructor(f){super(8,f)}decode(f,m=0){const A=e(f),K=A.readInt32BE(m),j=A.readUInt32BE(m+4);return M(K,j)}encode(f,m,A=0){const K=O(f),j=e(m);return j.writeInt32BE(K.hi32,A),j.writeUInt32BE(K.lo32,A+4),8}}W.NearInt64BE=V;class et extends r{constructor(f){super(4,f)}decode(f,m=0){return e(f).readFloatLE(m)}encode(f,m,A=0){return e(m).writeFloatLE(f,A),4}}W.Float=et;class H extends r{constructor(f){super(4,f)}decode(f,m=0){return e(f).readFloatBE(m)}encode(f,m,A=0){return e(m).writeFloatBE(f,A),4}}W.FloatBE=H;class X extends r{constructor(f){super(8,f)}decode(f,m=0){return e(f).readDoubleLE(m)}encode(f,m,A=0){return e(m).writeDoubleLE(f,A),8}}W.Double=X;class ot extends r{constructor(f){super(8,f)}decode(f,m=0){return e(f).readDoubleBE(m)}encode(f,m,A=0){return e(m).writeDoubleBE(f,A),8}}W.DoubleBE=ot;class rt extends r{constructor(f,m,A){if(!(f instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(m instanceof o&&m.isCount()||Number.isInteger(m)&&0<=m))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let K=-1;!(m instanceof o)&&0<f.span&&(K=m*f.span),super(K,A),this.elementLayout=f,this.count=m}getSpan(f,m=0){if(0<=this.span)return this.span;let A=0,K=this.count;if(K instanceof o&&(K=K.decode(f,m)),0<this.elementLayout.span)A=K*this.elementLayout.span;else{let j=0;for(;j<K;)A+=this.elementLayout.getSpan(f,m+A),++j}return A}decode(f,m=0){const A=[];let K=0,j=this.count;for(j instanceof o&&(j=j.decode(f,m));K<j;)A.push(this.elementLayout.decode(f,m)),m+=this.elementLayout.getSpan(f,m),K+=1;return A}encode(f,m,A=0){const K=this.elementLayout,j=f.reduce((at,ut)=>at+K.encode(ut,m,A+at),0);return this.count instanceof o&&this.count.encode(f.length,m,A),j}}W.Sequence=rt;class L extends r{constructor(f,m,A){if(!(Array.isArray(f)&&f.reduce((j,at)=>j&&at instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof m=="boolean"&&A===void 0&&(A=m,m=void 0);for(const j of f)if(0>j.span&&j.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let K=-1;try{K=f.reduce((j,at)=>j+at.getSpan(),0)}catch{}super(K,m),this.fields=f,this.decodePrefixes=!!A}getSpan(f,m=0){if(0<=this.span)return this.span;let A=0;try{A=this.fields.reduce((K,j)=>{const at=j.getSpan(f,m);return m+=at,K+at},0)}catch{throw new RangeError("indeterminate span")}return A}decode(f,m=0){t(f);const A=this.makeDestinationObject();for(const K of this.fields)if(K.property!==void 0&&(A[K.property]=K.decode(f,m)),m+=K.getSpan(f,m),this.decodePrefixes&&f.length===m)break;return A}encode(f,m,A=0){const K=A;let j=0,at=0;for(const ut of this.fields){let ue=ut.span;if(at=0<ue?ue:0,ut.property!==void 0){const bt=f[ut.property];bt!==void 0&&(at=ut.encode(bt,m,A),0>ue&&(ue=ut.getSpan(m,A)))}j=A,A+=ue}return j+at-K}fromArray(f){const m=this.makeDestinationObject();for(const A of this.fields)A.property!==void 0&&0<f.length&&(m[A.property]=f.shift());return m}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const m of this.fields)if(m.property===f)return m}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let m=0;for(const A of this.fields){if(A.property===f)return m;0>A.span?m=-1:0<=m&&(m+=A.span)}}}W.Structure=L;class P{constructor(f){this.property=f}decode(f,m){throw new Error("UnionDiscriminator is abstract")}encode(f,m,A){throw new Error("UnionDiscriminator is abstract")}}W.UnionDiscriminator=P;class T extends P{constructor(f,m){if(!(f instanceof o&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(m||f.property||"variant"),this.layout=f}decode(f,m){return this.layout.decode(f,m)}encode(f,m,A){return this.layout.encode(f,m,A)}}W.UnionLayoutDiscriminator=T;class z extends r{constructor(f,m,A){let K;if(f instanceof w||f instanceof b)K=new T(new d(f));else if(f instanceof o&&f.isCount())K=new T(f);else if(f instanceof P)K=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(m===void 0&&(m=null),!(m===null||m instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(m!==null){if(0>m.span)throw new Error("defaultLayout must have constant span");m.property===void 0&&(m=m.replicate("content"))}let j=-1;m&&(j=m.span,0<=j&&(f instanceof w||f instanceof b)&&(j+=K.layout.span)),super(j,A),this.discriminator=K,this.usesPrefixDiscriminator=f instanceof w||f instanceof b,this.defaultLayout=m,this.registry={};let at=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ut){return at(ut)},this.configGetSourceVariant=function(ut){at=ut.bind(this)}}getSpan(f,m=0){if(0<=this.span)return this.span;const A=this.getVariant(f,m);if(!A)throw new Error("unable to determine span for unrecognized variant");return A.getSpan(f,m)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const m=this.registry[f[this.discriminator.property]];if(m&&(!m.layout||m.property&&Object.prototype.hasOwnProperty.call(f,m.property)))return m}else for(const m in this.registry){const A=this.registry[m];if(A.property&&Object.prototype.hasOwnProperty.call(f,A.property))return A}throw new Error("unable to infer src variant")}decode(f,m=0){let A;const K=this.discriminator,j=K.decode(f,m),at=this.registry[j];if(at===void 0){const ut=this.defaultLayout;let ue=0;this.usesPrefixDiscriminator&&(ue=K.layout.span),A=this.makeDestinationObject(),A[K.property]=j,A[ut.property]=ut.decode(f,m+ue)}else A=at.decode(f,m);return A}encode(f,m,A=0){const K=this.getSourceVariant(f);if(K===void 0){const j=this.discriminator,at=this.defaultLayout;let ut=0;return this.usesPrefixDiscriminator&&(ut=j.layout.span),j.encode(f[j.property],m,A),ut+at.encode(f[at.property],m,A+ut)}return K.encode(f,m,A)}addVariant(f,m,A){const K=new y(this,f,m,A);return this.registry[f]=K,K}getVariant(f,m=0){let A;return f instanceof Uint8Array?A=this.discriminator.decode(f,m):A=f,this.registry[A]}}W.Union=z;class y extends r{constructor(f,m,A,K){if(!(f instanceof z))throw new TypeError("union must be a Union");if(!Number.isInteger(m)||0>m)throw new TypeError("variant must be a (non-negative) integer");if(typeof A=="string"&&K===void 0&&(K=A,A=null),A){if(!(A instanceof r))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=A.span&&A.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof K!="string")throw new TypeError("variant must have a String property")}let j=f.span;0>f.span&&(j=A?A.span:0,0<=j&&f.usesPrefixDiscriminator&&(j+=f.discriminator.layout.span)),super(j,K),this.union=f,this.variant=m,this.layout=A||null}getSpan(f,m=0){if(0<=this.span)return this.span;let A=0;this.union.usesPrefixDiscriminator&&(A=this.union.discriminator.layout.span);let K=0;return this.layout&&(K=this.layout.getSpan(f,m+A)),A+K}decode(f,m=0){const A=this.makeDestinationObject();if(this!==this.union.getVariant(f,m))throw new Error("variant mismatch");let K=0;return this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span),this.layout?A[this.property]=this.layout.decode(f,m+K):this.property?A[this.property]=!0:this.union.usesPrefixDiscriminator&&(A[this.union.discriminator.property]=this.variant),A}encode(f,m,A=0){let K=0;if(this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,m,A);let j=K;if(this.layout&&(this.layout.encode(f[this.property],m,A+K),j+=this.layout.getSpan(m,A+K),0<=this.union.span&&j>this.union.span))throw new Error("encoded variant overruns containing union");return j}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}W.VariantLayout=y;function a(u){return 0>u&&(u+=4294967296),u}class l extends r{constructor(f,m,A){if(!(f instanceof w||f instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof m=="string"&&A===void 0&&(A=m,m=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,A),this.word=f,this.msb=!!m,this.fields=[];let K=0;this._packedSetValue=function(j){return K=a(j),this},this._packedGetValue=function(){return K}}decode(f,m=0){const A=this.makeDestinationObject(),K=this.word.decode(f,m);this._packedSetValue(K);for(const j of this.fields)j.property!==void 0&&(A[j.property]=j.decode(f));return A}encode(f,m,A=0){const K=this.word.decode(m,A);this._packedSetValue(K);for(const j of this.fields)if(j.property!==void 0){const at=f[j.property];at!==void 0&&j.encode(at)}return this.word.encode(this._packedGetValue(),m,A)}addField(f,m){const A=new g(this,f,m);return this.fields.push(A),A}addBoolean(f){const m=new k(this,f);return this.fields.push(m),m}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const m of this.fields)if(m.property===f)return m}}W.BitStructure=l;class g{constructor(f,m,A){if(!(f instanceof l))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(m)||0>=m)throw new TypeError("bits must be positive integer");const K=8*f.span,j=f.fields.reduce((at,ut)=>at+ut.bits,0);if(m+j>K)throw new Error("bits too long for span remainder ("+(K-j)+" of "+K+" remain)");this.container=f,this.bits=m,this.valueMask=(1<<m)-1,m===32&&(this.valueMask=4294967295),this.start=j,this.container.msb&&(this.start=K-j-m),this.wordMask=a(this.valueMask<<this.start),this.property=A}decode(f,m){const A=this.container._packedGetValue();return a(A&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==a(f&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const m=this.container._packedGetValue(),A=a(f<<this.start);this.container._packedSetValue(a(m&~this.wordMask)|A)}}W.BitField=g;class k extends g{constructor(f,m){super(f,1,m)}decode(f,m){return!!super.decode(f,m)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}W.Boolean=k;class E extends r{constructor(f,m){if(!(f instanceof o&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let A=-1;f instanceof o||(A=f),super(A,m),this.length=f}getSpan(f,m){let A=this.span;return 0>A&&(A=this.length.decode(f,m)),A}decode(f,m=0){let A=this.span;return 0>A&&(A=this.length.decode(f,m)),e(f).slice(m,m+A)}encode(f,m,A){let K=this.length;if(this.length instanceof o&&(K=f.length),!(f instanceof Uint8Array&&K===f.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+K+") Uint8Array as src");if(A+K>m.length)throw new RangeError("encoding overruns Uint8Array");const j=e(f);return e(m).write(j.toString("hex"),A,K,"hex"),this.length instanceof o&&this.length.encode(K,m,A),K}}W.Blob=E;class C extends r{constructor(f){super(-1,f)}getSpan(f,m=0){t(f);let A=m;for(;A<f.length&&f[A]!==0;)A+=1;return 1+A-m}decode(f,m=0){const A=this.getSpan(f,m);return e(f).slice(m,m+A-1).toString("utf-8")}encode(f,m,A=0){typeof f!="string"&&(f=String(f));const K=n.Buffer.from(f,"utf8"),j=K.length;if(A+j>m.length)throw new RangeError("encoding overruns Buffer");const at=e(m);return K.copy(at,A),at[A+j]=0,j+1}}W.CString=C;class N extends r{constructor(f,m){if(typeof f=="string"&&m===void 0&&(m=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,m),this.maxSpan=f}getSpan(f,m=0){return t(f),f.length-m}decode(f,m=0){const A=this.getSpan(f,m);if(0<=this.maxSpan&&this.maxSpan<A)throw new RangeError("text length exceeds maxSpan");return e(f).slice(m,m+A).toString("utf-8")}encode(f,m,A=0){typeof f!="string"&&(f=String(f));const K=n.Buffer.from(f,"utf8"),j=K.length;if(0<=this.maxSpan&&this.maxSpan<j)throw new RangeError("text length exceeds maxSpan");if(A+j>m.length)throw new RangeError("encoding overruns Buffer");return K.copy(e(m),A),j}}W.UTF8=N;class v extends r{constructor(f,m){super(0,m),this.value=f}decode(f,m){return this.value}encode(f,m,A){return 0}}return W.Constant=v,W.greedy=((u,f)=>new c(u,f)),W.offset=((u,f,m)=>new d(u,f,m)),W.u8=(u=>new w(1,u)),W.u16=(u=>new w(2,u)),W.u24=(u=>new w(3,u)),W.u32=(u=>new w(4,u)),W.u40=(u=>new w(5,u)),W.u48=(u=>new w(6,u)),W.nu64=(u=>new R(u)),W.u16be=(u=>new b(2,u)),W.u24be=(u=>new b(3,u)),W.u32be=(u=>new b(4,u)),W.u40be=(u=>new b(5,u)),W.u48be=(u=>new b(6,u)),W.nu64be=(u=>new q(u)),W.s8=(u=>new _(1,u)),W.s16=(u=>new _(2,u)),W.s24=(u=>new _(3,u)),W.s32=(u=>new _(4,u)),W.s40=(u=>new _(5,u)),W.s48=(u=>new _(6,u)),W.ns64=(u=>new $(u)),W.s16be=(u=>new U(2,u)),W.s24be=(u=>new U(3,u)),W.s32be=(u=>new U(4,u)),W.s40be=(u=>new U(5,u)),W.s48be=(u=>new U(6,u)),W.ns64be=(u=>new V(u)),W.f32=(u=>new et(u)),W.f32be=(u=>new H(u)),W.f64=(u=>new X(u)),W.f64be=(u=>new ot(u)),W.struct=((u,f,m)=>new L(u,f,m)),W.bits=((u,f,m)=>new l(u,f,m)),W.seq=((u,f,m)=>new rt(u,f,m)),W.union=((u,f,m)=>new z(u,f,m)),W.unionLayoutDiscriminator=((u,f)=>new T(u,f)),W.blob=((u,f)=>new E(u,f)),W.cstr=(u=>new C(u)),W.utf8=((u,f)=>new N(u,f)),W.constant=((u,f)=>new v(u,f)),W}var I=uu(),fu=8078e3,lu=8078001,hu=8078004,du=8078005,pu=8078006,gu=8078011;function Xo(n){return Array.isArray(n)?"%5B"+n.map(Xo).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function yu([n,t]){return`${n}=${Xo(t)}`}function mu(n){const t=Object.entries(n).map(yu).join("&");return btoa(t)}function wu(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${mu(t)}'`),`${e}\``}}var yr=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...o}=t;i&&(r={cause:i}),Object.keys(o).length>0&&(e=o)}const s=wu(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function bu(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function vu(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(bu(t,n));return n.write(t,e,0),e}})}function ku(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function dr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function xu(n,t){if(dr(n)!==dr(t))throw new yr(hu);if(dr(n)&&dr(t)&&n.fixedSize!==t.fixedSize)throw new yr(du,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!dr(n)&&!dr(t)&&n.maxSize!==t.maxSize)throw new yr(pu,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Su(n,t,e=0){if(t.length-e<=0)throw new yr(fu,{codecDescription:n})}function Eu(n,t,e,r=0){const s=e.length-r;if(s<t)throw new yr(lu,{bytesLength:s,codecDescription:n,expected:t})}function Au(n,t,e,r){if(r<t||r>e)throw new yr(gu,{codecDescription:n,max:e,min:t,value:r})}function Qo(n){return n?.endian!==1}function _u(n){return vu({fixedSize:n.size,write(t,e,r){n.range&&Au(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,Qo(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function Iu(n){return ku({fixedSize:n.size,read(t,e=0){Su(n.name,t,e),Eu(n.name,n.size,t,e);const r=new DataView(Bu(t,e,n.size));return[n.get(r,Qo(n.config)),e+n.size]}})}function Bu(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var ta=(n={})=>_u({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),Ru=(n={})=>Iu({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Mu=(n={})=>xu(ta(n),Ru(n));class Pu extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:c}=t,d=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Tu(n){return Vr(n)&&typeof n[Symbol.iterator]=="function"}function Vr(n){return typeof n=="object"&&n!=null}function gn(n){return Vr(n)&&!Array.isArray(n)}function Ie(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Lu(n){const{done:t,value:e}=n.next();return t?void 0:e}function Cu(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:d=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${Ie(r)}\``}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*Zs(n,t,e,r){Tu(n)||(n=[n]);for(const s of n){const i=Cu(s,t,e,r);i&&(yield i)}}function*ji(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s,mask:o};i&&(n=t.coercer(n,c));let d="valid";for(const w of t.validator(n,c))w.explanation=e.message,d="not_valid",yield[w,void 0];for(let[w,b,_]of t.entries(n,c)){const U=ji(b,_,{path:w===void 0?r:[...r,w],branch:w===void 0?s:[...s,b],coerce:i,mask:o,message:e.message});for(const x of U)x[0]?(d=x[0].refinement!=null?"not_refined":"not_valid",yield[x[0],void 0]):i&&(b=x[1],w===void 0?n=b:n instanceof Map?n.set(w,b):n instanceof Set?n.add(b):Vr(n)&&(b!==void 0||w in n)&&(n[w]=b))}if(d!=="not_valid")for(const w of t.refiner(n,c))w.explanation=e.message,d="not_refined",yield[w,void 0];d==="valid"&&(yield[void 0,n])}let Ne=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(d,w)=>{const b=s(d,w);return Zs(b,w,this,d)}:this.validator=()=>[],i?this.refiner=(d,w)=>{const b=i(d,w);return Zs(b,w,this,d)}:this.refiner=()=>[]}assert(t,e){return ea(t,this,e)}create(t,e){return tt(t,this,e)}is(t){return ra(t,this)}mask(t,e){return Ou(t,this,e)}validate(t,e={}){return Gr(t,this,e)}};function ea(n,t,e){const r=Gr(n,t,{message:e});if(r[0])throw r[0]}function tt(n,t,e){const r=Gr(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Ou(n,t,e){const r=Gr(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function ra(n,t){return!Gr(n,t)[0]}function Gr(n,t,e={}){const r=ji(n,t,e),s=Lu(r);return s[0]?[new Pu(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function ar(n,t){return new Ne({type:n,schema:null,validator:t})}function Uu(){return ar("any",()=>!0)}function nt(n){return new Ne({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ie(t)}`}})}function Ue(){return ar("boolean",n=>typeof n=="boolean")}function Zi(n){return ar("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ie(t)}`)}function Tt(n){const t=Ie(n),e=typeof n;return new Ne({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ie(r)}`}})}function Nu(){return ar("never",()=>!1)}function it(n){return new Ne({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function D(){return ar("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ie(n)}`)}function lt(n){return new Ne({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function na(n,t){return new Ne({type:"record",schema:null,*entries(e){if(Vr(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return gn(e)||`Expected an object, but received: ${Ie(e)}`},coercer(e){return gn(e)?{...e}:e}})}function Q(){return ar("string",n=>typeof n=="string"||`Expected a string, but received: ${Ie(n)}`)}function Yi(n){const t=Nu();return new Ne({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ie(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Z(n){const t=Object.keys(n);return new Ne({type:"type",schema:n,*entries(e){if(Vr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return gn(e)||`Expected an object, but received: ${Ie(e)}`},coercer(e){return gn(e)?{...e}:e}})}function ve(n){const t=n.map(e=>e.type).join(" | ");return new Ne({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=ji(e,i,r),[c]=o;if(c[0])for(const[d]of o)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ie(e)}`,...s]}})}function Ir(){return ar("unknown",()=>!0)}function jr(n,t,e){return new Ne({...n,coercer:(r,s)=>ra(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var nn,zu=new Uint8Array(16);function ia(){if(!nn&&(nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nn(zu)}const Fu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function In(n){return typeof n=="string"&&Fu.test(n)}var fe=[];for(var di=0;di<256;++di)fe.push((di+256).toString(16).substr(1));function Bn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(fe[n[t+0]]+fe[n[t+1]]+fe[n[t+2]]+fe[n[t+3]]+"-"+fe[n[t+4]]+fe[n[t+5]]+"-"+fe[n[t+6]]+fe[n[t+7]]+"-"+fe[n[t+8]]+fe[n[t+9]]+"-"+fe[n[t+10]]+fe[n[t+11]]+fe[n[t+12]]+fe[n[t+13]]+fe[n[t+14]]+fe[n[t+15]]).toLowerCase();if(!In(e))throw TypeError("Stringified UUID is invalid");return e}var Ys,pi,gi=0,yi=0;function Ku(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||Ys,o=n.clockseq!==void 0?n.clockseq:pi;if(i==null||o==null){var c=n.random||(n.rng||ia)();i==null&&(i=Ys=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=pi=(c[6]<<8|c[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),w=n.nsecs!==void 0?n.nsecs:yi+1,b=d-gi+(w-yi)/1e4;if(b<0&&n.clockseq===void 0&&(o=o+1&16383),(b<0||d>gi)&&n.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");gi=d,yi=w,pi=o,d+=122192928e5;var _=((d&268435455)*1e4+w)%4294967296;s[r++]=_>>>24&255,s[r++]=_>>>16&255,s[r++]=_>>>8&255,s[r++]=_&255;var U=d/4294967296*1e4&268435455;s[r++]=U>>>8&255,s[r++]=U&255,s[r++]=U>>>24&15|16,s[r++]=U>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var x=0;x<6;++x)s[r+x]=i[x];return t||Bn(s)}function sa(n){if(!In(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Du(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var qu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Wu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function oa(n,t,e){function r(s,i,o,c){if(typeof s=="string"&&(s=Du(s)),typeof i=="string"&&(i=sa(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(var w=0;w<16;++w)o[c+w]=d[w];return o}return Bn(d)}try{r.name=n}catch{}return r.DNS=qu,r.URL=Wu,r}function Hu(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return $u(Vu(Gu(n),n.length*8))}function $u(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function aa(n){return(n+64>>>9<<4)+14+1}function Vu(n,t){n[t>>5]|=128<<t%32,n[aa(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=e,d=r,w=s,b=i;e=ge(e,r,s,i,n[o],7,-680876936),i=ge(i,e,r,s,n[o+1],12,-389564586),s=ge(s,i,e,r,n[o+2],17,606105819),r=ge(r,s,i,e,n[o+3],22,-1044525330),e=ge(e,r,s,i,n[o+4],7,-176418897),i=ge(i,e,r,s,n[o+5],12,1200080426),s=ge(s,i,e,r,n[o+6],17,-1473231341),r=ge(r,s,i,e,n[o+7],22,-45705983),e=ge(e,r,s,i,n[o+8],7,1770035416),i=ge(i,e,r,s,n[o+9],12,-1958414417),s=ge(s,i,e,r,n[o+10],17,-42063),r=ge(r,s,i,e,n[o+11],22,-1990404162),e=ge(e,r,s,i,n[o+12],7,1804603682),i=ge(i,e,r,s,n[o+13],12,-40341101),s=ge(s,i,e,r,n[o+14],17,-1502002290),r=ge(r,s,i,e,n[o+15],22,1236535329),e=ye(e,r,s,i,n[o+1],5,-165796510),i=ye(i,e,r,s,n[o+6],9,-1069501632),s=ye(s,i,e,r,n[o+11],14,643717713),r=ye(r,s,i,e,n[o],20,-373897302),e=ye(e,r,s,i,n[o+5],5,-701558691),i=ye(i,e,r,s,n[o+10],9,38016083),s=ye(s,i,e,r,n[o+15],14,-660478335),r=ye(r,s,i,e,n[o+4],20,-405537848),e=ye(e,r,s,i,n[o+9],5,568446438),i=ye(i,e,r,s,n[o+14],9,-1019803690),s=ye(s,i,e,r,n[o+3],14,-187363961),r=ye(r,s,i,e,n[o+8],20,1163531501),e=ye(e,r,s,i,n[o+13],5,-1444681467),i=ye(i,e,r,s,n[o+2],9,-51403784),s=ye(s,i,e,r,n[o+7],14,1735328473),r=ye(r,s,i,e,n[o+12],20,-1926607734),e=me(e,r,s,i,n[o+5],4,-378558),i=me(i,e,r,s,n[o+8],11,-2022574463),s=me(s,i,e,r,n[o+11],16,1839030562),r=me(r,s,i,e,n[o+14],23,-35309556),e=me(e,r,s,i,n[o+1],4,-1530992060),i=me(i,e,r,s,n[o+4],11,1272893353),s=me(s,i,e,r,n[o+7],16,-155497632),r=me(r,s,i,e,n[o+10],23,-1094730640),e=me(e,r,s,i,n[o+13],4,681279174),i=me(i,e,r,s,n[o],11,-358537222),s=me(s,i,e,r,n[o+3],16,-722521979),r=me(r,s,i,e,n[o+6],23,76029189),e=me(e,r,s,i,n[o+9],4,-640364487),i=me(i,e,r,s,n[o+12],11,-421815835),s=me(s,i,e,r,n[o+15],16,530742520),r=me(r,s,i,e,n[o+2],23,-995338651),e=we(e,r,s,i,n[o],6,-198630844),i=we(i,e,r,s,n[o+7],10,1126891415),s=we(s,i,e,r,n[o+14],15,-1416354905),r=we(r,s,i,e,n[o+5],21,-57434055),e=we(e,r,s,i,n[o+12],6,1700485571),i=we(i,e,r,s,n[o+3],10,-1894986606),s=we(s,i,e,r,n[o+10],15,-1051523),r=we(r,s,i,e,n[o+1],21,-2054922799),e=we(e,r,s,i,n[o+8],6,1873313359),i=we(i,e,r,s,n[o+15],10,-30611744),s=we(s,i,e,r,n[o+6],15,-1560198380),r=we(r,s,i,e,n[o+13],21,1309151649),e=we(e,r,s,i,n[o+4],6,-145523070),i=we(i,e,r,s,n[o+11],10,-1120210379),s=we(s,i,e,r,n[o+2],15,718787259),r=we(r,s,i,e,n[o+9],21,-343485551),e=Ze(e,c),r=Ze(r,d),s=Ze(s,w),i=Ze(i,b)}return[e,r,s,i]}function Gu(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(aa(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Ze(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function ju(n,t){return n<<t|n>>>32-t}function Rn(n,t,e,r,s,i){return Ze(ju(Ze(Ze(t,n),Ze(r,i)),s),e)}function ge(n,t,e,r,s,i,o){return Rn(t&e|~t&r,n,t,s,i,o)}function ye(n,t,e,r,s,i,o){return Rn(t&r|e&~r,n,t,s,i,o)}function me(n,t,e,r,s,i,o){return Rn(t^e^r,n,t,s,i,o)}function we(n,t,e,r,s,i,o){return Rn(e^(t|~r),n,t,s,i,o)}var Zu=oa("v3",48,Hu);function Yu(n,t,e){n=n||{};var r=n.random||(n.rng||ia)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Bn(r)}function Ju(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function mi(n,t){return n<<t|n>>>32-t}function Xu(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),d=0;d<o;++d){for(var w=new Uint32Array(16),b=0;b<16;++b)w[b]=n[d*64+b*4]<<24|n[d*64+b*4+1]<<16|n[d*64+b*4+2]<<8|n[d*64+b*4+3];c[d]=w}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var _=0;_<o;++_){for(var U=new Uint32Array(80),x=0;x<16;++x)U[x]=c[_][x];for(var O=16;O<80;++O)U[O]=mi(U[O-3]^U[O-8]^U[O-14]^U[O-16],1);for(var M=e[0],R=e[1],q=e[2],$=e[3],V=e[4],et=0;et<80;++et){var H=Math.floor(et/20),X=mi(M,5)+Ju(H,R,q,$)+V+t[H]+U[et]>>>0;V=$,$=q,q=mi(R,30)>>>0,R=M,M=X}e[0]=e[0]+M>>>0,e[1]=e[1]+R>>>0,e[2]=e[2]+q>>>0,e[3]=e[3]+$>>>0,e[4]=e[4]+V>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Qu=oa("v5",80,Xu);const tf="00000000-0000-0000-0000-000000000000";function ef(n){if(!In(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const rf=Object.freeze(Object.defineProperty({__proto__:null,NIL:tf,parse:sa,stringify:Bn,v1:Ku,v3:Zu,v4:Yu,v5:Qu,validate:In,version:ef},Symbol.toStringTag,{value:"Module"})),ca=Bo(rf);var wi,Js;function nf(){if(Js)return wi;Js=1;const n=ca.v4;return wi=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:e};if(o===2&&(c.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");c.params=r}if(typeof s>"u"){const d=typeof i.generator=="function"?i.generator:function(){return n()};c.id=d(c,i)}else o===2&&s===null?i.notificationIdNull&&(c.id=null):c.id=s;return c},wi}var bi,Xs;function sf(){if(Xs)return bi;Xs=1;const n=ca.v4,t=nf(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return bi=e,e.prototype.request=function(r,s,i,o){const c=this;let d=null;const w=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&w)throw new TypeError("JSON-RPC 1.0 does not support batching");if(w||!w&&r&&typeof r=="object"&&typeof s=="function")o=s,d=r;else{typeof i=="function"&&(o=i,i=void 0);const U=typeof o=="function";try{d=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(U)return o(x);throw x}if(!U)return d}let _;try{_=JSON.stringify(d,this.options.replacer)}catch(U){return o(U)}return this.callServer(_,function(U,x){c._parseResponse(U,x,o)}),d},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(c){return i(c)}if(i.length===3)if(Array.isArray(o)){const c=function(w){return typeof w.error<"u"},d=function(w){return!c(w)};return i(null,o.filter(c),o.filter(d))}else return i(null,o.error,o.result);i(null,o)},bi}var of=sf();const af=bn(of);var vi={exports:{}},Qs;function cf(){return Qs||(Qs=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(d,w,b){this.fn=d,this.context=w,this.once=b||!1}function i(d,w,b,_,U){if(typeof b!="function")throw new TypeError("The listener must be a function");var x=new s(b,_||d,U),O=e?e+w:w;return d._events[O]?d._events[O].fn?d._events[O]=[d._events[O],x]:d._events[O].push(x):(d._events[O]=x,d._eventsCount++),d}function o(d,w){--d._eventsCount===0?d._events=new r:delete d._events[w]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var w=[],b,_;if(this._eventsCount===0)return w;for(_ in b=this._events)t.call(b,_)&&w.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(b)):w},c.prototype.listeners=function(w){var b=e?e+w:w,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var U=0,x=_.length,O=new Array(x);U<x;U++)O[U]=_[U].fn;return O},c.prototype.listenerCount=function(w){var b=e?e+w:w,_=this._events[b];return _?_.fn?1:_.length:0},c.prototype.emit=function(w,b,_,U,x,O){var M=e?e+w:w;if(!this._events[M])return!1;var R=this._events[M],q=arguments.length,$,V;if(R.fn){switch(R.once&&this.removeListener(w,R.fn,void 0,!0),q){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,b),!0;case 3:return R.fn.call(R.context,b,_),!0;case 4:return R.fn.call(R.context,b,_,U),!0;case 5:return R.fn.call(R.context,b,_,U,x),!0;case 6:return R.fn.call(R.context,b,_,U,x,O),!0}for(V=1,$=new Array(q-1);V<q;V++)$[V-1]=arguments[V];R.fn.apply(R.context,$)}else{var et=R.length,H;for(V=0;V<et;V++)switch(R[V].once&&this.removeListener(w,R[V].fn,void 0,!0),q){case 1:R[V].fn.call(R[V].context);break;case 2:R[V].fn.call(R[V].context,b);break;case 3:R[V].fn.call(R[V].context,b,_);break;case 4:R[V].fn.call(R[V].context,b,_,U);break;default:if(!$)for(H=1,$=new Array(q-1);H<q;H++)$[H-1]=arguments[H];R[V].fn.apply(R[V].context,$)}}return!0},c.prototype.on=function(w,b,_){return i(this,w,b,_,!1)},c.prototype.once=function(w,b,_){return i(this,w,b,_,!0)},c.prototype.removeListener=function(w,b,_,U){var x=e?e+w:w;if(!this._events[x])return this;if(!b)return o(this,x),this;var O=this._events[x];if(O.fn)O.fn===b&&(!U||O.once)&&(!_||O.context===_)&&o(this,x);else{for(var M=0,R=[],q=O.length;M<q;M++)(O[M].fn!==b||U&&!O[M].once||_&&O[M].context!==_)&&R.push(O[M]);R.length?this._events[x]=R.length===1?R[0]:R:o(this,x)}return this},c.prototype.removeAllListeners=function(w){var b;return w?(b=e?e+w:w,this._events[b]&&o(this,b)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(vi)),vi.exports}var uf=cf();const ua=bn(uf);var ff=class extends ua{socket;constructor(n,t,e){super(),this.socket=new window.WebSocket(n,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function lf(n,t){return new ff(n,t)}var hf=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},df=class extends ua{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,d){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new hf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),c={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(c),r,d=>{if(d)return i(d);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=st.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval)))})}};const pf=BigInt(0),Tr=BigInt(1),gf=BigInt(2),yf=BigInt(7),mf=BigInt(256),wf=BigInt(113),fa=[],la=[],ha=[];for(let n=0,t=Tr,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],fa.push(2*(5*r+e)),la.push((n+1)*(n+2)/2%64);let s=pf;for(let i=0;i<7;i++)t=(t<<Tr^(t>>yf)*wf)%mf,t&gf&&(s^=Tr<<(Tr<<BigInt(i))-Tr);ha.push(s)}const da=Lo(ha,!0),bf=da[0],vf=da[1],to=(n,t,e)=>e>32?sc(n,t,e):nc(n,t,e),eo=(n,t,e)=>e>32?oc(n,t,e):ic(n,t,e);function kf(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,d=(o+2)%10,w=e[d],b=e[d+1],_=to(w,b,1)^e[c],U=eo(w,b,1)^e[c+1];for(let x=0;x<50;x+=10)n[o+x]^=_,n[o+x+1]^=U}let s=n[2],i=n[3];for(let o=0;o<24;o++){const c=la[o],d=to(s,i,c),w=eo(s,i,c),b=fa[o];s=n[b],i=n[b+1],n[b]=d,n[b+1]=w}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)e[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~e[(c+2)%10]&e[(c+4)%10]}n[0]^=bf[r],n[1]^=vf[r]}Je(e)}class Ji extends Wi{constructor(t,e,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,Fr(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Ga(this.state)}clone(){return this._cloneInto()}keccak(){Rs(this.state32),kf(this.state32,this.rounds),Rs(this.state32),this.posOut=0,this.pos=0}update(t){br(this),t=kn(t),_e(t);const{blockLen:e,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let c=0;c<o;c++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,(e&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){br(this,!1),_e(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Fr(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ro(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Je(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Ji(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const xf=(n,t,e)=>Hi(()=>new Ji(t,n,e)),ro=xf(1,136,256/8);class pa extends Wi{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Va(t);const r=kn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Je(i)}update(t){return br(this),this.iHash.update(t),this}digestInto(t){br(this),_e(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ga=(n,t,e)=>new pa(n,t).update(e).digest();ga.create=(n,t)=>new pa(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function no(n){n.lowS!==void 0&&ir("lowS",n.lowS),n.prehash!==void 0&&ir("prehash",n.prehash)}class Sf extends Error{constructor(t=""){super(t)}}const De={Err:Sf,_tlv:{encode:(n,t)=>{const{Err:e}=De;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=en(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?en(s.length/2|128):"";return en(n)+i+s+t},decode(n,t){const{Err:e}=De;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const d=s&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const w=t.subarray(r,r+d);if(w.length!==d)throw new e("tlv.decode: length bytes not complete");if(w[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const b of w)o=o<<8|b;if(r+=d,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=De;if(n<Or)throw new t("integer: negative integers are not allowed");let e=en(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=De;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return xn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=De,s=Nt("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:d}=r.decode(2,i),{v:w,l:b}=r.decode(2,d);if(b.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(w)}},hexFromSig(n){const{_tlv:t,_int:e}=De,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Or=BigInt(0),Ur=BigInt(1),Ef=BigInt(2),sn=BigInt(3),Af=BigInt(4);function _f(n,t,e){function r(s){const i=n.sqr(s),o=n.mul(i,s);return n.add(n.add(o,n.mul(s,t)),e)}return r}function ya(n,t,e){const{BYTES:r}=n;function s(i){let o;if(typeof i=="bigint")o=i;else{let c=Nt("private key",i);if(t){if(!t.includes(c.length*2))throw new Error("invalid private key");const d=new Uint8Array(r);d.set(c,d.length-c.length),c=d}try{o=n.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(e&&(o=n.create(o)),!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function If(n,t={}){const{Fp:e,Fn:r}=Zo("weierstrass",n,t),{h:s,n:i}=n;$r(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!e.is0(n.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function c(){if(!e.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(rt,L,P){const{x:T,y:z}=L.toAffine(),y=e.toBytes(T);if(ir("isCompressed",P),P){c();const a=!e.isOdd(z);return He(ma(a),y)}else return He(Uint8Array.of(4),y,e.toBytes(z))}function w(rt){_e(rt);const L=e.BYTES,P=L+1,T=2*L+1,z=rt.length,y=rt[0],a=rt.subarray(1);if(z===P&&(y===2||y===3)){const l=e.fromBytes(a);if(!e.isValid(l))throw new Error("bad point: is not on curve, wrong x");const g=U(l);let k;try{k=e.sqrt(g)}catch(N){const v=N instanceof Error?": "+N.message:"";throw new Error("bad point: is not on curve, sqrt error"+v)}c();const E=e.isOdd(k);return(y&1)===1!==E&&(k=e.neg(k)),{x:l,y:k}}else if(z===T&&y===4){const l=e.fromBytes(a.subarray(L*0,L*1)),g=e.fromBytes(a.subarray(L*1,L*2));if(!x(l,g))throw new Error("bad point: is not on curve");return{x:l,y:g}}else throw new Error(`bad point: got length ${z}, expected compressed=${P} or uncompressed=${T}`)}const b=t.toBytes||d,_=t.fromBytes||w,U=_f(e,n.a,n.b);function x(rt,L){const P=e.sqr(L),T=U(rt);return e.eql(P,T)}if(!x(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const O=e.mul(e.pow(n.a,sn),Af),M=e.mul(e.sqr(n.b),BigInt(27));if(e.is0(e.add(O,M)))throw new Error("bad curve params: a or b");function R(rt,L,P=!1){if(!e.isValid(L)||P&&e.is0(L))throw new Error(`bad point coordinate ${rt}`);return L}function q(rt){if(!(rt instanceof H))throw new Error("ProjectivePoint expected")}const $=fn((rt,L)=>{const{px:P,py:T,pz:z}=rt;if(e.eql(z,e.ONE))return{x:P,y:T};const y=rt.is0();L==null&&(L=y?e.ONE:e.inv(z));const a=e.mul(P,L),l=e.mul(T,L),g=e.mul(z,L);if(y)return{x:e.ZERO,y:e.ZERO};if(!e.eql(g,e.ONE))throw new Error("invZ was invalid");return{x:a,y:l}}),V=fn(rt=>{if(rt.is0()){if(t.allowInfinityPoint&&!e.is0(rt.py))return;throw new Error("bad point: ZERO")}const{x:L,y:P}=rt.toAffine();if(!e.isValid(L)||!e.isValid(P))throw new Error("bad point: x or y not field elements");if(!x(L,P))throw new Error("bad point: equation left != right");if(!rt.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function et(rt,L,P,T,z){return P=new H(e.mul(P.px,rt),P.py,P.pz),L=Cr(T,L),P=Cr(z,P),L.add(P)}class H{constructor(L,P,T){this.px=R("x",L),this.py=R("y",P,!0),this.pz=R("z",T),Object.freeze(this)}static fromAffine(L){const{x:P,y:T}=L||{};if(!L||!e.isValid(P)||!e.isValid(T))throw new Error("invalid affine point");if(L instanceof H)throw new Error("projective point not allowed");return e.is0(P)&&e.is0(T)?H.ZERO:new H(P,T,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(L){return Ho(H,"pz",L)}static fromBytes(L){return _e(L),H.fromHex(L)}static fromHex(L){const P=H.fromAffine(_(Nt("pointHex",L)));return P.assertValidity(),P}static fromPrivateKey(L){const P=ya(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return H.BASE.multiply(P(L))}static msm(L,P){return jo(H,r,L,P)}precompute(L=8,P=!0){return ot.setWindowSize(this,L),P||this.multiply(sn),this}_setWindowSize(L){this.precompute(L)}assertValidity(){V(this)}hasEvenY(){const{y:L}=this.toAffine();if(!e.isOdd)throw new Error("Field doesn't support isOdd");return!e.isOdd(L)}equals(L){q(L);const{px:P,py:T,pz:z}=this,{px:y,py:a,pz:l}=L,g=e.eql(e.mul(P,l),e.mul(y,z)),k=e.eql(e.mul(T,l),e.mul(a,z));return g&&k}negate(){return new H(this.px,e.neg(this.py),this.pz)}double(){const{a:L,b:P}=n,T=e.mul(P,sn),{px:z,py:y,pz:a}=this;let l=e.ZERO,g=e.ZERO,k=e.ZERO,E=e.mul(z,z),C=e.mul(y,y),N=e.mul(a,a),v=e.mul(z,y);return v=e.add(v,v),k=e.mul(z,a),k=e.add(k,k),l=e.mul(L,k),g=e.mul(T,N),g=e.add(l,g),l=e.sub(C,g),g=e.add(C,g),g=e.mul(l,g),l=e.mul(v,l),k=e.mul(T,k),N=e.mul(L,N),v=e.sub(E,N),v=e.mul(L,v),v=e.add(v,k),k=e.add(E,E),E=e.add(k,E),E=e.add(E,N),E=e.mul(E,v),g=e.add(g,E),N=e.mul(y,a),N=e.add(N,N),E=e.mul(N,v),l=e.sub(l,E),k=e.mul(N,C),k=e.add(k,k),k=e.add(k,k),new H(l,g,k)}add(L){q(L);const{px:P,py:T,pz:z}=this,{px:y,py:a,pz:l}=L;let g=e.ZERO,k=e.ZERO,E=e.ZERO;const C=n.a,N=e.mul(n.b,sn);let v=e.mul(P,y),u=e.mul(T,a),f=e.mul(z,l),m=e.add(P,T),A=e.add(y,a);m=e.mul(m,A),A=e.add(v,u),m=e.sub(m,A),A=e.add(P,z);let K=e.add(y,l);return A=e.mul(A,K),K=e.add(v,f),A=e.sub(A,K),K=e.add(T,z),g=e.add(a,l),K=e.mul(K,g),g=e.add(u,f),K=e.sub(K,g),E=e.mul(C,A),g=e.mul(N,f),E=e.add(g,E),g=e.sub(u,E),E=e.add(u,E),k=e.mul(g,E),u=e.add(v,v),u=e.add(u,v),f=e.mul(C,f),A=e.mul(N,A),u=e.add(u,f),f=e.sub(v,f),f=e.mul(C,f),A=e.add(A,f),v=e.mul(u,A),k=e.add(k,v),v=e.mul(K,A),g=e.mul(m,g),g=e.sub(g,v),v=e.mul(m,u),E=e.mul(K,E),E=e.add(E,v),new H(g,k,E)}subtract(L){return this.add(L.negate())}is0(){return this.equals(H.ZERO)}multiply(L){const{endo:P}=t;if(!r.isValidNot0(L))throw new Error("invalid scalar: out of range");let T,z;const y=a=>ot.wNAFCached(this,a,H.normalizeZ);if(P){const{k1neg:a,k1:l,k2neg:g,k2:k}=P.splitScalar(L),{p:E,f:C}=y(l),{p:N,f:v}=y(k);z=C.add(v),T=et(P.beta,E,N,a,g)}else{const{p:a,f:l}=y(L);T=a,z=l}return H.normalizeZ([T,z])[0]}multiplyUnsafe(L){const{endo:P}=t,T=this;if(!r.isValid(L))throw new Error("invalid scalar: out of range");if(L===Or||T.is0())return H.ZERO;if(L===Ur)return T;if(ot.hasPrecomputes(this))return this.multiply(L);if(P){const{k1neg:z,k1:y,k2neg:a,k2:l}=P.splitScalar(L),{p1:g,p2:k}=Cc(H,T,y,l);return et(P.beta,g,k,z,a)}else return ot.wNAFCachedUnsafe(T,L)}multiplyAndAddUnsafe(L,P,T){const z=this.multiplyUnsafe(P).add(L.multiplyUnsafe(T));return z.is0()?void 0:z}toAffine(L){return $(this,L)}isTorsionFree(){const{isTorsionFree:L}=t;return s===Ur?!0:L?L(H,this):ot.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:L}=t;return s===Ur?this:L?L(H,this):this.multiplyUnsafe(s)}toBytes(L=!0){return ir("isCompressed",L),this.assertValidity(),b(H,this,L)}toRawBytes(L=!0){return this.toBytes(L)}toHex(L=!0){return vr(this.toBytes(L))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}H.BASE=new H(n.Gx,n.Gy,e.ONE),H.ZERO=new H(e.ZERO,e.ONE,e.ZERO),H.Fp=e,H.Fn=r;const X=r.BITS,ot=Go(H,t.endo?Math.ceil(X/2):X);return H}function ma(n){return Uint8Array.of(n?2:3)}function Bf(n,t,e={}){$r(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||Po,s=t.hmac||((T,...z)=>ga(t.hash,T,He(...z))),{Fp:i,Fn:o}=n,{ORDER:c,BITS:d}=o;function w(T){const z=c>>Ur;return T>z}function b(T){return w(T)?o.neg(T):T}function _(T,z){if(!o.isValidNot0(z))throw new Error(`invalid signature ${T}: out of range 1..CURVE.n`)}class U{constructor(z,y,a){_("r",z),_("s",y),this.r=z,this.s=y,a!=null&&(this.recovery=a),Object.freeze(this)}static fromCompact(z){const y=o.BYTES,a=Nt("compactSignature",z,y*2);return new U(o.fromBytes(a.subarray(0,y)),o.fromBytes(a.subarray(y,y*2)))}static fromDER(z){const{r:y,s:a}=De.toSig(Nt("DER",z));return new U(y,a)}assertValidity(){}addRecoveryBit(z){return new U(this.r,this.s,z)}recoverPublicKey(z){const y=i.ORDER,{r:a,s:l,recovery:g}=this;if(g==null||![0,1,2,3].includes(g))throw new Error("recovery id invalid");if(c*Ef<y&&g>1)throw new Error("recovery id is ambiguous for h>1 curve");const E=g===2||g===3?a+c:a;if(!i.isValid(E))throw new Error("recovery id 2 or 3 invalid");const C=i.toBytes(E),N=n.fromHex(He(ma((g&1)===0),C)),v=o.inv(E),u=V(Nt("msgHash",z)),f=o.create(-u*v),m=o.create(l*v),A=n.BASE.multiplyUnsafe(f).add(N.multiplyUnsafe(m));if(A.is0())throw new Error("point at infinify");return A.assertValidity(),A}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new U(this.r,o.neg(this.s),this.recovery):this}toBytes(z){if(z==="compact")return He(o.toBytes(this.r),o.toBytes(this.s));if(z==="der")return qi(De.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return vr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return vr(this.toBytes("compact"))}}const x=ya(o,e.allowedPrivateKeyLengths,e.wrapPrivateKey),O={isValidPrivateKey(T){try{return x(T),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const T=c;return Pc(r(Wo(T)),T)},precompute(T=8,z=n.BASE){return z.precompute(T,!1)}};function M(T,z=!0){return n.fromPrivateKey(T).toBytes(z)}function R(T){if(typeof T=="bigint")return!1;if(T instanceof n)return!0;const y=Nt("key",T).length,a=i.BYTES,l=a+1,g=2*a+1;if(!(e.allowedPrivateKeyLengths||o.BYTES===l))return y===l||y===g}function q(T,z,y=!0){if(R(T)===!0)throw new Error("first arg must be private key");if(R(z)===!1)throw new Error("second arg must be public key");return n.fromHex(z).multiply(x(T)).toBytes(y)}const $=t.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");const z=xn(T),y=T.length*8-d;return y>0?z>>BigInt(y):z},V=t.bits2int_modN||function(T){return o.create($(T))},et=En(d);function H(T){return pr("num < 2^"+d,T,Or,et),o.toBytes(T)}function X(T,z,y=ot){if(["recovered","canonical"].some(m=>m in y))throw new Error("sign() legacy options not supported");const{hash:a}=t;let{lowS:l,prehash:g,extraEntropy:k}=y;l==null&&(l=!0),T=Nt("msgHash",T),no(y),g&&(T=Nt("prehashed msgHash",a(T)));const E=V(T),C=x(z),N=[H(C),H(E)];if(k!=null&&k!==!1){const m=k===!0?r(i.BYTES):k;N.push(Nt("extraEntropy",m))}const v=He(...N),u=E;function f(m){const A=$(m);if(!o.isValidNot0(A))return;const K=o.inv(A),j=n.BASE.multiply(A).toAffine(),at=o.create(j.x);if(at===Or)return;const ut=o.create(K*o.create(u+at*C));if(ut===Or)return;let ue=(j.x===at?0:2)|Number(j.y&Ur),bt=ut;return l&&w(ut)&&(bt=b(ut),ue^=1),new U(at,bt,ue)}return{seed:v,k2sig:f}}const ot={lowS:t.lowS,prehash:!1},rt={lowS:t.lowS,prehash:!1};function L(T,z,y=ot){const{seed:a,k2sig:l}=X(T,z,y);return kc(t.hash.outputLen,o.BYTES,s)(a,l)}n.BASE.precompute(8);function P(T,z,y,a=rt){const l=T;z=Nt("msgHash",z),y=Nt("publicKey",y),no(a);const{lowS:g,prehash:k,format:E}=a;if("strict"in a)throw new Error("options.strict was renamed to lowS");if(E!==void 0&&!["compact","der","js"].includes(E))throw new Error('format must be "compact", "der" or "js"');const C=typeof l=="string"||Di(l),N=!C&&!E&&typeof l=="object"&&l!==null&&typeof l.r=="bigint"&&typeof l.s=="bigint";if(!C&&!N)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let v,u;try{if(N)if(E===void 0||E==="js")v=new U(l.r,l.s);else throw new Error("invalid format");if(C){try{E!=="compact"&&(v=U.fromDER(l))}catch(bt){if(!(bt instanceof De.Err))throw bt}!v&&E!=="der"&&(v=U.fromCompact(l))}u=n.fromHex(y)}catch{return!1}if(!v||g&&v.hasHighS())return!1;k&&(z=t.hash(z));const{r:f,s:m}=v,A=V(z),K=o.inv(m),j=o.create(A*K),at=o.create(f*K),ut=n.BASE.multiplyUnsafe(j).add(u.multiplyUnsafe(at));return ut.is0()?!1:o.create(ut.x)===f}return Object.freeze({getPublicKey:M,getSharedSecret:q,sign:L,verify:P,utils:O,Point:n,Signature:U})}function Rf(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Ar(t.n,n.nBitLength),s={Fp:e,Fn:r,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:s}}function Mf(n){const{CURVE:t,curveOpts:e}=Rf(n),r={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,ecdsaOpts:r}}function Pf(n,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:n})}function Tf(n){const{CURVE:t,curveOpts:e,ecdsaOpts:r}=Mf(n),s=If(t,e),i=Bf(s,r,e);return Pf(n,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Lf(n,t){const e=r=>Tf({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Cf=BigInt(1),Pi=BigInt(2),io=(n,t)=>(n+t/Pi)/t;function Of(n){const t=yn.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),d=BigInt(88),w=n*n*n%t,b=w*w*n%t,_=Ot(b,e,t)*b%t,U=Ot(_,e,t)*b%t,x=Ot(U,Pi,t)*w%t,O=Ot(x,s,t)*x%t,M=Ot(O,i,t)*O%t,R=Ot(M,c,t)*M%t,q=Ot(R,d,t)*R%t,$=Ot(q,c,t)*M%t,V=Ot($,e,t)*b%t,et=Ot(V,o,t)*O%t,H=Ot(et,r,t)*w%t,X=Ot(H,Pi,t);if(!Ti.eql(Ti.sqr(X),n))throw new Error("Cannot find square root");return X}const Ti=Ar(yn.p,void 0,void 0,{sqrt:Of}),Xi=Lf({...yn,Fp:Ti,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=yn.n,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Cf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),c=io(i*n,t),d=io(-r*n,t);let w=zt(n-c*e-d*s,t),b=zt(-c*r-d*i,t);const _=w>o,U=b>o;if(_&&(w=t-w),U&&(b=t-b),w>o||b>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:_,k1:w,k2neg:U,k2:b}}}},Oo),Uf=_r.utils.randomPrivateKey,so=()=>{const n=_r.utils.randomPrivateKey(),t=mn(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},mn=_r.getPublicKey;function oo(n){try{return _r.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Qi=(n,t)=>_r.sign(n,t.slice(0,32)),Nf=_r.verify,gt=n=>st.Buffer.isBuffer(n)?n:n instanceof Uint8Array?st.Buffer.from(n.buffer,n.byteOffset,n.byteLength):st.Buffer.from(n);class ts{constructor(t){Object.assign(this,t)}encode(){return st.Buffer.from(hi.serialize(Nr,this))}static decode(t){return hi.deserialize(Nr,this,t)}static decodeUnchecked(t){return hi.deserializeUnchecked(Nr,this,t)}}class zf extends ts{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const Nr=new Map;var wa;const ba=32,Oe=32;function Ff(n){return n._bn!==void 0}let ao=1;class J extends ts{constructor(t){if(super({}),this._bn=void 0,Ff(t))this._bn=t._bn;else{if(typeof t=="string"){const e=he.decode(t);if(e.length!=Oe)throw new Error("Invalid public key input");this._bn=new qs(e)}else this._bn=new qs(t);if(this._bn.byteLength()>Oe)throw new Error("Invalid public key input")}}static unique(){const t=new J(ao);return ao+=1,new J(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return he.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(st.Buffer);if(t.length===Oe)return t;const e=st.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=st.Buffer.concat([t.toBuffer(),st.Buffer.from(e),r.toBuffer()]),i=Vs(s);return new J(i)}static createProgramAddressSync(t,e){let r=st.Buffer.alloc(0);t.forEach(function(i){if(i.length>ba)throw new TypeError("Max seed length exceeded");r=st.Buffer.concat([r,gt(i)])}),r=st.Buffer.concat([r,e.toBuffer(),st.Buffer.from("ProgramDerivedAddress")]);const s=Vs(r);if(oo(s))throw new Error("Invalid seeds, address must fall off the curve");return new J(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(st.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new J(t);return oo(e.toBytes())}}wa=J;J.default=new wa("11111111111111111111111111111111");Nr.set(J,{kind:"struct",fields:[["_bn","u256"]]});class Kf{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=gt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=gt(Uf()),this._publicKey=gt(mn(this._secretKey))}get publicKey(){return new J(this._publicKey)}get secretKey(){return st.Buffer.concat([this._secretKey,this._publicKey],64)}}const Df=new J("BPFLoader1111111111111111111111111111111111"),Ye=1232,Mn=127,Dr=64;class es extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(es.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class rs extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(rs.prototype,"name",{value:"TransactionExpiredTimeoutError"});class gr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(gr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class qr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const mt=(n="publicKey")=>I.blob(32,n),qf=(n="signature")=>I.blob(64,n),nr=(n="string")=>{const t=I.struct([I.u32("length"),I.u32("lengthPadding"),I.blob(I.offset(I.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const d={chars:st.Buffer.from(i,"utf8")};return r(d,o,c)},s.alloc=i=>I.u32().span+I.u32().span+st.Buffer.from(i,"utf8").length,s},Wf=(n="authorized")=>I.struct([mt("staker"),mt("withdrawer")],n),Hf=(n="lockup")=>I.struct([I.ns64("unixTimestamp"),I.ns64("epoch"),mt("custodian")],n),$f=(n="voteInit")=>I.struct([mt("nodePubkey"),mt("authorizedVoter"),mt("authorizedWithdrawer"),I.u8("commission")],n),Vf=(n="voteAuthorizeWithSeedArgs")=>I.struct([I.u32("voteAuthorizationType"),mt("currentAuthorityDerivedKeyOwnerPubkey"),nr("currentAuthorityDerivedKeySeed"),mt("newAuthorized")],n);function va(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return va({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function ke(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Ae(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function vt(n,t){if(!n)throw new Error(t||"Assertion failed")}class Pn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const c=o.toBase58();let d=r.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const d=s(c.pubkey);d.isSigner||=c.isSigner,d.isWritable||=c.isWritable}}return new Pn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];vt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{vt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];vt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new J(d)),...r.map(([d])=>new J(d)),...s.map(([d])=>new J(d)),...i.map(([d])=>new J(d))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new J(i),d=t.findIndex(w=>w.equals(c));d>=0&&(vt(d<256,"Max lookup table index exceeded"),r.push(d),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const ka="Reached end of buffer unexpectedly";function Te(n){if(n.length===0)throw new Error(ka);return n.shift()}function xe(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(ka);return n.splice(...t)}class Be{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new J(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:he.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new qr(this.staticAccountKeys)}static compile(t){const e=Pn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new qr(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:he.encode(c.data)}));return new Be({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ae(e,t);const r=this.instructions.map(_=>{const{accounts:U,programIdIndex:x}=_,O=Array.from(he.decode(_.data));let M=[];Ae(M,U.length);let R=[];return Ae(R,O.length),{programIdIndex:x,keyIndicesCount:st.Buffer.from(M),keyIndices:U,dataLength:st.Buffer.from(R),data:O}});let s=[];Ae(s,r.length);let i=st.Buffer.alloc(Ye);st.Buffer.from(s).copy(i);let o=s.length;r.forEach(_=>{const x=I.struct([I.u8("programIdIndex"),I.blob(_.keyIndicesCount.length,"keyIndicesCount"),I.seq(I.u8("keyIndex"),_.keyIndices.length,"keyIndices"),I.blob(_.dataLength.length,"dataLength"),I.seq(I.u8("userdatum"),_.data.length,"data")]).encode(_,i,o);o+=x}),i=i.slice(0,o);const c=I.struct([I.blob(1,"numRequiredSignatures"),I.blob(1,"numReadonlySignedAccounts"),I.blob(1,"numReadonlyUnsignedAccounts"),I.blob(e.length,"keyCount"),I.seq(mt("key"),t,"keys"),mt("recentBlockhash")]),d={numRequiredSignatures:st.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:st.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:st.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:st.Buffer.from(e),keys:this.accountKeys.map(_=>gt(_.toBytes())),recentBlockhash:he.decode(this.recentBlockhash)};let w=st.Buffer.alloc(2048);const b=c.encode(d,w);return i.copy(w,b),w.slice(0,b+i.length)}static from(t){let e=[...t];const r=Te(e);if(r!==(r&Mn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Te(e),i=Te(e),o=ke(e);let c=[];for(let U=0;U<o;U++){const x=xe(e,0,Oe);c.push(new J(st.Buffer.from(x)))}const d=xe(e,0,Oe),w=ke(e);let b=[];for(let U=0;U<w;U++){const x=Te(e),O=ke(e),M=xe(e,0,O),R=ke(e),q=xe(e,0,R),$=he.encode(st.Buffer.from(q));b.push({programIdIndex:x,accounts:M,data:$})}const _={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:he.encode(st.Buffer.from(d)),accountKeys:c,instructions:b};return new Be(_)}}class sr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new qr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Pn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const b of i){const _=e.extractTableLookup(b);if(_!==void 0){const[U,{writable:x,readonly:O}]=_;r.push(U),s.writable.push(...x),s.readonly.push(...O)}}const[o,c]=e.getMessageComponents(),w=new qr(c,s).compileInstructions(t.instructions);return new sr({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:w,addressTableLookups:r})}serialize(){const t=Array();Ae(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Ae(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ae(i,this.addressTableLookups.length);const o=I.struct([I.u8("prefix"),I.struct([I.u8("numRequiredSignatures"),I.u8("numReadonlySignedAccounts"),I.u8("numReadonlyUnsignedAccounts")],"header"),I.blob(t.length,"staticAccountKeysLength"),I.seq(mt(),this.staticAccountKeys.length,"staticAccountKeys"),mt("recentBlockhash"),I.blob(r.length,"instructionsLength"),I.blob(e.length,"serializedInstructions"),I.blob(i.length,"addressTableLookupsLength"),I.blob(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Ye),w=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:he.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,w)}serializeInstructions(){let t=0;const e=new Uint8Array(Ye);for(const r of this.compiledInstructions){const s=Array();Ae(s,r.accountKeyIndexes.length);const i=Array();Ae(i,r.data.length);const o=I.struct([I.u8("programIdIndex"),I.blob(s.length,"encodedAccountKeyIndexesLength"),I.seq(I.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),I.blob(i.length,"encodedDataLength"),I.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Ye);for(const r of this.addressTableLookups){const s=Array();Ae(s,r.writableIndexes.length);const i=Array();Ae(i,r.readonlyIndexes.length);const o=I.struct([mt("accountKey"),I.blob(s.length,"encodedWritableIndexesLength"),I.seq(I.u8(),r.writableIndexes.length,"writableIndexes"),I.blob(i.length,"encodedReadonlyIndexesLength"),I.seq(I.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Te(e),s=r&Mn;vt(r!==s,"Expected versioned message but received legacy message");const i=s;vt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Te(e),numReadonlySignedAccounts:Te(e),numReadonlyUnsignedAccounts:Te(e)},c=[],d=ke(e);for(let O=0;O<d;O++)c.push(new J(xe(e,0,Oe)));const w=he.encode(xe(e,0,Oe)),b=ke(e),_=[];for(let O=0;O<b;O++){const M=Te(e),R=ke(e),q=xe(e,0,R),$=ke(e),V=new Uint8Array(xe(e,0,$));_.push({programIdIndex:M,accountKeyIndexes:q,data:V})}const U=ke(e),x=[];for(let O=0;O<U;O++){const M=new J(xe(e,0,Oe)),R=ke(e),q=xe(e,0,R),$=ke(e),V=xe(e,0,$);x.push({accountKey:M,writableIndexes:q,readonlyIndexes:V})}return new sr({header:o,staticAccountKeys:c,recentBlockhash:w,compiledInstructions:_,addressTableLookups:x})}}const ns={deserializeMessageVersion(n){const t=n[0],e=t&Mn;return e===t?"legacy":e},deserialize:n=>{const t=ns.deserializeMessageVersion(n);if(t==="legacy")return Be.from(n);if(t===0)return sr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Ke=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const Gf=st.Buffer.alloc(Dr).fill(0);class Et{constructor(t){this.keys=void 0,this.programId=void 0,this.data=st.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class kt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Et(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let M=0;M<e.length;M++)if(e[M].programId===void 0)throw new Error(`Transaction instruction index ${M} has undefined program id`);const s=[],i=[];e.forEach(M=>{M.keys.forEach(q=>{i.push({...q})});const R=M.programId.toString();s.includes(R)||s.push(R)}),s.forEach(M=>{i.push({pubkey:new J(M),isSigner:!1,isWritable:!1})});const o=[];i.forEach(M=>{const R=M.pubkey.toString(),q=o.findIndex($=>$.pubkey.toString()===R);q>-1?(o[q].isWritable=o[q].isWritable||M.isWritable,o[q].isSigner=o[q].isSigner||M.isSigner):o.push(M)}),o.sort(function(M,R){if(M.isSigner!==R.isSigner)return M.isSigner?-1:1;if(M.isWritable!==R.isWritable)return M.isWritable?-1:1;const q={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return M.pubkey.toBase58().localeCompare(R.pubkey.toBase58(),"en",q)});const c=o.findIndex(M=>M.pubkey.equals(r));if(c>-1){const[M]=o.splice(c,1);M.isSigner=!0,M.isWritable=!0,o.unshift(M)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const M of this.signatures){const R=o.findIndex(q=>q.pubkey.equals(M.publicKey));if(R>-1)o[R].isSigner||(o[R].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${M.publicKey.toString()}`)}let d=0,w=0,b=0;const _=[],U=[];o.forEach(({pubkey:M,isSigner:R,isWritable:q})=>{R?(_.push(M.toString()),d+=1,q||(w+=1)):(U.push(M.toString()),q||(b+=1))});const x=_.concat(U),O=e.map(M=>{const{data:R,programId:q}=M;return{programIdIndex:x.indexOf(q.toString()),accounts:M.keys.map($=>x.indexOf($.pubkey.toString())),data:he.encode(R)}});return O.forEach(M=>{vt(M.programIdIndex>=0),M.accounts.forEach(R=>vt(R>=0))}),new Be({header:{numRequiredSignatures:d,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:b},accountKeys:x,recentBlockhash:t,instructions:O})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=Qi(r,s.secretKey);this._addSignature(s.publicKey,gt(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){vt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=st.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):Nf(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Ae(r,e.length);const s=r.length+e.length*64+t.length,i=st.Buffer.alloc(s);return vt(e.length<256),st.Buffer.from(r).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(vt(o.length===64,"signature has invalid length"),st.Buffer.from(o).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),vt(i.length<=Ye,`Transaction too large: ${i.length} > ${Ye}`),i}get keys(){return vt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return vt(this.instructions.length===1),this.instructions[0].programId}get data(){return vt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ke(e);let s=[];for(let i=0;i<r;i++){const o=xe(e,0,Dr);s.push(he.encode(st.Buffer.from(o)))}return kt.populate(Be.from(e),s)}static populate(t,e=[]){const r=new kt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==he.encode(Gf)?null:he.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Et({keys:i,programId:t.accountKeys[s.programIdIndex],data:he.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class is{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d}=r,w=o-c;vt(w>0,"Message header is invalid");const b=t.staticAccountKeys.length-o-d;vt(b>=0,"Message header is invalid");const _=t.getAccountKeys(e),U=_.get(0);if(U===void 0)throw new Error("Failed to decompile message because no account keys were found");const x=[];for(const O of s){const M=[];for(const q of O.accountKeyIndexes){const $=_.get(q);if($===void 0)throw new Error(`Failed to find key for account key index ${q}`);const V=q<o;let et;V?et=q<w:q<_.staticAccountKeys.length?et=q-o<b:et=q-_.staticAccountKeys.length<_.accountKeysFromLookups.writable.length,M.push({pubkey:$,isSigner:q<r.numRequiredSignatures,isWritable:et})}const R=_.get(O.programIdIndex);if(R===void 0)throw new Error(`Failed to find program id for program id index ${O.programIdIndex}`);x.push(new Et({programId:R,data:gt(O.data),keys:M}))}return new is({payerKey:U,instructions:x,recentBlockhash:i})}compileToLegacyMessage(){return Be.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return sr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ss{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)vt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(Dr));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ae(e,this.signatures.length);const r=I.struct([I.blob(e.length,"encodedSignaturesLength"),I.seq(qf(),this.signatures.length,"signatures"),I.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=ke(e);for(let o=0;o<s;o++)r.push(new Uint8Array(xe(e,0,Dr)));const i=ns.deserialize(new Uint8Array(e));return new ss(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));vt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Qi(e,s.secretKey)}}addSignature(t,e){vt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));vt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const jf=160,Zf=64,Yf=jf/Zf,xa=1e3/Yf,Pe=new J("SysvarC1ock11111111111111111111111111111111"),Jf=new J("SysvarEpochSchedu1e111111111111111111111111"),Xf=new J("Sysvar1nstructions1111111111111111111111111"),cn=new J("SysvarRecentB1ockHashes11111111111111111111"),Sr=new J("SysvarRent111111111111111111111111111111111"),Qf=new J("SysvarRewards111111111111111111111111111111"),tl=new J("SysvarS1otHashes111111111111111111111111111"),el=new J("SysvarS1otHistory11111111111111111111111111"),un=new J("SysvarStakeHistory1111111111111111111111111");class Wr extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:c=`Unknown action '${(d=>d)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const rl={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ct extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function Li(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:c}=t.nonceInfo,d=c.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:d,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new Wr({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function tr(n){return new Promise(t=>setTimeout(t,n))}function wt(n,t){const e=n.layout.span>=0?n.layout.span:va(n,t),r=st.Buffer.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function xt(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const Sa=I.nu64("lamportsPerSignature"),Ea=I.struct([I.u32("version"),I.u32("state"),mt("authorizedPubkey"),mt("nonce"),I.struct([Sa],"feeCalculator")]),Ci=Ea.span;class Tn{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ea.decode(gt(t),0);return new Tn({authorizedPubkey:new J(e.authorizedPubkey),nonce:new J(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Er(n){const t=I.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=Mu();return s.decode=(o,c)=>{const d=e(o,c);return i.decode(d)},s.encode=(o,c,d)=>{const w=i.encode(o);return r(w,c,d)},s}class nl{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=I.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(It))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=xt(It.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new J(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=xt(It.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=xt(It.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new J(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=xt(It.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=xt(It.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new J(e),seed:r,space:s,programId:new J(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=xt(It.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new J(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=xt(It.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new J(e),seed:r,programId:new J(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:o}=xt(It.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new J(e),seed:r,lamports:s,space:i,programId:new J(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=xt(It.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new J(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xt(It.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=xt(It.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=xt(It.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new J(e)}}static checkProgramId(t){if(!t.equals(ae.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const It=Object.freeze({Create:{index:0,layout:I.struct([I.u32("instruction"),I.ns64("lamports"),I.ns64("space"),mt("programId")])},Assign:{index:1,layout:I.struct([I.u32("instruction"),mt("programId")])},Transfer:{index:2,layout:I.struct([I.u32("instruction"),Er("lamports")])},CreateWithSeed:{index:3,layout:I.struct([I.u32("instruction"),mt("base"),nr("seed"),I.ns64("lamports"),I.ns64("space"),mt("programId")])},AdvanceNonceAccount:{index:4,layout:I.struct([I.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:I.struct([I.u32("instruction"),mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:I.struct([I.u32("instruction"),mt("authorized")])},Allocate:{index:8,layout:I.struct([I.u32("instruction"),I.ns64("space")])},AllocateWithSeed:{index:9,layout:I.struct([I.u32("instruction"),mt("base"),nr("seed"),I.ns64("space"),mt("programId")])},AssignWithSeed:{index:10,layout:I.struct([I.u32("instruction"),mt("base"),nr("seed"),mt("programId")])},TransferWithSeed:{index:11,layout:I.struct([I.u32("instruction"),Er("lamports"),nr("seed"),mt("programId")])},UpgradeNonceAccount:{index:12,layout:I.struct([I.u32("instruction")])}});class ae{constructor(){}static createAccount(t){const e=It.Create,r=wt(e,{lamports:t.lamports,space:t.space,programId:gt(t.programId.toBuffer())});return new Et({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=It.TransferWithSeed;e=wt(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:gt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=It.Transfer;e=wt(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Et({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=It.AssignWithSeed;e=wt(s,{base:gt(t.basePubkey.toBuffer()),seed:t.seed,programId:gt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=It.Assign;e=wt(s,{programId:gt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Et({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=It.CreateWithSeed,r=wt(e,{base:gt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:gt(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Et({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new kt;"basePubkey"in t&&"seed"in t?e.add(ae.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Ci,programId:this.programId})):e.add(ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Ci,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=It.InitializeNonceAccount,r=wt(e,{authorized:gt(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Et(s)}static nonceAdvance(t){const e=It.AdvanceNonceAccount,r=wt(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Et(s)}static nonceWithdraw(t){const e=It.WithdrawNonceAccount,r=wt(e,{lamports:t.lamports});return new Et({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:cn,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=It.AuthorizeNonceAccount,r=wt(e,{authorized:gt(t.newAuthorizedPubkey.toBuffer())});return new Et({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=It.AllocateWithSeed;e=wt(s,{base:gt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:gt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=It.Allocate;e=wt(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Et({keys:r,programId:this.programId,data:e})}}ae.programId=new J("11111111111111111111111111111111");const il=Ye-300;class or{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/or.chunkSize)+1+1)}static async load(t,e,r,s,i){{const _=await t.getMinimumBalanceForRentExemption(i.length),U=await t.getAccountInfo(r.publicKey,"confirmed");let x=null;if(U!==null){if(U.executable)return console.error("Program load failed, account is already executable"),!1;U.data.length!==i.length&&(x=x||new kt,x.add(ae.allocate({accountPubkey:r.publicKey,space:i.length}))),U.owner.equals(s)||(x=x||new kt,x.add(ae.assign({accountPubkey:r.publicKey,programId:s}))),U.lamports<_&&(x=x||new kt,x.add(ae.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:_-U.lamports})))}else x=new kt().add(ae.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:_>0?_:1,space:i.length,programId:s}));x!==null&&await Li(t,x,[e,r],{commitment:"confirmed"})}const o=I.struct([I.u32("instruction"),I.u32("offset"),I.u32("bytesLength"),I.u32("bytesLengthPadding"),I.seq(I.u8("byte"),I.offset(I.u32(),-8),"bytes")]),c=or.chunkSize;let d=0,w=i,b=[];for(;w.length>0;){const _=w.slice(0,c),U=st.Buffer.alloc(c+16);o.encode({instruction:0,offset:d,bytes:_,bytesLength:0,bytesLengthPadding:0},U);const x=new kt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:U});b.push(Li(t,x,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await tr(1e3/4),d+=c,w=w.slice(c)}await Promise.all(b);{const _=I.struct([I.u32("instruction")]),U=st.Buffer.alloc(_.span);_.encode({instruction:1},U);const x=new kt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1}],programId:s,data:U}),O="processed",M=await t.sendTransaction(x,[e,r],{preflightCommitment:O}),{context:R,value:q}=await t.confirmTransaction({signature:M,lastValidBlockHeight:x.lastValidBlockHeight,blockhash:x.recentBlockhash},O);if(q.err)throw new Error(`Transaction ${M} failed (${JSON.stringify(q)})`);for(;;){try{if(await t.getSlot({commitment:O})>R.slot)break}catch{}await new Promise($=>setTimeout($,Math.round(xa/2)))}}return!0}}or.chunkSize=il;const sl=new J("BPFLoader2111111111111111111111111111111111");class ol{static getMinNumSignatures(t){return or.getMinNumSignatures(t)}static load(t,e,r,s,i){return or.load(t,e,r,i,s)}}function al(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ki,co;function cl(){if(co)return ki;co=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,c,d,w,b,_;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(_=n.call(r),_==="[object Array]"){for(c="[",o=r.length-1,i=0;i<o;i++)c+=e(r[i],!0)+",";return o>-1&&(c+=e(r[i],!0)),c+"]"}else if(_==="[object Object]"){for(d=t(r).sort(),o=d.length,c="",i=0;i<o;)w=d[i],b=e(r[w],!1),b!==void 0&&(c&&(c+=","),c+=JSON.stringify(w)+":"+b),i++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return ki=function(r){var s=e(r,!1);if(s!==void 0)return""+s},ki}var ul=cl(),uo=al(ul);const Lr=32;function xi(n){let t=0;for(;n>1;)n/=2,t++;return t}function fl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Aa{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=xi(fl(t+Lr+1))-xi(Lr)-1,r=this.getSlotsInEpoch(e),s=t-(r-Lr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Lr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+xi(Lr)):this.slotsPerEpoch}}var ll=globalThis.fetch;class hl extends df{constructor(t,e,r){const s=i=>{const o=lf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function dl(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const fo=56;class Oi{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=dl(pl,t),r=t.length-fo;vt(r>=0,"lookup table is invalid"),vt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=I.struct([I.seq(mt(),s,"addresses")]).decode(t.slice(fo));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new J(e.authority[0]):void 0,addresses:i.map(o=>new J(o))}}}const pl={index:1,layout:I.struct([I.u32("typeIndex"),Er("deactivationSlot"),I.nu64("lastExtendedSlot"),I.u8("lastExtendedStartIndex"),I.u8(),I.seq(mt(),I.offset(I.u8(),-1),"authority")])},gl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function yl(n){const t=n.match(gl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),d=c==null?"":`:${c+1}`;return`${o}//${r}${d}${i}`}const Lt=jr(Zi(J),Q(),n=>new J(n)),_a=Yi([Q(),Tt("base64")]),os=jr(Zi(st.Buffer),_a,n=>st.Buffer.from(n[0],"base64")),Ia=30*1e3;function ml(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function _t(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function lo(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Ba(n){return ve([Z({jsonrpc:Tt("2.0"),id:Q(),result:n}),Z({jsonrpc:Tt("2.0"),id:Q(),error:Z({code:Ir(),message:Q(),data:lt(Uu())})})])}const wl=Ba(Ir());function pt(n){return jr(Ba(n),wl,t=>"error"in t?t:{...t,result:tt(t.result,n)})}function Ut(n){return pt(Z({context:Z({slot:D()}),value:n}))}function Ln(n){return Z({context:Z({slot:D()}),value:n})}function Si(n,t){return n===0?new sr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new J(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:he.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Be(t)}const bl=Z({foundation:D(),foundationTerm:D(),initial:D(),taper:D(),terminal:D()}),vl=pt(nt(it(Z({epoch:D(),effectiveSlot:D(),amount:D(),postBalance:D(),commission:lt(it(D()))})))),kl=nt(Z({slot:D(),prioritizationFee:D()})),xl=Z({total:D(),validator:D(),foundation:D(),epoch:D()}),Sl=Z({epoch:D(),slotIndex:D(),slotsInEpoch:D(),absoluteSlot:D(),blockHeight:lt(D()),transactionCount:lt(D())}),El=Z({slotsPerEpoch:D(),leaderScheduleSlotOffset:D(),warmup:Ue(),firstNormalEpoch:D(),firstNormalSlot:D()}),Al=na(Q(),nt(D())),cr=it(ve([Z({}),Q()])),_l=Z({err:cr}),Il=Tt("receivedSignature"),Bl=Z({"solana-core":Q(),"feature-set":lt(D())}),Rl=Z({program:Q(),programId:Lt,parsed:Ir()}),Ml=Z({programId:Lt,accounts:nt(Lt),data:Q()}),ho=Ut(Z({err:it(ve([Z({}),Q()])),logs:it(nt(Q())),accounts:lt(it(nt(it(Z({executable:Ue(),owner:Q(),lamports:D(),data:nt(Q()),rentEpoch:lt(D())}))))),unitsConsumed:lt(D()),returnData:lt(it(Z({programId:Q(),data:Yi([Q(),Tt("base64")])}))),innerInstructions:lt(it(nt(Z({index:D(),instructions:nt(ve([Rl,Ml]))}))))})),Pl=Ut(Z({byIdentity:na(Q(),nt(D())),range:Z({firstSlot:D(),lastSlot:D()})}));function Tl(n,t,e,r,s,i){const o=e||ll;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(b,_)=>{const U=await new Promise((x,O)=>{try{r(b,_,(M,R)=>x([M,R]))}catch(M){O(M)}});return await o(...U)}),new af(async(b,_)=>{const U={method:"POST",body:b,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},Th)};try{let x=5,O,M=500;for(;d?O=await d(n,U):O=await o(n,U),!(O.status!==429||s===!0||(x-=1,x===0));)console.error(`Server responded with ${O.status} ${O.statusText}.  Retrying after ${M}ms delay...`),await tr(M),M*=2;const R=await O.text();O.ok?_(null,R):_(new Error(`${O.status} ${O.statusText}: ${R}`))}catch(x){x instanceof Error&&_(x)}},{})}function Ll(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function Cl(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const Ol=pt(bl),Ul=pt(xl),Nl=pt(kl),zl=pt(Sl),Fl=pt(El),Kl=pt(Al),Dl=pt(D()),ql=Ut(Z({total:D(),circulating:D(),nonCirculating:D(),nonCirculatingAccounts:nt(Lt)})),Ui=Z({amount:Q(),uiAmount:it(D()),decimals:D(),uiAmountString:lt(Q())}),Wl=Ut(nt(Z({address:Lt,amount:Q(),uiAmount:it(D()),decimals:D(),uiAmountString:lt(Q())}))),Hl=Ut(nt(Z({pubkey:Lt,account:Z({executable:Ue(),owner:Lt,lamports:D(),data:os,rentEpoch:D()})}))),Ni=Z({program:Q(),parsed:Ir(),space:D()}),$l=Ut(nt(Z({pubkey:Lt,account:Z({executable:Ue(),owner:Lt,lamports:D(),data:Ni,rentEpoch:D()})}))),Vl=Ut(nt(Z({lamports:D(),address:Lt}))),Hr=Z({executable:Ue(),owner:Lt,lamports:D(),data:os,rentEpoch:D()}),Gl=Z({pubkey:Lt,account:Hr}),jl=jr(ve([Zi(st.Buffer),Ni]),ve([_a,Ni]),n=>Array.isArray(n)?tt(n,os):n),zi=Z({executable:Ue(),owner:Lt,lamports:D(),data:jl,rentEpoch:D()}),Zl=Z({pubkey:Lt,account:zi}),Yl=Z({state:ve([Tt("active"),Tt("inactive"),Tt("activating"),Tt("deactivating")]),active:D(),inactive:D()}),Jl=pt(nt(Z({signature:Q(),slot:D(),err:cr,memo:it(Q()),blockTime:lt(it(D()))}))),Xl=pt(nt(Z({signature:Q(),slot:D(),err:cr,memo:it(Q()),blockTime:lt(it(D()))}))),Ql=Z({subscription:D(),result:Ln(Hr)}),th=Z({pubkey:Lt,account:Hr}),eh=Z({subscription:D(),result:Ln(th)}),rh=Z({parent:D(),slot:D(),root:D()}),nh=Z({subscription:D(),result:rh}),ih=ve([Z({type:ve([Tt("firstShredReceived"),Tt("completed"),Tt("optimisticConfirmation"),Tt("root")]),slot:D(),timestamp:D()}),Z({type:Tt("createdBank"),parent:D(),slot:D(),timestamp:D()}),Z({type:Tt("frozen"),slot:D(),timestamp:D(),stats:Z({numTransactionEntries:D(),numSuccessfulTransactions:D(),numFailedTransactions:D(),maxTransactionsPerEntry:D()})}),Z({type:Tt("dead"),slot:D(),timestamp:D(),err:Q()})]),sh=Z({subscription:D(),result:ih}),oh=Z({subscription:D(),result:Ln(ve([_l,Il]))}),ah=Z({subscription:D(),result:D()}),ch=Z({pubkey:Q(),gossip:it(Q()),tpu:it(Q()),rpc:it(Q()),version:it(Q())}),po=Z({votePubkey:Q(),nodePubkey:Q(),activatedStake:D(),epochVoteAccount:Ue(),epochCredits:nt(Yi([D(),D(),D()])),commission:D(),lastVote:D(),rootSlot:it(D())}),uh=pt(Z({current:nt(po),delinquent:nt(po)})),fh=ve([Tt("processed"),Tt("confirmed"),Tt("finalized")]),lh=Z({slot:D(),confirmations:it(D()),err:cr,confirmationStatus:lt(fh)}),hh=Ut(nt(it(lh))),dh=pt(D()),Ra=Z({accountKey:Lt,writableIndexes:nt(D()),readonlyIndexes:nt(D())}),as=Z({signatures:nt(Q()),message:Z({accountKeys:nt(Q()),header:Z({numRequiredSignatures:D(),numReadonlySignedAccounts:D(),numReadonlyUnsignedAccounts:D()}),instructions:nt(Z({accounts:nt(D()),data:Q(),programIdIndex:D()})),recentBlockhash:Q(),addressTableLookups:lt(nt(Ra))})}),Ma=Z({pubkey:Lt,signer:Ue(),writable:Ue(),source:lt(ve([Tt("transaction"),Tt("lookupTable")]))}),Pa=Z({accountKeys:nt(Ma),signatures:nt(Q())}),Ta=Z({parsed:Ir(),program:Q(),programId:Lt}),La=Z({accounts:nt(Lt),data:Q(),programId:Lt}),ph=ve([La,Ta]),gh=ve([Z({parsed:Ir(),program:Q(),programId:Q()}),Z({accounts:nt(Q()),data:Q(),programId:Q()})]),Ca=jr(ph,gh,n=>"accounts"in n?tt(n,La):tt(n,Ta)),Oa=Z({signatures:nt(Q()),message:Z({accountKeys:nt(Ma),instructions:nt(Ca),recentBlockhash:Q(),addressTableLookups:lt(it(nt(Ra)))})}),wn=Z({accountIndex:D(),mint:Q(),owner:lt(Q()),programId:lt(Q()),uiTokenAmount:Ui}),Ua=Z({writable:nt(Lt),readonly:nt(Lt)}),Cn=Z({err:cr,fee:D(),innerInstructions:lt(it(nt(Z({index:D(),instructions:nt(Z({accounts:nt(D()),data:Q(),programIdIndex:D()}))})))),preBalances:nt(D()),postBalances:nt(D()),logMessages:lt(it(nt(Q()))),preTokenBalances:lt(it(nt(wn))),postTokenBalances:lt(it(nt(wn))),loadedAddresses:lt(Ua),computeUnitsConsumed:lt(D()),costUnits:lt(D())}),cs=Z({err:cr,fee:D(),innerInstructions:lt(it(nt(Z({index:D(),instructions:nt(Ca)})))),preBalances:nt(D()),postBalances:nt(D()),logMessages:lt(it(nt(Q()))),preTokenBalances:lt(it(nt(wn))),postTokenBalances:lt(it(nt(wn))),loadedAddresses:lt(Ua),computeUnitsConsumed:lt(D()),costUnits:lt(D())}),Br=ve([Tt(0),Tt("legacy")]),ur=Z({pubkey:Q(),lamports:D(),postBalance:it(D()),rewardType:it(Q()),commission:lt(it(D()))}),yh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:nt(Z({transaction:as,meta:it(Cn),version:lt(Br)})),rewards:lt(nt(ur)),blockTime:it(D()),blockHeight:it(D())}))),mh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),rewards:lt(nt(ur)),blockTime:it(D()),blockHeight:it(D())}))),wh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:nt(Z({transaction:Pa,meta:it(Cn),version:lt(Br)})),rewards:lt(nt(ur)),blockTime:it(D()),blockHeight:it(D())}))),bh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:nt(Z({transaction:Oa,meta:it(cs),version:lt(Br)})),rewards:lt(nt(ur)),blockTime:it(D()),blockHeight:it(D())}))),vh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:nt(Z({transaction:Pa,meta:it(cs),version:lt(Br)})),rewards:lt(nt(ur)),blockTime:it(D()),blockHeight:it(D())}))),kh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),rewards:lt(nt(ur)),blockTime:it(D()),blockHeight:it(D())}))),xh=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),transactions:nt(Z({transaction:as,meta:it(Cn)})),rewards:lt(nt(ur)),blockTime:it(D())}))),go=pt(it(Z({blockhash:Q(),previousBlockhash:Q(),parentSlot:D(),signatures:nt(Q()),blockTime:it(D())}))),Ei=pt(it(Z({slot:D(),meta:it(Cn),blockTime:lt(it(D())),transaction:as,version:lt(Br)}))),on=pt(it(Z({slot:D(),transaction:Oa,meta:it(cs),blockTime:lt(it(D())),version:lt(Br)}))),Sh=Ut(Z({blockhash:Q(),lastValidBlockHeight:D()})),Eh=Ut(Ue()),Ah=Z({slot:D(),numTransactions:D(),numSlots:D(),samplePeriodSecs:D()}),_h=pt(nt(Ah)),Ih=Ut(it(Z({feeCalculator:Z({lamportsPerSignature:D()})}))),Bh=pt(Q()),Rh=pt(Q()),Mh=Z({err:cr,logs:nt(Q()),signature:Q()}),Ph=Z({result:Ln(Mh),subscription:D()}),Th={"solana-client":"js/1.0.0-maintenance"};class Lh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const w={};return async b=>{const{commitment:_,config:U}=_t(b),x=this._buildArgs([],_,void 0,U),O=uo(x);return w[O]=w[O]??(async()=>{try{const M=await this._rpcRequest("getBlockHeight",x),R=tt(M,pt(D()));if("error"in R)throw new ct(R.error,"failed to get block height information");return R.result}finally{delete w[O]}})(),await w[O]}})();let r,s,i,o,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=ml(t),this._rpcWsEndpoint=r||yl(t),this._rpcClient=Tl(t,s,i,o,c,d),this._rpcRequest=Ll(this._rpcClient),this._rpcBatchRequest=Cl(this._rpcClient),this._rpcWebSocket=new hl(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=tt(o,Ut(D()));if("error"in c)throw new ct(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=tt(e,pt(it(D())));if("error"in r)throw new ct(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=tt(t,pt(D()));if("error"in e)throw new ct(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=tt(t,Dl);if("error"in e)throw new ct(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=tt(r,ql);if("error"in s)throw new ct(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=tt(s,Ut(Ui));if("error"in i)throw new ct(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=tt(s,Ut(Ui));if("error"in i)throw new ct(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=_t(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),w=tt(d,Hl);if("error"in w)throw new ct(w.error,`failed to get token accounts owned by account ${t.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=tt(o,$l);if("error"in c)throw new ct(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=tt(s,Vl);if("error"in i)throw new ct(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=tt(s,Wl);if("error"in i)throw new ct(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=tt(o,Ut(it(Hr)));if("error"in c)throw new ct(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=tt(o,Ut(it(zi)));if("error"in c)throw new ct(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=_t(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),d=tt(c,Ut(nt(it(zi))));if("error"in d)throw new ct(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=_t(e),i=t.map(w=>w.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),d=tt(c,Ut(nt(it(Hr))));if("error"in d)throw new ct(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=_t(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),d=tt(c,pt(Yl));if("error"in d)throw new ct(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=_t(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:lo(o.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",c),w=nt(Gl),b=o.withContext===!0?tt(d,Ut(w)):tt(d,pt(w));if("error"in b)throw new ct(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=tt(o,pt(nt(Zl)));if("error"in c)throw new ct(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=he.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return vt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((d,w)=>{try{r=this.onSignature(e,(_,U)=>{r=void 0;const x={context:U,value:_};d({__type:Ke.PROCESSED,response:x})},t);const b=new Promise(_=>{r==null?_():s=this._onSubscriptionStateChange(r,U=>{U==="subscribed"&&_()})});(async()=>{if(await b,i)return;const _=await this.getSignatureStatus(e);if(i||_==null)return;const{context:U,value:x}=_;if(x!=null)if(x?.err)w(x.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:Ke.PROCESSED,response:{context:U,value:x}})}})()}catch(b){w(b)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(_=>{const U=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let x=await U();if(!i){for(;x<=r;)if(await tr(1e3),i||(x=await U(),i))return;_({__type:Ke.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),w=this.getCancellationPromise(e);let b;try{const _=await Promise.race([w,d,o]);if(_.__type===Ke.PROCESSED)b=_.response;else throw new es(s)}finally{i=!0,c()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const d=new Promise(x=>{let O=i,M=null;const R=async()=>{try{const{context:q,value:$}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return M=q.slot,$?.nonce}catch{return O}};(async()=>{if(O=await R(),!c)for(;;){if(i!==O){x({__type:Ke.NONCE_INVALID,slotInWhichNonceDidAdvance:M});return}if(await tr(2e3),c||(O=await R(),c))return}})()}),{abortConfirmation:w,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),_=this.getCancellationPromise(e);let U;try{const x=await Promise.race([_,b,d]);if(x.__type===Ke.PROCESSED)U=x.response;else{let O;for(;;){const M=await this.getSignatureStatus(o);if(M==null)break;if(M.context.slot<(x.slotInWhichNonceDidAdvance??r)){await tr(400);continue}O=M;break}if(O?.value){const M=t||"finalized",{confirmationStatus:R}=O.value;switch(M){case"processed":case"recent":if(R!=="processed"&&R!=="confirmed"&&R!=="finalized")throw new gr(o);break;case"confirmed":case"single":case"singleGossip":if(R!=="confirmed"&&R!=="finalized")throw new gr(o);break;case"finalized":case"max":case"root":if(R!=="finalized")throw new gr(o);break;default:}U={context:O.context,value:{err:O.value.err}}}else throw new gr(o)}}finally{c=!0,w()}return U}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(d=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:Ke.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([o,s]);if(d.__type===Ke.PROCESSED)c=d.response;else throw new rs(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=tt(t,pt(nt(ch)));if("error"in e)throw new ct(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=tt(r,uh);if("error"in s)throw new ct(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=tt(i,pt(D()));if("error"in o)throw new ct(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=tt(i,pt(Q()));if("error"in o)throw new ct(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=tt(s,pt(nt(Lt)));if("error"in i)throw new ct(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);vt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=tt(s,hh);if("error"in i)throw new ct(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=tt(i,pt(D()));if("error"in o)throw new ct(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=tt(r,Ol);if("error"in s)throw new ct(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=_t(r),o=this._buildArgs([t.map(w=>w.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),d=tt(c,vl);if("error"in d)throw new ct(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=tt(t,Ul);if("error"in e)throw new ct(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=tt(i,zl);if("error"in o)throw new ct(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=tt(t,Fl);if("error"in e)throw new ct(e.error,"failed to get epoch schedule");const r=e.result;return new Aa(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=tt(t,Kl);if("error"in e)throw new ct(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=tt(s,dh);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=tt(e,_h);if("error"in r)throw new ct(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=tt(s,Ih);if("error"in i)throw new ct(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=gt(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=tt(i,Ut(it(D())));if("error"in o)throw new ct(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=tt(s,Nl);if("error"in i)throw new ct(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=tt(i,Sh);if("error"in o)throw new ct(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=tt(o,Eh);if("error"in c)throw new ct(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=tt(t,pt(Bl));if("error"in e)throw new ct(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=tt(t,pt(Q()));if("error"in e)throw new ct(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=tt(o,wh);if("error"in c)throw c.error;return c.result}case"none":{const c=tt(o,mh);if("error"in c)throw c.error;return c.result}default:{const c=tt(o,yh);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:w,meta:b,version:_})=>({meta:b,transaction:{...w,message:Si(_,w.message)},version:_}))}:null}}}catch(c){throw new ct(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=tt(o,vh);if("error"in c)throw c.error;return c.result}case"none":{const c=tt(o,kh);if("error"in c)throw c.error;return c.result}default:{const c=tt(o,bh);if("error"in c)throw c.error;return c.result}}}catch(c){throw new ct(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...d}=t;r=c,e=d}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=tt(i,Pl);if("error"in o)throw new ct(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=tt(o,Ei);if("error"in c)throw new ct(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:Si(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=tt(o,on);if("error"in c)throw new ct(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=_t(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const w=tt(d,on);if("error"in w)throw new ct(w.error,"failed to get transactions");return w.result})}async getTransactions(t,e){const{commitment:r,config:s}=_t(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const w=tt(d,Ei);if("error"in w)throw new ct(w.error,"failed to get transactions");const b=w.result;return b&&{...b,transaction:{...b.transaction,message:Si(b.version,b.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=tt(s,xh);if("error"in i)throw new ct(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:d,meta:w})=>{const b=new Be(d.message);return{meta:w,transaction:{...d,message:b}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:w})=>({meta:w,transaction:kt.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=tt(i,pt(nt(D())));if("error"in o)throw new ct(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,go);if("error"in i)throw new ct(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,go);if("error"in i)throw new ct(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=tt(s,Ei);if("error"in i)throw new ct(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new Be(o.transaction.message),d=o.transaction.signatures;return{...o,transaction:kt.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=tt(s,on);if("error"in i)throw new ct(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=tt(o,on);if("error"in c)throw new ct(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=tt(i,Jl);if("error"in o)throw new ct(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=tt(i,Xl);if("error"in o)throw new ct(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Oi({key:t,state:Oi.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Tn.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=tt(r,Bh);if("error"in s)throw new ct(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await tr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Ia;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await tr(xa/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=tt(i,Ut(D()));if("error"in o)throw new ct(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const M=t.serialize(),R=st.Buffer.from(M).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const q=e||{};q.encoding="base64","commitment"in q||(q.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(q.innerInstructions=e.innerInstructions);const $=[R,q],V=await this._rpcRequest("simulateTransaction",$),et=tt(V,ho);if("error"in et)throw new Error("failed to simulate transaction: "+et.error.message);return et.result}let s;if(t instanceof kt){let O=t;s=new kt,s.feePayer=O.feePayer,s.instructions=t.instructions,s.nonceInfo=O.nonceInfo,s.signatures=O.signatures}else s=kt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let O=this._disableBlockhashCaching;for(;;){const M=await this._blockhashWithExpiryBlockHeight(O);if(s.lastValidBlockHeight=M.lastValidBlockHeight,s.recentBlockhash=M.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const R=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(R)&&!this._blockhashInfo.transactionSignatures.includes(R)){this._blockhashInfo.simulatedSignatures.push(R);break}else O=!0}}const o=s._compile(),c=o.serialize(),w=s._serialize(c).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const O=(Array.isArray(r)?r:o.nonProgramIds()).map(M=>M.toBase58());b.accounts={encoding:"base64",addresses:O}}i&&(b.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(b.innerInstructions=e.innerInstructions);const _=[w,b],U=await this._rpcRequest("simulateTransaction",_),x=tt(U,ho);if("error"in x){let O;if("data"in x.error&&(O=x.error.data.logs,O&&Array.isArray(O))){const M=`
    `,R=M+O.join(M);console.error(x.error.message,R)}throw new Wr({action:"simulate",signature:"",transactionMessage:x.error.message,logs:O})}return x.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))o=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=gt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),d=tt(c,Rh);if("error"in d){let w;throw"data"in d.error&&(w=d.error.data.logs),new Wr({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:w})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=tt(t,Ql);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=uo([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];vt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=_t(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=tt(t,eh);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=_t(r),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:lo(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=tt(t,Ph);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=tt(t,nh);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=tt(t,sh);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=tt(t,oh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(d,w)=>{e(d,w);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=tt(t,ah);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class mr{constructor(t){this._keypair=void 0,this._keypair=t??so()}static generate(){return new mr(so())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=mn(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new mr({publicKey:r,secretKey:t})}static fromSeed(t){const e=mn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new mr({publicKey:e,secretKey:r})}get publicKey(){return new J(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const We=Object.freeze({CreateLookupTable:{index:0,layout:I.struct([I.u32("instruction"),Er("recentSlot"),I.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:I.struct([I.u32("instruction")])},ExtendLookupTable:{index:2,layout:I.struct([I.u32("instruction"),Er(),I.seq(mt(),I.offset(I.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:I.struct([I.u32("instruction")])},CloseLookupTable:{index:4,layout:I.struct([I.u32("instruction")])}});class Ch{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=I.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(We))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=xt(We.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=xt(We.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new J(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(us.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class us{constructor(){}static createLookupTable(t){const[e,r]=J.findProgramAddressSync([t.authority.toBuffer(),ta().encode(t.recentSlot)],this.programId),s=We.CreateLookupTable,i=wt(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ae.programId,isSigner:!1,isWritable:!1}];return[new Et({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=We.FreezeLookupTable,r=wt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Et({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=We.ExtendLookupTable,r=wt(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ae.programId,isSigner:!1,isWritable:!1}),new Et({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=We.DeactivateLookupTable,r=wt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Et({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=We.CloseLookupTable,r=wt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Et({programId:this.programId,keys:s,data:r})}}us.programId=new J("AddressLookupTab1e1111111111111111111111111");class Oh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=I.u8("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Le))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=xt(Le.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=xt(Le.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=xt(Le.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=xt(Le.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(fs.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Le=Object.freeze({RequestUnits:{index:0,layout:I.struct([I.u8("instruction"),I.u32("units"),I.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:I.struct([I.u8("instruction"),I.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:I.struct([I.u8("instruction"),I.u32("units")])},SetComputeUnitPrice:{index:3,layout:I.struct([I.u8("instruction"),Er("microLamports")])}});class fs{constructor(){}static requestUnits(t){const e=Le.RequestUnits,r=wt(e,t);return new Et({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Le.RequestHeapFrame,r=wt(e,t);return new Et({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Le.SetComputeUnitLimit,r=wt(e,t);return new Et({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Le.SetComputeUnitPrice,r=wt(e,{microLamports:BigInt(t.microLamports)});return new Et({keys:[],programId:this.programId,data:r})}}fs.programId=new J("ComputeBudget111111111111111111111111111111");const yo=64,mo=32,wo=64,bo=I.struct([I.u8("numSignatures"),I.u8("padding"),I.u16("signatureOffset"),I.u16("signatureInstructionIndex"),I.u16("publicKeyOffset"),I.u16("publicKeyInstructionIndex"),I.u16("messageDataOffset"),I.u16("messageDataSize"),I.u16("messageInstructionIndex")]);class On{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;vt(e.length===mo,`Public Key must be ${mo} bytes but received ${e.length} bytes`),vt(s.length===wo,`Signature must be ${wo} bytes but received ${s.length} bytes`);const o=bo.span,c=o+e.length,d=c+s.length,w=1,b=st.Buffer.alloc(d+r.length),_=i??65535;return bo.encode({numSignatures:w,padding:0,signatureOffset:c,signatureInstructionIndex:_,publicKeyOffset:o,publicKeyInstructionIndex:_,messageDataOffset:d,messageDataSize:r.length,messageInstructionIndex:_},b),b.fill(e,o),b.fill(s,c),b.fill(r,d),new Et({keys:[],programId:On.programId,data:b})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;vt(e.length===yo,`Private key must be ${yo} bytes but received ${e.length} bytes`);try{const i=mr.fromSecretKey(e),o=i.publicKey.toBytes(),c=Qi(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}On.programId=new J("Ed25519SigVerify111111111111111111111111111");const Uh=(n,t)=>{const e=Xi.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};Xi.utils.isValidPrivateKey;const Nh=Xi.getPublicKey,vo=32,Ai=20,ko=64,zh=11,_i=I.struct([I.u8("numSignatures"),I.u16("signatureOffset"),I.u8("signatureInstructionIndex"),I.u16("ethAddressOffset"),I.u8("ethAddressInstructionIndex"),I.u16("messageDataOffset"),I.u16("messageDataSize"),I.u8("messageInstructionIndex"),I.blob(20,"ethAddress"),I.blob(64,"signature"),I.u8("recoveryId")]);class wr{constructor(){}static publicKeyToEthAddress(t){vt(t.length===ko,`Public key must be ${ko} bytes but received ${t.length} bytes`);try{return st.Buffer.from(ro(gt(t))).slice(-Ai)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:o}=t;return wr.createInstructionWithEthAddress({ethAddress:wr.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=t;let c;typeof e=="string"?e.startsWith("0x")?c=st.Buffer.from(e.substr(2),"hex"):c=st.Buffer.from(e,"hex"):c=e,vt(c.length===Ai,`Address must be ${Ai} bytes but received ${c.length} bytes`);const d=1+zh,w=d,b=d+c.length,_=b+s.length+1,U=1,x=st.Buffer.alloc(_i.span+r.length);return _i.encode({numSignatures:U,signatureOffset:b,signatureInstructionIndex:o,ethAddressOffset:w,ethAddressInstructionIndex:o,messageDataOffset:_,messageDataSize:r.length,messageInstructionIndex:o,signature:gt(s),ethAddress:gt(c),recoveryId:i},x),x.fill(gt(r),_i.span),new Et({keys:[],programId:wr.programId,data:x})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;vt(e.length===vo,`Private key must be ${vo} bytes but received ${e.length} bytes`);try{const i=gt(e),o=Nh(i,!1).slice(1),c=st.Buffer.from(ro(gt(r))),[d,w]=Uh(c,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:d,recoveryId:w,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}wr.programId=new J("KeccakSecp256k11111111111111111111111111111");var Na;const za=new J("StakeConfig11111111111111111111111111111111");class Fa{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Zr{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Na=Zr;Zr.default=new Na(0,0,J.default);class Fh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=I.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(ce))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=xt(ce.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Fa(new J(e.staker),new J(e.withdrawer)),lockup:new Zr(r.unixTimestamp,r.epoch,new J(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),xt(ce.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=xt(ce.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new J(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=xt(ce.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new J(i),newAuthorizedPubkey:new J(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=xt(ce.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xt(ce.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=xt(ce.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),xt(ce.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Un.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const ce=Object.freeze({Initialize:{index:0,layout:I.struct([I.u32("instruction"),Wf(),Hf()])},Authorize:{index:1,layout:I.struct([I.u32("instruction"),mt("newAuthorized"),I.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:I.struct([I.u32("instruction")])},Split:{index:3,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},Withdraw:{index:4,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},Deactivate:{index:5,layout:I.struct([I.u32("instruction")])},Merge:{index:7,layout:I.struct([I.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:I.struct([I.u32("instruction"),mt("newAuthorized"),I.u32("stakeAuthorizationType"),nr("authoritySeed"),mt("authorityOwner")])}}),Kh=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Un{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||Zr.default,o=ce.Initialize,c=wt(o,{authorized:{staker:gt(r.staker.toBuffer()),withdrawer:gt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:gt(i.custodian.toBuffer())}}),d={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new Et(d)}static createAccountWithSeed(t){const e=new kt;e.add(ae.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new kt;e.add(ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=ce.Delegate,o=wt(i);return new kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:un,isSigner:!1,isWritable:!1},{pubkey:za,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,c=ce.Authorize,d=wt(c,{newAuthorized:gt(s.toBuffer()),stakeAuthorizationType:i.index}),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&w.push({pubkey:o,isSigner:!0,isWritable:!1}),new kt().add({keys:w,programId:this.programId,data:d})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:c,custodianPubkey:d}=t,w=ce.AuthorizeWithSeed,b=wt(w,{newAuthorized:gt(o.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:s,authorityOwner:gt(i.toBuffer())}),_=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Pe,isSigner:!1,isWritable:!1}];return d&&_.push({pubkey:d,isSigner:!0,isWritable:!1}),new kt().add({keys:_,programId:this.programId,data:b})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,o=ce.Split,c=wt(o,{lamports:i});return new Et({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(t,e){const r=new kt;return r.add(ae.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:c,lamports:d}=t,w=new kt;return w.add(ae.allocate({accountPubkey:i,basePubkey:o,seed:c,space:this.space,programId:this.programId})),e&&e>0&&w.add(ae.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),w.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:d}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=ce.Merge,o=wt(i);return new kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:un,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=t,c=ce.Withdraw,d=wt(c,{lamports:i}),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:un,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&w.push({pubkey:o,isSigner:!0,isWritable:!1}),new kt().add({keys:w,programId:this.programId,data:d})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=ce.Deactivate,i=wt(s);return new kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Un.programId=new J("Stake11111111111111111111111111111111111111");Un.space=200;class Ka{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class Dh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=I.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Ce))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=xt(Ce.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Ka(new J(e.nodePubkey),new J(e.authorizedVoter),new J(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=xt(Ce.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new J(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=xt(Ce.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new J(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new J(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=xt(Ce.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Rr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ce=Object.freeze({InitializeAccount:{index:0,layout:I.struct([I.u32("instruction"),$f()])},Authorize:{index:1,layout:I.struct([I.u32("instruction"),mt("newAuthorized"),I.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:I.struct([I.u32("instruction"),I.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:I.struct([I.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:I.struct([I.u32("instruction"),Vf()])}}),qh=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Rr{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=Ce.InitializeAccount,o=wt(i,{voteInit:{nodePubkey:gt(s.nodePubkey.toBuffer()),authorizedVoter:gt(s.authorizedVoter.toBuffer()),authorizedWithdrawer:gt(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),c={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Et(c)}static createAccount(t){const e=new kt;return e.add(ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=Ce.Authorize,c=wt(o,{newAuthorized:gt(s.toBuffer()),voteAuthorizationType:i.index}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new kt().add({keys:d,programId:this.programId,data:c})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:c}=t,d=Ce.AuthorizeWithSeed,w=wt(d,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:gt(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:gt(i.toBuffer()),voteAuthorizationType:o.index}}),b=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:Pe,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new kt().add({keys:b,programId:this.programId,data:w})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,o=Ce.Withdraw,c=wt(o,{lamports:s}),d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new kt().add({keys:d,programId:this.programId,data:c})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Rr.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=Ce.UpdateValidatorIdentity,o=wt(i),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new kt().add({keys:c,programId:this.programId,data:o})}}Rr.programId=new J("Vote111111111111111111111111111111111111111");Rr.space=3762;const Da=new J("Va1idator1nfo111111111111111111111111111111"),Wh=Z({name:Q(),website:lt(Q()),details:lt(Q()),iconUrl:lt(Q()),keybaseUsername:lt(Q())});class ls{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(ke(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new J(xe(e,0,Oe)),c=Te(e)===1;s.push({publicKey:o,isSigner:c})}if(s[0].publicKey.equals(Da)&&s[1].isSigner){const i=nr().decode(st.Buffer.from(e)),o=JSON.parse(i);return ea(o,Wh),new ls(s[1].publicKey,o)}return null}}const Hh=new J("Vote111111111111111111111111111111111111111"),$h=I.struct([mt("nodePubkey"),mt("authorizedWithdrawer"),I.u8("commission"),I.nu64(),I.seq(I.struct([I.nu64("slot"),I.u32("confirmationCount")]),I.offset(I.u32(),-8),"votes"),I.u8("rootSlotValid"),I.nu64("rootSlot"),I.nu64(),I.seq(I.struct([I.nu64("epoch"),mt("authorizedVoter")]),I.offset(I.u32(),-8),"authorizedVoters"),I.struct([I.seq(I.struct([mt("authorizedPubkey"),I.nu64("epochOfLastAuthorizedSwitch"),I.nu64("targetEpoch")]),32,"buf"),I.nu64("idx"),I.u8("isEmpty")],"priorVoters"),I.nu64(),I.seq(I.struct([I.nu64("epoch"),I.nu64("credits"),I.nu64("prevCredits")]),I.offset(I.u32(),-8),"epochCredits"),I.struct([I.nu64("slot"),I.nu64("timestamp")],"lastTimestamp")]);class hs{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=$h.decode(gt(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new hs({nodePubkey:new J(r.nodePubkey),authorizedWithdrawer:new J(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(Vh),priorVoters:Gh(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Vh({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new J(n)}}function xo({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new J(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Gh({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(xo),...n.slice(0,t).map(xo)]}const So={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function jh(n,t){const e=t===!1?"http":"https";if(!n)return So[e].devnet;const r=So[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function Zh(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},c=await n.sendRawTransaction(t,o),d=i&&i.commitment,b=(await(s?n.confirmTransaction(s,d):n.confirmTransaction(c,d))).value;if(b.err)throw c!=null?new Wr({action:o?.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(b)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(b)})`);return c}const Yh=1e9,hd=Object.freeze(Object.defineProperty({__proto__:null,Account:Kf,AddressLookupTableAccount:Oi,AddressLookupTableInstruction:Ch,AddressLookupTableProgram:us,Authorized:Fa,BLOCKHASH_CACHE_TIMEOUT_MS:Ia,BPF_LOADER_DEPRECATED_PROGRAM_ID:Df,BPF_LOADER_PROGRAM_ID:sl,BpfLoader:ol,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Le,ComputeBudgetInstruction:Oh,ComputeBudgetProgram:fs,Connection:Lh,Ed25519Program:On,Enum:zf,EpochSchedule:Aa,FeeCalculatorLayout:Sa,Keypair:mr,LAMPORTS_PER_SOL:Yh,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:We,Loader:or,Lockup:Zr,MAX_SEED_LENGTH:ba,Message:Be,MessageAccountKeys:qr,MessageV0:sr,NONCE_ACCOUNT_LENGTH:Ci,NonceAccount:Tn,PACKET_DATA_SIZE:Ye,PUBLIC_KEY_LENGTH:Oe,PublicKey:J,SIGNATURE_LENGTH_IN_BYTES:Dr,SOLANA_SCHEMA:Nr,STAKE_CONFIG_ID:za,STAKE_INSTRUCTION_LAYOUTS:ce,SYSTEM_INSTRUCTION_LAYOUTS:It,SYSVAR_CLOCK_PUBKEY:Pe,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Jf,SYSVAR_INSTRUCTIONS_PUBKEY:Xf,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:cn,SYSVAR_RENT_PUBKEY:Sr,SYSVAR_REWARDS_PUBKEY:Qf,SYSVAR_SLOT_HASHES_PUBKEY:tl,SYSVAR_SLOT_HISTORY_PUBKEY:el,SYSVAR_STAKE_HISTORY_PUBKEY:un,Secp256k1Program:wr,SendTransactionError:Wr,SolanaJSONRPCError:ct,SolanaJSONRPCErrorCode:rl,StakeAuthorizationLayout:Kh,StakeInstruction:Fh,StakeProgram:Un,Struct:ts,SystemInstruction:nl,SystemProgram:ae,Transaction:kt,TransactionExpiredBlockheightExceededError:es,TransactionExpiredNonceInvalidError:gr,TransactionExpiredTimeoutError:rs,TransactionInstruction:Et,TransactionMessage:is,TransactionStatus:Ke,VALIDATOR_INFO_KEY:Da,VERSION_PREFIX_MASK:Mn,VOTE_PROGRAM_ID:Hh,ValidatorInfo:ls,VersionedMessage:ns,VersionedTransaction:ss,VoteAccount:hs,VoteAuthorizationLayout:qh,VoteInit:Ka,VoteInstruction:Dh,VoteProgram:Rr,clusterApiUrl:jh,sendAndConfirmRawTransaction:Zh,sendAndConfirmTransaction:Li},Symbol.toStringTag,{value:"Module"})),Mr=new J("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new J("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const ds=new J("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new J("So11111111111111111111111111111111111111112");new J("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const ps=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}};var Qe={},Eo;function Jh(){if(Eo)return Qe;Eo=1,Object.defineProperty(Qe,"__esModule",{value:!0});function n(s){{const i=st.Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Qe.toBigIntLE=n;function t(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}Qe.toBigIntBE=t;function e(s,i){{const o=s.toString(16),c=st.Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return c.reverse(),c}}Qe.toBufferLE=e;function r(s,i){{const o=s.toString(16);return st.Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return Qe.toBufferBE=r,Qe}var Ao=Jh();const Xh=n=>t=>{const e=I.blob(n,t),{encode:r,decode:s}=ps(e),i=e;return i.decode=(o,c)=>{const d=s(o,c);return Ao.toBigIntLE(st.Buffer.from(d))},i.encode=(o,c,d)=>{const w=Ao.toBufferLE(o,n);return r(w,c,d)},i},zr=Xh(8),qa=n=>{const t=I.u8(n),{encode:e,decode:r}=ps(t),s=t;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,c)=>{const d=Number(i);return e(d,o,c)},s},le=n=>{const t=I.blob(32,n),{encode:e,decode:r}=ps(t),s=t;return s.decode=(i,o)=>{const c=r(i,o);return new J(c)},s.encode=(i,o,c)=>{const d=i.toBuffer();return e(d,o,c)},s};class Yr extends Error{constructor(t){super(t)}}class Qh extends Yr{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class td extends Yr{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class Ii extends Yr{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class ed extends Yr{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class rd extends Yr{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var Fi;(function(n){n[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension",n[n.GroupPointerExtension=40]="GroupPointerExtension",n[n.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",n[n.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",n[n.PausableExtension=44]="PausableExtension"})(Fi||(Fi={}));var Ki;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Mint=1]="Mint",n[n.Account=2]="Account"})(Ki||(Ki={}));const nd=1,id=I.struct([I.u8("m"),I.u8("n"),qa("isInitialized"),le("signer1"),le("signer2"),le("signer3"),le("signer4"),le("signer5"),le("signer6"),le("signer7"),le("signer8"),le("signer9"),le("signer10"),le("signer11")]),sd=id.span;var _o;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n[n.Frozen=2]="Frozen"})(_o||(_o={}));const od=I.struct([le("mint"),le("owner"),zr("amount"),I.u32("delegateOption"),le("delegate"),I.u8("state"),I.u32("isNativeOption"),zr("isNative"),zr("delegatedAmount"),I.u32("closeAuthorityOption"),le("closeAuthority")]),Bi=od.span;function ad(n,t,e){if(e.length){n.push({pubkey:t,isSigner:!1,isWritable:!1});for(const r of e)n.push({pubkey:r instanceof J?r:r.publicKey,isSigner:!0,isWritable:!1})}else n.push({pubkey:t,isSigner:!0,isWritable:!1});return n}const Wa=I.struct([I.u32("mintAuthorityOption"),le("mintAuthority"),zr("supply"),I.u8("decimals"),qa("isInitialized"),I.u32("freezeAuthorityOption"),le("freezeAuthority")]),Ri=Wa.span;async function dd(n,t,e,r=Mr){const s=await n.getAccountInfo(t,e);return cd(t,s,r)}function cd(n,t,e=Mr){if(!t)throw new Qh;if(!t.owner.equals(e))throw new td;if(t.data.length<Ri)throw new Ii;const r=Wa.decode(t.data.slice(0,Ri));let s=st.Buffer.alloc(0);if(t.data.length>Ri){if(t.data.length<=Bi)throw new Ii;if(t.data.length===sd)throw new Ii;if(t.data[Bi]!=Ki.Mint)throw new ed;s=t.data.slice(Bi+nd)}return{address:n,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function pd(n,t,e=!1,r=Mr,s=ds){if(!e&&!J.isOnCurve(t.toBuffer()))throw new rd;const[i]=J.findProgramAddressSync([t.toBuffer(),r.toBuffer(),n.toBuffer()],s);return i}const Io=I.struct([I.u8("instruction"),zr("amount")]);function gd(n,t,e,r,s=[],i=Mr){const o=ad([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1}],e,s),c=st.Buffer.alloc(Io.span);return Io.encode({instruction:Fi.Approve,amount:BigInt(r)},c),new Et({keys:o,programId:i,data:c})}function yd(n,t,e,r,s=Mr,i=ds){return ud(n,t,e,r,st.Buffer.alloc(0),s,i)}function ud(n,t,e,r,s,i=Mr,o=ds){const c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:ae.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Et({keys:c,programId:o,data:s})}export{ds as A,qs as B,Lh as C,ua as E,J as P,Wr as S,kt as T,ss as V,Bo as a,dd as b,st as c,Yo as d,he as e,ae as f,bn as g,Et as h,hd as i,pd as j,yd as k,gd as l,Mr as m,is as n,cf as r};
